{"version":3,"sources":["webpack:///./node_modules/mux.js/lib/aac/utils.js","webpack:///./node_modules/videojs-vtt.js/lib/vttregion.js","webpack:///./node_modules/videojs-vtt.js/lib/vtt.js","webpack:///./node_modules/url-toolkit/src/url-toolkit.js","webpack:///./node_modules/m3u8-parser/dist/m3u8-parser.es.js","webpack:///./node_modules/xmldom/sax.js","webpack:///./node_modules/mux.js/lib/tools/parse-tfdt.js","webpack:///./node_modules/mux.js/lib/tools/ts-inspector.js","webpack:///./node_modules/keycode/index.js","webpack:///./node_modules/videojs-youtube/dist/Youtube.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/global/document.js","webpack:///./node_modules/core-js/modules/es.array.reduce-right.js","webpack:///./node_modules/libass-wasm/dist/js/subtitles-octopus.js","webpack:///./node_modules/@videojs/xhr/index.js","webpack:///./node_modules/@videojs/vhs-utils/dist/stream.js","webpack:///./node_modules/mux.js/lib/mp4/find-box.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///./node_modules/mux.js/lib/m2ts/timestamp-rollover-stream.js","webpack:///./node_modules/videojs-vtt.js/lib/browser-index.js","webpack:///./node_modules/mux.js/lib/mp4/probe.js","webpack:///./node_modules/@videojs/vhs-utils/dist/codecs.js","webpack:///./node_modules/xmldom/dom-parser.js","webpack:///./node_modules/mux.js/lib/utils/clock.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/mux.js/lib/m2ts/probe.js","webpack:///./node_modules/mux.js/lib/utils/stream.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@loadable/component/dist/loadable.esm.js","webpack:///./src/utils/subtitles.js","webpack:///./src/components/player.jsx","webpack:///./node_modules/@videojs/vhs-utils/dist/resolve-url.js","webpack:///./node_modules/video.js/node_modules/global/window.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///./node_modules/xmldom/dom.js","webpack:///./node_modules/@videojs/vhs-utils/dist/containers.js","webpack:///./node_modules/mux.js/lib/utils/bin.js","webpack:///./node_modules/is-function/index.js","webpack:///./node_modules/mux.js/lib/tools/parse-sidx.js","webpack:///./node_modules/mpd-parser/dist/mpd-parser.es.js","webpack:///./node_modules/@videojs/vhs-utils/dist/decode-b64-to-uint8-array.js","webpack:///./node_modules/mux.js/lib/tools/parse-trun.js","webpack:///./node_modules/safe-json-parse/tuple.js","webpack:///./node_modules/mux.js/lib/mp4/parse-type.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/@videojs/vhs-utils/dist/byte-helpers.js","webpack:///./node_modules/mux.js/lib/m2ts/stream-types.js","webpack:///./node_modules/videojs-vtt.js/lib/vttcue.js","webpack:///./node_modules/@babel/runtime/helpers/construct.js","webpack:///./node_modules/@videojs/vhs-utils/dist/media-types.js","webpack:///./node_modules/global/window.js","webpack:///./node_modules/mux.js/lib/tools/parse-tfhd.js","webpack:///./node_modules/video.js/node_modules/global/document.js","webpack:///./node_modules/mux.js/lib/tools/parse-sample-flags.js"],"names":["ADTS_SAMPLING_FREQUENCIES","parseId3TagSize","header","byteIndex","returnSize","parseSyncSafeInteger","data","module","exports","isLikelyAacData","offset","getId3Offset","length","charCodeAt","parseAdtsSize","lowThree","middle","parseType","parseSampleRate","packet","i","parseAacTimestamp","frameStart","frameSize","frame","subarray","String","fromCharCode","byteLength","unescape","bytes","start","end","result","toString","slice","percentEncode","d","size","scrollSetting","isValidPercentValue","value","_width","_lines","_regionAnchorX","_regionAnchorY","_viewportAnchorX","_viewportAnchorY","_scroll","Object","defineProperties","this","enumerable","get","set","Error","TypeError","setting","toLowerCase","findScrollSetting","console","warn","document","_objCreate","create","F","o","arguments","prototype","ParsingError","errorData","message","name","code","parseTimeStamp","input","computeSeconds","h","m","s","f","match","replace","Settings","values","parseOptions","callback","keyValueDelim","groupDelim","groups","split","kv","parseCue","cue","regionList","oInput","consumeTimeStamp","ts","Errors","BadTimeStamp","skipWhitespace","startTime","substr","endTime","settings","k","v","id","region","alt","vals","vals0","integer","percent","vertical","line","e","lineAlign","snapToLines","align","position","left","center","right","positionAlign","consumeCueSettings","constructor","BadSignature","dflt","defaultKey","has","a","n","test","parseInt","parseFloat","TEXTAREA_ELEMENT","createElement","TAG_NAME","c","b","u","ruby","rt","lang","DEFAULT_COLOR_CLASS","white","lime","cyan","red","yellow","magenta","blue","black","TAG_ANNOTATION","NEEDS_PARENT","parseContent","window","nextToken","shouldAdd","current","element","localName","type","annotation","tagName","trim","t","rootDiv","tagStack","appendChild","createTextNode","innerHTML","textContent","pop","parentNode","node","createProcessingInstruction","classes","forEach","cl","bgColor","colorName","hasOwnProperty","propName","propValue","style","className","join","push","strongRTLRanges","isStrongRTLChar","charCode","currentRange","determineBidi","cueDiv","nodeStack","text","childNodes","pushNodes","nextTextNode","innerText","StyleBox","CueStyleBox","styleOptions","call","styles","color","backgroundColor","top","bottom","display","writingMode","unicodeBidi","applyStyles","div","direction","textAlign","font","whiteSpace","textPos","formatStyle","width","height","move","box","BoxPosition","obj","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","Math","max","lineHeight","undefined","moveBoxToLinePosition","styleBox","containerBox","boxPositions","boxPosition","linePos","track","textTrackList","mediaElement","trackList","count","mode","computeLinePos","axis","step","round","maxPosition","initialAxis","abs","ceil","reverse","calculatedPercentage","bestPosition","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","p","intersectPercentage","findBestPosition","toCSSCompatValues","WebVTT","prop","val","unit","toMove","overlaps","b2","boxes","container","min","reference","getSimpleBoxPosition","StringDecoder","decode","decodeURIComponent","encodeURIComponent","convertCueToDOMTree","cuetext","processCues","cues","overlay","firstChild","removeChild","paddedOverlay","margin","hasBeenReset","displayState","shouldCompute","fontSize","Parser","vttjs","decoder","state","buffer","TextDecoder","reportOrThrowError","onparsingerror","parse","self","collectNextLine","pos","parseHeader","ontimestampmap","parseTimestampMap","xy","anchor","VTTRegion","lines","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","onregion","parseRegion","stream","alreadyCollectedLine","VTTCue","indexOf","hasSubstring","oncue","flush","onflush","URL_REGEX","FIRST_SEGMENT_REGEX","SLASH_DOT_REGEX","SLASH_DOT_DOT_REGEX","URLToolkit","buildAbsoluteURL","baseURL","relativeURL","opts","alwaysNormalize","basePartsForNormalise","parseURL","path","normalizePath","buildURLFromParts","relativeParts","scheme","baseParts","netLoc","pathParts","exec","builtParts","params","query","fragment","baseURLPath","newPath","substring","lastIndexOf","url","parts","LineStream","_Stream","_this","nextNewline","trigger","parseAttributes","attributes","attr","attrs","RegExp","ParseStream","customParsers","tagMappers","_proto","event","_this2","reduce","acc","mapper","mappedLine","concat","newLine","tagType","duration","title","version","number","playlistType","allowed","URI","uri","BYTERANGE","_attributes$BYTERANGE","byterange","RESOLUTION","resolution","BANDWIDTH","dateTimeString","dateTimeObject","Date","IV","Uint32Array","PRECISE","addParser","_ref","_this3","expression","customType","dataParser","segment","addTagMapper","_ref2","map","lineStream","parseStream","pipe","currentMap","_key","uris","currentUri","noop","defaultMediaGroups","currentTimeline","manifest","allowCache","discontinuityStarts","segments","lastByterangeEnd","on","entry","mediaGroup","rendition","tag","endlist","endList","inf","mediaSequence","discontinuitySequence","key","METHOD","KEYFORMAT","KEYID","contentProtection","schemeIdUri","keyId","pssh","method","iv","isFinite","playlist","playlists","mediaGroups","media","TYPE","NAME","mediaGroupType","default","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","language","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","targetduration","targetDuration","totalduration","totalDuration","isNaN","timeOffset","precise","cueOut","cueOutCont","cueIn","timeline","comment","custom","chunk","options","nameStartChar","nameChar","source","tagNamePattern","XMLReader","copyLocator","lineNumber","columnNumber","parseElementStartPart","el","currentNSMap","entityReplacer","errorHandler","attrName","charAt","warning","add","setTagName","closed","error","appendElement","domBuilder","localNSMap","qName","nsp","prefix","nsPrefix","_copy","startPrefixMapping","ns","startElement","endElement","endPrefixMapping","parseHtmlSpecialContent","elStartEnd","elEndStart","characters","fixSelfClosed","closeMap","target","parseDCC","startCDATA","endCDATA","matchs","buf","reg","lastIndex","len","pubid","sysid","lastMatch","startDTD","endDTD","index","parseInstruction","processingInstruction","ElementAttributes","_set_proto_","thiz","parent","__proto__","defaultNSMap","entityMap","startDocument","defaultNSMapCopy","surrogate1","surrogate2","fixedFromCharCode","appendText","xt","locator","lineEnd","linePattern","lineStart","parseStack","tagStart","doc","currentElement","config","endMatch","fatalError","nbsp","locator2","_parse","endDocument","getLocalName","getLocator","getQName","getURI","getValue","toUnsigned","flags","Uint8Array","baseMediaDecodeTime","pow","StreamTypes","handleRollover","probe","aac","ONE_SECOND_IN_TS","parseAudioPes_","pmt","pesType","pusi","parsed","startIndex","endIndex","endLoop","pid","parsePesType","table","parsePayloadUnitStartIndicator","parsePesTime","audio","parseVideoPes_","pes","currentFrame","video","firstKeyFrame","shift","videoPacketContainsKeyFrame","inspectTs_","parsePat","parsePmt","parsePsi_","H264_STREAM_TYPE","ADTS_STREAM_TYPE","inspect","baseTimestamp","audioCount","sampleRate","timestamp","audioTimescale","dts","pts","inspectAac_","segmentInfo","audioBaseTimestamp","info","dtsTime","ptsTime","videoBaseTimestamp","adjustTimestamp_","keyCode","searchInput","hasKeyCode","which","names","foundNamedKey","search","codes","aliases","isEventKey","nameOrCode","alias","videojs","css","head","src","loaded","firstScriptTag","_isOnMobile","browser","IS_IOS","IS_NATIVE_ANDROID","Tech","getTech","Youtube","extend","ready","setPoster","poster","setSrc","options_","setTimeout","el_","isApiReady","initYTPlayer","apiReadyQueue","bind","dispose","ytPlayer","stopVideo","destroy","splice","createEl","setAttribute","techId","divWrapper","ytControls","divBlocker","onclick","pause","playerVars","controls","modestbranding","rel","showinfo","loop","autohide","disablekb","fs","srcEndTime","hl","list","listId","listType","playsinline","srcStartTime","theme","customVars","keys","activeVideoId","videoId","activeList","playerConfig","events","onReady","onPlayerReady","onPlaybackQualityChange","onPlayerPlaybackQualityChange","onPlaybackRateChange","onPlayerPlaybackRateChange","onStateChange","onPlayerStateChange","onVolumeChange","onPlayerVolumeChange","onError","onPlayerError","enablePrivacyEnhancedMode","host","YT","Player","muted","mute","getAvailablePlaybackRates","featuresPlaybackRate","playerReady_","triggerReady","playOnReady","play","cueOnReady","cueVideoById_","lastState","errorNumber","PlayerState","ENDED","PLAYING","isSeeking","onSeeked","PAUSED","BUFFERING","player_","loadVideoById_","startSeconds","endSeconds","loadVideoById","cueVideoById","_src","poster_","parseUrl","checkHighResPoster","autoplay","isReady_","setAutoplay","setLoop","wasPausedBeforeSeek","playVideo","loadPlaylist","pauseVideo","paused","currentTime","getCurrentTime","setCurrentTime","seconds","timeBeforeSeek","seekTo","clearInterval","checkSeekedInPauseInterval","setInterval","seeking","seekable","createTimeRange","getDuration","playbackRate","getPlaybackRate","setPlaybackRate","suggestedRate","currentSrc","ended","volume","getVolume","setVolume","percentAsDecimal","isMuted","setMuted","unMute","buffered","getVideoLoadedFraction","bufferedEnd","preload","load","reset","networkState","getPlayerState","readyState","supportsFullScreen","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","image","Image","onload","naturalHeight","naturalWidth","onerror","isSupported","canPlaySource","canPlayType","getElementsByTagName","insertBefore","onreadystatechange","styleSheet","cssText","registerTech","registerComponent","factory","Array","isArray","arr","setPrototypeOf","subClass","superClass","writable","configurable","doccy","minDoc","topLevel","$","$reduceRight","arrayMethodIsStrict","arrayMethodUsesToLength","CHROME_VERSION","IS_NODE","STRICT_METHOD","USES_TO_LENGTH","1","proto","reduceRight","callbackfn","SubtitlesOctopusOnLoad","supportsWebAssembly","WebAssembly","instantiate","_module","Module","of","Instance","log","renderFrames","renderFramesData","beforeDrawTime","performance","now","ctx","clearRect","canvas","canvases","bufferCanvas","w","imageBuffer","Uint8ClampedArray","hasAlphaBug","j","imageData","ImageData","bufferCanvasCtx","putImageData","drawImage","x","y","debug","drawTime","spentTime","renderStart","renderFastFrames","bitmaps","bitmap","libassTime","decodeTime","lossyRender","isOurCanvas","canvasParent","fonts","availableFonts","onReadyEvent","workerUrl","legacyWorkerUrl","subUrl","subContent","onErrorEvent","lastRenderTime","pixelRatio","devicePixelRatio","getContext","createImageData","workerError","init","Worker","worker","onmessage","onWorkerMessage","workerActive","createCanvas","setVideo","setSubUrl","postMessage","URL","currentScript","preMain","fastRender","nextSibling","testBuf","testImage","prePut","getImageData","postPut","timeupdate","addEventListener","setIsPaused","removeEventListener","setRate","resizeWithTimeout","ResizeObserver","ro","observe","videoWidth","resize","callee","getVideoPosition","videoRatio","videoHeight","realWidth","realHeight","floor","renderFrameData","frameId","content","apply","JSON","op","time","requestAnimationFrame","object","property","videoSize","pointerEvents","runBenchmark","customMessage","userData","setTrackByUrl","setTrack","freeTrack","render","isPaused","rate","terminate","createEvent","getEvents","setEvent","removeEvent","createStyle","getStyles","setStyle","removeStyle","_extends","isFunction","initParams","createXHR","_createXHR","called","err","response","body","getBody","xhr","responseText","responseType","responseXML","firefoxBugTakenEffect","documentElement","nodeName","getXml","isJson","errorFunc","evt","clearTimeout","timeoutTimer","statusCode","failureResponse","loadFunc","aborted","status","useXDR","headers","rawRequest","getAllResponseHeaders","row","parseHeaders","cors","XDomainRequest","XMLHttpRequest","sync","json","stringify","onprogress","onabort","ontimeout","open","username","password","withCredentials","timeout","abort","setRequestHeader","isEmpty","beforeSend","send","array","iterator","forEachArray","toUpperCase","Stream","listeners","listener","off","callbacks","args","_length","_i","destination","findBox","subresults","results","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","Arr","_byteLength","curByte","revLookup","fromByteArray","uint8","extraBytes","len2","encodeChunk","lookup","num","output","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","arg","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","isBuffer","checked","copy","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","Number","remaining","strLen","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","typedArraySupport","poolSize","_augment","Symbol","species","defineProperty","fill","allocUnsafeSlow","_isBuffer","compare","swap16","swap32","swap64","equals","thisStart","thisEnd","thisCopy","targetCopy","includes","toJSON","_arr","ret","out","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","stringtrim","base64clean","dst","TimestampRolloverStream","lastDTS","referenceDTS","type_","endTimeline","cueShim","regionShim","nativeVTTCue","nativeVTTRegion","shim","restore","timescale","compositionStartTime","getVideoTrackIds","getTracks","getTimescaleFromMediaHeader","toHexString","parseTfhd","parseTrun","parseTfdt","trak","tkhd","mdhd","trafs","baseTimes","traf","tfhd","scale","tfdt","timescales","trackId","trafBoxes","compositionTimeOffset","trun","parsedTrun","samples","traks","videoTrackIds","hdlrs","tkhds","hdlr","view","handlerType","DataView","getUint8","getUint32","tracks","tkhdVersion","stsd","sampleDescriptions","codec","codecConfig","codecBox","_interopDefaultLegacy","window__default","regexs","mp4","webm","ogg","muxerVideo","muxerAudio","translateLegacyCodec","orig","profile","avcLevel","translateLegacyCodecs","codecs","parseCodecs","codecString","details","isAudioCodec","getMimeForCodec","every","DEFAULT_AUDIO_CODEC","DEFAULT_VIDEO_CODEC","browserSupportsCodec","MediaSource","isTypeSupported","codecsFromDefault","master","audioGroupId","AUDIO","audioGroup","audioType","CODECS","isVideoCodec","mapLegacyAvcCodecs","muxerSupportsCodec","DOMParser","DOMHandler","cdata","_locator","l","systemId","_toString","chars","java","hander","parseFromString","mimeType","sax","xmlns","setDocumentLocator","errorImpl","isCallback","Function","build","fn","msg","buildErrorHandler","xml","DOMImplementation","createDocument","documentURI","namespaceURI","createElementNS","createAttributeNS","nodeValue","setAttributeNode","ins","ignorableWhitespace","ch","charNode","createCDATASection","skippedEntity","normalize","comm","createComment","publicId","impl","implementation","createDocumentType","dt","_error","XMLSerializer","secondsToVideoTs","secondsToAudioTs","videoTsToSeconds","audioTsToSeconds","audioTsToVideoTs","videoTsToAudioTs","metadataTsToSeconds","timelineStartPts","keepOriginalTimestamps","_getPrototypeOf","getPrototypeOf","parsePid","parseAdaptionField","parseNalUnitType","pmtPid","programMapTable","payloadOffset","tableEnd","METADATA_STREAM_TYPE","ptsDtsFlags","frameBuffer","frameI","frameSyncPoint","foundKeyFrame","flushSource","partialFlush","_setPrototypeOf","_objectWithoutPropertiesLoose","excluded","sourceKeys","invariant","condition","framesToPop","Context","createContext","LOADABLE_SHARED","initialChunks","identity","createLoadable","_ref$defaultResolveCo","defaultResolveComponent","_render","onLoad","loadable","loadableConstructor","ctor","requireAsync","resolve","chunkName","resolveConstructor","cache","_getCacheKey","props","cacheKey","Loadable","Component","resolveComponent","InnerLoadable","_React$Component","loading","__chunkExtractor","requireSync","ssr","loadSync","addChunk","isReady","getDerivedStateFromProps","componentDidMount","mounted","cachedPromise","getCache","setCache","loadAsync","componentDidUpdate","prevProps","prevState","componentWillUnmount","safeSetState","nextState","setState","getCacheKey","triggerOnLoad","fileName","promise","resolveAsync","then","loadedModule","_this4","_this$props","forwardedRef","_this$props2","propFallback","fallback","_this$state","suspense","ref","EnhancedInnerLoadable","Consumer","extractor","assign","forwardRef","lazy","_createLoadable","__esModule","_createLoadable$1","children","loadable$1","lazy$1","loadable$2","lib","configure","player","subtitle","querySelector","octopusInstance","libass","instance","resizePlayer","offsetLeft","resizePlayerWithTimeout","configurePlayer","html5","hls","overrideNative","IS_SAFARI","videoNode","landscapeFullscreen","fullscreen","enterOnRotate","alwaysInLandscapeMode","iOS","subtitles","addClass","themeName","onPlay","sources","componentWillReceiveProps","nextProps","removeClass","data-vjs-player","playsInline","React","URLToolkit__default","baseUrl","relativeUrl","location","href","win","_typeof","assertThisInitialized","Reflect","construct","sham","Proxy","dest","Class","Super","pt","ppt","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_nsMap","_onAddAttribute","_removeNamedNode","features","_features","feature","Node","_xmlEncoder","_visitNode","Document","remove","_onUpdateChild","newChild","cs","child","_removeChild","previous","previousSibling","next","lastChild","_insertBefore","nextChild","cp","nodeType","newFirst","newLast","pre","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","nodeSerializeToString","isHtml","nodeFilter","refNode","lookupPrefix","visibleNamespaces","namespace","serializeToString","needNamespaceDefine","isHTML","item","internalSubset","getNamedItem","setNamedItem","_ownerElement","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","versions","qualifiedName","doctype","root","refChild","replaceChild","oldChild","hasChildNodes","cloneNode","deep","_cloneNode","node2","attrs2","appendData","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importNode","importedNode","_importNode","getElementById","rtv","getAttribute","createDocumentFragment","createAttribute","specified","createEntityReference","pl","hasAttribute","getAttributeNode","removeAttribute","removeAttributeNode","_appendSingleChild","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","base","getElementsByTagNameNS","substringData","insertData","replaceData","deleteData","splitText","newText","newNode","$$length","getTextContent","toUint8","bytesToString","escape","id3Size","isLikely","mp3","flac","isLikelyTypes","filter","isLikelyFn","detectContainerForBytes","isLikelyFmp4MediaSegment","alert","confirm","prompt","references","referenceId","earliestPresentationTime","firstOffset","referenceCount","getUint16","referenceType","referencedSize","subsegmentDuration","startsWithSap","sapType","sapDeltaTime","isObject","merge","_len","objects","flatten","lists","errors","urlTypeToSegment","_ref$baseUrl","_ref$source","_ref$range","range","_ref$indexRange","indexRange","resolvedUri","ranges","startRange","endRange","segmentRange","static","_attributes$timescale","sourceDuration","dynamic","NOW","clientOffset","availabilityStartTime","_attributes$timescale2","_attributes$start","_attributes$minimumUp","minimumUpdatePeriod","_attributes$timeShift","timeShiftBufferDepth","periodStartWC","periodDuration","segmentCount","availableStart","availableEnd","parseByDuration","_attributes$type","_attributes$timescale4","_segmentRange$type","_attributes$timescale3","periodIndex","_attributes$startNumb","startNumber","toSegments","segmentsFromBase","_attributes$initializ","initialization","_attributes$indexRang","initSegment","sourceURL","segmentTimeInfo","addSegmentsToPlaylist","sidx","sidxByteRange","sidxEnd","mediaReferences","r","mergeDiscontiguousPlaylists","_acc$name$segments","addSegmentInfoFromSidx","sidxMapping","sidxKey","sidxMatch","formatAudioPlaylist","_attributes","bandwidth","formatVttPlaylist","_m3u8Attributes","m3u8Attributes","formatVideoPlaylist","_ref3","_attributes2","SUBTITLES","toM3u8","dashPlaylists","locations","_mediaGroups","_dashPlaylists$0$attr","_dashPlaylists$0$attr2","suggestedPresentationDelay","videoPlaylists","_ref4","contentType","audioPlaylists","_ref5","vttPlaylists","_ref6","VIDEO","mainPlaylist","formattedPlaylists","role","label","roleLabel","organizeAudioPlaylists","subs","organizeVttPlaylists","getLiveRValue","parseByTimeline","segmentTimeline","_attributes$minimumUp2","_attributes$media","sIndex","S","repeat","segmentTime","nextS","identifierPattern","constructTemplateUrl","identifier","format","identifierReplacement","segmentsFromTemplate","templateValues","RepresentationID","Bandwidth","mapSegment","parseTemplateInfo","Time","segmentsFromList","_attributes$segmentUr","segmentUrls","segmentUrlMap","segmentUrlObject","segmentUrl","mediaRange","SegmentURLToSegmentObject","generateSegments","segmentAttributes","segmentsFn","template","segmentsInfo","_segmentAttributes","_segmentAttributes$ti","findChildren","getContent","parseDuration","_match$slice","year","month","day","hour","minute","second","parsers","mediaPresentationDuration","parsedValue","parseFn","keySystemsMap","buildBaseUrls","referenceUrls","baseUrlElements","baseUrlElement","getSegmentInformation","adaptationSet","segmentTemplate","segmentList","segmentBase","segmentTimelineParentNode","segmentInitializationParentNode","segmentInitialization","toRepresentations","periodAttributes","periodBaseUrls","periodSegmentInfo","adaptationSetAttributes","adaptationSetBaseUrls","roleAttributes","keySystem","psshNode","psshBuffer","representations","adaptationSetSegmentInfo","representation","repBaseUrlElements","repBaseUrls","representationSegmentInfo","inheritBaseUrls","toAdaptationSets","mpdAttributes","mpdBaseUrls","period","periodAtt","parsedPeriodId","adaptationSets","stringToMpdXml","manifestString","mpd","parsedManifestInfo","_options","_options$manifestUri","manifestUri","_options$NOW","_options$clientOffset","periods","representationInfo","inheritAttributes","parseUTCTiming","UTCTimingNode","parseUTCTimingScheme","b64Text","decodedString","atob","parseSampleFlags","sample","dataOffsetPresent","firstSampleFlagsPresent","sampleDurationPresent","sampleSizePresent","sampleFlagsPresent","sampleCompositionTimeOffsetPresent","sampleCount","dataOffset","getInt32","reviver","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","LN2","concatTypedArrays","buffers","totalLength","total","tempBuffer","isTypedArray","stringToBytes","stringIsBytes","directionSetting","alignSetting","findAlignSetting","_id","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","findDirectionSetting","SyntaxError","getCueAsHTML","isNativeReflectConstruct","_construct","Parent","MPEGURL_REGEX","DASH_REGEX","simpleTypeFromSourceType","baseDataOffsetPresent","sampleDescriptionIndexPresent","defaultSampleDurationPresent","defaultSampleSizePresent","defaultSampleFlagsPresent","durationIsEmpty","defaultBaseIsMoof","baseDataOffset","sampleDescriptionIndex","defaultSampleDuration","defaultSampleSize","defaultSampleFlags","baseDataOffsetIsMoof","isLeading","dependsOn","isDependedOn","hasRedundancy","paddingValue","isNonSyncSample","degradationPriority"],"mappings":"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","file":"68b49b2ce0d55d8a909b2b9efaa779893154a4f7-368117de0a0746255de1.js","sourcesContent":["/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Utilities to detect basic properties and metadata about Aac data.\n */\n'use strict';\n\nvar ADTS_SAMPLING_FREQUENCIES = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n\nvar parseId3TagSize = function parseId3TagSize(header, byteIndex) {\n  var returnSize = header[byteIndex + 6] << 21 | header[byteIndex + 7] << 14 | header[byteIndex + 8] << 7 | header[byteIndex + 9],\n      flags = header[byteIndex + 5],\n      footerPresent = (flags & 16) >> 4; // if we get a negative returnSize clamp it to 0\n\n  returnSize = returnSize >= 0 ? returnSize : 0;\n\n  if (footerPresent) {\n    return returnSize + 20;\n  }\n\n  return returnSize + 10;\n};\n\nvar getId3Offset = function getId3Offset(data, offset) {\n  if (data.length - offset < 10 || data[offset] !== 'I'.charCodeAt(0) || data[offset + 1] !== 'D'.charCodeAt(0) || data[offset + 2] !== '3'.charCodeAt(0)) {\n    return offset;\n  }\n\n  offset += parseId3TagSize(data, offset);\n  return getId3Offset(data, offset);\n}; // TODO: use vhs-utils\n\n\nvar isLikelyAacData = function isLikelyAacData(data) {\n  var offset = getId3Offset(data, 0);\n  return data.length >= offset + 2 && (data[offset] & 0xFF) === 0xFF && (data[offset + 1] & 0xF0) === 0xF0 && // verify that the 2 layer bits are 0, aka this\n  // is not mp3 data but aac data.\n  (data[offset + 1] & 0x16) === 0x10;\n};\n\nvar parseSyncSafeInteger = function parseSyncSafeInteger(data) {\n  return data[0] << 21 | data[1] << 14 | data[2] << 7 | data[3];\n}; // return a percent-encoded representation of the specified byte range\n// @see http://en.wikipedia.org/wiki/Percent-encoding\n\n\nvar percentEncode = function percentEncode(bytes, start, end) {\n  var i,\n      result = '';\n\n  for (i = start; i < end; i++) {\n    result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n  }\n\n  return result;\n}; // return the string representation of the specified byte range,\n// interpreted as ISO-8859-1.\n\n\nvar parseIso88591 = function parseIso88591(bytes, start, end) {\n  return unescape(percentEncode(bytes, start, end)); // jshint ignore:line\n};\n\nvar parseAdtsSize = function parseAdtsSize(header, byteIndex) {\n  var lowThree = (header[byteIndex + 5] & 0xE0) >> 5,\n      middle = header[byteIndex + 4] << 3,\n      highTwo = header[byteIndex + 3] & 0x3 << 11;\n  return highTwo | middle | lowThree;\n};\n\nvar parseType = function parseType(header, byteIndex) {\n  if (header[byteIndex] === 'I'.charCodeAt(0) && header[byteIndex + 1] === 'D'.charCodeAt(0) && header[byteIndex + 2] === '3'.charCodeAt(0)) {\n    return 'timed-metadata';\n  } else if (header[byteIndex] & 0xff === 0xff && (header[byteIndex + 1] & 0xf0) === 0xf0) {\n    return 'audio';\n  }\n\n  return null;\n};\n\nvar parseSampleRate = function parseSampleRate(packet) {\n  var i = 0;\n\n  while (i + 5 < packet.length) {\n    if (packet[i] !== 0xFF || (packet[i + 1] & 0xF6) !== 0xF0) {\n      // If a valid header was not found,  jump one forward and attempt to\n      // find a valid ADTS header starting at the next byte\n      i++;\n      continue;\n    }\n\n    return ADTS_SAMPLING_FREQUENCIES[(packet[i + 2] & 0x3c) >>> 2];\n  }\n\n  return null;\n};\n\nvar parseAacTimestamp = function parseAacTimestamp(packet) {\n  var frameStart, frameSize, frame, frameHeader; // find the start of the first frame and the end of the tag\n\n  frameStart = 10;\n\n  if (packet[5] & 0x40) {\n    // advance the frame start past the extended header\n    frameStart += 4; // header size field\n\n    frameStart += parseSyncSafeInteger(packet.subarray(10, 14));\n  } // parse one or more ID3 frames\n  // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n\n\n  do {\n    // determine the number of bytes in this frame\n    frameSize = parseSyncSafeInteger(packet.subarray(frameStart + 4, frameStart + 8));\n\n    if (frameSize < 1) {\n      return null;\n    }\n\n    frameHeader = String.fromCharCode(packet[frameStart], packet[frameStart + 1], packet[frameStart + 2], packet[frameStart + 3]);\n\n    if (frameHeader === 'PRIV') {\n      frame = packet.subarray(frameStart + 10, frameStart + frameSize + 10);\n\n      for (var i = 0; i < frame.byteLength; i++) {\n        if (frame[i] === 0) {\n          var owner = parseIso88591(frame, 0, i);\n\n          if (owner === 'com.apple.streaming.transportStreamTimestamp') {\n            var d = frame.subarray(i + 1);\n            var size = (d[3] & 0x01) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;\n            size *= 4;\n            size += d[7] & 0x03;\n            return size;\n          }\n\n          break;\n        }\n      }\n    }\n\n    frameStart += 10; // advance past the frame header\n\n    frameStart += frameSize; // advance past the frame body\n  } while (frameStart < packet.byteLength);\n\n  return null;\n};\n\nmodule.exports = {\n  isLikelyAacData: isLikelyAacData,\n  parseId3TagSize: parseId3TagSize,\n  parseAdtsSize: parseAdtsSize,\n  parseType: parseType,\n  parseSampleRate: parseSampleRate,\n  parseAacTimestamp: parseAacTimestamp\n};","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar scrollSetting = {\n  \"\": true,\n  \"up\": true\n};\n\nfunction findScrollSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var scroll = scrollSetting[value.toLowerCase()];\n  return scroll ? value.toLowerCase() : false;\n}\n\nfunction isValidPercentValue(value) {\n  return typeof value === \"number\" && value >= 0 && value <= 100;\n} // VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\n\n\nfunction VTTRegion() {\n  var _width = 100;\n  var _lines = 3;\n  var _regionAnchorX = 0;\n  var _regionAnchorY = 100;\n  var _viewportAnchorX = 0;\n  var _viewportAnchorY = 100;\n  var _scroll = \"\";\n  Object.defineProperties(this, {\n    \"width\": {\n      enumerable: true,\n      get: function get() {\n        return _width;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"Width must be between 0 and 100.\");\n        }\n\n        _width = value;\n      }\n    },\n    \"lines\": {\n      enumerable: true,\n      get: function get() {\n        return _lines;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Lines must be set to a number.\");\n        }\n\n        _lines = value;\n      }\n    },\n    \"regionAnchorY\": {\n      enumerable: true,\n      get: function get() {\n        return _regionAnchorY;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n        }\n\n        _regionAnchorY = value;\n      }\n    },\n    \"regionAnchorX\": {\n      enumerable: true,\n      get: function get() {\n        return _regionAnchorX;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n        }\n\n        _regionAnchorX = value;\n      }\n    },\n    \"viewportAnchorY\": {\n      enumerable: true,\n      get: function get() {\n        return _viewportAnchorY;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n        }\n\n        _viewportAnchorY = value;\n      }\n    },\n    \"viewportAnchorX\": {\n      enumerable: true,\n      get: function get() {\n        return _viewportAnchorX;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n        }\n\n        _viewportAnchorX = value;\n      }\n    },\n    \"scroll\": {\n      enumerable: true,\n      get: function get() {\n        return _scroll;\n      },\n      set: function set(value) {\n        var setting = findScrollSetting(value); // Have to check for false as an empty string is a legal value.\n\n        if (setting === false) {\n          console.warn(\"Scroll: an invalid or illegal string was specified.\");\n        } else {\n          _scroll = setting;\n        }\n      }\n    }\n  });\n}\n\nmodule.exports = VTTRegion;","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\nvar document = require('global/document');\n\nvar _objCreate = Object.create || function () {\n  function F() {}\n\n  return function (o) {\n    if (arguments.length !== 1) {\n      throw new Error('Object.create shim only accepts one parameter.');\n    }\n\n    F.prototype = o;\n    return new F();\n  };\n}(); // Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\n\n\nfunction ParsingError(errorData, message) {\n  this.name = \"ParsingError\";\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\n\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError; // ParsingError metadata for acceptable ParsingErrors.\n\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: \"Malformed WebVTT signature.\"\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: \"Malformed time stamp.\"\n  }\n}; // Try to parse input as a time stamp.\n\nfunction parseTimeStamp(input) {\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  var m = input.match(/^(\\d+):(\\d{1,2})(:\\d{1,2})?\\.(\\d{3})/);\n\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n} // A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\n\n\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function set(k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function get(k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function has(k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function alt(k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function integer(k, v) {\n    if (/^-?\\d+$/.test(v)) {\n      // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function percent(k, v) {\n    var m;\n\n    if (m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/)) {\n      v = parseFloat(v);\n\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n\n    return false;\n  }\n}; // Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\n\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n\n  for (var i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n\n    var kv = groups[i].split(keyValueDelim);\n\n    if (kv.length !== 2) {\n      continue;\n    }\n\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input; // 4.1 WebVTT timestamp\n\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed timestamp: \" + oInput);\n    } // Remove time stamp from input.\n\n\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  } // 4.4.2 WebVTT cue settings\n\n\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n    parseOptions(input, function (k, v) {\n      switch (k) {\n        case \"region\":\n          // Find the last region we parsed with the same region id.\n          for (var i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n\n          break;\n\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n\n        case \"line\":\n          var vals = v.split(\",\"),\n              vals0 = vals[0];\n          settings.integer(k, vals0);\n          settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n          settings.alt(k, vals0, [\"auto\"]);\n\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n          }\n\n          break;\n\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n          }\n\n          break;\n\n        case \"size\":\n          settings.percent(k, v);\n          break;\n\n        case \"align\":\n          settings.alt(k, v, [\"start\", \"center\", \"end\", \"left\", \"right\"]);\n          break;\n      }\n    }, /:/, /\\s/); // Apply default values for any missing fields.\n\n    cue.region = settings.get(\"region\", null);\n    cue.vertical = settings.get(\"vertical\", \"\");\n\n    try {\n      cue.line = settings.get(\"line\", \"auto\");\n    } catch (e) {}\n\n    cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue.snapToLines = settings.get(\"snapToLines\", true);\n    cue.size = settings.get(\"size\", 100); // Safari still uses the old middle value and won't accept center\n\n    try {\n      cue.align = settings.get(\"align\", \"center\");\n    } catch (e) {\n      cue.align = settings.get(\"align\", \"middle\");\n    }\n\n    try {\n      cue.position = settings.get(\"position\", \"auto\");\n    } catch (e) {\n      cue.position = settings.get(\"position\", {\n        start: 0,\n        left: 0,\n        center: 50,\n        middle: 50,\n        end: 100,\n        right: 100\n      }, cue.align);\n    }\n\n    cue.positionAlign = settings.get(\"positionAlign\", {\n      start: \"start\",\n      left: \"start\",\n      center: \"center\",\n      middle: \"center\",\n      end: \"end\",\n      right: \"end\"\n    }, cue.align);\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  } // 4.1 WebVTT cue timings.\n\n\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp(); // (1) collect cue start time\n\n  skipWhitespace();\n\n  if (input.substr(0, 3) !== \"-->\") {\n    // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed time stamp (time stamps must be separated by '-->'): \" + oInput);\n  }\n\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp(); // (5) collect cue end time\n  // 4.1 WebVTT cue settings list.\n\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\n\nvar TEXTAREA_ELEMENT = document.createElement(\"textarea\");\nvar TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n}; // 5.1 default text color\n// 5.2 default text background color is equivalent to text color with bg_ prefix\n\nvar DEFAULT_COLOR_CLASS = {\n  white: 'rgba(255,255,255,1)',\n  lime: 'rgba(0,255,0,1)',\n  cyan: 'rgba(0,255,255,1)',\n  red: 'rgba(255,0,0,1)',\n  yellow: 'rgba(255,255,0,1)',\n  magenta: 'rgba(255,0,255,1)',\n  blue: 'rgba(0,0,255,1)',\n  black: 'rgba(0,0,0,1)'\n};\nvar TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\nvar NEEDS_PARENT = {\n  rt: \"ruby\"\n}; // Parse content into a document fragment.\n\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    } // Consume 'n' characters from the input.\n\n\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    var m = input.match(/^([^<]*)(<[^>]*>?)?/); // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  function unescape(s) {\n    TEXTAREA_ELEMENT.innerHTML = s;\n    s = TEXTAREA_ELEMENT.textContent;\n    TEXTAREA_ELEMENT.textContent = \"\";\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] || NEEDS_PARENT[element.localName] === current.localName;\n  } // Create an element for this tag.\n\n\n  function createElement(type, annotation) {\n    var tagName = TAG_NAME[type];\n\n    if (!tagName) {\n      return null;\n    }\n\n    var element = window.document.createElement(tagName);\n    var name = TAG_ANNOTATION[type];\n\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n\n    return element;\n  }\n\n  var rootDiv = window.document.createElement(\"div\"),\n      current = rootDiv,\n      t,\n      tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length && tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        } // Otherwise just ignore the end tag.\n\n\n        continue;\n      }\n\n      var ts = parseTimeStamp(t.substr(1, t.length - 2));\n      var node;\n\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n\n      var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/); // If we can't parse the tag, skip to the next tag.\n\n      if (!m) {\n        continue;\n      } // Try to construct an element, and ignore the tag if we couldn't.\n\n\n      node = createElement(m[1], m[3]);\n\n      if (!node) {\n        continue;\n      } // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n\n\n      if (!shouldAdd(current, node)) {\n        continue;\n      } // Set the class list (as a list of classes, separated by space).\n\n\n      if (m[2]) {\n        var classes = m[2].split('.');\n        classes.forEach(function (cl) {\n          var bgColor = /^bg_/.test(cl); // slice out `bg_` if it's a background color\n\n          var colorName = bgColor ? cl.slice(3) : cl;\n\n          if (DEFAULT_COLOR_CLASS.hasOwnProperty(colorName)) {\n            var propName = bgColor ? 'background-color' : 'color';\n            var propValue = DEFAULT_COLOR_CLASS[colorName];\n            node.style[propName] = propValue;\n          }\n        });\n        node.className = classes.join(' ');\n      } // Append the node to the current node, and enter the scope of the new\n      // node.\n\n\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    } // Text nodes are leaf nodes.\n\n\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n} // This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\n\n\nvar strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6], [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d], [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6], [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5], [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815], [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858], [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f], [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c], [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1], [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc], [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808], [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855], [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f], [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13], [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58], [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72], [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f], [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32], [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42], [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f], [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59], [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62], [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77], [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b], [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (var i = 0; i < strongRTLRanges.length; i++) {\n    var currentRange = strongRTLRanges[i];\n\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  var nodeStack = [],\n      text = \"\",\n      charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    var node = nodeStack.pop(),\n        text = node.textContent || node.innerText;\n\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      var m = text.match(/^.*(\\n|\\r)/);\n\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n\n      return text;\n    }\n\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n\n  while (text = nextTextNode(nodeStack)) {\n    for (var i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" && (cue.snapToLines || cue.line >= 0 && cue.line <= 100)) {\n    return cue.line;\n  }\n\n  if (!cue.track || !cue.track.textTrackList || !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n\n  var track = cue.track,\n      trackList = track.textTrackList,\n      count = 0;\n\n  for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n\n  return ++count * -1;\n}\n\nfunction StyleBox() {} // Apply styles to a div. If there is no div passed then it defaults to the\n// div on 'this'.\n\n\nStyleBox.prototype.applyStyles = function (styles, div) {\n  div = div || this.div;\n\n  for (var prop in styles) {\n    if (styles.hasOwnProperty(prop)) {\n      div.style[prop] = styles[prop];\n    }\n  }\n};\n\nStyleBox.prototype.formatStyle = function (val, unit) {\n  return val === 0 ? 0 : val + unit;\n}; // Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\n\n\nfunction CueStyleBox(window, cue, styleOptions) {\n  StyleBox.call(this);\n  this.cue = cue; // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n  // have inline positioning and will function as the cue background box.\n\n  this.cueDiv = parseContent(window, cue.text);\n  var styles = {\n    color: \"rgba(255, 255, 255, 1)\",\n    backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n    position: \"relative\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    display: \"inline\",\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n    unicodeBidi: \"plaintext\"\n  };\n  this.applyStyles(styles, this.cueDiv); // Create an absolutely positioned div that will be used to position the cue\n  // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n  // mirrors of them except middle instead of center on Safari.\n\n  this.div = window.document.createElement(\"div\");\n  styles = {\n    direction: determineBidi(this.cueDiv),\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n    unicodeBidi: \"plaintext\",\n    textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n    font: styleOptions.font,\n    whiteSpace: \"pre-line\",\n    position: \"absolute\"\n  };\n  this.applyStyles(styles);\n  this.div.appendChild(this.cueDiv); // Calculate the distance from the reference edge of the viewport to the text\n  // position of the cue box. The reference edge will be resolved later when\n  // the box orientation styles are applied.\n\n  var textPos = 0;\n\n  switch (cue.positionAlign) {\n    case \"start\":\n      textPos = cue.position;\n      break;\n\n    case \"center\":\n      textPos = cue.position - cue.size / 2;\n      break;\n\n    case \"end\":\n      textPos = cue.position - cue.size;\n      break;\n  } // Horizontal box orientation; textPos is the distance from the left edge of the\n  // area to the left edge of the box and cue.size is the distance extending to\n  // the right from there.\n\n\n  if (cue.vertical === \"\") {\n    this.applyStyles({\n      left: this.formatStyle(textPos, \"%\"),\n      width: this.formatStyle(cue.size, \"%\")\n    }); // Vertical box orientation; textPos is the distance from the top edge of the\n    // area to the top edge of the box and cue.size is the height extending\n    // downwards from there.\n  } else {\n    this.applyStyles({\n      top: this.formatStyle(textPos, \"%\"),\n      height: this.formatStyle(cue.size, \"%\")\n    });\n  }\n\n  this.move = function (box) {\n    this.applyStyles({\n      top: this.formatStyle(box.top, \"px\"),\n      bottom: this.formatStyle(box.bottom, \"px\"),\n      left: this.formatStyle(box.left, \"px\"),\n      right: this.formatStyle(box.right, \"px\"),\n      height: this.formatStyle(box.height, \"px\"),\n      width: this.formatStyle(box.width, \"px\")\n    });\n  };\n}\n\nCueStyleBox.prototype = _objCreate(StyleBox.prototype);\nCueStyleBox.prototype.constructor = CueStyleBox; // Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\n\nfunction BoxPosition(obj) {\n  // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n  // was passed in and we need to copy the results of 'getBoundingClientRect'\n  // as the object returned is readonly. All co-ordinate values are in reference\n  // to the viewport origin (top left).\n  var lh, height, width, top;\n\n  if (obj.div) {\n    height = obj.div.offsetHeight;\n    width = obj.div.offsetWidth;\n    top = obj.div.offsetTop;\n    var rects = (rects = obj.div.childNodes) && (rects = rects[0]) && rects.getClientRects && rects.getClientRects();\n    obj = obj.div.getBoundingClientRect(); // In certain cases the outter div will be slightly larger then the sum of\n    // the inner div's lines. This could be due to bold text, etc, on some platforms.\n    // In this case we should get the average line height and use that. This will\n    // result in the desired behaviour.\n\n    lh = rects ? Math.max(rects[0] && rects[0].height || 0, obj.height / rects.length) : 0;\n  }\n\n  this.left = obj.left;\n  this.right = obj.right;\n  this.top = obj.top || top;\n  this.height = obj.height || height;\n  this.bottom = obj.bottom || top + (obj.height || height);\n  this.width = obj.width || width;\n  this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n} // Move the box along a particular axis. Optionally pass in an amount to move\n// the box. If no amount is passed then the default is the line height of the\n// box.\n\n\nBoxPosition.prototype.move = function (axis, toMove) {\n  toMove = toMove !== undefined ? toMove : this.lineHeight;\n\n  switch (axis) {\n    case \"+x\":\n      this.left += toMove;\n      this.right += toMove;\n      break;\n\n    case \"-x\":\n      this.left -= toMove;\n      this.right -= toMove;\n      break;\n\n    case \"+y\":\n      this.top += toMove;\n      this.bottom += toMove;\n      break;\n\n    case \"-y\":\n      this.top -= toMove;\n      this.bottom -= toMove;\n      break;\n  }\n}; // Check if this box overlaps another box, b2.\n\n\nBoxPosition.prototype.overlaps = function (b2) {\n  return this.left < b2.right && this.right > b2.left && this.top < b2.bottom && this.bottom > b2.top;\n}; // Check if this box overlaps any other boxes in boxes.\n\n\nBoxPosition.prototype.overlapsAny = function (boxes) {\n  for (var i = 0; i < boxes.length; i++) {\n    if (this.overlaps(boxes[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // Check if this box is within another box.\n\n\nBoxPosition.prototype.within = function (container) {\n  return this.top >= container.top && this.bottom <= container.bottom && this.left >= container.left && this.right <= container.right;\n}; // Check if this box is entirely within the container or it is overlapping\n// on the edge opposite of the axis direction passed. For example, if \"+x\" is\n// passed and the box is overlapping on the left edge of the container, then\n// return true.\n\n\nBoxPosition.prototype.overlapsOppositeAxis = function (container, axis) {\n  switch (axis) {\n    case \"+x\":\n      return this.left < container.left;\n\n    case \"-x\":\n      return this.right > container.right;\n\n    case \"+y\":\n      return this.top < container.top;\n\n    case \"-y\":\n      return this.bottom > container.bottom;\n  }\n}; // Find the percentage of the area that this box is overlapping with another\n// box.\n\n\nBoxPosition.prototype.intersectPercentage = function (b2) {\n  var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n  return intersectArea / (this.height * this.width);\n}; // Convert the positions from this box to CSS compatible positions using\n// the reference container's positions. This has to be done because this\n// box's positions are in reference to the viewport origin, whereas, CSS\n// values are in referecne to their respective edges.\n\n\nBoxPosition.prototype.toCSSCompatValues = function (reference) {\n  return {\n    top: this.top - reference.top,\n    bottom: reference.bottom - this.bottom,\n    left: this.left - reference.left,\n    right: reference.right - this.right,\n    height: this.height,\n    width: this.width\n  };\n}; // Get an object that represents the box's position without anything extra.\n// Can pass a StyleBox, HTMLElement, or another BoxPositon.\n\n\nBoxPosition.getSimpleBoxPosition = function (obj) {\n  var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n  var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n  var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n  obj = obj.div ? obj.div.getBoundingClientRect() : obj.tagName ? obj.getBoundingClientRect() : obj;\n  var ret = {\n    left: obj.left,\n    right: obj.right,\n    top: obj.top || top,\n    height: obj.height || height,\n    bottom: obj.bottom || top + (obj.height || height),\n    width: obj.width || width\n  };\n  return ret;\n}; // Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\n\n\nfunction moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    var bestPosition,\n        specifiedPosition = new BoxPosition(b),\n        percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (var i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) || b.within(containerBox) && b.overlapsAny(boxPositions)) {\n        b.move(axis[i]);\n      } // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n\n\n      if (b.within(containerBox)) {\n        return b;\n      }\n\n      var p = b.intersectPercentage(containerBox); // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      } // Reset the box position to the specified position.\n\n\n      b = new BoxPosition(specifiedPosition);\n    }\n\n    return bestPosition || specifiedPosition;\n  }\n\n  var boxPosition = new BoxPosition(styleBox),\n      cue = styleBox.cue,\n      linePos = computeLinePos(cue),\n      axis = []; // If we have a line number to align the cue to.\n\n  if (cue.snapToLines) {\n    var size;\n\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    var step = boxPosition.lineHeight,\n        position = step * Math.round(linePos),\n        maxPosition = containerBox[size] + step,\n        initialAxis = axis[0]; // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    } // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n\n\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    } // Move the box to the specified position. This may not be its best\n    // position.\n\n\n    boxPosition.move(initialAxis, position);\n  } else {\n    // If we have a percentage line value for the cue.\n    var calculatedPercentage = boxPosition.lineHeight / containerBox.height * 100;\n\n    switch (cue.lineAlign) {\n      case \"center\":\n        linePos -= calculatedPercentage / 2;\n        break;\n\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    } // Apply initial line position to the cue box.\n\n\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"]; // Get the box position again after we've applied the specified positioning\n    // to it.\n\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  var bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction WebVTT() {// Nothing\n} // Helper to allow strings to be decoded instead of the default binary utf8 data.\n\n\nWebVTT.StringDecoder = function () {\n  return {\n    decode: function decode(data) {\n      if (!data) {\n        return \"\";\n      }\n\n      if (typeof data !== \"string\") {\n        throw new Error(\"Error - expected string data.\");\n      }\n\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nWebVTT.convertCueToDOMTree = function (window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n\n  return parseContent(window, cuetext);\n};\n\nvar FONT_SIZE_PERCENT = 0.05;\nvar FONT_STYLE = \"sans-serif\";\nvar CUE_BACKGROUND_PADDING = \"1.5%\"; // Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\n\nWebVTT.processCues = function (window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  } // Remove all previous children.\n\n\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  var paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay); // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n\n  function shouldCompute(cues) {\n    for (var i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n\n    return false;\n  } // We don't need to recompute the cues' display states. Just reuse them.\n\n\n  if (!shouldCompute(cues)) {\n    for (var i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n\n    return;\n  }\n\n  var boxPositions = [],\n      containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n      fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  var styleOptions = {\n    font: fontSize + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    var styleBox, cue;\n\n    for (var i = 0; i < cues.length; i++) {\n      cue = cues[i]; // Compute the intial position and styles of the cue div.\n\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div); // Move the cue div to it's correct line position.\n\n      moveBoxToLinePosition(window, styleBox, containerBox, boxPositions); // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n\n      cue.displayState = styleBox.div;\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nWebVTT.Parser = function (window, vttjs, decoder) {\n  if (!decoder) {\n    decoder = vttjs;\n    vttjs = {};\n  }\n\n  if (!vttjs) {\n    vttjs = {};\n  }\n\n  this.window = window;\n  this.vttjs = vttjs;\n  this.state = \"INITIAL\";\n  this.buffer = \"\";\n  this.decoder = decoder || new TextDecoder(\"utf8\");\n  this.regionList = [];\n};\n\nWebVTT.Parser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function reportOrThrowError(e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function parse(data) {\n    var self = this; // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, {\n        stream: true\n      });\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n\n      var line = buffer.substr(0, pos); // Advance the buffer early in case we fail below.\n\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n\n      self.buffer = buffer.substr(pos);\n      return line;\n    } // 3.4 WebVTT region and WebVTT region settings syntax\n\n\n    function parseRegion(input) {\n      var settings = new Settings();\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"id\":\n            settings.set(k, v);\n            break;\n\n          case \"width\":\n            settings.percent(k, v);\n            break;\n\n          case \"lines\":\n            settings.integer(k, v);\n            break;\n\n          case \"regionanchor\":\n          case \"viewportanchor\":\n            var xy = v.split(',');\n\n            if (xy.length !== 2) {\n              break;\n            } // We have to make sure both x and y parse, so use a temporary\n            // settings object here.\n\n\n            var anchor = new Settings();\n            anchor.percent(\"x\", xy[0]);\n            anchor.percent(\"y\", xy[1]);\n\n            if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n              break;\n            }\n\n            settings.set(k + \"X\", anchor.get(\"x\"));\n            settings.set(k + \"Y\", anchor.get(\"y\"));\n            break;\n\n          case \"scroll\":\n            settings.alt(k, v, [\"up\"]);\n            break;\n        }\n      }, /=/, /\\s/); // Create the region, using default values for any values that were not\n      // specified.\n\n      if (settings.has(\"id\")) {\n        var region = new (self.vttjs.VTTRegion || self.window.VTTRegion)();\n        region.width = settings.get(\"width\", 100);\n        region.lines = settings.get(\"lines\", 3);\n        region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n        region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n        region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n        region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n        region.scroll = settings.get(\"scroll\", \"\"); // Register the region.\n\n        self.onregion && self.onregion(region); // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n\n        self.regionList.push({\n          id: settings.get(\"id\"),\n          region: region\n        });\n      }\n    } // draft-pantos-http-live-streaming-20\n    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-20#section-3.5\n    // 3.5 WebVTT\n\n\n    function parseTimestampMap(input) {\n      var settings = new Settings();\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"MPEGT\":\n            settings.integer(k + 'S', v);\n            break;\n\n          case \"LOCA\":\n            settings.set(k + 'L', parseTimeStamp(v));\n            break;\n        }\n      }, /[^\\d]:/, /,/);\n      self.ontimestampmap && self.ontimestampmap({\n        \"MPEGTS\": settings.get(\"MPEGTS\"),\n        \"LOCAL\": settings.get(\"LOCAL\")\n      });\n    } // 3.2 WebVTT metadata header syntax\n\n\n    function parseHeader(input) {\n      if (input.match(/X-TIMESTAMP-MAP/)) {\n        // This line contains HLS X-TIMESTAMP-MAP metadata\n        parseOptions(input, function (k, v) {\n          switch (k) {\n            case \"X-TIMESTAMP-MAP\":\n              parseTimestampMap(v);\n              break;\n          }\n        }, /=/);\n      } else {\n        parseOptions(input, function (k, v) {\n          switch (k) {\n            case \"Region\":\n              // 3.3 WebVTT region metadata header syntax\n              parseRegion(v);\n              break;\n          }\n        }, /:/);\n      }\n    } // 5.1 WebVTT file parsing.\n\n\n    try {\n      var line;\n\n      if (self.state === \"INITIAL\") {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = \"HEADER\";\n      }\n\n      var alreadyCollectedLine = false;\n\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n          case \"HEADER\":\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = \"ID\";\n            }\n\n            continue;\n\n          case \"NOTE\":\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = \"ID\";\n            }\n\n            continue;\n\n          case \"ID\":\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = \"NOTE\";\n              break;\n            } // 19-29 - Allow any number of line terminators, then initialize new cue values.\n\n\n            if (!line) {\n              continue;\n            }\n\n            self.cue = new (self.vttjs.VTTCue || self.window.VTTCue)(0, 0, \"\"); // Safari still uses the old middle value and won't accept center\n\n            try {\n              self.cue.align = \"center\";\n            } catch (e) {\n              self.cue.align = \"middle\";\n            }\n\n            self.state = \"CUE\"; // 30-39 - Check if self line contains an optional identifier or timing data.\n\n            if (line.indexOf(\"-->\") === -1) {\n              self.cue.id = line;\n              continue;\n            }\n\n          // Process line as start of a cue.\n\n          /*falls through*/\n\n          case \"CUE\":\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e); // In case of an error ignore rest of the cue.\n\n              self.cue = null;\n              self.state = \"BADCUE\";\n              continue;\n            }\n\n            self.state = \"CUETEXT\";\n            continue;\n\n          case \"CUETEXT\":\n            var hasSubstring = line.indexOf(\"-->\") !== -1; // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '-->' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n\n            if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = \"ID\";\n              continue;\n            }\n\n            if (self.cue.text) {\n              self.cue.text += \"\\n\";\n            }\n\n            self.cue.text += line.replace(/\\u2028/g, '\\n').replace(/u2029/g, '\\n');\n            continue;\n\n          case \"BADCUE\":\n            // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = \"ID\";\n            }\n\n            continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e); // If we are currently parsing a cue, report what we have.\n\n      if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n\n      self.cue = null; // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n\n      self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n\n    return this;\n  },\n  flush: function flush() {\n    var self = this;\n\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode(); // Synthesize the end of the current cue or region.\n\n      if (self.cue || self.state === \"HEADER\") {\n        self.buffer += \"\\n\\n\";\n        self.parse();\n      } // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n\n\n      if (self.state === \"INITIAL\") {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n    }\n\n    self.onflush && self.onflush();\n    return this;\n  }\n};\nmodule.exports = WebVTT;","// see https://tools.ietf.org/html/rfc1808\n(function (root) {\n  var URL_REGEX = /^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/?#]*\\/)*[^;?#]*)?(;[^?#]*)?(\\?[^#]*)?(#.*)?$/;\n  var FIRST_SEGMENT_REGEX = /^([^\\/?#]*)(.*)$/;\n  var SLASH_DOT_REGEX = /(?:\\/|^)\\.(?=\\/)/g;\n  var SLASH_DOT_DOT_REGEX = /(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g;\n  var URLToolkit = {\n    // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //\n    // E.g\n    // With opts.alwaysNormalize = false (default, spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g\n    // With opts.alwaysNormalize = true (not spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/g\n    buildAbsoluteURL: function buildAbsoluteURL(baseURL, relativeURL, opts) {\n      opts = opts || {}; // remove any remaining space and CRLF\n\n      baseURL = baseURL.trim();\n      relativeURL = relativeURL.trim();\n\n      if (!relativeURL) {\n        // 2a) If the embedded URL is entirely empty, it inherits the\n        // entire base URL (i.e., is set equal to the base URL)\n        // and we are done.\n        if (!opts.alwaysNormalize) {\n          return baseURL;\n        }\n\n        var basePartsForNormalise = URLToolkit.parseURL(baseURL);\n\n        if (!basePartsForNormalise) {\n          throw new Error('Error trying to parse base URL.');\n        }\n\n        basePartsForNormalise.path = URLToolkit.normalizePath(basePartsForNormalise.path);\n        return URLToolkit.buildURLFromParts(basePartsForNormalise);\n      }\n\n      var relativeParts = URLToolkit.parseURL(relativeURL);\n\n      if (!relativeParts) {\n        throw new Error('Error trying to parse relative URL.');\n      }\n\n      if (relativeParts.scheme) {\n        // 2b) If the embedded URL starts with a scheme name, it is\n        // interpreted as an absolute URL and we are done.\n        if (!opts.alwaysNormalize) {\n          return relativeURL;\n        }\n\n        relativeParts.path = URLToolkit.normalizePath(relativeParts.path);\n        return URLToolkit.buildURLFromParts(relativeParts);\n      }\n\n      var baseParts = URLToolkit.parseURL(baseURL);\n\n      if (!baseParts) {\n        throw new Error('Error trying to parse base URL.');\n      }\n\n      if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== '/') {\n        // If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc\n        // This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'\n        var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);\n        baseParts.netLoc = pathParts[1];\n        baseParts.path = pathParts[2];\n      }\n\n      if (baseParts.netLoc && !baseParts.path) {\n        baseParts.path = '/';\n      }\n\n      var builtParts = {\n        // 2c) Otherwise, the embedded URL inherits the scheme of\n        // the base URL.\n        scheme: baseParts.scheme,\n        netLoc: relativeParts.netLoc,\n        path: null,\n        params: relativeParts.params,\n        query: relativeParts.query,\n        fragment: relativeParts.fragment\n      };\n\n      if (!relativeParts.netLoc) {\n        // 3) If the embedded URL's <net_loc> is non-empty, we skip to\n        // Step 7.  Otherwise, the embedded URL inherits the <net_loc>\n        // (if any) of the base URL.\n        builtParts.netLoc = baseParts.netLoc; // 4) If the embedded URL path is preceded by a slash \"/\", the\n        // path is not relative and we skip to Step 7.\n\n        if (relativeParts.path[0] !== '/') {\n          if (!relativeParts.path) {\n            // 5) If the embedded URL path is empty (and not preceded by a\n            // slash), then the embedded URL inherits the base URL path\n            builtParts.path = baseParts.path; // 5a) if the embedded URL's <params> is non-empty, we skip to\n            // step 7; otherwise, it inherits the <params> of the base\n            // URL (if any) and\n\n            if (!relativeParts.params) {\n              builtParts.params = baseParts.params; // 5b) if the embedded URL's <query> is non-empty, we skip to\n              // step 7; otherwise, it inherits the <query> of the base\n              // URL (if any) and we skip to step 7.\n\n              if (!relativeParts.query) {\n                builtParts.query = baseParts.query;\n              }\n            }\n          } else {\n            // 6) The last segment of the base URL's path (anything\n            // following the rightmost slash \"/\", or the entire path if no\n            // slash is present) is removed and the embedded URL's path is\n            // appended in its place.\n            var baseURLPath = baseParts.path;\n            var newPath = baseURLPath.substring(0, baseURLPath.lastIndexOf('/') + 1) + relativeParts.path;\n            builtParts.path = URLToolkit.normalizePath(newPath);\n          }\n        }\n      }\n\n      if (builtParts.path === null) {\n        builtParts.path = opts.alwaysNormalize ? URLToolkit.normalizePath(relativeParts.path) : relativeParts.path;\n      }\n\n      return URLToolkit.buildURLFromParts(builtParts);\n    },\n    parseURL: function parseURL(url) {\n      var parts = URL_REGEX.exec(url);\n\n      if (!parts) {\n        return null;\n      }\n\n      return {\n        scheme: parts[1] || '',\n        netLoc: parts[2] || '',\n        path: parts[3] || '',\n        params: parts[4] || '',\n        query: parts[5] || '',\n        fragment: parts[6] || ''\n      };\n    },\n    normalizePath: function normalizePath(path) {\n      // The following operations are\n      // then applied, in order, to the new path:\n      // 6a) All occurrences of \"./\", where \".\" is a complete path\n      // segment, are removed.\n      // 6b) If the path ends with \".\" as a complete path segment,\n      // that \".\" is removed.\n      path = path.split('').reverse().join('').replace(SLASH_DOT_REGEX, ''); // 6c) All occurrences of \"<segment>/../\", where <segment> is a\n      // complete path segment not equal to \"..\", are removed.\n      // Removal of these path segments is performed iteratively,\n      // removing the leftmost matching pattern on each iteration,\n      // until no matching pattern remains.\n      // 6d) If the path ends with \"<segment>/..\", where <segment> is a\n      // complete path segment not equal to \"..\", that\n      // \"<segment>/..\" is removed.\n\n      while (path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, '')).length) {}\n\n      return path.split('').reverse().join('');\n    },\n    buildURLFromParts: function buildURLFromParts(parts) {\n      return parts.scheme + parts.netLoc + parts.path + parts.params + parts.query + parts.fragment;\n    }\n  };\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = URLToolkit;else if (typeof define === 'function' && define.amd) define([], function () {\n    return URLToolkit;\n  });else if (typeof exports === 'object') exports['URLToolkit'] = URLToolkit;else root['URLToolkit'] = URLToolkit;\n})(this);","import \"core-js/modules/es.array.reduce\";\n\n/*! @name m3u8-parser @version 4.5.0 @license Apache-2.0 */\nimport _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport Stream from '@videojs/vhs-utils/dist/stream.js';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/dist/decode-b64-to-uint8-array.js';\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nvar LineStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(LineStream, _Stream);\n\n  function LineStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.buffer = '';\n    return _this;\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  var _proto = LineStream.prototype;\n\n  _proto.push = function push(data) {\n    var nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  };\n\n  return LineStream;\n}(Stream);\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\n\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nvar ParseStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(ParseStream, _Stream);\n\n  function ParseStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.customParsers = [];\n    _this.tagMappers = [];\n    return _this;\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  var _proto = ParseStream.prototype;\n\n  _proto.push = function push(line) {\n    var _this2 = this;\n\n    var match;\n    var event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    var newLines = this.tagMappers.reduce(function (acc, mapper) {\n      var mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(function (newLine) {\n      for (var i = 0; i < _this2.customParsers.length; i++) {\n        if (_this2.customParsers[i].call(_this2, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        _this2.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n\n        return;\n      }\n\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'totalduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'byterange'\n        };\n\n        if (match[1]) {\n          event.length = parseInt(match[1], 10);\n        }\n\n        if (match[2]) {\n          event.offset = parseInt(match[2], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            var _attributes$BYTERANGE = attributes.BYTERANGE.split('@'),\n                length = _attributes$BYTERANGE[0],\n                offset = _attributes$BYTERANGE[1];\n\n            event.byterange = {};\n\n            if (length) {\n              event.byterange.length = parseInt(length, 10);\n            }\n\n            if (offset) {\n              event.byterange.offset = parseInt(offset, 10);\n            }\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      } // unknown tag type\n\n\n      _this2.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(_ref) {\n    var _this3 = this;\n\n    var expression = _ref.expression,\n        customType = _ref.customType,\n        dataParser = _ref.dataParser,\n        segment = _ref.segment;\n\n    if (typeof dataParser !== 'function') {\n      dataParser = function dataParser(line) {\n        return line;\n      };\n    }\n\n    this.customParsers.push(function (line) {\n      var match = expression.exec(line);\n\n      if (match) {\n        _this3.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType: customType,\n          segment: segment\n        });\n\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(_ref2) {\n    var expression = _ref2.expression,\n        map = _ref2.map;\n\n    var mapFn = function mapFn(line) {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  };\n\n  return ParseStream;\n}(Stream);\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\n\nvar Parser = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(Parser, _Stream);\n\n  function Parser() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.lineStream = new LineStream();\n    _this.parseStream = new ParseStream();\n\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n\n\n    var self = _assertThisInitialized(_this);\n    /* eslint-enable consistent-this */\n\n\n    var uris = [];\n    var currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    var currentMap; // if specified, the active decryption key\n\n    var _key;\n\n    var noop = function noop() {};\n\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    var widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // keep track of the last seen segment's byte range end, as segments are not required\n    // to provide the offset, in which case it defaults to the next byte after the\n    // previous segment\n\n    var lastByterangeEnd = 0; // update the manifest with the m3u8 entry from the parse stream\n\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup;\n      var rendition;\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */\n                  entry.offset = lastByterangeEnd;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n\n              lastByterangeEnd = byterange.offset + byterange.length;\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                var VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = {\n                  'com.widevine.alpha': {\n                    attributes: {\n                      schemeIdUri: entry.attributes.KEYFORMAT,\n                      // remove '0x' from the key id string\n                      keyId: entry.attributes.KEYID.substring(2)\n                    },\n                    // decode the base64-encoded PSSH box\n                    pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                  }\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n            },\n            totalduration: function totalduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid total duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.totalDuration = entry.duration;\n            },\n            start: function start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (_key) {\n            currentUri.key = _key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // prepare for the next URI\n\n\n          currentUri = {};\n        },\n        comment: function comment() {// comments are not important for playback\n        },\n        custom: function custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n\n\n  var _proto = Parser.prototype;\n\n  _proto.push = function push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n  ;\n\n  _proto.end = function end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  };\n\n  return Parser;\n}(Stream);\n\nexport { LineStream, ParseStream, Parser };","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/; //\\u10000-\\uEFFFF\n\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\" + nameStartChar.source.slice(1, -1) + \"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^' + nameStartChar.source + nameChar.source + '*(?:\\:' + nameStartChar.source + nameChar.source + '*)?$'); //var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\nvar S_TAG = 0; //tag name offerring\n\nvar S_ATTR = 1; //attr name offerring \n\nvar S_ATTR_SPACE = 2; //attr name end and space offer\n\nvar S_EQ = 3; //=space?\n\nvar S_ATTR_NOQUOT_VALUE = 4; //attr value(no quot value only)\n\nvar S_ATTR_END = 5; //attr value end and no space(quot end)\n\nvar S_TAG_SPACE = 6; //(attr value end || tag end ) && (space offer)\n\nvar S_TAG_CLOSE = 7; //closed el<el />\n\nfunction XMLReader() {}\n\nXMLReader.prototype = {\n  parse: function parse(source, defaultNSMap, entityMap) {\n    var domBuilder = this.domBuilder;\n    domBuilder.startDocument();\n\n    _copy(defaultNSMap, defaultNSMap = {});\n\n    _parse(source, defaultNSMap, entityMap, domBuilder, this.errorHandler);\n\n    domBuilder.endDocument();\n  }\n};\n\nfunction _parse(source, defaultNSMapCopy, entityMap, domBuilder, errorHandler) {\n  function fixedFromCharCode(code) {\n    // String.prototype.fromCharCode does not supports\n    // > 2 bytes unicode chars directly\n    if (code > 0xffff) {\n      code -= 0x10000;\n      var surrogate1 = 0xd800 + (code >> 10),\n          surrogate2 = 0xdc00 + (code & 0x3ff);\n      return String.fromCharCode(surrogate1, surrogate2);\n    } else {\n      return String.fromCharCode(code);\n    }\n  }\n\n  function entityReplacer(a) {\n    var k = a.slice(1, -1);\n\n    if (k in entityMap) {\n      return entityMap[k];\n    } else if (k.charAt(0) === '#') {\n      return fixedFromCharCode(parseInt(k.substr(1).replace('x', '0x')));\n    } else {\n      errorHandler.error('entity not found:' + a);\n      return a;\n    }\n  }\n\n  function appendText(end) {\n    //has some bugs\n    if (end > start) {\n      var xt = source.substring(start, end).replace(/&#?\\w+;/g, entityReplacer);\n      locator && position(start);\n      domBuilder.characters(xt, 0, end - start);\n      start = end;\n    }\n  }\n\n  function position(p, m) {\n    while (p >= lineEnd && (m = linePattern.exec(source))) {\n      lineStart = m.index;\n      lineEnd = lineStart + m[0].length;\n      locator.lineNumber++; //console.log('line++:',locator,startPos,endPos)\n    }\n\n    locator.columnNumber = p - lineStart + 1;\n  }\n\n  var lineStart = 0;\n  var lineEnd = 0;\n  var linePattern = /.*(?:\\r\\n?|\\n)|.*$/g;\n  var locator = domBuilder.locator;\n  var parseStack = [{\n    currentNSMap: defaultNSMapCopy\n  }];\n  var closeMap = {};\n  var start = 0;\n\n  while (true) {\n    try {\n      var tagStart = source.indexOf('<', start);\n\n      if (tagStart < 0) {\n        if (!source.substr(start).match(/^\\s*$/)) {\n          var doc = domBuilder.doc;\n          var text = doc.createTextNode(source.substr(start));\n          doc.appendChild(text);\n          domBuilder.currentElement = text;\n        }\n\n        return;\n      }\n\n      if (tagStart > start) {\n        appendText(tagStart);\n      }\n\n      switch (source.charAt(tagStart + 1)) {\n        case '/':\n          var end = source.indexOf('>', tagStart + 3);\n          var tagName = source.substring(tagStart + 2, end);\n          var config = parseStack.pop();\n\n          if (end < 0) {\n            tagName = source.substring(tagStart + 2).replace(/[\\s<].*/, ''); //console.error('#@@@@@@'+tagName)\n\n            errorHandler.error(\"end tag name: \" + tagName + ' is not complete:' + config.tagName);\n            end = tagStart + 1 + tagName.length;\n          } else if (tagName.match(/\\s</)) {\n            tagName = tagName.replace(/[\\s<].*/, '');\n            errorHandler.error(\"end tag name: \" + tagName + ' maybe not complete');\n            end = tagStart + 1 + tagName.length;\n          } //console.error(parseStack.length,parseStack)\n          //console.error(config);\n\n\n          var localNSMap = config.localNSMap;\n          var endMatch = config.tagName == tagName;\n          var endIgnoreCaseMach = endMatch || config.tagName && config.tagName.toLowerCase() == tagName.toLowerCase();\n\n          if (endIgnoreCaseMach) {\n            domBuilder.endElement(config.uri, config.localName, tagName);\n\n            if (localNSMap) {\n              for (var prefix in localNSMap) {\n                domBuilder.endPrefixMapping(prefix);\n              }\n            }\n\n            if (!endMatch) {\n              errorHandler.fatalError(\"end tag name: \" + tagName + ' is not match the current start tagName:' + config.tagName);\n            }\n          } else {\n            parseStack.push(config);\n          }\n\n          end++;\n          break;\n        // end elment\n\n        case '?':\n          // <?...?>\n          locator && position(tagStart);\n          end = parseInstruction(source, tagStart, domBuilder);\n          break;\n\n        case '!':\n          // <!doctype,<![CDATA,<!--\n          locator && position(tagStart);\n          end = parseDCC(source, tagStart, domBuilder, errorHandler);\n          break;\n\n        default:\n          locator && position(tagStart);\n          var el = new ElementAttributes();\n          var currentNSMap = parseStack[parseStack.length - 1].currentNSMap; //elStartEnd\n\n          var end = parseElementStartPart(source, tagStart, el, currentNSMap, entityReplacer, errorHandler);\n          var len = el.length;\n\n          if (!el.closed && fixSelfClosed(source, end, el.tagName, closeMap)) {\n            el.closed = true;\n\n            if (!entityMap.nbsp) {\n              errorHandler.warning('unclosed xml attribute');\n            }\n          }\n\n          if (locator && len) {\n            var locator2 = copyLocator(locator, {}); //try{//attribute position fixed\n\n            for (var i = 0; i < len; i++) {\n              var a = el[i];\n              position(a.offset);\n              a.locator = copyLocator(locator, {});\n            } //}catch(e){console.error('@@@@@'+e)}\n\n\n            domBuilder.locator = locator2;\n\n            if (appendElement(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n\n            domBuilder.locator = locator;\n          } else {\n            if (appendElement(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n          }\n\n          if (el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed) {\n            end = parseHtmlSpecialContent(source, end, el.tagName, entityReplacer, domBuilder);\n          } else {\n            end++;\n          }\n\n      }\n    } catch (e) {\n      errorHandler.error('element parse error: ' + e); //errorHandler.error('element parse error: '+e);\n\n      end = -1; //throw e;\n    }\n\n    if (end > start) {\n      start = end;\n    } else {\n      //TODO: 这里有可能sax回退，有位置错误风险\n      appendText(Math.max(tagStart, start) + 1);\n    }\n  }\n}\n\nfunction copyLocator(f, t) {\n  t.lineNumber = f.lineNumber;\n  t.columnNumber = f.columnNumber;\n  return t;\n}\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\n\n\nfunction parseElementStartPart(source, start, el, currentNSMap, entityReplacer, errorHandler) {\n  var attrName;\n  var value;\n  var p = ++start;\n  var s = S_TAG; //status\n\n  while (true) {\n    var c = source.charAt(p);\n\n    switch (c) {\n      case '=':\n        if (s === S_ATTR) {\n          //attrName\n          attrName = source.slice(start, p);\n          s = S_EQ;\n        } else if (s === S_ATTR_SPACE) {\n          s = S_EQ;\n        } else {\n          //fatalError: equal must after attrName or space after attrName\n          throw new Error('attribute equal must after attrName');\n        }\n\n        break;\n\n      case '\\'':\n      case '\"':\n        if (s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n        ) {\n            //equal\n            if (s === S_ATTR) {\n              errorHandler.warning('attribute value must after \"=\"');\n              attrName = source.slice(start, p);\n            }\n\n            start = p + 1;\n            p = source.indexOf(c, start);\n\n            if (p > 0) {\n              value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n              el.add(attrName, value, start - 1);\n              s = S_ATTR_END;\n            } else {\n              //fatalError: no end quot match\n              throw new Error('attribute value no end \\'' + c + '\\' match');\n            }\n          } else if (s == S_ATTR_NOQUOT_VALUE) {\n          value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer); //console.log(attrName,value,start,p)\n\n          el.add(attrName, value, start); //console.dir(el)\n\n          errorHandler.warning('attribute \"' + attrName + '\" missed start quot(' + c + ')!!');\n          start = p + 1;\n          s = S_ATTR_END;\n        } else {\n          //fatalError: no equal before\n          throw new Error('attribute value must after \"=\"');\n        }\n\n        break;\n\n      case '/':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            s = S_TAG_CLOSE;\n            el.closed = true;\n\n          case S_ATTR_NOQUOT_VALUE:\n          case S_ATTR:\n          case S_ATTR_SPACE:\n            break;\n          //case S_EQ:\n\n          default:\n            throw new Error(\"attribute invalid close char('/')\");\n        }\n\n        break;\n\n      case '':\n        //end document\n        //throw new Error('unexpected end of input')\n        errorHandler.error('unexpected end of input');\n\n        if (s == S_TAG) {\n          el.setTagName(source.slice(start, p));\n        }\n\n        return p;\n\n      case '>':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            break;\n          //normal\n\n          case S_ATTR_NOQUOT_VALUE: //Compatible state\n\n          case S_ATTR:\n            value = source.slice(start, p);\n\n            if (value.slice(-1) === '/') {\n              el.closed = true;\n              value = value.slice(0, -1);\n            }\n\n          case S_ATTR_SPACE:\n            if (s === S_ATTR_SPACE) {\n              value = attrName;\n            }\n\n            if (s == S_ATTR_NOQUOT_VALUE) {\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n              el.add(attrName, value.replace(/&#?\\w+;/g, entityReplacer), start);\n            } else {\n              if (currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + value + '\" missed value!! \"' + value + '\" instead!!');\n              }\n\n              el.add(value, value, start);\n            }\n\n            break;\n\n          case S_EQ:\n            throw new Error('attribute value missed!!');\n        } //\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\n\n        return p;\n\n      /*xml space '\\x20' | #x9 | #xD | #xA; */\n\n      case \"\\x80\":\n        c = ' ';\n\n      default:\n        if (c <= ' ') {\n          //space\n          switch (s) {\n            case S_TAG:\n              el.setTagName(source.slice(start, p)); //tagName\n\n              s = S_TAG_SPACE;\n              break;\n\n            case S_ATTR:\n              attrName = source.slice(start, p);\n              s = S_ATTR_SPACE;\n              break;\n\n            case S_ATTR_NOQUOT_VALUE:\n              var value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n              el.add(attrName, value, start);\n\n            case S_ATTR_END:\n              s = S_TAG_SPACE;\n              break;\n            //case S_TAG_SPACE:\n            //case S_EQ:\n            //case S_ATTR_SPACE:\n            //\tvoid();break;\n            //case S_TAG_CLOSE:\n            //ignore warning\n          }\n        } else {\n          //not space\n          //S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n          //S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n          switch (s) {\n            //case S_TAG:void();break;\n            //case S_ATTR:void();break;\n            //case S_ATTR_NOQUOT_VALUE:void();break;\n            case S_ATTR_SPACE:\n              var tagName = el.tagName;\n\n              if (currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + attrName + '\" missed value!! \"' + attrName + '\" instead2!!');\n              }\n\n              el.add(attrName, attrName, start);\n              start = p;\n              s = S_ATTR;\n              break;\n\n            case S_ATTR_END:\n              errorHandler.warning('attribute space is required\"' + attrName + '\"!!');\n\n            case S_TAG_SPACE:\n              s = S_ATTR;\n              start = p;\n              break;\n\n            case S_EQ:\n              s = S_ATTR_NOQUOT_VALUE;\n              start = p;\n              break;\n\n            case S_TAG_CLOSE:\n              throw new Error(\"elements closed character '/' and '>' must be connected to\");\n          }\n        }\n\n    } //end outer switch\n    //console.log('p++',p)\n\n\n    p++;\n  }\n}\n/**\r\n * @return true if has new namespace define\r\n */\n\n\nfunction appendElement(el, domBuilder, currentNSMap) {\n  var tagName = el.tagName;\n  var localNSMap = null; //var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\n  var i = el.length;\n\n  while (i--) {\n    var a = el[i];\n    var qName = a.qName;\n    var value = a.value;\n    var nsp = qName.indexOf(':');\n\n    if (nsp > 0) {\n      var prefix = a.prefix = qName.slice(0, nsp);\n      var localName = qName.slice(nsp + 1);\n      var nsPrefix = prefix === 'xmlns' && localName;\n    } else {\n      localName = qName;\n      prefix = null;\n      nsPrefix = qName === 'xmlns' && '';\n    } //can not set prefix,because prefix !== ''\n\n\n    a.localName = localName; //prefix == null for no ns prefix attribute \n\n    if (nsPrefix !== false) {\n      //hack!!\n      if (localNSMap == null) {\n        localNSMap = {}; //console.log(currentNSMap,0)\n\n        _copy(currentNSMap, currentNSMap = {}); //console.log(currentNSMap,1)\n\n      }\n\n      currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n      a.uri = 'http://www.w3.org/2000/xmlns/';\n      domBuilder.startPrefixMapping(nsPrefix, value);\n    }\n  }\n\n  var i = el.length;\n\n  while (i--) {\n    a = el[i];\n    var prefix = a.prefix;\n\n    if (prefix) {\n      //no prefix attribute has no namespace\n      if (prefix === 'xml') {\n        a.uri = 'http://www.w3.org/XML/1998/namespace';\n      }\n\n      if (prefix !== 'xmlns') {\n        a.uri = currentNSMap[prefix || '']; //{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n      }\n    }\n  }\n\n  var nsp = tagName.indexOf(':');\n\n  if (nsp > 0) {\n    prefix = el.prefix = tagName.slice(0, nsp);\n    localName = el.localName = tagName.slice(nsp + 1);\n  } else {\n    prefix = null; //important!!\n\n    localName = el.localName = tagName;\n  } //no prefix element has default namespace\n\n\n  var ns = el.uri = currentNSMap[prefix || ''];\n  domBuilder.startElement(ns, localName, tagName, el); //endPrefixMapping and startPrefixMapping have not any help for dom builder\n  //localNSMap = null\n\n  if (el.closed) {\n    domBuilder.endElement(ns, localName, tagName);\n\n    if (localNSMap) {\n      for (prefix in localNSMap) {\n        domBuilder.endPrefixMapping(prefix);\n      }\n    }\n  } else {\n    el.currentNSMap = currentNSMap;\n    el.localNSMap = localNSMap; //parseStack.push(el);\n\n    return true;\n  }\n}\n\nfunction parseHtmlSpecialContent(source, elStartEnd, tagName, entityReplacer, domBuilder) {\n  if (/^(?:script|textarea)$/i.test(tagName)) {\n    var elEndStart = source.indexOf('</' + tagName + '>', elStartEnd);\n    var text = source.substring(elStartEnd + 1, elEndStart);\n\n    if (/[&<]/.test(text)) {\n      if (/^script$/i.test(tagName)) {\n        //if(!/\\]\\]>/.test(text)){\n        //lexHandler.startCDATA();\n        domBuilder.characters(text, 0, text.length); //lexHandler.endCDATA();\n\n        return elEndStart; //}\n      } //}else{//text area\n\n\n      text = text.replace(/&#?\\w+;/g, entityReplacer);\n      domBuilder.characters(text, 0, text.length);\n      return elEndStart; //}\n    }\n  }\n\n  return elStartEnd + 1;\n}\n\nfunction fixSelfClosed(source, elStartEnd, tagName, closeMap) {\n  //if(tagName in closeMap){\n  var pos = closeMap[tagName];\n\n  if (pos == null) {\n    //console.log(tagName)\n    pos = source.lastIndexOf('</' + tagName + '>');\n\n    if (pos < elStartEnd) {\n      //忘记闭合\n      pos = source.lastIndexOf('</' + tagName);\n    }\n\n    closeMap[tagName] = pos;\n  }\n\n  return pos < elStartEnd; //} \n}\n\nfunction _copy(source, target) {\n  for (var n in source) {\n    target[n] = source[n];\n  }\n}\n\nfunction parseDCC(source, start, domBuilder, errorHandler) {\n  //sure start with '<!'\n  var next = source.charAt(start + 2);\n\n  switch (next) {\n    case '-':\n      if (source.charAt(start + 3) === '-') {\n        var end = source.indexOf('-->', start + 4); //append comment source.substring(4,end)//<!--\n\n        if (end > start) {\n          domBuilder.comment(source, start + 4, end - start - 4);\n          return end + 3;\n        } else {\n          errorHandler.error(\"Unclosed comment\");\n          return -1;\n        }\n      } else {\n        //error\n        return -1;\n      }\n\n    default:\n      if (source.substr(start + 3, 6) == 'CDATA[') {\n        var end = source.indexOf(']]>', start + 9);\n        domBuilder.startCDATA();\n        domBuilder.characters(source, start + 9, end - start - 9);\n        domBuilder.endCDATA();\n        return end + 3;\n      } //<!DOCTYPE\n      //startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \n\n\n      var matchs = split(source, start);\n      var len = matchs.length;\n\n      if (len > 1 && /!doctype/i.test(matchs[0][0])) {\n        var name = matchs[1][0];\n        var pubid = len > 3 && /^public$/i.test(matchs[2][0]) && matchs[3][0];\n        var sysid = len > 4 && matchs[4][0];\n        var lastMatch = matchs[len - 1];\n        domBuilder.startDTD(name, pubid && pubid.replace(/^(['\"])(.*?)\\1$/, '$2'), sysid && sysid.replace(/^(['\"])(.*?)\\1$/, '$2'));\n        domBuilder.endDTD();\n        return lastMatch.index + lastMatch[0].length;\n      }\n\n  }\n\n  return -1;\n}\n\nfunction parseInstruction(source, start, domBuilder) {\n  var end = source.indexOf('?>', start);\n\n  if (end) {\n    var match = source.substring(start, end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\n    if (match) {\n      var len = match[0].length;\n      domBuilder.processingInstruction(match[1], match[2]);\n      return end + 2;\n    } else {\n      //error\n      return -1;\n    }\n  }\n\n  return -1;\n}\n/**\r\n * @param source\r\n */\n\n\nfunction ElementAttributes(source) {}\n\nElementAttributes.prototype = {\n  setTagName: function setTagName(tagName) {\n    if (!tagNamePattern.test(tagName)) {\n      throw new Error('invalid tagName:' + tagName);\n    }\n\n    this.tagName = tagName;\n  },\n  add: function add(qName, value, offset) {\n    if (!tagNamePattern.test(qName)) {\n      throw new Error('invalid attribute:' + qName);\n    }\n\n    this[this.length++] = {\n      qName: qName,\n      value: value,\n      offset: offset\n    };\n  },\n  length: 0,\n  getLocalName: function getLocalName(i) {\n    return this[i].localName;\n  },\n  getLocator: function getLocator(i) {\n    return this[i].locator;\n  },\n  getQName: function getQName(i) {\n    return this[i].qName;\n  },\n  getURI: function getURI(i) {\n    return this[i].uri;\n  },\n  getValue: function getValue(i) {\n    return this[i].value;\n  } //\t,getIndex:function(uri, localName)){\n  //\t\tif(localName){\n  //\t\t\t\n  //\t\t}else{\n  //\t\t\tvar qName = uri\n  //\t\t}\n  //\t},\n  //\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n  //\tgetType:function(uri,localName){}\n  //\tgetType:function(i){},\n\n};\n\nfunction _set_proto_(thiz, parent) {\n  thiz.__proto__ = parent;\n  return thiz;\n}\n\nif (!(_set_proto_({}, _set_proto_.prototype) instanceof _set_proto_)) {\n  _set_proto_ = function _set_proto_(thiz, parent) {\n    function p() {}\n\n    ;\n    p.prototype = parent;\n    p = new p();\n\n    for (parent in thiz) {\n      p[parent] = thiz[parent];\n    }\n\n    return p;\n  };\n}\n\nfunction split(source, start) {\n  var match;\n  var buf = [];\n  var reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n  reg.lastIndex = start;\n  reg.exec(source); //skip <\n\n  while (match = reg.exec(source)) {\n    buf.push(match);\n    if (match[1]) return buf;\n  }\n}\n\nexports.XMLReader = XMLReader;","var toUnsigned = require('../utils/bin').toUnsigned;\n\nvar tfdt = function tfdt(data) {\n  var result = {\n    version: data[0],\n    flags: new Uint8Array(data.subarray(1, 4)),\n    baseMediaDecodeTime: toUnsigned(data[4] << 24 | data[5] << 16 | data[6] << 8 | data[7])\n  };\n\n  if (result.version === 1) {\n    result.baseMediaDecodeTime *= Math.pow(2, 32);\n    result.baseMediaDecodeTime += toUnsigned(data[8] << 24 | data[9] << 16 | data[10] << 8 | data[11]);\n  }\n\n  return result;\n};\n\nmodule.exports = tfdt;","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Parse mpeg2 transport stream packets to extract basic timing information\n */\n'use strict';\n\nvar StreamTypes = require('../m2ts/stream-types.js');\n\nvar handleRollover = require('../m2ts/timestamp-rollover-stream.js').handleRollover;\n\nvar probe = {};\nprobe.ts = require('../m2ts/probe.js');\nprobe.aac = require('../aac/utils.js');\n\nvar ONE_SECOND_IN_TS = require('../utils/clock').ONE_SECOND_IN_TS;\n\nvar MP2T_PACKET_LENGTH = 188,\n    // bytes\nSYNC_BYTE = 0x47;\n/**\n * walks through segment data looking for pat and pmt packets to parse out\n * program map table information\n */\n\nvar parsePsi_ = function parsePsi_(bytes, pmt) {\n  var startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      packet,\n      type;\n\n  while (endIndex < bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pat':\n          if (!pmt.pid) {\n            pmt.pid = probe.ts.parsePat(packet);\n          }\n\n          break;\n\n        case 'pmt':\n          if (!pmt.table) {\n            pmt.table = probe.ts.parsePmt(packet);\n          }\n\n          break;\n\n        default:\n          break;\n      } // Found the pat and pmt, we can stop walking the segment\n\n\n      if (pmt.pid && pmt.table) {\n        return;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex++;\n    endIndex++;\n  }\n};\n/**\n * walks through the segment data from the start and end to get timing information\n * for the first and last audio pes packets\n */\n\n\nvar parseAudioPes_ = function parseAudioPes_(bytes, pmt, result) {\n  var startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      packet,\n      type,\n      pesType,\n      pusi,\n      parsed;\n  var endLoop = false; // Start walking from start of segment to get first audio packet\n\n  while (endIndex <= bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && (bytes[endIndex] === SYNC_BYTE || endIndex === bytes.byteLength)) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'audio' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n\n            if (parsed) {\n              parsed.type = 'audio';\n              result.audio.push(parsed);\n              endLoop = true;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex++;\n    endIndex++;\n  } // Start walking from end of segment to get last audio packet\n\n\n  endIndex = bytes.byteLength;\n  startIndex = endIndex - MP2T_PACKET_LENGTH;\n  endLoop = false;\n\n  while (startIndex >= 0) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && (bytes[endIndex] === SYNC_BYTE || endIndex === bytes.byteLength)) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'audio' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n\n            if (parsed) {\n              parsed.type = 'audio';\n              result.audio.push(parsed);\n              endLoop = true;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex -= MP2T_PACKET_LENGTH;\n      endIndex -= MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex--;\n    endIndex--;\n  }\n};\n/**\n * walks through the segment data from the start and end to get timing information\n * for the first and last video pes packets as well as timing information for the first\n * key frame.\n */\n\n\nvar parseVideoPes_ = function parseVideoPes_(bytes, pmt, result) {\n  var startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      packet,\n      type,\n      pesType,\n      pusi,\n      parsed,\n      frame,\n      i,\n      pes;\n  var endLoop = false;\n  var currentFrame = {\n    data: [],\n    size: 0\n  }; // Start walking from start of segment to get first video packet\n\n  while (endIndex < bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'video') {\n            if (pusi && !endLoop) {\n              parsed = probe.ts.parsePesTime(packet);\n\n              if (parsed) {\n                parsed.type = 'video';\n                result.video.push(parsed);\n                endLoop = true;\n              }\n            }\n\n            if (!result.firstKeyFrame) {\n              if (pusi) {\n                if (currentFrame.size !== 0) {\n                  frame = new Uint8Array(currentFrame.size);\n                  i = 0;\n\n                  while (currentFrame.data.length) {\n                    pes = currentFrame.data.shift();\n                    frame.set(pes, i);\n                    i += pes.byteLength;\n                  }\n\n                  if (probe.ts.videoPacketContainsKeyFrame(frame)) {\n                    var firstKeyFrame = probe.ts.parsePesTime(frame); // PTS/DTS may not be available. Simply *not* setting\n                    // the keyframe seems to work fine with HLS playback\n                    // and definitely preferable to a crash with TypeError...\n\n                    if (firstKeyFrame) {\n                      result.firstKeyFrame = firstKeyFrame;\n                      result.firstKeyFrame.type = 'video';\n                    } else {\n                      // eslint-disable-next-line\n                      console.warn('Failed to extract PTS/DTS from PES at first keyframe. ' + 'This could be an unusual TS segment, or else mux.js did not ' + 'parse your TS segment correctly. If you know your TS ' + 'segments do contain PTS/DTS on keyframes please file a bug ' + 'report! You can try ffprobe to double check for yourself.');\n                    }\n                  }\n\n                  currentFrame.size = 0;\n                }\n              }\n\n              currentFrame.data.push(packet);\n              currentFrame.size += packet.byteLength;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop && result.firstKeyFrame) {\n        break;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex++;\n    endIndex++;\n  } // Start walking from end of segment to get last video packet\n\n\n  endIndex = bytes.byteLength;\n  startIndex = endIndex - MP2T_PACKET_LENGTH;\n  endLoop = false;\n\n  while (startIndex >= 0) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'video' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n\n            if (parsed) {\n              parsed.type = 'video';\n              result.video.push(parsed);\n              endLoop = true;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex -= MP2T_PACKET_LENGTH;\n      endIndex -= MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex--;\n    endIndex--;\n  }\n};\n/**\n * Adjusts the timestamp information for the segment to account for\n * rollover and convert to seconds based on pes packet timescale (90khz clock)\n */\n\n\nvar adjustTimestamp_ = function adjustTimestamp_(segmentInfo, baseTimestamp) {\n  if (segmentInfo.audio && segmentInfo.audio.length) {\n    var audioBaseTimestamp = baseTimestamp;\n\n    if (typeof audioBaseTimestamp === 'undefined') {\n      audioBaseTimestamp = segmentInfo.audio[0].dts;\n    }\n\n    segmentInfo.audio.forEach(function (info) {\n      info.dts = handleRollover(info.dts, audioBaseTimestamp);\n      info.pts = handleRollover(info.pts, audioBaseTimestamp); // time in seconds\n\n      info.dtsTime = info.dts / ONE_SECOND_IN_TS;\n      info.ptsTime = info.pts / ONE_SECOND_IN_TS;\n    });\n  }\n\n  if (segmentInfo.video && segmentInfo.video.length) {\n    var videoBaseTimestamp = baseTimestamp;\n\n    if (typeof videoBaseTimestamp === 'undefined') {\n      videoBaseTimestamp = segmentInfo.video[0].dts;\n    }\n\n    segmentInfo.video.forEach(function (info) {\n      info.dts = handleRollover(info.dts, videoBaseTimestamp);\n      info.pts = handleRollover(info.pts, videoBaseTimestamp); // time in seconds\n\n      info.dtsTime = info.dts / ONE_SECOND_IN_TS;\n      info.ptsTime = info.pts / ONE_SECOND_IN_TS;\n    });\n\n    if (segmentInfo.firstKeyFrame) {\n      var frame = segmentInfo.firstKeyFrame;\n      frame.dts = handleRollover(frame.dts, videoBaseTimestamp);\n      frame.pts = handleRollover(frame.pts, videoBaseTimestamp); // time in seconds\n\n      frame.dtsTime = frame.dts / ONE_SECOND_IN_TS;\n      frame.ptsTime = frame.dts / ONE_SECOND_IN_TS;\n    }\n  }\n};\n/**\n * inspects the aac data stream for start and end time information\n */\n\n\nvar inspectAac_ = function inspectAac_(bytes) {\n  var endLoop = false,\n      audioCount = 0,\n      sampleRate = null,\n      timestamp = null,\n      frameSize = 0,\n      byteIndex = 0,\n      packet;\n\n  while (bytes.length - byteIndex >= 3) {\n    var type = probe.aac.parseType(bytes, byteIndex);\n\n    switch (type) {\n      case 'timed-metadata':\n        // Exit early because we don't have enough to parse\n        // the ID3 tag header\n        if (bytes.length - byteIndex < 10) {\n          endLoop = true;\n          break;\n        }\n\n        frameSize = probe.aac.parseId3TagSize(bytes, byteIndex); // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n\n        if (frameSize > bytes.length) {\n          endLoop = true;\n          break;\n        }\n\n        if (timestamp === null) {\n          packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n          timestamp = probe.aac.parseAacTimestamp(packet);\n        }\n\n        byteIndex += frameSize;\n        break;\n\n      case 'audio':\n        // Exit early because we don't have enough to parse\n        // the ADTS frame header\n        if (bytes.length - byteIndex < 7) {\n          endLoop = true;\n          break;\n        }\n\n        frameSize = probe.aac.parseAdtsSize(bytes, byteIndex); // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n\n        if (frameSize > bytes.length) {\n          endLoop = true;\n          break;\n        }\n\n        if (sampleRate === null) {\n          packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n          sampleRate = probe.aac.parseSampleRate(packet);\n        }\n\n        audioCount++;\n        byteIndex += frameSize;\n        break;\n\n      default:\n        byteIndex++;\n        break;\n    }\n\n    if (endLoop) {\n      return null;\n    }\n  }\n\n  if (sampleRate === null || timestamp === null) {\n    return null;\n  }\n\n  var audioTimescale = ONE_SECOND_IN_TS / sampleRate;\n  var result = {\n    audio: [{\n      type: 'audio',\n      dts: timestamp,\n      pts: timestamp\n    }, {\n      type: 'audio',\n      dts: timestamp + audioCount * 1024 * audioTimescale,\n      pts: timestamp + audioCount * 1024 * audioTimescale\n    }]\n  };\n  return result;\n};\n/**\n * inspects the transport stream segment data for start and end time information\n * of the audio and video tracks (when present) as well as the first key frame's\n * start time.\n */\n\n\nvar inspectTs_ = function inspectTs_(bytes) {\n  var pmt = {\n    pid: null,\n    table: null\n  };\n  var result = {};\n  parsePsi_(bytes, pmt);\n\n  for (var pid in pmt.table) {\n    if (pmt.table.hasOwnProperty(pid)) {\n      var type = pmt.table[pid];\n\n      switch (type) {\n        case StreamTypes.H264_STREAM_TYPE:\n          result.video = [];\n          parseVideoPes_(bytes, pmt, result);\n\n          if (result.video.length === 0) {\n            delete result.video;\n          }\n\n          break;\n\n        case StreamTypes.ADTS_STREAM_TYPE:\n          result.audio = [];\n          parseAudioPes_(bytes, pmt, result);\n\n          if (result.audio.length === 0) {\n            delete result.audio;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n\n  return result;\n};\n/**\n * Inspects segment byte data and returns an object with start and end timing information\n *\n * @param {Uint8Array} bytes The segment byte data\n * @param {Number} baseTimestamp Relative reference timestamp used when adjusting frame\n *  timestamps for rollover. This value must be in 90khz clock.\n * @return {Object} Object containing start and end frame timing info of segment.\n */\n\n\nvar inspect = function inspect(bytes, baseTimestamp) {\n  var isAacData = probe.aac.isLikelyAacData(bytes);\n  var result;\n\n  if (isAacData) {\n    result = inspectAac_(bytes);\n  } else {\n    result = inspectTs_(bytes);\n  }\n\n  if (!result || !result.audio && !result.video) {\n    return null;\n  }\n\n  adjustTimestamp_(result, baseTimestamp);\n  return result;\n};\n\nmodule.exports = {\n  inspect: inspect,\n  parseAudioPes_: parseAudioPes_\n};","// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\nfunction keyCode(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === typeof searchInput) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode;\n    if (hasKeyCode) searchInput = hasKeyCode;\n  } // Numbers\n\n\n  if ('number' === typeof searchInput) return names[searchInput]; // Everything else (cast to string)\n\n  var search = String(searchInput); // check codes\n\n  var foundNamedKey = codes[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey; // check aliases\n\n  var foundNamedKey = aliases[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey; // weird character?\n\n  if (search.length === 1) return search.charCodeAt(0);\n  return undefined;\n}\n/**\n * Compares a keyboard event with a given keyCode or keyName.\n *\n * @param {Event} event Keyboard event that should be tested\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Boolean}\n * @api public\n */\n\n\nkeyCode.isEventKey = function isEventKey(event, nameOrCode) {\n  if (event && 'object' === typeof event) {\n    var keyCode = event.which || event.keyCode || event.charCode;\n\n    if (keyCode === null || keyCode === undefined) {\n      return false;\n    }\n\n    if (typeof nameOrCode === 'string') {\n      // check codes\n      var foundNamedKey = codes[nameOrCode.toLowerCase()];\n\n      if (foundNamedKey) {\n        return foundNamedKey === keyCode;\n      } // check aliases\n\n\n      var foundNamedKey = aliases[nameOrCode.toLowerCase()];\n\n      if (foundNamedKey) {\n        return foundNamedKey === keyCode;\n      }\n    } else if (typeof nameOrCode === 'number') {\n      return nameOrCode === keyCode;\n    }\n\n    return false;\n  }\n};\n\nexports = module.exports = keyCode;\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'left command': 91,\n  'right command': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222\n}; // Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '⇧': 16,\n  '⌥': 18,\n  '⌃': 17,\n  '⌘': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'spacebar': 32,\n  'pgup': 33,\n  'pgdn': 34,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n};\n/*!\n * Programatically add the following\n */\n// lower case chars\n\nfor (i = 97; i < 123; i++) {\n  codes[String.fromCharCode(i)] = i - 32;\n} // numbers\n\n\nfor (var i = 48; i < 58; i++) {\n  codes[i - 48] = i;\n} // function keys\n\n\nfor (i = 1; i < 13; i++) {\n  codes['f' + i] = i + 111;\n} // numpad keys\n\n\nfor (i = 0; i < 10; i++) {\n  codes['numpad ' + i] = i + 96;\n}\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\n\nvar names = exports.names = exports.title = {}; // title for backward compat\n// Create reverse mapping\n\nfor (i in codes) {\n  names[codes[i]] = i;\n} // Add aliases\n\n\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias];\n}","/* The MIT License (MIT)\n\nCopyright (c) 2014-2015 Benoit Tremblay <trembl.ben@gmail.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/*global define, YT*/\n(function (root, factory) {\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\n    var videojs = require('video.js');\n\n    module.exports = factory(videojs.default || videojs);\n  } else if (typeof define === 'function' && define.amd) {\n    define(['videojs'], function (videojs) {\n      return root.Youtube = factory(videojs);\n    });\n  } else {\n    root.Youtube = factory(root.videojs);\n  }\n})(this, function (videojs) {\n  'use strict';\n\n  var _isOnMobile = videojs.browser.IS_IOS || videojs.browser.IS_NATIVE_ANDROID;\n\n  var Tech = videojs.getTech('Tech');\n  var Youtube = videojs.extend(Tech, {\n    constructor: function constructor(options, ready) {\n      Tech.call(this, options, ready);\n      this.setPoster(options.poster);\n      this.setSrc(this.options_.source, true); // Set the vjs-youtube class to the player\n      // Parent is not set yet so we have to wait a tick\n\n      this.setTimeout(function () {\n        if (this.el_) {\n          this.el_.parentNode.className += ' vjs-youtube';\n\n          if (_isOnMobile) {\n            this.el_.parentNode.className += ' vjs-youtube-mobile';\n          }\n\n          if (Youtube.isApiReady) {\n            this.initYTPlayer();\n          } else {\n            Youtube.apiReadyQueue.push(this);\n          }\n        }\n      }.bind(this));\n    },\n    dispose: function dispose() {\n      if (this.ytPlayer) {\n        //Dispose of the YouTube Player\n        if (this.ytPlayer.stopVideo) {\n          this.ytPlayer.stopVideo();\n        }\n\n        if (this.ytPlayer.destroy) {\n          this.ytPlayer.destroy();\n        }\n      } else {\n        //YouTube API hasn't finished loading or the player is already disposed\n        var index = Youtube.apiReadyQueue.indexOf(this);\n\n        if (index !== -1) {\n          Youtube.apiReadyQueue.splice(index, 1);\n        }\n      }\n\n      this.ytPlayer = null;\n      this.el_.parentNode.className = this.el_.parentNode.className.replace(' vjs-youtube', '').replace(' vjs-youtube-mobile', '');\n      this.el_.parentNode.removeChild(this.el_); //Needs to be called after the YouTube player is destroyed, otherwise there will be a null reference exception\n\n      Tech.prototype.dispose.call(this);\n    },\n    createEl: function createEl() {\n      var div = document.createElement('div');\n      div.setAttribute('id', this.options_.techId);\n      div.setAttribute('style', 'width:100%;height:100%;top:0;left:0;position:absolute');\n      div.setAttribute('class', 'vjs-tech');\n      var divWrapper = document.createElement('div');\n      divWrapper.appendChild(div);\n\n      if (!_isOnMobile && !this.options_.ytControls) {\n        var divBlocker = document.createElement('div');\n        divBlocker.setAttribute('class', 'vjs-iframe-blocker');\n        divBlocker.setAttribute('style', 'position:absolute;top:0;left:0;width:100%;height:100%'); // In case the blocker is still there and we want to pause\n\n        divBlocker.onclick = function () {\n          this.pause();\n        }.bind(this);\n\n        divWrapper.appendChild(divBlocker);\n      }\n\n      return divWrapper;\n    },\n    initYTPlayer: function initYTPlayer() {\n      var playerVars = {\n        controls: 0,\n        modestbranding: 1,\n        rel: 0,\n        showinfo: 0,\n        loop: this.options_.loop ? 1 : 0\n      }; // Let the user set any YouTube parameter\n      // https://developers.google.com/youtube/player_parameters?playerVersion=HTML5#Parameters\n      // To use YouTube controls, you must use ytControls instead\n      // To use the loop or autoplay, use the video.js settings\n\n      if (typeof this.options_.autohide !== 'undefined') {\n        playerVars.autohide = this.options_.autohide;\n      }\n\n      if (typeof this.options_['cc_load_policy'] !== 'undefined') {\n        playerVars['cc_load_policy'] = this.options_['cc_load_policy'];\n      }\n\n      if (typeof this.options_.ytControls !== 'undefined') {\n        playerVars.controls = this.options_.ytControls;\n      }\n\n      if (typeof this.options_.disablekb !== 'undefined') {\n        playerVars.disablekb = this.options_.disablekb;\n      }\n\n      if (typeof this.options_.color !== 'undefined') {\n        playerVars.color = this.options_.color;\n      }\n\n      if (!playerVars.controls) {\n        // Let video.js handle the fullscreen unless it is the YouTube native controls\n        playerVars.fs = 0;\n      } else if (typeof this.options_.fs !== 'undefined') {\n        playerVars.fs = this.options_.fs;\n      }\n\n      if (this.options_.source.src.indexOf('end=') !== -1) {\n        var srcEndTime = this.options_.source.src.match(/end=([0-9]*)/);\n        this.options_.end = parseInt(srcEndTime[1]);\n      }\n\n      if (typeof this.options_.end !== 'undefined') {\n        playerVars.end = this.options_.end;\n      }\n\n      if (typeof this.options_.hl !== 'undefined') {\n        playerVars.hl = this.options_.hl;\n      } else if (typeof this.options_.language !== 'undefined') {\n        // Set the YouTube player on the same language than video.js\n        playerVars.hl = this.options_.language.substr(0, 2);\n      }\n\n      if (typeof this.options_['iv_load_policy'] !== 'undefined') {\n        playerVars['iv_load_policy'] = this.options_['iv_load_policy'];\n      }\n\n      if (typeof this.options_.list !== 'undefined') {\n        playerVars.list = this.options_.list;\n      } else if (this.url && typeof this.url.listId !== 'undefined') {\n        playerVars.list = this.url.listId;\n      }\n\n      if (typeof this.options_.listType !== 'undefined') {\n        playerVars.listType = this.options_.listType;\n      }\n\n      if (typeof this.options_.modestbranding !== 'undefined') {\n        playerVars.modestbranding = this.options_.modestbranding;\n      }\n\n      if (typeof this.options_.playlist !== 'undefined') {\n        playerVars.playlist = this.options_.playlist;\n      }\n\n      if (typeof this.options_.playsinline !== 'undefined') {\n        playerVars.playsinline = this.options_.playsinline;\n      }\n\n      if (typeof this.options_.rel !== 'undefined') {\n        playerVars.rel = this.options_.rel;\n      }\n\n      if (typeof this.options_.showinfo !== 'undefined') {\n        playerVars.showinfo = this.options_.showinfo;\n      }\n\n      if (this.options_.source.src.indexOf('start=') !== -1) {\n        var srcStartTime = this.options_.source.src.match(/start=([0-9]*)/);\n        this.options_.start = parseInt(srcStartTime[1]);\n      }\n\n      if (typeof this.options_.start !== 'undefined') {\n        playerVars.start = this.options_.start;\n      }\n\n      if (typeof this.options_.theme !== 'undefined') {\n        playerVars.theme = this.options_.theme;\n      } // Allow undocumented options to be passed along via customVars\n\n\n      if (typeof this.options_.customVars !== 'undefined') {\n        var customVars = this.options_.customVars;\n        Object.keys(customVars).forEach(function (key) {\n          playerVars[key] = customVars[key];\n        });\n      }\n\n      this.activeVideoId = this.url ? this.url.videoId : null;\n      this.activeList = playerVars.list;\n      var playerConfig = {\n        videoId: this.activeVideoId,\n        playerVars: playerVars,\n        events: {\n          onReady: this.onPlayerReady.bind(this),\n          onPlaybackQualityChange: this.onPlayerPlaybackQualityChange.bind(this),\n          onPlaybackRateChange: this.onPlayerPlaybackRateChange.bind(this),\n          onStateChange: this.onPlayerStateChange.bind(this),\n          onVolumeChange: this.onPlayerVolumeChange.bind(this),\n          onError: this.onPlayerError.bind(this)\n        }\n      };\n\n      if (typeof this.options_.enablePrivacyEnhancedMode !== 'undefined' && this.options_.enablePrivacyEnhancedMode) {\n        playerConfig.host = 'https://www.youtube-nocookie.com';\n      }\n\n      this.ytPlayer = new YT.Player(this.options_.techId, playerConfig);\n    },\n    onPlayerReady: function onPlayerReady() {\n      if (this.options_.muted) {\n        this.ytPlayer.mute();\n      }\n\n      var playbackRates = this.ytPlayer.getAvailablePlaybackRates();\n\n      if (playbackRates.length > 1) {\n        this.featuresPlaybackRate = true;\n      }\n\n      this.playerReady_ = true;\n      this.triggerReady();\n\n      if (this.playOnReady) {\n        this.play();\n      } else if (this.cueOnReady) {\n        this.cueVideoById_(this.url.videoId);\n        this.activeVideoId = this.url.videoId;\n      }\n    },\n    onPlayerPlaybackQualityChange: function onPlayerPlaybackQualityChange() {},\n    onPlayerPlaybackRateChange: function onPlayerPlaybackRateChange() {\n      this.trigger('ratechange');\n    },\n    onPlayerStateChange: function onPlayerStateChange(e) {\n      var state = e.data;\n\n      if (state === this.lastState || this.errorNumber) {\n        return;\n      }\n\n      this.lastState = state;\n\n      switch (state) {\n        case -1:\n          this.trigger('loadstart');\n          this.trigger('loadedmetadata');\n          this.trigger('durationchange');\n          this.trigger('ratechange');\n          break;\n\n        case YT.PlayerState.ENDED:\n          this.trigger('ended');\n          break;\n\n        case YT.PlayerState.PLAYING:\n          this.trigger('timeupdate');\n          this.trigger('durationchange');\n          this.trigger('playing');\n          this.trigger('play');\n\n          if (this.isSeeking) {\n            this.onSeeked();\n          }\n\n          break;\n\n        case YT.PlayerState.PAUSED:\n          this.trigger('canplay');\n\n          if (this.isSeeking) {\n            this.onSeeked();\n          } else {\n            this.trigger('pause');\n          }\n\n          break;\n\n        case YT.PlayerState.BUFFERING:\n          this.player_.trigger('timeupdate');\n          this.player_.trigger('waiting');\n          break;\n      }\n    },\n    onPlayerVolumeChange: function onPlayerVolumeChange() {\n      this.trigger('volumechange');\n    },\n    onPlayerError: function onPlayerError(e) {\n      this.errorNumber = e.data;\n      this.trigger('pause');\n      this.trigger('error');\n    },\n    error: function error() {\n      var code = 1000 + this.errorNumber; // as smaller codes are reserved\n\n      switch (this.errorNumber) {\n        case 5:\n          return {\n            code: code,\n            message: 'Error while trying to play the video'\n          };\n\n        case 2:\n        case 100:\n          return {\n            code: code,\n            message: 'Unable to find the video'\n          };\n\n        case 101:\n        case 150:\n          return {\n            code: code,\n            message: 'Playback on other Websites has been disabled by the video owner.'\n          };\n      }\n\n      return {\n        code: code,\n        message: 'YouTube unknown error (' + this.errorNumber + ')'\n      };\n    },\n    loadVideoById_: function loadVideoById_(id) {\n      var options = {\n        videoId: id\n      };\n\n      if (this.options_.start) {\n        options.startSeconds = this.options_.start;\n      }\n\n      if (this.options_.end) {\n        options.endSeconds = this.options_.end;\n      }\n\n      this.ytPlayer.loadVideoById(options);\n    },\n    cueVideoById_: function cueVideoById_(id) {\n      var options = {\n        videoId: id\n      };\n\n      if (this.options_.start) {\n        options.startSeconds = this.options_.start;\n      }\n\n      if (this.options_.end) {\n        options.endSeconds = this.options_.end;\n      }\n\n      this.ytPlayer.cueVideoById(options);\n    },\n    src: function src(_src) {\n      if (_src) {\n        this.setSrc({\n          src: _src\n        });\n      }\n\n      return this.source;\n    },\n    poster: function poster() {\n      // You can't start programmaticlly a video with a mobile\n      // through the iframe so we hide the poster and the play button (with CSS)\n      if (_isOnMobile) {\n        return null;\n      }\n\n      return this.poster_;\n    },\n    setPoster: function setPoster(poster) {\n      this.poster_ = poster;\n    },\n    setSrc: function setSrc(source) {\n      if (!source || !source.src) {\n        return;\n      }\n\n      delete this.errorNumber;\n      this.source = source;\n      this.url = Youtube.parseUrl(source.src);\n\n      if (!this.options_.poster) {\n        if (this.url.videoId) {\n          // Set the low resolution first\n          this.poster_ = 'https://img.youtube.com/vi/' + this.url.videoId + '/0.jpg';\n          this.trigger('posterchange'); // Check if their is a high res\n\n          this.checkHighResPoster();\n        }\n      }\n\n      if (this.options_.autoplay && !_isOnMobile) {\n        if (this.isReady_) {\n          this.play();\n        } else {\n          this.playOnReady = true;\n        }\n      } else if (this.activeVideoId !== this.url.videoId) {\n        if (this.isReady_) {\n          this.cueVideoById_(this.url.videoId);\n          this.activeVideoId = this.url.videoId;\n        } else {\n          this.cueOnReady = true;\n        }\n      }\n    },\n    autoplay: function autoplay() {\n      return this.options_.autoplay;\n    },\n    setAutoplay: function setAutoplay(val) {\n      this.options_.autoplay = val;\n    },\n    loop: function loop() {\n      return this.options_.loop;\n    },\n    setLoop: function setLoop(val) {\n      this.options_.loop = val;\n    },\n    play: function play() {\n      if (!this.url || !this.url.videoId) {\n        return;\n      }\n\n      this.wasPausedBeforeSeek = false;\n\n      if (this.isReady_) {\n        if (this.url.listId) {\n          if (this.activeList === this.url.listId) {\n            this.ytPlayer.playVideo();\n          } else {\n            this.ytPlayer.loadPlaylist(this.url.listId);\n            this.activeList = this.url.listId;\n          }\n        }\n\n        if (this.activeVideoId === this.url.videoId) {\n          this.ytPlayer.playVideo();\n        } else {\n          this.loadVideoById_(this.url.videoId);\n          this.activeVideoId = this.url.videoId;\n        }\n      } else {\n        this.trigger('waiting');\n        this.playOnReady = true;\n      }\n    },\n    pause: function pause() {\n      if (this.ytPlayer) {\n        this.ytPlayer.pauseVideo();\n      }\n    },\n    paused: function paused() {\n      return this.ytPlayer ? this.lastState !== YT.PlayerState.PLAYING && this.lastState !== YT.PlayerState.BUFFERING : true;\n    },\n    currentTime: function currentTime() {\n      return this.ytPlayer ? this.ytPlayer.getCurrentTime() : 0;\n    },\n    setCurrentTime: function setCurrentTime(seconds) {\n      if (this.lastState === YT.PlayerState.PAUSED) {\n        this.timeBeforeSeek = this.currentTime();\n      }\n\n      if (!this.isSeeking) {\n        this.wasPausedBeforeSeek = this.paused();\n      }\n\n      this.ytPlayer.seekTo(seconds, true);\n      this.trigger('timeupdate');\n      this.trigger('seeking');\n      this.isSeeking = true; // A seek event during pause does not return an event to trigger a seeked event,\n      // so run an interval timer to look for the currentTime to change\n\n      if (this.lastState === YT.PlayerState.PAUSED && this.timeBeforeSeek !== seconds) {\n        clearInterval(this.checkSeekedInPauseInterval);\n        this.checkSeekedInPauseInterval = setInterval(function () {\n          if (this.lastState !== YT.PlayerState.PAUSED || !this.isSeeking) {\n            // If something changed while we were waiting for the currentTime to change,\n            //  clear the interval timer\n            clearInterval(this.checkSeekedInPauseInterval);\n          } else if (this.currentTime() !== this.timeBeforeSeek) {\n            this.trigger('timeupdate');\n            this.onSeeked();\n          }\n        }.bind(this), 250);\n      }\n    },\n    seeking: function seeking() {\n      return this.isSeeking;\n    },\n    seekable: function seekable() {\n      if (!this.ytPlayer) {\n        return videojs.createTimeRange();\n      }\n\n      return videojs.createTimeRange(0, this.ytPlayer.getDuration());\n    },\n    onSeeked: function onSeeked() {\n      clearInterval(this.checkSeekedInPauseInterval);\n      this.isSeeking = false;\n\n      if (this.wasPausedBeforeSeek) {\n        this.pause();\n      }\n\n      this.trigger('seeked');\n    },\n    playbackRate: function playbackRate() {\n      return this.ytPlayer ? this.ytPlayer.getPlaybackRate() : 1;\n    },\n    setPlaybackRate: function setPlaybackRate(suggestedRate) {\n      if (!this.ytPlayer) {\n        return;\n      }\n\n      this.ytPlayer.setPlaybackRate(suggestedRate);\n    },\n    duration: function duration() {\n      return this.ytPlayer ? this.ytPlayer.getDuration() : 0;\n    },\n    currentSrc: function currentSrc() {\n      return this.source && this.source.src;\n    },\n    ended: function ended() {\n      return this.ytPlayer ? this.lastState === YT.PlayerState.ENDED : false;\n    },\n    volume: function volume() {\n      return this.ytPlayer ? this.ytPlayer.getVolume() / 100.0 : 1;\n    },\n    setVolume: function setVolume(percentAsDecimal) {\n      if (!this.ytPlayer) {\n        return;\n      }\n\n      this.ytPlayer.setVolume(percentAsDecimal * 100.0);\n    },\n    muted: function muted() {\n      return this.ytPlayer ? this.ytPlayer.isMuted() : false;\n    },\n    setMuted: function setMuted(mute) {\n      if (!this.ytPlayer) {\n        return;\n      } else {\n        this.muted(true);\n      }\n\n      if (mute) {\n        this.ytPlayer.mute();\n      } else {\n        this.ytPlayer.unMute();\n      }\n\n      this.setTimeout(function () {\n        this.trigger('volumechange');\n      }, 50);\n    },\n    buffered: function buffered() {\n      if (!this.ytPlayer || !this.ytPlayer.getVideoLoadedFraction) {\n        return videojs.createTimeRange();\n      }\n\n      var bufferedEnd = this.ytPlayer.getVideoLoadedFraction() * this.ytPlayer.getDuration();\n      return videojs.createTimeRange(0, bufferedEnd);\n    },\n    // TODO: Can we really do something with this on YouTUbe?\n    preload: function preload() {},\n    load: function load() {},\n    reset: function reset() {},\n    networkState: function networkState() {\n      if (!this.ytPlayer) {\n        return 0; //NETWORK_EMPTY\n      }\n\n      switch (this.ytPlayer.getPlayerState()) {\n        case -1:\n          //unstarted\n          return 0;\n        //NETWORK_EMPTY\n\n        case 3:\n          //buffering\n          return 2;\n        //NETWORK_LOADING\n\n        default:\n          return 1;\n        //NETWORK_IDLE\n      }\n    },\n    readyState: function readyState() {\n      if (!this.ytPlayer) {\n        return 0; //HAVE_NOTHING\n      }\n\n      switch (this.ytPlayer.getPlayerState()) {\n        case -1:\n          //unstarted\n          return 0;\n        //HAVE_NOTHING\n\n        case 5:\n          //video cued\n          return 1;\n        //HAVE_METADATA\n\n        case 3:\n          //buffering\n          return 2;\n        //HAVE_CURRENT_DATA\n\n        default:\n          return 4;\n        //HAVE_ENOUGH_DATA\n      }\n    },\n    supportsFullScreen: function supportsFullScreen() {\n      return document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled;\n    },\n    // Tries to get the highest resolution thumbnail available for the video\n    checkHighResPoster: function checkHighResPoster() {\n      var uri = 'https://img.youtube.com/vi/' + this.url.videoId + '/maxresdefault.jpg';\n\n      try {\n        var image = new Image();\n\n        image.onload = function () {\n          // Onload may still be called if YouTube returns the 120x90 error thumbnail\n          if ('naturalHeight' in image) {\n            if (image.naturalHeight <= 90 || image.naturalWidth <= 120) {\n              return;\n            }\n          } else if (image.height <= 90 || image.width <= 120) {\n            return;\n          }\n\n          this.poster_ = uri;\n          this.trigger('posterchange');\n        }.bind(this);\n\n        image.onerror = function () {};\n\n        image.src = uri;\n      } catch (e) {}\n    }\n  });\n\n  Youtube.isSupported = function () {\n    return true;\n  };\n\n  Youtube.canPlaySource = function (e) {\n    return Youtube.canPlayType(e.type);\n  };\n\n  Youtube.canPlayType = function (e) {\n    return e === 'video/youtube';\n  };\n\n  Youtube.parseUrl = function (url) {\n    var result = {\n      videoId: null\n    };\n    var regex = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n    var match = url.match(regex);\n\n    if (match && match[2].length === 11) {\n      result.videoId = match[2];\n    }\n\n    var regPlaylist = /[?&]list=([^#\\&\\?]+)/;\n    match = url.match(regPlaylist);\n\n    if (match && match[1]) {\n      result.listId = match[1];\n    }\n\n    return result;\n  };\n\n  function apiLoaded() {\n    YT.ready(function () {\n      Youtube.isApiReady = true;\n\n      for (var i = 0; i < Youtube.apiReadyQueue.length; ++i) {\n        Youtube.apiReadyQueue[i].initYTPlayer();\n      }\n    });\n  }\n\n  function loadScript(src, callback) {\n    var loaded = false;\n    var tag = document.createElement('script');\n    var firstScriptTag = document.getElementsByTagName('script')[0];\n\n    if (!firstScriptTag) {\n      // when loaded in jest without jsdom setup it doesn't get any element.\n      // In jest it doesn't really make sense to do anything, because no one is watching youtube in jest\n      return;\n    }\n\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n    tag.onload = function () {\n      if (!loaded) {\n        loaded = true;\n        callback();\n      }\n    };\n\n    tag.onreadystatechange = function () {\n      if (!loaded && (this.readyState === 'complete' || this.readyState === 'loaded')) {\n        loaded = true;\n        callback();\n      }\n    };\n\n    tag.src = src;\n  }\n\n  function injectCss() {\n    var css = // iframe blocker to catch mouse events\n    '.vjs-youtube .vjs-iframe-blocker { display: none; }' + '.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }' + '.vjs-youtube .vjs-poster { background-size: cover; }' + '.vjs-youtube-mobile .vjs-big-play-button { display: none; }';\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    head.appendChild(style);\n  }\n\n  Youtube.apiReadyQueue = [];\n\n  if (typeof document !== 'undefined') {\n    loadScript('https://www.youtube.com/iframe_api', apiLoaded);\n    injectCss();\n  } // Older versions of VJS5 doesn't have the registerTech function\n\n\n  if (typeof videojs.registerTech !== 'undefined') {\n    videojs.registerTech('Youtube', Youtube);\n  } else {\n    videojs.registerComponent('Youtube', Youtube);\n  }\n});","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var topLevel = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {};\n\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n  doccy = document;\n} else {\n  doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n  if (!doccy) {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n  }\n}\n\nmodule.exports = doccy;","'use strict';\nvar $ = require('../internals/export');\nvar $reduceRight = require('../internals/array-reduce').right;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduceRight');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduceRight` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH || CHROME_BUG }, {\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduceRight(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var SubtitlesOctopus = function SubtitlesOctopus(options) {\n  var supportsWebAssembly = false;\n\n  try {\n    if (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n      var _module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n\n      if (_module instanceof WebAssembly.Module) supportsWebAssembly = new WebAssembly.Instance(_module) instanceof WebAssembly.Instance;\n    }\n  } catch (e) {}\n\n  console.log(\"WebAssembly support detected: \" + (supportsWebAssembly ? \"yes\" : \"no\"));\n  var self = this;\n  self.canvas = options.canvas; // HTML canvas element (optional if video specified)\n\n  self.lossyRender = options.lossyRender; // Speedup render for heavy subs\n\n  self.isOurCanvas = false; // (internal) we created canvas and manage it\n\n  self.video = options.video; // HTML video element (optional if canvas specified)\n\n  self.canvasParent = null; // (internal) HTML canvas parent element\n\n  self.fonts = options.fonts || []; // Array with links to fonts used in sub (optional)\n\n  self.availableFonts = options.availableFonts || []; // Object with all available fonts (optional). Key is font name in lower case, value is link: {\"arial\": \"/font1.ttf\"}\n\n  self.onReadyEvent = options.onReady; // Function called when SubtitlesOctopus is ready (optional)\n\n  if (supportsWebAssembly) {\n    self.workerUrl = options.workerUrl || 'subtitles-octopus-worker.js'; // Link to WebAssembly worker\n  } else {\n    self.workerUrl = options.legacyWorkerUrl || 'subtitles-octopus-worker-legacy.js'; // Link to legacy worker\n  }\n\n  self.subUrl = options.subUrl; // Link to sub file (optional if subContent specified)\n\n  self.subContent = options.subContent || null; // Sub content (optional if subUrl specified)\n\n  self.onErrorEvent = options.onError; // Function called in case of critical error meaning sub wouldn't be shown and you should use alternative method (for instance it occurs if browser doesn't support web workers).\n\n  self.debug = options.debug || false; // When debug enabled, some performance info printed in console.\n\n  self.lastRenderTime = 0; // (internal) Last time we got some frame from worker\n\n  self.pixelRatio = window.devicePixelRatio || 1; // (internal) Device pixel ratio (for high dpi devices)\n\n  self.timeOffset = options.timeOffset || 0; // Time offset would be applied to currentTime from video (option)\n\n  self.hasAlphaBug = false;\n\n  (function () {\n    if (typeof ImageData.prototype.constructor === 'function') {\n      try {\n        // try actually calling ImageData, as on some browsers it's reported\n        // as existing but calling it errors out as \"TypeError: Illegal constructor\"\n        new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n        return;\n      } catch (e) {\n        console.log(\"detected that ImageData is not constructable despite browser saying so\");\n      }\n    }\n\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n\n    window.ImageData = function () {\n      var i = 0;\n\n      if (arguments[0] instanceof Uint8ClampedArray) {\n        var data = arguments[i++];\n      }\n\n      var width = arguments[i++];\n      var height = arguments[i];\n      var imageData = ctx.createImageData(width, height);\n      if (data) imageData.data.set(data);\n      return imageData;\n    };\n  })();\n\n  self.workerError = function (error) {\n    console.error('Worker error: ', error);\n\n    if (self.onErrorEvent) {\n      self.onErrorEvent(error);\n    }\n\n    if (!self.debug) {\n      self.dispose();\n      throw new Error('Worker error: ' + error);\n    }\n  }; // Not tested for repeated usage yet\n\n\n  self.init = function () {\n    if (!window.Worker) {\n      self.workerError('worker not supported');\n      return;\n    } // Worker\n\n\n    if (!self.worker) {\n      self.worker = new Worker(self.workerUrl);\n      self.worker.onmessage = self.onWorkerMessage;\n      self.worker.onerror = self.workerError;\n    }\n\n    self.workerActive = false;\n    self.createCanvas();\n    self.setVideo(options.video);\n    self.setSubUrl(options.subUrl);\n    self.worker.postMessage({\n      target: 'worker-init',\n      width: self.canvas.width,\n      height: self.canvas.height,\n      URL: document.URL,\n      currentScript: self.workerUrl,\n      preMain: true,\n      fastRender: self.lossyRender,\n      subUrl: self.subUrl,\n      subContent: self.subContent,\n      fonts: self.fonts,\n      availableFonts: self.availableFonts,\n      debug: self.debug\n    });\n  };\n\n  self.createCanvas = function () {\n    if (!self.canvas) {\n      if (self.video) {\n        self.isOurCanvas = true;\n        self.canvas = document.createElement('canvas');\n        self.canvas.className = 'libassjs-canvas';\n        self.canvas.style.display = 'none';\n        self.canvasParent = document.createElement('div');\n        self.canvasParent.className = 'libassjs-canvas-parent';\n        self.canvasParent.appendChild(self.canvas);\n\n        if (self.video.nextSibling) {\n          self.video.parentNode.insertBefore(self.canvasParent, self.video.nextSibling);\n        } else {\n          self.video.parentNode.appendChild(self.canvasParent);\n        }\n      } else {\n        if (!self.canvas) {\n          self.workerError('Don\\'t know where to render: you should give video or canvas in options.');\n        }\n      }\n    }\n\n    self.ctx = self.canvas.getContext('2d');\n    self.bufferCanvas = document.createElement('canvas');\n    self.bufferCanvasCtx = self.bufferCanvas.getContext('2d'); // test for alpha bug, where e.g. WebKit can render a transparent pixel\n    // (with alpha == 0) as non-black which then leads to visual artifacts\n\n    self.bufferCanvas.width = 1;\n    self.bufferCanvas.height = 1;\n    var testBuf = new Uint8ClampedArray([0, 255, 0, 0]);\n    var testImage = new ImageData(testBuf, 1, 1);\n    self.bufferCanvasCtx.clearRect(0, 0, 1, 1);\n    self.ctx.clearRect(0, 0, 1, 1);\n    var prePut = self.ctx.getImageData(0, 0, 1, 1).data;\n    self.bufferCanvasCtx.putImageData(testImage, 0, 0);\n    self.ctx.drawImage(self.bufferCanvas, 0, 0);\n    var postPut = self.ctx.getImageData(0, 0, 1, 1).data;\n    self.hasAlphaBug = prePut[1] != postPut[1];\n\n    if (self.hasAlphaBug) {\n      console.log(\"Detected a browser having issue with transparent pixels, applying workaround\");\n    }\n  };\n\n  self.setVideo = function (video) {\n    self.video = video;\n\n    if (self.video) {\n      var timeupdate = function timeupdate() {\n        self.setCurrentTime(video.currentTime + self.timeOffset);\n      };\n\n      self.video.addEventListener(\"timeupdate\", timeupdate, false);\n      self.video.addEventListener(\"playing\", function () {\n        self.setIsPaused(false, video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"pause\", function () {\n        self.setIsPaused(true, video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"seeking\", function () {\n        self.video.removeEventListener(\"timeupdate\", timeupdate);\n      }, false);\n      self.video.addEventListener(\"seeked\", function () {\n        self.video.addEventListener(\"timeupdate\", timeupdate, false);\n        self.setCurrentTime(video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"ratechange\", function () {\n        self.setRate(video.playbackRate);\n      }, false);\n      self.video.addEventListener(\"timeupdate\", function () {\n        self.setCurrentTime(video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"waiting\", function () {\n        self.setIsPaused(true, video.currentTime + self.timeOffset);\n      }, false);\n      document.addEventListener(\"fullscreenchange\", self.resizeWithTimeout, false);\n      document.addEventListener(\"mozfullscreenchange\", self.resizeWithTimeout, false);\n      document.addEventListener(\"webkitfullscreenchange\", self.resizeWithTimeout, false);\n      document.addEventListener(\"msfullscreenchange\", self.resizeWithTimeout, false);\n      window.addEventListener(\"resize\", self.resizeWithTimeout, false); // Support Element Resize Observer\n\n      if (typeof ResizeObserver !== \"undefined\") {\n        self.ro = new ResizeObserver(self.resizeWithTimeout);\n        self.ro.observe(self.video);\n      }\n\n      if (self.video.videoWidth > 0) {\n        self.resize();\n      } else {\n        self.video.addEventListener(\"loadedmetadata\", function (e) {\n          e.target.removeEventListener(e.type, arguments.callee);\n          self.resize();\n        }, false);\n      }\n    }\n  };\n\n  self.getVideoPosition = function () {\n    var videoRatio = self.video.videoWidth / self.video.videoHeight;\n    var width = self.video.offsetWidth,\n        height = self.video.offsetHeight;\n    var elementRatio = width / height;\n    var realWidth = width,\n        realHeight = height;\n    if (elementRatio > videoRatio) realWidth = Math.floor(height * videoRatio);else realHeight = Math.floor(width / videoRatio);\n    var x = (width - realWidth) / 2;\n    var y = (height - realHeight) / 2;\n    return {\n      width: realWidth,\n      height: realHeight,\n      x: x,\n      y: y\n    };\n  };\n\n  self.setSubUrl = function (subUrl) {\n    self.subUrl = subUrl;\n  };\n\n  self.renderFrameData = null;\n\n  function renderFrames() {\n    var data = self.renderFramesData;\n    var beforeDrawTime = performance.now();\n    self.ctx.clearRect(0, 0, self.canvas.width, self.canvas.height);\n\n    for (var i = 0; i < data.canvases.length; i++) {\n      var image = data.canvases[i];\n      self.bufferCanvas.width = image.w;\n      self.bufferCanvas.height = image.h;\n      var imageBuffer = new Uint8ClampedArray(image.buffer);\n\n      if (self.hasAlphaBug) {\n        for (var j = 3; j < imageBuffer.length; j = j + 4) {\n          imageBuffer[j] = imageBuffer[j] >= 1 ? imageBuffer[j] : 1;\n        }\n      }\n\n      var imageData = new ImageData(imageBuffer, image.w, image.h);\n      self.bufferCanvasCtx.putImageData(imageData, 0, 0);\n      self.ctx.drawImage(self.bufferCanvas, image.x, image.y);\n    }\n\n    if (self.debug) {\n      var drawTime = Math.round(performance.now() - beforeDrawTime);\n      console.log(Math.round(data.spentTime) + ' ms (+ ' + drawTime + ' ms draw)');\n      self.renderStart = performance.now();\n    }\n  }\n  /**\n   * Lossy Render Mode\n   *\n   */\n\n\n  function renderFastFrames() {\n    var data = self.renderFramesData;\n    var beforeDrawTime = performance.now();\n    self.ctx.clearRect(0, 0, self.canvas.width, self.canvas.height);\n\n    for (var i = 0; i < data.bitmaps.length; i++) {\n      var image = data.bitmaps[i];\n      self.ctx.drawImage(image.bitmap, image.x, image.y);\n    }\n\n    if (self.debug) {\n      var drawTime = Math.round(performance.now() - beforeDrawTime);\n      console.log(data.bitmaps.length + ' bitmaps, libass: ' + Math.round(data.libassTime) + 'ms, decode: ' + Math.round(data.decodeTime) + 'ms, draw: ' + drawTime + 'ms');\n      self.renderStart = performance.now();\n    }\n  }\n\n  self.workerActive = false;\n  self.frameId = 0;\n\n  self.onWorkerMessage = function (event) {\n    //dump('\\nclient got ' + JSON.stringify(event.data).substr(0, 150) + '\\n');\n    if (!self.workerActive) {\n      self.workerActive = true;\n\n      if (self.onReadyEvent) {\n        self.onReadyEvent();\n      }\n    }\n\n    var data = event.data;\n\n    switch (data.target) {\n      case 'stdout':\n        {\n          console.log(data.content);\n          break;\n        }\n\n      case 'console-log':\n        {\n          console.log.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-debug':\n        {\n          console.debug.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-info':\n        {\n          console.info.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-warn':\n        {\n          console.warn.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-error':\n        {\n          console.error.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'stderr':\n        {\n          console.error(data.content);\n          break;\n        }\n\n      case 'window':\n        {\n          window[data.method]();\n          break;\n        }\n\n      case 'canvas':\n        {\n          switch (data.op) {\n            case 'getContext':\n              {\n                self.ctx = self.canvas.getContext(data.type, data.attributes);\n                break;\n              }\n\n            case 'resize':\n              {\n                self.resize(data.width, data.height);\n                break;\n              }\n\n            case 'renderCanvas':\n              {\n                if (self.lastRenderTime < data.time) {\n                  self.lastRenderTime = data.time;\n                  self.renderFramesData = data;\n                  window.requestAnimationFrame(renderFrames);\n                }\n\n                break;\n              }\n\n            case 'renderFastCanvas':\n              {\n                if (self.lastRenderTime < data.time) {\n                  self.lastRenderTime = data.time;\n                  self.renderFramesData = data;\n                  window.requestAnimationFrame(renderFastFrames);\n                }\n\n                break;\n              }\n\n            case 'setObjectProperty':\n              {\n                self.canvas[data.object][data.property] = data.value;\n                break;\n              }\n\n            default:\n              throw 'eh?';\n          }\n\n          break;\n        }\n\n      case 'tick':\n        {\n          self.frameId = data.id;\n          self.worker.postMessage({\n            target: 'tock',\n            id: self.frameId\n          });\n          break;\n        }\n\n      case 'custom':\n        {\n          if (self['onCustomMessage']) {\n            self['onCustomMessage'](event);\n          } else {\n            throw 'Custom message received but client onCustomMessage not implemented.';\n          }\n\n          break;\n        }\n\n      case 'setimmediate':\n        {\n          self.worker.postMessage({\n            target: 'setimmediate'\n          });\n          break;\n        }\n\n      case 'get-events':\n        {\n          console.log(data.target);\n          console.log(data.events);\n          break;\n        }\n\n      case 'get-styles':\n        {\n          console.log(data.target);\n          console.log(data.styles);\n          break;\n        }\n\n      default:\n        throw 'what? ' + data.target;\n    }\n  };\n\n  self.resize = function (width, height, top, left) {\n    var videoSize = null;\n    top = top || 0;\n    left = left || 0;\n\n    if ((!width || !height) && self.video) {\n      videoSize = self.getVideoPosition();\n      width = videoSize.width * self.pixelRatio;\n      height = videoSize.height * self.pixelRatio;\n      var offset = self.canvasParent.getBoundingClientRect().top - self.video.getBoundingClientRect().top;\n      top = videoSize.y - offset;\n      left = videoSize.x;\n    }\n\n    if (!width || !height) {\n      if (!self.video) {\n        console.error('width or height is 0. You should specify width & height for resize.');\n      }\n\n      return;\n    }\n\n    if (self.canvas.width != width || self.canvas.height != height || self.canvas.style.top != top || self.canvas.style.left != left) {\n      self.canvas.width = width;\n      self.canvas.height = height;\n\n      if (videoSize != null) {\n        self.canvasParent.style.position = 'relative';\n        self.canvas.style.display = 'block';\n        self.canvas.style.position = 'absolute';\n        self.canvas.style.width = videoSize.width + 'px';\n        self.canvas.style.height = videoSize.height + 'px';\n        self.canvas.style.top = top + 'px';\n        self.canvas.style.left = left + 'px';\n        self.canvas.style.pointerEvents = 'none';\n      }\n\n      self.worker.postMessage({\n        target: 'canvas',\n        width: self.canvas.width,\n        height: self.canvas.height\n      });\n    }\n  };\n\n  self.resizeWithTimeout = function () {\n    self.resize();\n    setTimeout(self.resize, 100);\n  };\n\n  self.runBenchmark = function () {\n    self.worker.postMessage({\n      target: 'runBenchmark'\n    });\n  };\n\n  self.customMessage = function (data, options) {\n    options = options || {};\n    self.worker.postMessage({\n      target: 'custom',\n      userData: data,\n      preMain: options.preMain\n    });\n  };\n\n  self.setCurrentTime = function (currentTime) {\n    self.worker.postMessage({\n      target: 'video',\n      currentTime: currentTime\n    });\n  };\n\n  self.setTrackByUrl = function (url) {\n    self.worker.postMessage({\n      target: 'set-track-by-url',\n      url: url\n    });\n  };\n\n  self.setTrack = function (content) {\n    self.worker.postMessage({\n      target: 'set-track',\n      content: content\n    });\n  };\n\n  self.freeTrack = function (content) {\n    self.worker.postMessage({\n      target: 'free-track'\n    });\n  };\n\n  self.render = self.setCurrentTime;\n\n  self.setIsPaused = function (isPaused, currentTime) {\n    self.worker.postMessage({\n      target: 'video',\n      isPaused: isPaused,\n      currentTime: currentTime\n    });\n  };\n\n  self.setRate = function (rate) {\n    self.worker.postMessage({\n      target: 'video',\n      rate: rate\n    });\n  };\n\n  self.dispose = function () {\n    self.worker.postMessage({\n      target: 'destroy'\n    });\n    self.worker.terminate();\n    self.workerActive = false; // Remove the canvas element to remove residual subtitles rendered on player\n\n    if (self.video) {\n      self.video.parentNode.removeChild(self.canvasParent);\n    }\n  };\n\n  self.createEvent = function (event) {\n    self.worker.postMessage({\n      target: 'create-event',\n      event: event\n    });\n  };\n\n  self.getEvents = function () {\n    self.worker.postMessage({\n      target: 'get-events'\n    });\n  };\n\n  self.setEvent = function (event, index) {\n    self.worker.postMessage({\n      target: 'set-event',\n      event: event,\n      index: index\n    });\n  };\n\n  self.removeEvent = function (index) {\n    self.worker.postMessage({\n      target: 'remove-event',\n      index: index\n    });\n  };\n\n  self.createStyle = function (style) {\n    self.worker.postMessage({\n      target: 'create-style',\n      style: style\n    });\n  };\n\n  self.getStyles = function () {\n    self.worker.postMessage({\n      target: 'get-styles'\n    });\n  };\n\n  self.setStyle = function (style, index) {\n    self.worker.postMessage({\n      target: 'set-style',\n      style: style,\n      index: index\n    });\n  };\n\n  self.removeStyle = function (index) {\n    self.worker.postMessage({\n      target: 'remove-style',\n      index: index\n    });\n  };\n\n  self.init();\n};\n\nif (typeof SubtitlesOctopusOnLoad == 'function') {\n  SubtitlesOctopusOnLoad();\n}\n\nif (typeof exports !== 'undefined') {\n  if (typeof module !== 'undefined' && module.exports) {\n    exports = module.exports = SubtitlesOctopus;\n  }\n}","\"use strict\";\n\nvar window = require(\"global/window\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar isFunction = require('is-function');\n/**\n * @license\n * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>\n * Copyright (c) 2014 David Björklund\n * Available under the MIT license\n * <https://github.com/kesla/parse-headers/blob/master/LICENCE>\n */\n\n\nvar parseHeaders = function parseHeaders(headers) {\n  var result = {};\n\n  if (!headers) {\n    return result;\n  }\n\n  headers.trim().split('\\n').forEach(function (row) {\n    var index = row.indexOf(':');\n    var key = row.slice(0, index).trim().toLowerCase();\n    var value = row.slice(index + 1).trim();\n\n    if (typeof result[key] === 'undefined') {\n      result[key] = value;\n    } else if (Array.isArray(result[key])) {\n      result[key].push(value);\n    } else {\n      result[key] = [result[key], value];\n    }\n  });\n  return result;\n};\n\nmodule.exports = createXHR; // Allow use of default import syntax in TypeScript\n\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\ncreateXHR.XDomainRequest = \"withCredentials\" in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function (method) {\n  createXHR[method === \"delete\" ? \"del\" : method] = function (uri, options, callback) {\n    options = initParams(uri, options, callback);\n    options.method = method.toUpperCase();\n    return _createXHR(options);\n  };\n});\n\nfunction forEachArray(array, iterator) {\n  for (var i = 0; i < array.length; i++) {\n    iterator(array[i]);\n  }\n}\n\nfunction isEmpty(obj) {\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) return false;\n  }\n\n  return true;\n}\n\nfunction initParams(uri, options, callback) {\n  var params = uri;\n\n  if (isFunction(options)) {\n    callback = options;\n\n    if (typeof uri === \"string\") {\n      params = {\n        uri: uri\n      };\n    }\n  } else {\n    params = _extends({}, options, {\n      uri: uri\n    });\n  }\n\n  params.callback = callback;\n  return params;\n}\n\nfunction createXHR(uri, options, callback) {\n  options = initParams(uri, options, callback);\n  return _createXHR(options);\n}\n\nfunction _createXHR(options) {\n  if (typeof options.callback === \"undefined\") {\n    throw new Error(\"callback argument missing\");\n  }\n\n  var called = false;\n\n  var callback = function cbOnce(err, response, body) {\n    if (!called) {\n      called = true;\n      options.callback(err, response, body);\n    }\n  };\n\n  function readystatechange() {\n    if (xhr.readyState === 4) {\n      setTimeout(loadFunc, 0);\n    }\n  }\n\n  function getBody() {\n    // Chrome with requestType=blob throws errors arround when even testing access to responseText\n    var body = undefined;\n\n    if (xhr.response) {\n      body = xhr.response;\n    } else {\n      body = xhr.responseText || getXml(xhr);\n    }\n\n    if (isJson) {\n      try {\n        body = JSON.parse(body);\n      } catch (e) {}\n    }\n\n    return body;\n  }\n\n  function errorFunc(evt) {\n    clearTimeout(timeoutTimer);\n\n    if (!(evt instanceof Error)) {\n      evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\"));\n    }\n\n    evt.statusCode = 0;\n    return callback(evt, failureResponse);\n  } // will load the data & process the response in a special response object\n\n\n  function loadFunc() {\n    if (aborted) return;\n    var status;\n    clearTimeout(timeoutTimer);\n\n    if (options.useXDR && xhr.status === undefined) {\n      //IE8 CORS GET successful response doesn't have a status field, but body is fine\n      status = 200;\n    } else {\n      status = xhr.status === 1223 ? 204 : xhr.status;\n    }\n\n    var response = failureResponse;\n    var err = null;\n\n    if (status !== 0) {\n      response = {\n        body: getBody(),\n        statusCode: status,\n        method: method,\n        headers: {},\n        url: uri,\n        rawRequest: xhr\n      };\n\n      if (xhr.getAllResponseHeaders) {\n        //remember xhr can in fact be XDR for CORS in IE\n        response.headers = parseHeaders(xhr.getAllResponseHeaders());\n      }\n    } else {\n      err = new Error(\"Internal XMLHttpRequest Error\");\n    }\n\n    return callback(err, response, response.body);\n  }\n\n  var xhr = options.xhr || null;\n\n  if (!xhr) {\n    if (options.cors || options.useXDR) {\n      xhr = new createXHR.XDomainRequest();\n    } else {\n      xhr = new createXHR.XMLHttpRequest();\n    }\n  }\n\n  var key;\n  var aborted;\n  var uri = xhr.url = options.uri || options.url;\n  var method = xhr.method = options.method || \"GET\";\n  var body = options.body || options.data;\n  var headers = xhr.headers = options.headers || {};\n  var sync = !!options.sync;\n  var isJson = false;\n  var timeoutTimer;\n  var failureResponse = {\n    body: undefined,\n    headers: {},\n    statusCode: 0,\n    method: method,\n    url: uri,\n    rawRequest: xhr\n  };\n\n  if (\"json\" in options && options.json !== false) {\n    isJson = true;\n    headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\"); //Don't override existing accept header declared by user\n\n    if (method !== \"GET\" && method !== \"HEAD\") {\n      headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\"); //Don't override existing accept header declared by user\n\n      body = JSON.stringify(options.json === true ? body : options.json);\n    }\n  }\n\n  xhr.onreadystatechange = readystatechange;\n  xhr.onload = loadFunc;\n  xhr.onerror = errorFunc; // IE9 must have onprogress be set to a unique function.\n\n  xhr.onprogress = function () {// IE must die\n  };\n\n  xhr.onabort = function () {\n    aborted = true;\n  };\n\n  xhr.ontimeout = errorFunc;\n  xhr.open(method, uri, !sync, options.username, options.password); //has to be after open\n\n  if (!sync) {\n    xhr.withCredentials = !!options.withCredentials;\n  } // Cannot set timeout with sync request\n  // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n  // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\n\n  if (!sync && options.timeout > 0) {\n    timeoutTimer = setTimeout(function () {\n      if (aborted) return;\n      aborted = true; //IE9 may still call readystatechange\n\n      xhr.abort(\"timeout\");\n      var e = new Error(\"XMLHttpRequest timeout\");\n      e.code = \"ETIMEDOUT\";\n      errorFunc(e);\n    }, options.timeout);\n  }\n\n  if (xhr.setRequestHeader) {\n    for (key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key]);\n      }\n    }\n  } else if (options.headers && !isEmpty(options.headers)) {\n    throw new Error(\"Headers cannot be set on an XDomainRequest object\");\n  }\n\n  if (\"responseType\" in options) {\n    xhr.responseType = options.responseType;\n  }\n\n  if (\"beforeSend\" in options && typeof options.beforeSend === \"function\") {\n    options.beforeSend(xhr);\n  } // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n  // XMLHttpRequest spec says to pass null as body to indicate no body\n  // See https://github.com/naugtur/xhr/issues/100.\n\n\n  xhr.send(body || null);\n  return xhr;\n}\n\nfunction getXml(xhr) {\n  // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n  // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n  try {\n    if (xhr.responseType === \"document\") {\n      return xhr.responseXML;\n    }\n\n    var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\";\n\n    if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n      return xhr.responseXML;\n    }\n  } catch (e) {}\n\n  return null;\n}\n\nfunction noop() {}","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\n\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n    // In Video.js we slice listener functions\n    // on trigger so that it does not mess up the order\n    // while we loop through.\n    //\n    // Here we slice on off so that the loop in trigger\n    // can continue using it's old reference to loop without\n    // messing up the order.\n\n    this.listeners[type] = this.listeners[type].slice(0);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\nmodule.exports = Stream;","var toUnsigned = require('../utils/bin').toUnsigned;\n\nvar parseType = require('./parse-type.js');\n\nvar findBox = function findBox(data, path) {\n  var results = [],\n      i,\n      size,\n      type,\n      end,\n      subresults;\n\n  if (!path.length) {\n    // short-circuit the search for empty paths\n    return null;\n  }\n\n  for (i = 0; i < data.byteLength;) {\n    size = toUnsigned(data[i] << 24 | data[i + 1] << 16 | data[i + 2] << 8 | data[i + 3]);\n    type = parseType(data.subarray(i + 4, i + 8));\n    end = size > 1 ? i + size : data.byteLength;\n\n    if (type === path[0]) {\n      if (path.length === 1) {\n        // this is the end of the path and we've found the box we were\n        // looking for\n        results.push(data.subarray(i + 8, end));\n      } else {\n        // recursively search for the next box along the path\n        subresults = findBox(data.subarray(i + 8, end), path.slice(1));\n\n        if (subresults.length) {\n          results = results.concat(subresults);\n        }\n      }\n    }\n\n    i = end;\n  } // we've finished searching all of data\n\n\n  return results;\n};\n\nmodule.exports = findBox;","'use strict';\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Accepts program elementary stream (PES) data events and corrects\n * decode and presentation time stamps to account for a rollover\n * of the 33 bit value.\n */\n'use strict';\n\nvar Stream = require('../utils/stream');\n\nvar MAX_TS = 8589934592;\nvar RO_THRESH = 4294967296;\nvar TYPE_SHARED = 'shared';\n\nvar handleRollover = function handleRollover(value, reference) {\n  var direction = 1;\n\n  if (value > reference) {\n    // If the current timestamp value is greater than our reference timestamp and we detect a\n    // timestamp rollover, this means the roll over is happening in the opposite direction.\n    // Example scenario: Enter a long stream/video just after a rollover occurred. The reference\n    // point will be set to a small number, e.g. 1. The user then seeks backwards over the\n    // rollover point. In loading this segment, the timestamp values will be very large,\n    // e.g. 2^33 - 1. Since this comes before the data we loaded previously, we want to adjust\n    // the time stamp to be `value - 2^33`.\n    direction = -1;\n  } // Note: A seek forwards or back that is greater than the RO_THRESH (2^32, ~13 hours) will\n  // cause an incorrect adjustment.\n\n\n  while (Math.abs(reference - value) > RO_THRESH) {\n    value += direction * MAX_TS;\n  }\n\n  return value;\n};\n\nvar TimestampRolloverStream = function TimestampRolloverStream(type) {\n  var lastDTS, referenceDTS;\n  TimestampRolloverStream.prototype.init.call(this); // The \"shared\" type is used in cases where a stream will contain muxed\n  // video and audio. We could use `undefined` here, but having a string\n  // makes debugging a little clearer.\n\n  this.type_ = type || TYPE_SHARED;\n\n  this.push = function (data) {\n    // Any \"shared\" rollover streams will accept _all_ data. Otherwise,\n    // streams will only accept data that matches their type.\n    if (this.type_ !== TYPE_SHARED && data.type !== this.type_) {\n      return;\n    }\n\n    if (referenceDTS === undefined) {\n      referenceDTS = data.dts;\n    }\n\n    data.dts = handleRollover(data.dts, referenceDTS);\n    data.pts = handleRollover(data.pts, referenceDTS);\n    lastDTS = data.dts;\n    this.trigger('data', data);\n  };\n\n  this.flush = function () {\n    referenceDTS = lastDTS;\n    this.trigger('done');\n  };\n\n  this.endTimeline = function () {\n    this.flush();\n    this.trigger('endedtimeline');\n  };\n\n  this.discontinuity = function () {\n    referenceDTS = void 0;\n    lastDTS = void 0;\n  };\n\n  this.reset = function () {\n    this.discontinuity();\n    this.trigger('reset');\n  };\n};\n\nTimestampRolloverStream.prototype = new Stream();\nmodule.exports = {\n  TimestampRolloverStream: TimestampRolloverStream,\n  handleRollover: handleRollover\n};","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Default exports for Node. Export the extended versions of VTTCue and\n// VTTRegion in Node since we likely want the capability to convert back and\n// forth between JSON. If we don't then it's not that big of a deal since we're\n// off browser.\nvar window = require('global/window');\n\nvar vttjs = module.exports = {\n  WebVTT: require(\"./vtt.js\"),\n  VTTCue: require(\"./vttcue.js\"),\n  VTTRegion: require(\"./vttregion.js\")\n};\nwindow.vttjs = vttjs;\nwindow.WebVTT = vttjs.WebVTT;\nvar cueShim = vttjs.VTTCue;\nvar regionShim = vttjs.VTTRegion;\nvar nativeVTTCue = window.VTTCue;\nvar nativeVTTRegion = window.VTTRegion;\n\nvttjs.shim = function () {\n  window.VTTCue = cueShim;\n  window.VTTRegion = regionShim;\n};\n\nvttjs.restore = function () {\n  window.VTTCue = nativeVTTCue;\n  window.VTTRegion = nativeVTTRegion;\n};\n\nif (!window.VTTCue) {\n  vttjs.shim();\n}","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Utilities to detect basic properties and metadata about MP4s.\n */\n'use strict';\n\nrequire(\"core-js/modules/es.array.reduce\");\n\nvar toUnsigned = require('../utils/bin').toUnsigned;\n\nvar toHexString = require('../utils/bin').toHexString;\n\nvar findBox = require('../mp4/find-box.js');\n\nvar parseType = require('../mp4/parse-type.js');\n\nvar parseTfhd = require('../tools/parse-tfhd.js');\n\nvar parseTrun = require('../tools/parse-trun.js');\n\nvar parseTfdt = require('../tools/parse-tfdt.js');\n\nvar timescale, startTime, compositionStartTime, getVideoTrackIds, getTracks, getTimescaleFromMediaHeader;\n/**\n * Parses an MP4 initialization segment and extracts the timescale\n * values for any declared tracks. Timescale values indicate the\n * number of clock ticks per second to assume for time-based values\n * elsewhere in the MP4.\n *\n * To determine the start time of an MP4, you need two pieces of\n * information: the timescale unit and the earliest base media decode\n * time. Multiple timescales can be specified within an MP4 but the\n * base media decode time is always expressed in the timescale from\n * the media header box for the track:\n * ```\n * moov > trak > mdia > mdhd.timescale\n * ```\n * @param init {Uint8Array} the bytes of the init segment\n * @return {object} a hash of track ids to timescale values or null if\n * the init segment is malformed.\n */\n\ntimescale = function timescale(init) {\n  var result = {},\n      traks = findBox(init, ['moov', 'trak']); // mdhd timescale\n\n  return traks.reduce(function (result, trak) {\n    var tkhd, version, index, id, mdhd;\n    tkhd = findBox(trak, ['tkhd'])[0];\n\n    if (!tkhd) {\n      return null;\n    }\n\n    version = tkhd[0];\n    index = version === 0 ? 12 : 20;\n    id = toUnsigned(tkhd[index] << 24 | tkhd[index + 1] << 16 | tkhd[index + 2] << 8 | tkhd[index + 3]);\n    mdhd = findBox(trak, ['mdia', 'mdhd'])[0];\n\n    if (!mdhd) {\n      return null;\n    }\n\n    version = mdhd[0];\n    index = version === 0 ? 12 : 20;\n    result[id] = toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n    return result;\n  }, result);\n};\n/**\n * Determine the base media decode start time, in seconds, for an MP4\n * fragment. If multiple fragments are specified, the earliest time is\n * returned.\n *\n * The base media decode time can be parsed from track fragment\n * metadata:\n * ```\n * moof > traf > tfdt.baseMediaDecodeTime\n * ```\n * It requires the timescale value from the mdhd to interpret.\n *\n * @param timescale {object} a hash of track ids to timescale values.\n * @return {number} the earliest base media decode start time for the\n * fragment, in seconds\n */\n\n\nstartTime = function startTime(timescale, fragment) {\n  var trafs, baseTimes, result; // we need info from two childrend of each track fragment box\n\n  trafs = findBox(fragment, ['moof', 'traf']); // determine the start times for each track\n\n  baseTimes = [].concat.apply([], trafs.map(function (traf) {\n    return findBox(traf, ['tfhd']).map(function (tfhd) {\n      var id, scale, baseTime; // get the track id from the tfhd\n\n      id = toUnsigned(tfhd[4] << 24 | tfhd[5] << 16 | tfhd[6] << 8 | tfhd[7]); // assume a 90kHz clock if no timescale was specified\n\n      scale = timescale[id] || 90e3; // get the base media decode time from the tfdt\n\n      baseTime = findBox(traf, ['tfdt']).map(function (tfdt) {\n        var version, result;\n        version = tfdt[0];\n        result = toUnsigned(tfdt[4] << 24 | tfdt[5] << 16 | tfdt[6] << 8 | tfdt[7]);\n\n        if (version === 1) {\n          result *= Math.pow(2, 32);\n          result += toUnsigned(tfdt[8] << 24 | tfdt[9] << 16 | tfdt[10] << 8 | tfdt[11]);\n        }\n\n        return result;\n      })[0];\n      baseTime = baseTime || Infinity; // convert base time to seconds\n\n      return baseTime / scale;\n    });\n  })); // return the minimum\n\n  result = Math.min.apply(null, baseTimes);\n  return isFinite(result) ? result : 0;\n};\n/**\n * Determine the composition start, in seconds, for an MP4\n * fragment.\n *\n * The composition start time of a fragment can be calculated using the base\n * media decode time, composition time offset, and timescale, as follows:\n *\n * compositionStartTime = (baseMediaDecodeTime + compositionTimeOffset) / timescale\n *\n * All of the aforementioned information is contained within a media fragment's\n * `traf` box, except for timescale info, which comes from the initialization\n * segment, so a track id (also contained within a `traf`) is also necessary to\n * associate it with a timescale\n *\n *\n * @param timescales {object} - a hash of track ids to timescale values.\n * @param fragment {Unit8Array} - the bytes of a media segment\n * @return {number} the composition start time for the fragment, in seconds\n **/\n\n\ncompositionStartTime = function compositionStartTime(timescales, fragment) {\n  var trafBoxes = findBox(fragment, ['moof', 'traf']);\n  var baseMediaDecodeTime = 0;\n  var compositionTimeOffset = 0;\n  var trackId;\n\n  if (trafBoxes && trafBoxes.length) {\n    // The spec states that track run samples contained within a `traf` box are contiguous, but\n    // it does not explicitly state whether the `traf` boxes themselves are contiguous.\n    // We will assume that they are, so we only need the first to calculate start time.\n    var tfhd = findBox(trafBoxes[0], ['tfhd'])[0];\n    var trun = findBox(trafBoxes[0], ['trun'])[0];\n    var tfdt = findBox(trafBoxes[0], ['tfdt'])[0];\n\n    if (tfhd) {\n      var parsedTfhd = parseTfhd(tfhd);\n      trackId = parsedTfhd.trackId;\n    }\n\n    if (tfdt) {\n      var parsedTfdt = parseTfdt(tfdt);\n      baseMediaDecodeTime = parsedTfdt.baseMediaDecodeTime;\n    }\n\n    if (trun) {\n      var parsedTrun = parseTrun(trun);\n\n      if (parsedTrun.samples && parsedTrun.samples.length) {\n        compositionTimeOffset = parsedTrun.samples[0].compositionTimeOffset || 0;\n      }\n    }\n  } // Get timescale for this specific track. Assume a 90kHz clock if no timescale was\n  // specified.\n\n\n  var timescale = timescales[trackId] || 90e3; // return the composition start time, in seconds\n\n  return (baseMediaDecodeTime + compositionTimeOffset) / timescale;\n};\n/**\n  * Find the trackIds of the video tracks in this source.\n  * Found by parsing the Handler Reference and Track Header Boxes:\n  *   moov > trak > mdia > hdlr\n  *   moov > trak > tkhd\n  *\n  * @param {Uint8Array} init - The bytes of the init segment for this source\n  * @return {Number[]} A list of trackIds\n  *\n  * @see ISO-BMFF-12/2015, Section 8.4.3\n **/\n\n\ngetVideoTrackIds = function getVideoTrackIds(init) {\n  var traks = findBox(init, ['moov', 'trak']);\n  var videoTrackIds = [];\n  traks.forEach(function (trak) {\n    var hdlrs = findBox(trak, ['mdia', 'hdlr']);\n    var tkhds = findBox(trak, ['tkhd']);\n    hdlrs.forEach(function (hdlr, index) {\n      var handlerType = parseType(hdlr.subarray(8, 12));\n      var tkhd = tkhds[index];\n      var view;\n      var version;\n      var trackId;\n\n      if (handlerType === 'vide') {\n        view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n        version = view.getUint8(0);\n        trackId = version === 0 ? view.getUint32(12) : view.getUint32(20);\n        videoTrackIds.push(trackId);\n      }\n    });\n  });\n  return videoTrackIds;\n};\n\ngetTimescaleFromMediaHeader = function getTimescaleFromMediaHeader(mdhd) {\n  // mdhd is a FullBox, meaning it will have its own version as the first byte\n  var version = mdhd[0];\n  var index = version === 0 ? 12 : 20;\n  return toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n};\n/**\n * Get all the video, audio, and hint tracks from a non fragmented\n * mp4 segment\n */\n\n\ngetTracks = function getTracks(init) {\n  var traks = findBox(init, ['moov', 'trak']);\n  var tracks = [];\n  traks.forEach(function (trak) {\n    var track = {};\n    var tkhd = findBox(trak, ['tkhd'])[0];\n    var view, tkhdVersion; // id\n\n    if (tkhd) {\n      view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n      tkhdVersion = view.getUint8(0);\n      track.id = tkhdVersion === 0 ? view.getUint32(12) : view.getUint32(20);\n    }\n\n    var hdlr = findBox(trak, ['mdia', 'hdlr'])[0]; // type\n\n    if (hdlr) {\n      var type = parseType(hdlr.subarray(8, 12));\n\n      if (type === 'vide') {\n        track.type = 'video';\n      } else if (type === 'soun') {\n        track.type = 'audio';\n      } else {\n        track.type = type;\n      }\n    } // codec\n\n\n    var stsd = findBox(trak, ['mdia', 'minf', 'stbl', 'stsd'])[0];\n\n    if (stsd) {\n      var sampleDescriptions = stsd.subarray(8); // gives the codec type string\n\n      track.codec = parseType(sampleDescriptions.subarray(4, 8));\n      var codecBox = findBox(sampleDescriptions, [track.codec])[0];\n      var codecConfig, codecConfigType;\n\n      if (codecBox) {\n        // https://tools.ietf.org/html/rfc6381#section-3.3\n        if (/^[a-z]vc[1-9]$/i.test(track.codec)) {\n          // we don't need anything but the \"config\" parameter of the\n          // avc1 codecBox\n          codecConfig = codecBox.subarray(78);\n          codecConfigType = parseType(codecConfig.subarray(4, 8));\n\n          if (codecConfigType === 'avcC' && codecConfig.length > 11) {\n            track.codec += '.'; // left padded with zeroes for single digit hex\n            // profile idc\n\n            track.codec += toHexString(codecConfig[9]); // the byte containing the constraint_set flags\n\n            track.codec += toHexString(codecConfig[10]); // level idc\n\n            track.codec += toHexString(codecConfig[11]);\n          } else {\n            // TODO: show a warning that we couldn't parse the codec\n            // and are using the default\n            track.codec = 'avc1.4d400d';\n          }\n        } else if (/^mp4[a,v]$/i.test(track.codec)) {\n          // we do not need anything but the streamDescriptor of the mp4a codecBox\n          codecConfig = codecBox.subarray(28);\n          codecConfigType = parseType(codecConfig.subarray(4, 8));\n\n          if (codecConfigType === 'esds' && codecConfig.length > 20 && codecConfig[19] !== 0) {\n            track.codec += '.' + toHexString(codecConfig[19]); // this value is only a single digit\n\n            track.codec += '.' + toHexString(codecConfig[20] >>> 2 & 0x3f).replace(/^0/, '');\n          } else {\n            // TODO: show a warning that we couldn't parse the codec\n            // and are using the default\n            track.codec = 'mp4a.40.2';\n          }\n        } else {// TODO: show a warning? for unknown codec type\n        }\n      }\n    }\n\n    var mdhd = findBox(trak, ['mdia', 'mdhd'])[0];\n\n    if (mdhd) {\n      track.timescale = getTimescaleFromMediaHeader(mdhd);\n    }\n\n    tracks.push(track);\n  });\n  return tracks;\n};\n\nmodule.exports = {\n  // export mp4 inspector's findBox and parseType for backwards compatibility\n  findBox: findBox,\n  parseType: parseType,\n  timescale: timescale,\n  startTime: startTime,\n  compositionStartTime: compositionStartTime,\n  videoTrackIds: getVideoTrackIds,\n  tracks: getTracks,\n  getTimescaleFromMediaHeader: getTimescaleFromMediaHeader\n};","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar window = require('global/window');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar window__default = /*#__PURE__*/_interopDefaultLegacy(window);\n\nvar regexs = {\n  // to determine mime types\n  mp4: /^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v)/,\n  webm: /^(vp0?[89]|av0?1|opus|vorbis)/,\n  ogg: /^(vp0?[89]|theora|flac|opus|vorbis)/,\n  // to determine if a codec is audio or video\n  video: /^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,\n  audio: /^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,\n  // mux.js support regex\n  muxerVideo: /^(avc0?1)/,\n  muxerAudio: /^(mp4a)/\n};\n/**\n * Replace the old apple-style `avc1.<dd>.<dd>` codec string with the standard\n * `avc1.<hhhhhh>`\n *\n * @param {string} codec\n *        Codec string to translate\n * @return {string}\n *         The translated codec string\n */\n\nvar translateLegacyCodec = function translateLegacyCodec(codec) {\n  if (!codec) {\n    return codec;\n  }\n\n  return codec.replace(/avc1\\.(\\d+)\\.(\\d+)/i, function (orig, profile, avcLevel) {\n    var profileHex = ('00' + Number(profile).toString(16)).slice(-2);\n    var avcLevelHex = ('00' + Number(avcLevel).toString(16)).slice(-2);\n    return 'avc1.' + profileHex + '00' + avcLevelHex;\n  });\n};\n/**\n * Replace the old apple-style `avc1.<dd>.<dd>` codec strings with the standard\n * `avc1.<hhhhhh>`\n *\n * @param {string[]} codecs\n *        An array of codec strings to translate\n * @return {string[]}\n *         The translated array of codec strings\n */\n\n\nvar translateLegacyCodecs = function translateLegacyCodecs(codecs) {\n  return codecs.map(translateLegacyCodec);\n};\n/**\n * Replace codecs in the codec string with the old apple-style `avc1.<dd>.<dd>` to the\n * standard `avc1.<hhhhhh>`.\n *\n * @param {string} codecString\n *        The codec string\n * @return {string}\n *         The codec string with old apple-style codecs replaced\n *\n * @private\n */\n\n\nvar mapLegacyAvcCodecs = function mapLegacyAvcCodecs(codecString) {\n  return codecString.replace(/avc1\\.(\\d+)\\.(\\d+)/i, function (match) {\n    return translateLegacyCodecs([match])[0];\n  });\n};\n/**\n * @typedef {Object} ParsedCodecInfo\n * @property {number} codecCount\n *           Number of codecs parsed\n * @property {string} [videoCodec]\n *           Parsed video codec (if found)\n * @property {string} [videoObjectTypeIndicator]\n *           Video object type indicator (if found)\n * @property {string|null} audioProfile\n *           Audio profile\n */\n\n/**\n * Parses a codec string to retrieve the number of codecs specified, the video codec and\n * object type indicator, and the audio profile.\n *\n * @param {string} [codecString]\n *        The codec string to parse\n * @return {ParsedCodecInfo}\n *         Parsed codec info\n */\n\n\nvar parseCodecs = function parseCodecs(codecString) {\n  if (codecString === void 0) {\n    codecString = '';\n  }\n\n  var codecs = codecString.split(',');\n  var result = {};\n  codecs.forEach(function (codec) {\n    codec = codec.trim();\n    ['video', 'audio'].forEach(function (name) {\n      var match = regexs[name].exec(codec.toLowerCase());\n\n      if (!match || match.length <= 1) {\n        return;\n      } // maintain codec case\n\n\n      var type = codec.substring(0, match[1].length);\n      var details = codec.replace(type, '');\n      result[name] = {\n        type: type,\n        details: details\n      };\n    });\n  });\n  return result;\n};\n/**\n * Returns a ParsedCodecInfo object for the default alternate audio playlist if there is\n * a default alternate audio playlist for the provided audio group.\n *\n * @param {Object} master\n *        The master playlist\n * @param {string} audioGroupId\n *        ID of the audio group for which to find the default codec info\n * @return {ParsedCodecInfo}\n *         Parsed codec info\n */\n\n\nvar codecsFromDefault = function codecsFromDefault(master, audioGroupId) {\n  if (!master.mediaGroups.AUDIO || !audioGroupId) {\n    return null;\n  }\n\n  var audioGroup = master.mediaGroups.AUDIO[audioGroupId];\n\n  if (!audioGroup) {\n    return null;\n  }\n\n  for (var name in audioGroup) {\n    var audioType = audioGroup[name];\n\n    if (audioType.default && audioType.playlists) {\n      // codec should be the same for all playlists within the audio type\n      return parseCodecs(audioType.playlists[0].attributes.CODECS);\n    }\n  }\n\n  return null;\n};\n\nvar isVideoCodec = function isVideoCodec(codec) {\n  if (codec === void 0) {\n    codec = '';\n  }\n\n  return regexs.video.test(codec.trim().toLowerCase());\n};\n\nvar isAudioCodec = function isAudioCodec(codec) {\n  if (codec === void 0) {\n    codec = '';\n  }\n\n  return regexs.audio.test(codec.trim().toLowerCase());\n};\n\nvar getMimeForCodec = function getMimeForCodec(codecString) {\n  if (!codecString || typeof codecString !== 'string') {\n    return;\n  }\n\n  var codecs = codecString.toLowerCase().split(',').map(function (c) {\n    return translateLegacyCodec(c.trim());\n  }); // default to video type\n\n  var type = 'video'; // only change to audio type if the only codec we have is\n  // audio\n\n  if (codecs.length === 1 && isAudioCodec(codecs[0])) {\n    type = 'audio';\n  } // default the container to mp4\n\n\n  var container = 'mp4'; // every codec must be able to go into the container\n  // for that container to be the correct one\n\n  if (codecs.every(function (c) {\n    return regexs.mp4.test(c);\n  })) {\n    container = 'mp4';\n  } else if (codecs.every(function (c) {\n    return regexs.webm.test(c);\n  })) {\n    container = 'webm';\n  } else if (codecs.every(function (c) {\n    return regexs.ogg.test(c);\n  })) {\n    container = 'ogg';\n  }\n\n  return type + \"/\" + container + \";codecs=\\\"\" + codecString + \"\\\"\";\n};\n\nvar browserSupportsCodec = function browserSupportsCodec(codecString) {\n  if (codecString === void 0) {\n    codecString = '';\n  }\n\n  return window__default['default'].MediaSource && window__default['default'].MediaSource.isTypeSupported && window__default['default'].MediaSource.isTypeSupported(getMimeForCodec(codecString)) || false;\n};\n\nvar muxerSupportsCodec = function muxerSupportsCodec(codecString) {\n  if (codecString === void 0) {\n    codecString = '';\n  }\n\n  return codecString.toLowerCase().split(',').every(function (codec) {\n    codec = codec.trim();\n    return regexs.muxerVideo.test(codec) || regexs.muxerAudio.test(codec);\n  });\n};\n\nvar DEFAULT_AUDIO_CODEC = 'mp4a.40.2';\nvar DEFAULT_VIDEO_CODEC = 'avc1.4d400d';\nexports.DEFAULT_AUDIO_CODEC = DEFAULT_AUDIO_CODEC;\nexports.DEFAULT_VIDEO_CODEC = DEFAULT_VIDEO_CODEC;\nexports.browserSupportsCodec = browserSupportsCodec;\nexports.codecsFromDefault = codecsFromDefault;\nexports.getMimeForCodec = getMimeForCodec;\nexports.isAudioCodec = isAudioCodec;\nexports.isVideoCodec = isVideoCodec;\nexports.mapLegacyAvcCodecs = mapLegacyAvcCodecs;\nexports.muxerSupportsCodec = muxerSupportsCodec;\nexports.parseCodecs = parseCodecs;\nexports.translateLegacyCodec = translateLegacyCodec;\nexports.translateLegacyCodecs = translateLegacyCodecs;","function DOMParser(options) {\n  this.options = options || {\n    locator: {}\n  };\n}\n\nDOMParser.prototype.parseFromString = function (source, mimeType) {\n  var options = this.options;\n  var sax = new XMLReader();\n  var domBuilder = options.domBuilder || new DOMHandler(); //contentHandler and LexicalHandler\n\n  var errorHandler = options.errorHandler;\n  var locator = options.locator;\n  var defaultNSMap = options.xmlns || {};\n  var entityMap = {\n    'lt': '<',\n    'gt': '>',\n    'amp': '&',\n    'quot': '\"',\n    'apos': \"'\"\n  };\n\n  if (locator) {\n    domBuilder.setDocumentLocator(locator);\n  }\n\n  sax.errorHandler = buildErrorHandler(errorHandler, domBuilder, locator);\n  sax.domBuilder = options.domBuilder || domBuilder;\n\n  if (/\\/x?html?$/.test(mimeType)) {\n    entityMap.nbsp = '\\xa0';\n    entityMap.copy = '\\xa9';\n    defaultNSMap[''] = 'http://www.w3.org/1999/xhtml';\n  }\n\n  defaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\n\n  if (source) {\n    sax.parse(source, defaultNSMap, entityMap);\n  } else {\n    sax.errorHandler.error(\"invalid doc source\");\n  }\n\n  return domBuilder.doc;\n};\n\nfunction buildErrorHandler(errorImpl, domBuilder, locator) {\n  if (!errorImpl) {\n    if (domBuilder instanceof DOMHandler) {\n      return domBuilder;\n    }\n\n    errorImpl = domBuilder;\n  }\n\n  var errorHandler = {};\n  var isCallback = errorImpl instanceof Function;\n  locator = locator || {};\n\n  function build(key) {\n    var fn = errorImpl[key];\n\n    if (!fn && isCallback) {\n      fn = errorImpl.length == 2 ? function (msg) {\n        errorImpl(key, msg);\n      } : errorImpl;\n    }\n\n    errorHandler[key] = fn && function (msg) {\n      fn('[xmldom ' + key + ']\\t' + msg + _locator(locator));\n    } || function () {};\n  }\n\n  build('warning');\n  build('error');\n  build('fatalError');\n  return errorHandler;\n} //console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\n\n\nfunction DOMHandler() {\n  this.cdata = false;\n}\n\nfunction position(locator, node) {\n  node.lineNumber = locator.lineNumber;\n  node.columnNumber = locator.columnNumber;\n}\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */\n\n\nDOMHandler.prototype = {\n  startDocument: function startDocument() {\n    this.doc = new DOMImplementation().createDocument(null, null, null);\n\n    if (this.locator) {\n      this.doc.documentURI = this.locator.systemId;\n    }\n  },\n  startElement: function startElement(namespaceURI, localName, qName, attrs) {\n    var doc = this.doc;\n    var el = doc.createElementNS(namespaceURI, qName || localName);\n    var len = attrs.length;\n    appendElement(this, el);\n    this.currentElement = el;\n    this.locator && position(this.locator, el);\n\n    for (var i = 0; i < len; i++) {\n      var namespaceURI = attrs.getURI(i);\n      var value = attrs.getValue(i);\n      var qName = attrs.getQName(i);\n      var attr = doc.createAttributeNS(namespaceURI, qName);\n      this.locator && position(attrs.getLocator(i), attr);\n      attr.value = attr.nodeValue = value;\n      el.setAttributeNode(attr);\n    }\n  },\n  endElement: function endElement(namespaceURI, localName, qName) {\n    var current = this.currentElement;\n    var tagName = current.tagName;\n    this.currentElement = current.parentNode;\n  },\n  startPrefixMapping: function startPrefixMapping(prefix, uri) {},\n  endPrefixMapping: function endPrefixMapping(prefix) {},\n  processingInstruction: function processingInstruction(target, data) {\n    var ins = this.doc.createProcessingInstruction(target, data);\n    this.locator && position(this.locator, ins);\n    appendElement(this, ins);\n  },\n  ignorableWhitespace: function ignorableWhitespace(ch, start, length) {},\n  characters: function characters(chars, start, length) {\n    chars = _toString.apply(this, arguments); //console.log(chars)\n\n    if (chars) {\n      if (this.cdata) {\n        var charNode = this.doc.createCDATASection(chars);\n      } else {\n        var charNode = this.doc.createTextNode(chars);\n      }\n\n      if (this.currentElement) {\n        this.currentElement.appendChild(charNode);\n      } else if (/^\\s*$/.test(chars)) {\n        this.doc.appendChild(charNode); //process xml\n      }\n\n      this.locator && position(this.locator, charNode);\n    }\n  },\n  skippedEntity: function skippedEntity(name) {},\n  endDocument: function endDocument() {\n    this.doc.normalize();\n  },\n  setDocumentLocator: function setDocumentLocator(locator) {\n    if (this.locator = locator) {\n      // && !('lineNumber' in locator)){\n      locator.lineNumber = 0;\n    }\n  },\n  //LexicalHandler\n  comment: function comment(chars, start, length) {\n    chars = _toString.apply(this, arguments);\n    var comm = this.doc.createComment(chars);\n    this.locator && position(this.locator, comm);\n    appendElement(this, comm);\n  },\n  startCDATA: function startCDATA() {\n    //used in characters() methods\n    this.cdata = true;\n  },\n  endCDATA: function endCDATA() {\n    this.cdata = false;\n  },\n  startDTD: function startDTD(name, publicId, systemId) {\n    var impl = this.doc.implementation;\n\n    if (impl && impl.createDocumentType) {\n      var dt = impl.createDocumentType(name, publicId, systemId);\n      this.locator && position(this.locator, dt);\n      appendElement(this, dt);\n    }\n  },\n\n  /**\r\n   * @see org.xml.sax.ErrorHandler\r\n   * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n   */\n  warning: function warning(error) {\n    console.warn('[xmldom warning]\\t' + error, _locator(this.locator));\n  },\n  error: function error(_error) {\n    console.error('[xmldom error]\\t' + _error, _locator(this.locator));\n  },\n  fatalError: function fatalError(error) {\n    console.error('[xmldom fatalError]\\t' + error, _locator(this.locator));\n    throw error;\n  }\n};\n\nfunction _locator(l) {\n  if (l) {\n    return '\\n@' + (l.systemId || '') + '#[line:' + l.lineNumber + ',col:' + l.columnNumber + ']';\n  }\n}\n\nfunction _toString(chars, start, length) {\n  if (typeof chars == 'string') {\n    return chars.substr(start, length);\n  } else {\n    //java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n    if (chars.length >= start + length || start) {\n      return new java.lang.String(chars, start, length) + '';\n    }\n\n    return chars;\n  }\n}\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\n\n\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g, function (key) {\n  DOMHandler.prototype[key] = function () {\n    return null;\n  };\n});\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\n\nfunction appendElement(hander, node) {\n  if (!hander.currentElement) {\n    hander.doc.appendChild(node);\n  } else {\n    hander.currentElement.appendChild(node);\n  }\n} //appendChild and setAttributeNS are preformance key\n//if(typeof require == 'function'){\n\n\nvar XMLReader = require('./sax').XMLReader;\n\nvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\n\nexports.XMLSerializer = require('./dom').XMLSerializer;\nexports.DOMParser = DOMParser; //}","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n */\nvar ONE_SECOND_IN_TS = 90000,\n    // 90kHz clock\nsecondsToVideoTs,\n    secondsToAudioTs,\n    videoTsToSeconds,\n    audioTsToSeconds,\n    audioTsToVideoTs,\n    videoTsToAudioTs,\n    metadataTsToSeconds;\n\nsecondsToVideoTs = function secondsToVideoTs(seconds) {\n  return seconds * ONE_SECOND_IN_TS;\n};\n\nsecondsToAudioTs = function secondsToAudioTs(seconds, sampleRate) {\n  return seconds * sampleRate;\n};\n\nvideoTsToSeconds = function videoTsToSeconds(timestamp) {\n  return timestamp / ONE_SECOND_IN_TS;\n};\n\naudioTsToSeconds = function audioTsToSeconds(timestamp, sampleRate) {\n  return timestamp / sampleRate;\n};\n\naudioTsToVideoTs = function audioTsToVideoTs(timestamp, sampleRate) {\n  return secondsToVideoTs(audioTsToSeconds(timestamp, sampleRate));\n};\n\nvideoTsToAudioTs = function videoTsToAudioTs(timestamp, sampleRate) {\n  return secondsToAudioTs(videoTsToSeconds(timestamp), sampleRate);\n};\n/**\n * Adjust ID3 tag or caption timing information by the timeline pts values\n * (if keepOriginalTimestamps is false) and convert to seconds\n */\n\n\nmetadataTsToSeconds = function metadataTsToSeconds(timestamp, timelineStartPts, keepOriginalTimestamps) {\n  return videoTsToSeconds(keepOriginalTimestamps ? timestamp : timestamp - timelineStartPts);\n};\n\nmodule.exports = {\n  ONE_SECOND_IN_TS: ONE_SECOND_IN_TS,\n  secondsToVideoTs: secondsToVideoTs,\n  secondsToAudioTs: secondsToAudioTs,\n  videoTsToSeconds: videoTsToSeconds,\n  audioTsToSeconds: audioTsToSeconds,\n  audioTsToVideoTs: audioTsToVideoTs,\n  videoTsToAudioTs: videoTsToAudioTs,\n  metadataTsToSeconds: metadataTsToSeconds\n};","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Utilities to detect basic properties and metadata about TS Segments.\n */\n'use strict';\n\nvar StreamTypes = require('./stream-types.js');\n\nvar parsePid = function parsePid(packet) {\n  var pid = packet[1] & 0x1f;\n  pid <<= 8;\n  pid |= packet[2];\n  return pid;\n};\n\nvar parsePayloadUnitStartIndicator = function parsePayloadUnitStartIndicator(packet) {\n  return !!(packet[1] & 0x40);\n};\n\nvar parseAdaptionField = function parseAdaptionField(packet) {\n  var offset = 0; // if an adaption field is present, its length is specified by the\n  // fifth byte of the TS packet header. The adaptation field is\n  // used to add stuffing to PES packets that don't fill a complete\n  // TS packet, and to specify some forms of timing and control data\n  // that we do not currently use.\n\n  if ((packet[3] & 0x30) >>> 4 > 0x01) {\n    offset += packet[4] + 1;\n  }\n\n  return offset;\n};\n\nvar parseType = function parseType(packet, pmtPid) {\n  var pid = parsePid(packet);\n\n  if (pid === 0) {\n    return 'pat';\n  } else if (pid === pmtPid) {\n    return 'pmt';\n  } else if (pmtPid) {\n    return 'pes';\n  }\n\n  return null;\n};\n\nvar parsePat = function parsePat(packet) {\n  var pusi = parsePayloadUnitStartIndicator(packet);\n  var offset = 4 + parseAdaptionField(packet);\n\n  if (pusi) {\n    offset += packet[offset] + 1;\n  }\n\n  return (packet[offset + 10] & 0x1f) << 8 | packet[offset + 11];\n};\n\nvar parsePmt = function parsePmt(packet) {\n  var programMapTable = {};\n  var pusi = parsePayloadUnitStartIndicator(packet);\n  var payloadOffset = 4 + parseAdaptionField(packet);\n\n  if (pusi) {\n    payloadOffset += packet[payloadOffset] + 1;\n  } // PMTs can be sent ahead of the time when they should actually\n  // take effect. We don't believe this should ever be the case\n  // for HLS but we'll ignore \"forward\" PMT declarations if we see\n  // them. Future PMT declarations have the current_next_indicator\n  // set to zero.\n\n\n  if (!(packet[payloadOffset + 5] & 0x01)) {\n    return;\n  }\n\n  var sectionLength, tableEnd, programInfoLength; // the mapping table ends at the end of the current section\n\n  sectionLength = (packet[payloadOffset + 1] & 0x0f) << 8 | packet[payloadOffset + 2];\n  tableEnd = 3 + sectionLength - 4; // to determine where the table is, we have to figure out how\n  // long the program info descriptors are\n\n  programInfoLength = (packet[payloadOffset + 10] & 0x0f) << 8 | packet[payloadOffset + 11]; // advance the offset to the first entry in the mapping table\n\n  var offset = 12 + programInfoLength;\n\n  while (offset < tableEnd) {\n    var i = payloadOffset + offset; // add an entry that maps the elementary_pid to the stream_type\n\n    programMapTable[(packet[i + 1] & 0x1F) << 8 | packet[i + 2]] = packet[i]; // move to the next table entry\n    // skip past the elementary stream descriptors, if present\n\n    offset += ((packet[i + 3] & 0x0F) << 8 | packet[i + 4]) + 5;\n  }\n\n  return programMapTable;\n};\n\nvar parsePesType = function parsePesType(packet, programMapTable) {\n  var pid = parsePid(packet);\n  var type = programMapTable[pid];\n\n  switch (type) {\n    case StreamTypes.H264_STREAM_TYPE:\n      return 'video';\n\n    case StreamTypes.ADTS_STREAM_TYPE:\n      return 'audio';\n\n    case StreamTypes.METADATA_STREAM_TYPE:\n      return 'timed-metadata';\n\n    default:\n      return null;\n  }\n};\n\nvar parsePesTime = function parsePesTime(packet) {\n  var pusi = parsePayloadUnitStartIndicator(packet);\n\n  if (!pusi) {\n    return null;\n  }\n\n  var offset = 4 + parseAdaptionField(packet);\n\n  if (offset >= packet.byteLength) {\n    // From the H 222.0 MPEG-TS spec\n    // \"For transport stream packets carrying PES packets, stuffing is needed when there\n    //  is insufficient PES packet data to completely fill the transport stream packet\n    //  payload bytes. Stuffing is accomplished by defining an adaptation field longer than\n    //  the sum of the lengths of the data elements in it, so that the payload bytes\n    //  remaining after the adaptation field exactly accommodates the available PES packet\n    //  data.\"\n    //\n    // If the offset is >= the length of the packet, then the packet contains no data\n    // and instead is just adaption field stuffing bytes\n    return null;\n  }\n\n  var pes = null;\n  var ptsDtsFlags; // PES packets may be annotated with a PTS value, or a PTS value\n  // and a DTS value. Determine what combination of values is\n  // available to work with.\n\n  ptsDtsFlags = packet[offset + 7]; // PTS and DTS are normally stored as a 33-bit number.  Javascript\n  // performs all bitwise operations on 32-bit integers but javascript\n  // supports a much greater range (52-bits) of integer using standard\n  // mathematical operations.\n  // We construct a 31-bit value using bitwise operators over the 31\n  // most significant bits and then multiply by 4 (equal to a left-shift\n  // of 2) before we add the final 2 least significant bits of the\n  // timestamp (equal to an OR.)\n\n  if (ptsDtsFlags & 0xC0) {\n    pes = {}; // the PTS and DTS are not written out directly. For information\n    // on how they are encoded, see\n    // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n\n    pes.pts = (packet[offset + 9] & 0x0E) << 27 | (packet[offset + 10] & 0xFF) << 20 | (packet[offset + 11] & 0xFE) << 12 | (packet[offset + 12] & 0xFF) << 5 | (packet[offset + 13] & 0xFE) >>> 3;\n    pes.pts *= 4; // Left shift by 2\n\n    pes.pts += (packet[offset + 13] & 0x06) >>> 1; // OR by the two LSBs\n\n    pes.dts = pes.pts;\n\n    if (ptsDtsFlags & 0x40) {\n      pes.dts = (packet[offset + 14] & 0x0E) << 27 | (packet[offset + 15] & 0xFF) << 20 | (packet[offset + 16] & 0xFE) << 12 | (packet[offset + 17] & 0xFF) << 5 | (packet[offset + 18] & 0xFE) >>> 3;\n      pes.dts *= 4; // Left shift by 2\n\n      pes.dts += (packet[offset + 18] & 0x06) >>> 1; // OR by the two LSBs\n    }\n  }\n\n  return pes;\n};\n\nvar parseNalUnitType = function parseNalUnitType(type) {\n  switch (type) {\n    case 0x05:\n      return 'slice_layer_without_partitioning_rbsp_idr';\n\n    case 0x06:\n      return 'sei_rbsp';\n\n    case 0x07:\n      return 'seq_parameter_set_rbsp';\n\n    case 0x08:\n      return 'pic_parameter_set_rbsp';\n\n    case 0x09:\n      return 'access_unit_delimiter_rbsp';\n\n    default:\n      return null;\n  }\n};\n\nvar videoPacketContainsKeyFrame = function videoPacketContainsKeyFrame(packet) {\n  var offset = 4 + parseAdaptionField(packet);\n  var frameBuffer = packet.subarray(offset);\n  var frameI = 0;\n  var frameSyncPoint = 0;\n  var foundKeyFrame = false;\n  var nalType; // advance the sync point to a NAL start, if necessary\n\n  for (; frameSyncPoint < frameBuffer.byteLength - 3; frameSyncPoint++) {\n    if (frameBuffer[frameSyncPoint + 2] === 1) {\n      // the sync point is properly aligned\n      frameI = frameSyncPoint + 5;\n      break;\n    }\n  }\n\n  while (frameI < frameBuffer.byteLength) {\n    // look at the current byte to determine if we've hit the end of\n    // a NAL unit boundary\n    switch (frameBuffer[frameI]) {\n      case 0:\n        // skip past non-sync sequences\n        if (frameBuffer[frameI - 1] !== 0) {\n          frameI += 2;\n          break;\n        } else if (frameBuffer[frameI - 2] !== 0) {\n          frameI++;\n          break;\n        }\n\n        if (frameSyncPoint + 3 !== frameI - 2) {\n          nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n          if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n            foundKeyFrame = true;\n          }\n        } // drop trailing zeroes\n\n\n        do {\n          frameI++;\n        } while (frameBuffer[frameI] !== 1 && frameI < frameBuffer.length);\n\n        frameSyncPoint = frameI - 2;\n        frameI += 3;\n        break;\n\n      case 1:\n        // skip past non-sync sequences\n        if (frameBuffer[frameI - 1] !== 0 || frameBuffer[frameI - 2] !== 0) {\n          frameI += 3;\n          break;\n        }\n\n        nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n        if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n          foundKeyFrame = true;\n        }\n\n        frameSyncPoint = frameI - 2;\n        frameI += 3;\n        break;\n\n      default:\n        // the current byte isn't a one or zero, so it cannot be part\n        // of a sync sequence\n        frameI += 3;\n        break;\n    }\n  }\n\n  frameBuffer = frameBuffer.subarray(frameSyncPoint);\n  frameI -= frameSyncPoint;\n  frameSyncPoint = 0; // parse the final nal\n\n  if (frameBuffer && frameBuffer.byteLength > 3) {\n    nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n    if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n      foundKeyFrame = true;\n    }\n  }\n\n  return foundKeyFrame;\n};\n\nmodule.exports = {\n  parseType: parseType,\n  parsePat: parsePat,\n  parsePmt: parsePmt,\n  parsePayloadUnitStartIndicator: parsePayloadUnitStartIndicator,\n  parsePesType: parsePesType,\n  parsePesTime: parsePesTime,\n  videoPacketContainsKeyFrame: videoPacketContainsKeyFrame\n};","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * A lightweight readable stream implemention that handles event dispatching.\n * Objects that inherit from streams should call init in their constructors.\n */\n'use strict';\n\nvar Stream = function Stream() {\n  this.init = function () {\n    var listeners = {};\n    /**\n     * Add a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} the callback to be invoked when an event of\n     * the specified type occurs\n     */\n\n    this.on = function (type, listener) {\n      if (!listeners[type]) {\n        listeners[type] = [];\n      }\n\n      listeners[type] = listeners[type].concat(listener);\n    };\n    /**\n     * Remove a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} a function previously registered for this\n     * type of event through `on`\n     */\n\n\n    this.off = function (type, listener) {\n      var index;\n\n      if (!listeners[type]) {\n        return false;\n      }\n\n      index = listeners[type].indexOf(listener);\n      listeners[type] = listeners[type].slice();\n      listeners[type].splice(index, 1);\n      return index > -1;\n    };\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     * @param type {string} the event name\n     */\n\n\n    this.trigger = function (type) {\n      var callbacks, i, length, args;\n      callbacks = listeners[type];\n\n      if (!callbacks) {\n        return;\n      } // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n\n\n      if (arguments.length === 2) {\n        length = callbacks.length;\n\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = [];\n        i = arguments.length;\n\n        for (i = 1; i < arguments.length; ++i) {\n          args.push(arguments[i]);\n        }\n\n        length = callbacks.length;\n\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    };\n    /**\n     * Destroys the stream and cleans up.\n     */\n\n\n    this.dispose = function () {\n      listeners = {};\n    };\n  };\n};\n/**\n * Forwards all `data` events on this stream to the destination stream. The\n * destination stream should provide a method `push` to receive the data\n * events as they arrive.\n * @param destination {stream} the stream that will receive all `data` events\n * @param autoFlush {boolean} if false, we will not call `flush` on the destination\n *                            when the current stream emits a 'done' event\n * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n */\n\n\nStream.prototype.pipe = function (destination) {\n  this.on('data', function (data) {\n    destination.push(data);\n  });\n  this.on('done', function (flushSource) {\n    destination.flush(flushSource);\n  });\n  this.on('partialdone', function (flushSource) {\n    destination.partialFlush(flushSource);\n  });\n  this.on('endedtimeline', function (flushSource) {\n    destination.endTimeline(flushSource);\n  });\n  this.on('reset', function (flushSource) {\n    destination.reset(flushSource);\n  });\n  return destination;\n}; // Default stream functions that are expected to be overridden to perform\n// actual work. These are provided by the prototype as a sort of no-op\n// implementation so that we don't have to check for their existence in the\n// `pipe` function above.\n\n\nStream.prototype.push = function (data) {\n  this.trigger('data', data);\n};\n\nStream.prototype.flush = function (flushSource) {\n  this.trigger('done', flushSource);\n};\n\nStream.prototype.partialFlush = function (flushSource) {\n  this.trigger('partialdone', flushSource);\n};\n\nStream.prototype.endTimeline = function (flushSource) {\n  this.trigger('endedtimeline', flushSource);\n};\n\nStream.prototype.reset = function (flushSource) {\n  this.trigger('reset', flushSource);\n};\n\nmodule.exports = Stream;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from 'react';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport { isValidElementType } from 'react-is';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\n/* eslint-disable import/prefer-default-export */\n\nfunction invariant(condition, message) {\n  if (condition) return;\n  var error = new Error(\"loadable: \" + message);\n  error.framesToPop = 1;\n  error.name = 'Invariant Violation';\n  throw error;\n}\n\nfunction warn(message) {\n  // eslint-disable-next-line no-console\n  console.warn(\"loadable: \" + message);\n}\n\nvar Context = /*#__PURE__*/React.createContext();\nvar LOADABLE_REQUIRED_CHUNKS_KEY = '__LOADABLE_REQUIRED_CHUNKS__';\n\nfunction getRequiredChunkKey(namespace) {\n  return \"\" + namespace + LOADABLE_REQUIRED_CHUNKS_KEY;\n}\n\nvar sharedInternals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  getRequiredChunkKey: getRequiredChunkKey,\n  invariant: invariant,\n  Context: Context\n});\nvar LOADABLE_SHARED = {\n  initialChunks: {}\n};\nvar STATUS_PENDING = 'PENDING';\nvar STATUS_RESOLVED = 'RESOLVED';\nvar STATUS_REJECTED = 'REJECTED';\n\nfunction resolveConstructor(ctor) {\n  if (typeof ctor === 'function') {\n    return {\n      requireAsync: ctor,\n      resolve: function resolve() {\n        return undefined;\n      },\n      chunkName: function chunkName() {\n        return undefined;\n      }\n    };\n  }\n\n  return ctor;\n}\n\nvar withChunkExtractor = function withChunkExtractor(Component) {\n  return function (props) {\n    return React.createElement(Context.Consumer, null, function (extractor) {\n      return React.createElement(Component, Object.assign({\n        __chunkExtractor: extractor\n      }, props));\n    });\n  };\n};\n\nvar identity = function identity(v) {\n  return v;\n};\n\nfunction createLoadable(_ref) {\n  var _ref$defaultResolveCo = _ref.defaultResolveComponent,\n      defaultResolveComponent = _ref$defaultResolveCo === void 0 ? identity : _ref$defaultResolveCo,\n      _render = _ref.render,\n      onLoad = _ref.onLoad;\n\n  function loadable(loadableConstructor, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var ctor = resolveConstructor(loadableConstructor);\n    var cache = {};\n    /**\n     * Cachekey represents the component to be loaded\n     * if key changes - component has to be reloaded\n     * @param props\n     * @returns {null|Component}\n     */\n\n    function _getCacheKey(props) {\n      if (options.cacheKey) {\n        return options.cacheKey(props);\n      }\n\n      if (ctor.resolve) {\n        return ctor.resolve(props);\n      }\n\n      return 'static';\n    }\n    /**\n     * Resolves loaded `module` to a specific `Component\n     * @param module\n     * @param props\n     * @param Loadable\n     * @returns Component\n     */\n\n\n    function resolve(module, props, Loadable) {\n      var Component = options.resolveComponent ? options.resolveComponent(module, props) : defaultResolveComponent(module);\n\n      if (options.resolveComponent && !isValidElementType(Component)) {\n        throw new Error(\"resolveComponent returned something that is not a React component!\");\n      }\n\n      hoistNonReactStatics(Loadable, Component, {\n        preload: true\n      });\n      return Component;\n    }\n\n    var InnerLoadable = /*#__PURE__*/function (_React$Component) {\n      _inheritsLoose(InnerLoadable, _React$Component);\n\n      InnerLoadable.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n        var cacheKey = _getCacheKey(props);\n\n        return _extends({}, state, {\n          cacheKey: cacheKey,\n          // change of a key triggers loading state automatically\n          loading: state.loading || state.cacheKey !== cacheKey\n        });\n      };\n\n      function InnerLoadable(props) {\n        var _this;\n\n        _this = _React$Component.call(this, props) || this;\n        _this.state = {\n          result: null,\n          error: null,\n          loading: true,\n          cacheKey: _getCacheKey(props)\n        };\n        invariant(!props.__chunkExtractor || ctor.requireSync, 'SSR requires `@loadable/babel-plugin`, please install it'); // Server-side\n\n        if (props.__chunkExtractor) {\n          // This module has been marked with no SSR\n          if (options.ssr === false) {\n            return _assertThisInitialized(_this);\n          } // We run load function, we assume that it won't fail and that it\n          // triggers a synchronous loading of the module\n\n\n          ctor.requireAsync(props)[\"catch\"](function () {\n            return null;\n          }); // So we can require now the module synchronously\n\n          _this.loadSync();\n\n          props.__chunkExtractor.addChunk(ctor.chunkName(props));\n\n          return _assertThisInitialized(_this);\n        } // Client-side with `isReady` method present (SSR probably)\n        // If module is already loaded, we use a synchronous loading\n        // Only perform this synchronous loading if the component has not\n        // been marked with no SSR, else we risk hydration mismatches\n\n\n        if (options.ssr !== false && ( // is ready - was loaded in this session\n        ctor.isReady && ctor.isReady(props) || // is ready - was loaded during SSR process\n        ctor.chunkName && LOADABLE_SHARED.initialChunks[ctor.chunkName(props)])) {\n          _this.loadSync();\n        }\n\n        return _this;\n      }\n\n      var _proto = InnerLoadable.prototype;\n\n      _proto.componentDidMount = function componentDidMount() {\n        this.mounted = true; // retrieve loading promise from a global cache\n\n        var cachedPromise = this.getCache(); // if promise exists, but rejected - clear cache\n\n        if (cachedPromise && cachedPromise.status === STATUS_REJECTED) {\n          this.setCache();\n        } // component might be resolved synchronously in the constructor\n\n\n        if (this.state.loading) {\n          this.loadAsync();\n        }\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n        // Component has to be reloaded on cacheKey change\n        if (prevState.cacheKey !== this.state.cacheKey) {\n          this.loadAsync();\n        }\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        this.mounted = false;\n      };\n\n      _proto.safeSetState = function safeSetState(nextState, callback) {\n        if (this.mounted) {\n          this.setState(nextState, callback);\n        }\n      }\n      /**\n       * returns a cache key for the current props\n       * @returns {Component|string}\n       */\n      ;\n\n      _proto.getCacheKey = function getCacheKey() {\n        return _getCacheKey(this.props);\n      }\n      /**\n       * access the persistent cache\n       */\n      ;\n\n      _proto.getCache = function getCache() {\n        return cache[this.getCacheKey()];\n      }\n      /**\n       * sets the cache value. If called without value sets it as undefined\n       */\n      ;\n\n      _proto.setCache = function setCache(value) {\n        if (value === void 0) {\n          value = undefined;\n        }\n\n        cache[this.getCacheKey()] = value;\n      };\n\n      _proto.triggerOnLoad = function triggerOnLoad() {\n        var _this2 = this;\n\n        if (onLoad) {\n          setTimeout(function () {\n            onLoad(_this2.state.result, _this2.props);\n          });\n        }\n      }\n      /**\n       * Synchronously loads component\n       * target module is expected to already exists in the module cache\n       * or be capable to resolve synchronously (webpack target=node)\n       */\n      ;\n\n      _proto.loadSync = function loadSync() {\n        // load sync is expecting component to be in the \"loading\" state already\n        // sounds weird, but loading=true is the initial state of InnerLoadable\n        if (!this.state.loading) return;\n\n        try {\n          var loadedModule = ctor.requireSync(this.props);\n          var result = resolve(loadedModule, this.props, Loadable);\n          this.state.result = result;\n          this.state.loading = false;\n        } catch (error) {\n          console.error('loadable-components: failed to synchronously load component, which expected to be available', {\n            fileName: ctor.resolve(this.props),\n            chunkName: ctor.chunkName(this.props),\n            error: error ? error.message : error\n          });\n          this.state.error = error;\n        }\n      }\n      /**\n       * Asynchronously loads a component.\n       */\n      ;\n\n      _proto.loadAsync = function loadAsync() {\n        var _this3 = this;\n\n        var promise = this.resolveAsync();\n        promise.then(function (loadedModule) {\n          var result = resolve(loadedModule, _this3.props, {\n            Loadable: Loadable\n          });\n\n          _this3.safeSetState({\n            result: result,\n            loading: false\n          }, function () {\n            return _this3.triggerOnLoad();\n          });\n        })[\"catch\"](function (error) {\n          return _this3.safeSetState({\n            error: error,\n            loading: false\n          });\n        });\n        return promise;\n      }\n      /**\n       * Asynchronously resolves(not loads) a component.\n       * Note - this function does not change the state\n       */\n      ;\n\n      _proto.resolveAsync = function resolveAsync() {\n        var _this4 = this;\n\n        var _this$props = this.props,\n            __chunkExtractor = _this$props.__chunkExtractor,\n            forwardedRef = _this$props.forwardedRef,\n            props = _objectWithoutPropertiesLoose(_this$props, [\"__chunkExtractor\", \"forwardedRef\"]);\n\n        var promise = this.getCache();\n\n        if (!promise) {\n          promise = ctor.requireAsync(props);\n          promise.status = STATUS_PENDING;\n          this.setCache(promise);\n          promise.then(function () {\n            promise.status = STATUS_RESOLVED;\n          }, function (error) {\n            console.error('loadable-components: failed to asynchronously load component', {\n              fileName: ctor.resolve(_this4.props),\n              chunkName: ctor.chunkName(_this4.props),\n              error: error ? error.message : error\n            });\n            promise.status = STATUS_REJECTED;\n          });\n        }\n\n        return promise;\n      };\n\n      _proto.render = function render() {\n        var _this$props2 = this.props,\n            forwardedRef = _this$props2.forwardedRef,\n            propFallback = _this$props2.fallback,\n            __chunkExtractor = _this$props2.__chunkExtractor,\n            props = _objectWithoutPropertiesLoose(_this$props2, [\"forwardedRef\", \"fallback\", \"__chunkExtractor\"]);\n\n        var _this$state = this.state,\n            error = _this$state.error,\n            loading = _this$state.loading,\n            result = _this$state.result;\n\n        if (options.suspense) {\n          var cachedPromise = this.getCache() || this.loadAsync();\n\n          if (cachedPromise.status === STATUS_PENDING) {\n            throw this.loadAsync();\n          }\n        }\n\n        if (error) {\n          throw error;\n        }\n\n        var fallback = propFallback || options.fallback || null;\n\n        if (loading) {\n          return fallback;\n        }\n\n        return _render({\n          fallback: fallback,\n          result: result,\n          options: options,\n          props: _extends({}, props, {\n            ref: forwardedRef\n          })\n        });\n      };\n\n      return InnerLoadable;\n    }(React.Component);\n\n    var EnhancedInnerLoadable = withChunkExtractor(InnerLoadable);\n    var Loadable = React.forwardRef(function (props, ref) {\n      return React.createElement(EnhancedInnerLoadable, Object.assign({\n        forwardedRef: ref\n      }, props));\n    }); // In future, preload could use `<link rel=\"preload\">`\n\n    Loadable.preload = function (props) {\n      ctor.requireAsync(props);\n    };\n\n    Loadable.load = function (props) {\n      return ctor.requireAsync(props);\n    };\n\n    return Loadable;\n  }\n\n  function lazy(ctor, options) {\n    return loadable(ctor, _extends({}, options, {\n      suspense: true\n    }));\n  }\n\n  return {\n    loadable: loadable,\n    lazy: lazy\n  };\n}\n\nfunction defaultResolveComponent(loadedModule) {\n  // eslint-disable-next-line no-underscore-dangle\n  return loadedModule.__esModule ? loadedModule[\"default\"] : loadedModule[\"default\"] || loadedModule;\n}\n/* eslint-disable no-use-before-define, react/no-multi-comp */\n\n\nvar _createLoadable = /*#__PURE__*/createLoadable({\n  defaultResolveComponent: defaultResolveComponent,\n  render: function render(_ref) {\n    var Component = _ref.result,\n        props = _ref.props;\n    return React.createElement(Component, props);\n  }\n}),\n    loadable = _createLoadable.loadable,\n    lazy = _createLoadable.lazy;\n/* eslint-disable no-use-before-define, react/no-multi-comp */\n\n\nvar _createLoadable$1 = /*#__PURE__*/createLoadable({\n  onLoad: function onLoad(result, props) {\n    if (result && props.forwardedRef) {\n      if (typeof props.forwardedRef === 'function') {\n        props.forwardedRef(result);\n      } else {\n        props.forwardedRef.current = result;\n      }\n    }\n  },\n  render: function render(_ref) {\n    var result = _ref.result,\n        props = _ref.props;\n\n    if (props.children) {\n      return props.children(result);\n    }\n\n    return null;\n  }\n}),\n    loadable$1 = _createLoadable$1.loadable,\n    lazy$1 = _createLoadable$1.lazy;\n/* eslint-disable no-underscore-dangle, camelcase */\n\n\nvar BROWSER = typeof window !== 'undefined';\n\nfunction loadableReady(done, _temp) {\n  if (done === void 0) {\n    done = function done() {};\n  }\n\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$namespace = _ref.namespace,\n      namespace = _ref$namespace === void 0 ? '' : _ref$namespace;\n\n  if (!BROWSER) {\n    warn('`loadableReady()` must be called in browser only');\n    done();\n    return Promise.resolve();\n  }\n\n  var requiredChunks = null;\n\n  if (BROWSER) {\n    var id = getRequiredChunkKey(namespace);\n    var dataElement = document.getElementById(id);\n\n    if (dataElement) {\n      requiredChunks = JSON.parse(dataElement.textContent);\n      var extElement = document.getElementById(id + \"_ext\");\n\n      if (extElement) {\n        var _JSON$parse = JSON.parse(extElement.textContent),\n            namedChunks = _JSON$parse.namedChunks;\n\n        namedChunks.forEach(function (chunkName) {\n          LOADABLE_SHARED.initialChunks[chunkName] = true;\n        });\n      } else {\n        // version mismatch\n        throw new Error('loadable-component: @loadable/server does not match @loadable/component');\n      }\n    }\n  }\n\n  if (!requiredChunks) {\n    warn('`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side');\n    done();\n    return Promise.resolve();\n  }\n\n  var resolved = false;\n  return new Promise(function (resolve) {\n    window.__LOADABLE_LOADED_CHUNKS__ = window.__LOADABLE_LOADED_CHUNKS__ || [];\n    var loadedChunks = window.__LOADABLE_LOADED_CHUNKS__;\n    var originalPush = loadedChunks.push.bind(loadedChunks);\n\n    function checkReadyState() {\n      if (requiredChunks.every(function (chunk) {\n        return loadedChunks.some(function (_ref2) {\n          var chunks = _ref2[0];\n          return chunks.indexOf(chunk) > -1;\n        });\n      })) {\n        if (!resolved) {\n          resolved = true;\n          resolve();\n        }\n      }\n    }\n\n    loadedChunks.push = function () {\n      originalPush.apply(void 0, arguments);\n      checkReadyState();\n    };\n\n    checkReadyState();\n  }).then(done);\n}\n/* eslint-disable no-underscore-dangle */\n\n\nvar loadable$2 = loadable;\nloadable$2.lib = loadable$1;\nvar lazy$2 = lazy;\nlazy$2.lib = lazy$1;\nvar __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = sharedInternals;\nexport default loadable$2;\nexport { __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, lazy$2 as lazy, loadableReady };","import libass from \"libass-wasm\"\n\nfunction configure(player, subtitle, fonts) {\n  function configurePlayer(instance, player) {\n    function resizePlayer() {\n      canvas.style.display = \"block\"\n      canvas.style.position = \"absolute\"\n\n      if (player && player.el_) {\n        if (player.el_.offsetWidth) {\n          canvas.style.width = player.el_.offsetWidth + \"px\"\n        }\n\n        if (player.el_.offsetHeight) {\n          canvas.style.height = player.el_.offsetHeight + \"px\"\n        }\n      }\n\n      canvas.style.height = player.el_.offsetHeight + \"px\"\n      canvas.style.top = \"0px\" //player.el_.offsetTop + \"px\";\n      canvas.style.left = \"0px\" // player.el_.offsetLeft + \"px\";\n      canvas.style.pointerEvents = \"none\"\n\n      if (\n        player &&\n        player.el_ &&\n        player.el_.offsetWidth &&\n        player.el_.offsetHeight &&\n        player.el_.offsetTop &&\n        player.el_.offsetLeft\n      ) {\n        instance.resize(\n          player.el_.offsetWidth,\n          player.el_.offsetHeight,\n          player.el_.offsetTop,\n          player.el_.offsetLeft\n        )\n      }\n    }\n    function resizePlayerWithTimeout() {\n      resizePlayer()\n      setTimeout(resizePlayer, 100)\n    }\n    const timeupdate = function () {\n      instance.setCurrentTime(player.currentTime() + instance.timeOffset)\n    }\n\n    player.on(\"timeupdate\", timeupdate)\n\n    player.on(\"playing\", function () {\n      instance.setIsPaused(false, player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"pause\", function () {\n      instance.setIsPaused(true, player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"seeking\", function () {\n      player.off(\"timeupdate\", timeupdate)\n    })\n\n    player.on(\"seeked\", function () {\n      player.on(\"timeupdate\", timeupdate)\n      instance.setCurrentTime(player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"ratechange\", function () {\n      instance.setRate(player.playbackRate())\n    })\n\n    player.on(\"timeupdate\", function () {\n      instance.setCurrentTime(player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"waiting\", function () {\n      instance.setIsPaused(true, player.currentTime() + instance.timeOffset)\n    })\n\n    document.addEventListener(\"fullscreenchange\", resizePlayerWithTimeout);\n    document.addEventListener(\"mozfullscreenchange\", resizePlayerWithTimeout);\n    document.addEventListener(\"webkitfullscreenchange\", resizePlayerWithTimeout);\n    document.addEventListener(\"msfullscreenchange\", resizePlayerWithTimeout);\n    window.addEventListener(\"resize\", resizePlayerWithTimeout);\n\n    // Support Element Resize Observer\n    // if (typeof ResizeObserver !== \"undefined\") {\n    //   self.ro = new ResizeObserver(instance.resizeWithTimeout);\n    //   self.ro.observe(self.video);\n    // }\n\n    if (player.videoWidth() > 0) {\n      // instance.resize(840, 460, 0, 0);\n      resizePlayerWithTimeout()\n    } else {\n      player.on(\"loadedmetadata\", function (e) {\n        // e.target.removeEventListener(e.type, arguments.callee)\n        // instance.resize(840, 460, 0, 0);\n        resizePlayerWithTimeout()\n      })\n    }\n\n    return {\n      dispose: function dispose() {\n        if (octopusInstance) {\n          octopusInstance.dispose()\n        }\n\n        document.removeEventListener(\n          \"fullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        document.removeEventListener(\n          \"mozfullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        document.removeEventListener(\n          \"webkitfullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        document.removeEventListener(\n          \"msfullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        window.removeEventListener(\"resize\", resizePlayerWithTimeout)\n      },\n    };\n  }\n  // const video = document.getElementById(\"vjs_video_3_youtube_api\")\n  const video = document.querySelector(\"iframe[id^='vjs_video']\")\n  const canvas = document.createElement(\"canvas\")\n  const canvasParent = document.createElement(\"div\")\n\n  canvas.className = \"libassjs-canvas\"\n  canvas.style.display = \"none\"\n\n  canvasParent.className = \"libassjs-canvas-parent\"\n  canvasParent.appendChild(canvas)\n\n  if (video.nextSibling) {\n    video.parentNode.insertBefore(canvasParent, video.nextSibling)\n  } else {\n    video.parentNode.appendChild(canvasParent)\n  }\n\n  var options = {\n    canvas,\n    subUrl: subtitle,\n    fonts,\n    debug: false,\n    onError: function (err) {\n      console.error(err)\n    },\n    workerUrl: \"/octopus/subtitles-octopus-worker.js\",\n  }\n\n  const octopusInstance = new libass(options)\n  return configurePlayer(octopusInstance, player)\n}\n\nexport default configure\n","import React from \"react\"\nimport videojs from \"video.js\"\nimport \"videojs-youtube\"\nimport \"video.js/dist/video-js.css\"\nimport loadable from \"@loadable/component\"\nimport subtitles from \"../utils/subtitles\"\n\nloadable(() => import(\"videojs-landscape-fullscreen\"))\n\nclass Player extends React.Component {\n  componentDidMount() {\n    const options = {\n      html5: {\n        hls: {\n          overrideNative: !videojs.browser.IS_SAFARI,\n        },\n      },\n      ...this.props,\n    }\n    this.player = videojs(this.videoNode, options, function onPlayerReady() {\n      // Noob\n    });\n\n    if (this.player && this.player.landscapeFullscreen) {\n      this.player.landscapeFullscreen({\n        fullscreen: {\n          enterOnRotate: true,\n          alwaysInLandscapeMode: true,\n          iOS: true,\n        },\n      });\n    }\n\n    this.subtitles = null;\n\n    this.player.addClass(`vjs-theme-${this.props.themeName}`)\n\n    this.player.on(\"play\", this.props.onPlay)\n    this.player.on(\"ready\", () => {\n      this.subtitles = subtitles(\n        this.player,\n        this.props.sources[0].subtitle,\n        this.props.sources[0].fonts.map(font => `/fonts/${font}`)\n      )\n    })\n  }\n\n  componentWillUnmount() {\n    if (this.player) {\n      this.player.dispose();\n    }\n\n    if (this.subtitles) {\n      this.subtitles.dispose()\n      this.subtitles = null;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.themeName !== this.props.themeName) {\n      this.player.removeClass(`vjs-theme-${this.props.themeName}`)\n      this.player.addClass(`vjs-theme-${nextProps.themeName}`)\n\n      this.player.src(nextProps.sources)\n      this.player.poster(nextProps.poster)\n    }\n  }\n  render() {\n    return (\n      <div>\n        <div data-vjs-player>\n          {/* eslint-disable jsx-a11y/media-has-caption */}\n          <video\n            ref={node => (this.videoNode = node)}\n            className=\"video-js vjs-16-9 vjs-big-play-centered\"\n            playsInline={this.props.playsInline}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Player\n","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\nvar URLToolkit = require('url-toolkit');\n\nvar window = require('global/window');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar URLToolkit__default = /*#__PURE__*/_interopDefaultLegacy(URLToolkit);\n\nvar window__default = /*#__PURE__*/_interopDefaultLegacy(window);\n\nvar resolveUrl = function resolveUrl(baseUrl, relativeUrl) {\n  // return early if we don't need to resolve\n  if (/^[a-z]+:/i.test(relativeUrl)) {\n    return relativeUrl;\n  } // if the base URL is relative then combine with the current location\n\n\n  if (!/\\/\\//i.test(baseUrl)) {\n    baseUrl = URLToolkit__default['default'].buildAbsoluteURL(window__default['default'].location && window__default['default'].location.href || '', baseUrl);\n  }\n\n  return URLToolkit__default['default'].buildAbsoluteURL(baseUrl, relativeUrl);\n};\n\nmodule.exports = resolveUrl;","var win;\n\nif (typeof window !== \"undefined\") {\n  win = window;\n} else if (typeof global !== \"undefined\") {\n  win = global;\n} else if (typeof self !== \"undefined\") {\n  win = self;\n} else {\n  win = {};\n}\n\nmodule.exports = win;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\nfunction copy(src, dest) {\n  for (var p in src) {\n    dest[p] = src[p];\n  }\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\n\n\nfunction _extends(Class, Super) {\n  var pt = Class.prototype;\n\n  if (Object.create) {\n    var ppt = Object.create(Super.prototype);\n    pt.__proto__ = ppt;\n  }\n\n  if (!(pt instanceof Super)) {\n    var t = function t() {};\n\n    ;\n    t.prototype = Super.prototype;\n    t = new t();\n    copy(pt, t);\n    Class.prototype = pt = t;\n  }\n\n  if (pt.constructor != Class) {\n    if (typeof Class != 'function') {\n      console.error(\"unknow Class:\" + Class);\n    }\n\n    pt.constructor = Class;\n  }\n}\n\nvar htmlns = 'http://www.w3.org/1999/xhtml'; // Node Types\n\nvar NodeType = {};\nvar ELEMENT_NODE = NodeType.ELEMENT_NODE = 1;\nvar ATTRIBUTE_NODE = NodeType.ATTRIBUTE_NODE = 2;\nvar TEXT_NODE = NodeType.TEXT_NODE = 3;\nvar CDATA_SECTION_NODE = NodeType.CDATA_SECTION_NODE = 4;\nvar ENTITY_REFERENCE_NODE = NodeType.ENTITY_REFERENCE_NODE = 5;\nvar ENTITY_NODE = NodeType.ENTITY_NODE = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE = NodeType.COMMENT_NODE = 8;\nvar DOCUMENT_NODE = NodeType.DOCUMENT_NODE = 9;\nvar DOCUMENT_TYPE_NODE = NodeType.DOCUMENT_TYPE_NODE = 10;\nvar DOCUMENT_FRAGMENT_NODE = NodeType.DOCUMENT_FRAGMENT_NODE = 11;\nvar NOTATION_NODE = NodeType.NOTATION_NODE = 12; // ExceptionCode\n\nvar ExceptionCode = {};\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR = ExceptionCode.INDEX_SIZE_ERR = (ExceptionMessage[1] = \"Index size error\", 1);\nvar DOMSTRING_SIZE_ERR = ExceptionCode.DOMSTRING_SIZE_ERR = (ExceptionMessage[2] = \"DOMString size error\", 2);\nvar HIERARCHY_REQUEST_ERR = ExceptionCode.HIERARCHY_REQUEST_ERR = (ExceptionMessage[3] = \"Hierarchy request error\", 3);\nvar WRONG_DOCUMENT_ERR = ExceptionCode.WRONG_DOCUMENT_ERR = (ExceptionMessage[4] = \"Wrong document\", 4);\nvar INVALID_CHARACTER_ERR = ExceptionCode.INVALID_CHARACTER_ERR = (ExceptionMessage[5] = \"Invalid character\", 5);\nvar NO_DATA_ALLOWED_ERR = ExceptionCode.NO_DATA_ALLOWED_ERR = (ExceptionMessage[6] = \"No data allowed\", 6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = (ExceptionMessage[7] = \"No modification allowed\", 7);\nvar NOT_FOUND_ERR = ExceptionCode.NOT_FOUND_ERR = (ExceptionMessage[8] = \"Not found\", 8);\nvar NOT_SUPPORTED_ERR = ExceptionCode.NOT_SUPPORTED_ERR = (ExceptionMessage[9] = \"Not supported\", 9);\nvar INUSE_ATTRIBUTE_ERR = ExceptionCode.INUSE_ATTRIBUTE_ERR = (ExceptionMessage[10] = \"Attribute in use\", 10); //level2\n\nvar INVALID_STATE_ERR = ExceptionCode.INVALID_STATE_ERR = (ExceptionMessage[11] = \"Invalid state\", 11);\nvar SYNTAX_ERR = ExceptionCode.SYNTAX_ERR = (ExceptionMessage[12] = \"Syntax error\", 12);\nvar INVALID_MODIFICATION_ERR = ExceptionCode.INVALID_MODIFICATION_ERR = (ExceptionMessage[13] = \"Invalid modification\", 13);\nvar NAMESPACE_ERR = ExceptionCode.NAMESPACE_ERR = (ExceptionMessage[14] = \"Invalid namespace\", 14);\nvar INVALID_ACCESS_ERR = ExceptionCode.INVALID_ACCESS_ERR = (ExceptionMessage[15] = \"Invalid access\", 15);\n\nfunction DOMException(code, message) {\n  if (message instanceof Error) {\n    var error = message;\n  } else {\n    error = this;\n    Error.call(this, ExceptionMessage[code]);\n    this.message = ExceptionMessage[code];\n    if (Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n  }\n\n  error.code = code;\n  if (message) this.message = this.message + \": \" + message;\n  return error;\n}\n\n;\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode, DOMException);\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\n\nfunction NodeList() {}\n\n;\nNodeList.prototype = {\n  /**\n   * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n   * @standard level1\n   */\n  length: 0,\n\n  /**\n   * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n   * @standard level1\n   * @param index  unsigned long \n   *   Index into the collection.\n   * @return Node\n   * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n   */\n  item: function item(index) {\n    return this[index] || null;\n  },\n  toString: function toString(isHTML, nodeFilter) {\n    for (var buf = [], i = 0; i < this.length; i++) {\n      serializeToString(this[i], buf, isHTML, nodeFilter);\n    }\n\n    return buf.join('');\n  }\n};\n\nfunction LiveNodeList(node, refresh) {\n  this._node = node;\n  this._refresh = refresh;\n\n  _updateLiveList(this);\n}\n\nfunction _updateLiveList(list) {\n  var inc = list._node._inc || list._node.ownerDocument._inc;\n\n  if (list._inc != inc) {\n    var ls = list._refresh(list._node); //console.log(ls.length)\n\n\n    __set__(list, 'length', ls.length);\n\n    copy(ls, list);\n    list._inc = inc;\n  }\n}\n\nLiveNodeList.prototype.item = function (i) {\n  _updateLiveList(this);\n\n  return this[i];\n};\n\n_extends(LiveNodeList, NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\n\n\nfunction NamedNodeMap() {}\n\n;\n\nfunction _findNodeIndex(list, node) {\n  var i = list.length;\n\n  while (i--) {\n    if (list[i] === node) {\n      return i;\n    }\n  }\n}\n\nfunction _addNamedNode(el, list, newAttr, oldAttr) {\n  if (oldAttr) {\n    list[_findNodeIndex(list, oldAttr)] = newAttr;\n  } else {\n    list[list.length++] = newAttr;\n  }\n\n  if (el) {\n    newAttr.ownerElement = el;\n    var doc = el.ownerDocument;\n\n    if (doc) {\n      oldAttr && _onRemoveAttribute(doc, el, oldAttr);\n\n      _onAddAttribute(doc, el, newAttr);\n    }\n  }\n}\n\nfunction _removeNamedNode(el, list, attr) {\n  //console.log('remove attr:'+attr)\n  var i = _findNodeIndex(list, attr);\n\n  if (i >= 0) {\n    var lastIndex = list.length - 1;\n\n    while (i < lastIndex) {\n      list[i] = list[++i];\n    }\n\n    list.length = lastIndex;\n\n    if (el) {\n      var doc = el.ownerDocument;\n\n      if (doc) {\n        _onRemoveAttribute(doc, el, attr);\n\n        attr.ownerElement = null;\n      }\n    }\n  } else {\n    throw DOMException(NOT_FOUND_ERR, new Error(el.tagName + '@' + attr));\n  }\n}\n\nNamedNodeMap.prototype = {\n  length: 0,\n  item: NodeList.prototype.item,\n  getNamedItem: function getNamedItem(key) {\n    //\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n    //\t\t\treturn null;\n    //\t\t}\n    //console.log()\n    var i = this.length;\n\n    while (i--) {\n      var attr = this[i]; //console.log(attr.nodeName,key)\n\n      if (attr.nodeName == key) {\n        return attr;\n      }\n    }\n  },\n  setNamedItem: function setNamedItem(attr) {\n    var el = attr.ownerElement;\n\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n\n    var oldAttr = this.getNamedItem(attr.nodeName);\n\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n\n    return oldAttr;\n  },\n\n  /* returns Node */\n  setNamedItemNS: function setNamedItemNS(attr) {\n    // raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n    var el = attr.ownerElement,\n        oldAttr;\n\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n\n    oldAttr = this.getNamedItemNS(attr.namespaceURI, attr.localName);\n\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n\n    return oldAttr;\n  },\n\n  /* returns Node */\n  removeNamedItem: function removeNamedItem(key) {\n    var attr = this.getNamedItem(key);\n\n    _removeNamedNode(this._ownerElement, this, attr);\n\n    return attr;\n  },\n  // raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n  //for level2\n  removeNamedItemNS: function removeNamedItemNS(namespaceURI, localName) {\n    var attr = this.getNamedItemNS(namespaceURI, localName);\n\n    _removeNamedNode(this._ownerElement, this, attr);\n\n    return attr;\n  },\n  getNamedItemNS: function getNamedItemNS(namespaceURI, localName) {\n    var i = this.length;\n\n    while (i--) {\n      var node = this[i];\n\n      if (node.localName == localName && node.namespaceURI == namespaceURI) {\n        return node;\n      }\n    }\n\n    return null;\n  }\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\n\nfunction DOMImplementation(\n/* Object */\nfeatures) {\n  this._features = {};\n\n  if (features) {\n    for (var feature in features) {\n      this._features = features[feature];\n    }\n  }\n}\n\n;\nDOMImplementation.prototype = {\n  hasFeature: function hasFeature(\n  /* string */\n  feature,\n  /* string */\n  version) {\n    var versions = this._features[feature.toLowerCase()];\n\n    if (versions && (!version || version in versions)) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  // Introduced in DOM Level 2:\n  createDocument: function createDocument(namespaceURI, qualifiedName, doctype) {\n    // raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n    var doc = new Document();\n    doc.implementation = this;\n    doc.childNodes = new NodeList();\n    doc.doctype = doctype;\n\n    if (doctype) {\n      doc.appendChild(doctype);\n    }\n\n    if (qualifiedName) {\n      var root = doc.createElementNS(namespaceURI, qualifiedName);\n      doc.appendChild(root);\n    }\n\n    return doc;\n  },\n  // Introduced in DOM Level 2:\n  createDocumentType: function createDocumentType(qualifiedName, publicId, systemId) {\n    // raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n    var node = new DocumentType();\n    node.name = qualifiedName;\n    node.nodeName = qualifiedName;\n    node.publicId = publicId;\n    node.systemId = systemId; // Introduced in DOM Level 2:\n    //readonly attribute DOMString        internalSubset;\n    //TODO:..\n    //  readonly attribute NamedNodeMap     entities;\n    //  readonly attribute NamedNodeMap     notations;\n\n    return node;\n  }\n};\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {}\n\n;\nNode.prototype = {\n  firstChild: null,\n  lastChild: null,\n  previousSibling: null,\n  nextSibling: null,\n  attributes: null,\n  parentNode: null,\n  childNodes: null,\n  ownerDocument: null,\n  nodeValue: null,\n  namespaceURI: null,\n  prefix: null,\n  localName: null,\n  // Modified in DOM Level 2:\n  insertBefore: function insertBefore(newChild, refChild) {\n    //raises \n    return _insertBefore(this, newChild, refChild);\n  },\n  replaceChild: function replaceChild(newChild, oldChild) {\n    //raises \n    this.insertBefore(newChild, oldChild);\n\n    if (oldChild) {\n      this.removeChild(oldChild);\n    }\n  },\n  removeChild: function removeChild(oldChild) {\n    return _removeChild(this, oldChild);\n  },\n  appendChild: function appendChild(newChild) {\n    return this.insertBefore(newChild, null);\n  },\n  hasChildNodes: function hasChildNodes() {\n    return this.firstChild != null;\n  },\n  cloneNode: function cloneNode(deep) {\n    return _cloneNode(this.ownerDocument || this, this, deep);\n  },\n  // Modified in DOM Level 2:\n  normalize: function normalize() {\n    var child = this.firstChild;\n\n    while (child) {\n      var next = child.nextSibling;\n\n      if (next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE) {\n        this.removeChild(next);\n        child.appendData(next.data);\n      } else {\n        child.normalize();\n        child = next;\n      }\n    }\n  },\n  // Introduced in DOM Level 2:\n  isSupported: function isSupported(feature, version) {\n    return this.ownerDocument.implementation.hasFeature(feature, version);\n  },\n  // Introduced in DOM Level 2:\n  hasAttributes: function hasAttributes() {\n    return this.attributes.length > 0;\n  },\n  lookupPrefix: function lookupPrefix(namespaceURI) {\n    var el = this;\n\n    while (el) {\n      var map = el._nsMap; //console.dir(map)\n\n      if (map) {\n        for (var n in map) {\n          if (map[n] == namespaceURI) {\n            return n;\n          }\n        }\n      }\n\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  lookupNamespaceURI: function lookupNamespaceURI(prefix) {\n    var el = this;\n\n    while (el) {\n      var map = el._nsMap; //console.dir(map)\n\n      if (map) {\n        if (prefix in map) {\n          return map[prefix];\n        }\n      }\n\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  isDefaultNamespace: function isDefaultNamespace(namespaceURI) {\n    var prefix = this.lookupPrefix(namespaceURI);\n    return prefix == null;\n  }\n};\n\nfunction _xmlEncoder(c) {\n  return c == '<' && '&lt;' || c == '>' && '&gt;' || c == '&' && '&amp;' || c == '\"' && '&quot;' || '&#' + c.charCodeAt() + ';';\n}\n\ncopy(NodeType, Node);\ncopy(NodeType, Node.prototype);\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\n\nfunction _visitNode(node, callback) {\n  if (callback(node)) {\n    return true;\n  }\n\n  if (node = node.firstChild) {\n    do {\n      if (_visitNode(node, callback)) {\n        return true;\n      }\n    } while (node = node.nextSibling);\n  }\n}\n\nfunction Document() {}\n\nfunction _onAddAttribute(doc, el, newAttr) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n\n  if (ns == 'http://www.w3.org/2000/xmlns/') {\n    //update namespace\n    el._nsMap[newAttr.prefix ? newAttr.localName : ''] = newAttr.value;\n  }\n}\n\nfunction _onRemoveAttribute(doc, el, newAttr, remove) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n\n  if (ns == 'http://www.w3.org/2000/xmlns/') {\n    //update namespace\n    delete el._nsMap[newAttr.prefix ? newAttr.localName : ''];\n  }\n}\n\nfunction _onUpdateChild(doc, el, newChild) {\n  if (doc && doc._inc) {\n    doc._inc++; //update childNodes\n\n    var cs = el.childNodes;\n\n    if (newChild) {\n      cs[cs.length++] = newChild;\n    } else {\n      //console.log(1)\n      var child = el.firstChild;\n      var i = 0;\n\n      while (child) {\n        cs[i++] = child;\n        child = child.nextSibling;\n      }\n\n      cs.length = i;\n    }\n  }\n}\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\n\n\nfunction _removeChild(parentNode, child) {\n  var previous = child.previousSibling;\n  var next = child.nextSibling;\n\n  if (previous) {\n    previous.nextSibling = next;\n  } else {\n    parentNode.firstChild = next;\n  }\n\n  if (next) {\n    next.previousSibling = previous;\n  } else {\n    parentNode.lastChild = previous;\n  }\n\n  _onUpdateChild(parentNode.ownerDocument, parentNode);\n\n  return child;\n}\n/**\n * preformance key(refChild == null)\n */\n\n\nfunction _insertBefore(parentNode, newChild, nextChild) {\n  var cp = newChild.parentNode;\n\n  if (cp) {\n    cp.removeChild(newChild); //remove and update\n  }\n\n  if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n    var newFirst = newChild.firstChild;\n\n    if (newFirst == null) {\n      return newChild;\n    }\n\n    var newLast = newChild.lastChild;\n  } else {\n    newFirst = newLast = newChild;\n  }\n\n  var pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n  newFirst.previousSibling = pre;\n  newLast.nextSibling = nextChild;\n\n  if (pre) {\n    pre.nextSibling = newFirst;\n  } else {\n    parentNode.firstChild = newFirst;\n  }\n\n  if (nextChild == null) {\n    parentNode.lastChild = newLast;\n  } else {\n    nextChild.previousSibling = newLast;\n  }\n\n  do {\n    newFirst.parentNode = parentNode;\n  } while (newFirst !== newLast && (newFirst = newFirst.nextSibling));\n\n  _onUpdateChild(parentNode.ownerDocument || parentNode, parentNode); //console.log(parentNode.lastChild.nextSibling == null)\n\n\n  if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n    newChild.firstChild = newChild.lastChild = null;\n  }\n\n  return newChild;\n}\n\nfunction _appendSingleChild(parentNode, newChild) {\n  var cp = newChild.parentNode;\n\n  if (cp) {\n    var pre = parentNode.lastChild;\n    cp.removeChild(newChild); //remove and update\n\n    var pre = parentNode.lastChild;\n  }\n\n  var pre = parentNode.lastChild;\n  newChild.parentNode = parentNode;\n  newChild.previousSibling = pre;\n  newChild.nextSibling = null;\n\n  if (pre) {\n    pre.nextSibling = newChild;\n  } else {\n    parentNode.firstChild = newChild;\n  }\n\n  parentNode.lastChild = newChild;\n\n  _onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\n  return newChild; //console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\n\nDocument.prototype = {\n  //implementation : null,\n  nodeName: '#document',\n  nodeType: DOCUMENT_NODE,\n  doctype: null,\n  documentElement: null,\n  _inc: 1,\n  insertBefore: function insertBefore(newChild, refChild) {\n    //raises \n    if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n      var child = newChild.firstChild;\n\n      while (child) {\n        var next = child.nextSibling;\n        this.insertBefore(child, refChild);\n        child = next;\n      }\n\n      return newChild;\n    }\n\n    if (this.documentElement == null && newChild.nodeType == ELEMENT_NODE) {\n      this.documentElement = newChild;\n    }\n\n    return _insertBefore(this, newChild, refChild), newChild.ownerDocument = this, newChild;\n  },\n  removeChild: function removeChild(oldChild) {\n    if (this.documentElement == oldChild) {\n      this.documentElement = null;\n    }\n\n    return _removeChild(this, oldChild);\n  },\n  // Introduced in DOM Level 2:\n  importNode: function importNode(importedNode, deep) {\n    return _importNode(this, importedNode, deep);\n  },\n  // Introduced in DOM Level 2:\n  getElementById: function getElementById(id) {\n    var rtv = null;\n\n    _visitNode(this.documentElement, function (node) {\n      if (node.nodeType == ELEMENT_NODE) {\n        if (node.getAttribute('id') == id) {\n          rtv = node;\n          return true;\n        }\n      }\n    });\n\n    return rtv;\n  },\n  //document factory method:\n  createElement: function createElement(tagName) {\n    var node = new Element();\n    node.ownerDocument = this;\n    node.nodeName = tagName;\n    node.tagName = tagName;\n    node.childNodes = new NodeList();\n    var attrs = node.attributes = new NamedNodeMap();\n    attrs._ownerElement = node;\n    return node;\n  },\n  createDocumentFragment: function createDocumentFragment() {\n    var node = new DocumentFragment();\n    node.ownerDocument = this;\n    node.childNodes = new NodeList();\n    return node;\n  },\n  createTextNode: function createTextNode(data) {\n    var node = new Text();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createComment: function createComment(data) {\n    var node = new Comment();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createCDATASection: function createCDATASection(data) {\n    var node = new CDATASection();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createProcessingInstruction: function createProcessingInstruction(target, data) {\n    var node = new ProcessingInstruction();\n    node.ownerDocument = this;\n    node.tagName = node.target = target;\n    node.nodeValue = node.data = data;\n    return node;\n  },\n  createAttribute: function createAttribute(name) {\n    var node = new Attr();\n    node.ownerDocument = this;\n    node.name = name;\n    node.nodeName = name;\n    node.localName = name;\n    node.specified = true;\n    return node;\n  },\n  createEntityReference: function createEntityReference(name) {\n    var node = new EntityReference();\n    node.ownerDocument = this;\n    node.nodeName = name;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createElementNS: function createElementNS(namespaceURI, qualifiedName) {\n    var node = new Element();\n    var pl = qualifiedName.split(':');\n    var attrs = node.attributes = new NamedNodeMap();\n    node.childNodes = new NodeList();\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.tagName = qualifiedName;\n    node.namespaceURI = namespaceURI;\n\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n\n    attrs._ownerElement = node;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createAttributeNS: function createAttributeNS(namespaceURI, qualifiedName) {\n    var node = new Attr();\n    var pl = qualifiedName.split(':');\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.name = qualifiedName;\n    node.namespaceURI = namespaceURI;\n    node.specified = true;\n\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n\n    return node;\n  }\n};\n\n_extends(Document, Node);\n\nfunction Element() {\n  this._nsMap = {};\n}\n\n;\nElement.prototype = {\n  nodeType: ELEMENT_NODE,\n  hasAttribute: function hasAttribute(name) {\n    return this.getAttributeNode(name) != null;\n  },\n  getAttribute: function getAttribute(name) {\n    var attr = this.getAttributeNode(name);\n    return attr && attr.value || '';\n  },\n  getAttributeNode: function getAttributeNode(name) {\n    return this.attributes.getNamedItem(name);\n  },\n  setAttribute: function setAttribute(name, value) {\n    var attr = this.ownerDocument.createAttribute(name);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  removeAttribute: function removeAttribute(name) {\n    var attr = this.getAttributeNode(name);\n    attr && this.removeAttributeNode(attr);\n  },\n  //four real opeartion method\n  appendChild: function appendChild(newChild) {\n    if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n      return this.insertBefore(newChild, null);\n    } else {\n      return _appendSingleChild(this, newChild);\n    }\n  },\n  setAttributeNode: function setAttributeNode(newAttr) {\n    return this.attributes.setNamedItem(newAttr);\n  },\n  setAttributeNodeNS: function setAttributeNodeNS(newAttr) {\n    return this.attributes.setNamedItemNS(newAttr);\n  },\n  removeAttributeNode: function removeAttributeNode(oldAttr) {\n    //console.log(this == oldAttr.ownerElement)\n    return this.attributes.removeNamedItem(oldAttr.nodeName);\n  },\n  //get real attribute name,and remove it by removeAttributeNode\n  removeAttributeNS: function removeAttributeNS(namespaceURI, localName) {\n    var old = this.getAttributeNodeNS(namespaceURI, localName);\n    old && this.removeAttributeNode(old);\n  },\n  hasAttributeNS: function hasAttributeNS(namespaceURI, localName) {\n    return this.getAttributeNodeNS(namespaceURI, localName) != null;\n  },\n  getAttributeNS: function getAttributeNS(namespaceURI, localName) {\n    var attr = this.getAttributeNodeNS(namespaceURI, localName);\n    return attr && attr.value || '';\n  },\n  setAttributeNS: function setAttributeNS(namespaceURI, qualifiedName, value) {\n    var attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  getAttributeNodeNS: function getAttributeNodeNS(namespaceURI, localName) {\n    return this.attributes.getNamedItemNS(namespaceURI, localName);\n  },\n  getElementsByTagName: function getElementsByTagName(tagName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)) {\n          ls.push(node);\n        }\n      });\n\n      return ls;\n    });\n  },\n  getElementsByTagNameNS: function getElementsByTagNameNS(namespaceURI, localName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)) {\n          ls.push(node);\n        }\n      });\n\n      return ls;\n    });\n  }\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n_extends(Element, Node);\n\nfunction Attr() {}\n\n;\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n\n_extends(Attr, Node);\n\nfunction CharacterData() {}\n\n;\nCharacterData.prototype = {\n  data: '',\n  substringData: function substringData(offset, count) {\n    return this.data.substring(offset, offset + count);\n  },\n  appendData: function appendData(text) {\n    text = this.data + text;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  },\n  insertData: function insertData(offset, text) {\n    this.replaceData(offset, 0, text);\n  },\n  appendChild: function appendChild(newChild) {\n    throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);\n  },\n  deleteData: function deleteData(offset, count) {\n    this.replaceData(offset, count, \"\");\n  },\n  replaceData: function replaceData(offset, count, text) {\n    var start = this.data.substring(0, offset);\n    var end = this.data.substring(offset + count);\n    text = start + text + end;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  }\n};\n\n_extends(CharacterData, Node);\n\nfunction Text() {}\n\n;\nText.prototype = {\n  nodeName: \"#text\",\n  nodeType: TEXT_NODE,\n  splitText: function splitText(offset) {\n    var text = this.data;\n    var newText = text.substring(offset);\n    text = text.substring(0, offset);\n    this.data = this.nodeValue = text;\n    this.length = text.length;\n    var newNode = this.ownerDocument.createTextNode(newText);\n\n    if (this.parentNode) {\n      this.parentNode.insertBefore(newNode, this.nextSibling);\n    }\n\n    return newNode;\n  }\n};\n\n_extends(Text, CharacterData);\n\nfunction Comment() {}\n\n;\nComment.prototype = {\n  nodeName: \"#comment\",\n  nodeType: COMMENT_NODE\n};\n\n_extends(Comment, CharacterData);\n\nfunction CDATASection() {}\n\n;\nCDATASection.prototype = {\n  nodeName: \"#cdata-section\",\n  nodeType: CDATA_SECTION_NODE\n};\n\n_extends(CDATASection, CharacterData);\n\nfunction DocumentType() {}\n\n;\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n\n_extends(DocumentType, Node);\n\nfunction Notation() {}\n\n;\nNotation.prototype.nodeType = NOTATION_NODE;\n\n_extends(Notation, Node);\n\nfunction Entity() {}\n\n;\nEntity.prototype.nodeType = ENTITY_NODE;\n\n_extends(Entity, Node);\n\nfunction EntityReference() {}\n\n;\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n\n_extends(EntityReference, Node);\n\nfunction DocumentFragment() {}\n\n;\nDocumentFragment.prototype.nodeName = \"#document-fragment\";\nDocumentFragment.prototype.nodeType = DOCUMENT_FRAGMENT_NODE;\n\n_extends(DocumentFragment, Node);\n\nfunction ProcessingInstruction() {}\n\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n\n_extends(ProcessingInstruction, Node);\n\nfunction XMLSerializer() {}\n\nXMLSerializer.prototype.serializeToString = function (node, isHtml, nodeFilter) {\n  return nodeSerializeToString.call(node, isHtml, nodeFilter);\n};\n\nNode.prototype.toString = nodeSerializeToString;\n\nfunction nodeSerializeToString(isHtml, nodeFilter) {\n  var buf = [];\n  var refNode = this.nodeType == 9 ? this.documentElement : this;\n  var prefix = refNode.prefix;\n  var uri = refNode.namespaceURI;\n\n  if (uri && prefix == null) {\n    //console.log(prefix)\n    var prefix = refNode.lookupPrefix(uri);\n\n    if (prefix == null) {\n      //isHTML = true;\n      var visibleNamespaces = [{\n        namespace: uri,\n        prefix: null\n      } //{namespace:uri,prefix:''}\n      ];\n    }\n  }\n\n  serializeToString(this, buf, isHtml, nodeFilter, visibleNamespaces); //console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\n  return buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n  var prefix = node.prefix || '';\n  var uri = node.namespaceURI;\n\n  if (!prefix && !uri) {\n    return false;\n  }\n\n  if (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" || uri == 'http://www.w3.org/2000/xmlns/') {\n    return false;\n  }\n\n  var i = visibleNamespaces.length; //console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\n  while (i--) {\n    var ns = visibleNamespaces[i]; // get namespace prefix\n    //console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\n    if (ns.prefix == prefix) {\n      return ns.namespace != uri;\n    }\n  } //console.log(isHTML,uri,prefix=='')\n  //if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n  //\treturn false;\n  //}\n  //node.flag = '11111'\n  //console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\n\n  return true;\n}\n\nfunction serializeToString(node, buf, isHTML, nodeFilter, visibleNamespaces) {\n  if (nodeFilter) {\n    node = nodeFilter(node);\n\n    if (node) {\n      if (typeof node == 'string') {\n        buf.push(node);\n        return;\n      }\n    } else {\n      return;\n    } //buf.sort.apply(attrs, attributeSorter);\n\n  }\n\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      if (!visibleNamespaces) visibleNamespaces = [];\n      var startVisibleNamespaces = visibleNamespaces.length;\n      var attrs = node.attributes;\n      var len = attrs.length;\n      var child = node.firstChild;\n      var nodeName = node.tagName;\n      isHTML = htmlns === node.namespaceURI || isHTML;\n      buf.push('<', nodeName);\n\n      for (var i = 0; i < len; i++) {\n        // add namespaces for attributes\n        var attr = attrs.item(i);\n\n        if (attr.prefix == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: attr.localName,\n            namespace: attr.value\n          });\n        } else if (attr.nodeName == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: '',\n            namespace: attr.value\n          });\n        }\n      }\n\n      for (var i = 0; i < len; i++) {\n        var attr = attrs.item(i);\n\n        if (needNamespaceDefine(attr, isHTML, visibleNamespaces)) {\n          var prefix = attr.prefix || '';\n          var uri = attr.namespaceURI;\n          var ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n          buf.push(ns, '=\"', uri, '\"');\n          visibleNamespaces.push({\n            prefix: prefix,\n            namespace: uri\n          });\n        }\n\n        serializeToString(attr, buf, isHTML, nodeFilter, visibleNamespaces);\n      } // add namespace for current node\t\t\n\n\n      if (needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n        var prefix = node.prefix || '';\n        var uri = node.namespaceURI;\n        var ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n        buf.push(ns, '=\"', uri, '\"');\n        visibleNamespaces.push({\n          prefix: prefix,\n          namespace: uri\n        });\n      }\n\n      if (child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)) {\n        buf.push('>'); //if is cdata child node\n\n        if (isHTML && /^script$/i.test(nodeName)) {\n          while (child) {\n            if (child.data) {\n              buf.push(child.data);\n            } else {\n              serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces);\n            }\n\n            child = child.nextSibling;\n          }\n        } else {\n          while (child) {\n            serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces);\n            child = child.nextSibling;\n          }\n        }\n\n        buf.push('</', nodeName, '>');\n      } else {\n        buf.push('/>');\n      } // remove added visible namespaces\n      //visibleNamespaces.length = startVisibleNamespaces;\n\n\n      return;\n\n    case DOCUMENT_NODE:\n    case DOCUMENT_FRAGMENT_NODE:\n      var child = node.firstChild;\n\n      while (child) {\n        serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces);\n        child = child.nextSibling;\n      }\n\n      return;\n\n    case ATTRIBUTE_NODE:\n      return buf.push(' ', node.name, '=\"', node.value.replace(/[<&\"]/g, _xmlEncoder), '\"');\n\n    case TEXT_NODE:\n      return buf.push(node.data.replace(/[<&]/g, _xmlEncoder));\n\n    case CDATA_SECTION_NODE:\n      return buf.push('<![CDATA[', node.data, ']]>');\n\n    case COMMENT_NODE:\n      return buf.push(\"<!--\", node.data, \"-->\");\n\n    case DOCUMENT_TYPE_NODE:\n      var pubid = node.publicId;\n      var sysid = node.systemId;\n      buf.push('<!DOCTYPE ', node.name);\n\n      if (pubid) {\n        buf.push(' PUBLIC \"', pubid);\n\n        if (sysid && sysid != '.') {\n          buf.push('\" \"', sysid);\n        }\n\n        buf.push('\">');\n      } else if (sysid && sysid != '.') {\n        buf.push(' SYSTEM \"', sysid, '\">');\n      } else {\n        var sub = node.internalSubset;\n\n        if (sub) {\n          buf.push(\" [\", sub, \"]\");\n        }\n\n        buf.push(\">\");\n      }\n\n      return;\n\n    case PROCESSING_INSTRUCTION_NODE:\n      return buf.push(\"<?\", node.target, \" \", node.data, \"?>\");\n\n    case ENTITY_REFERENCE_NODE:\n      return buf.push('&', node.nodeName, ';');\n    //case ENTITY_NODE:\n    //case NOTATION_NODE:\n\n    default:\n      buf.push('??', node.nodeName);\n  }\n}\n\nfunction _importNode(doc, node, deep) {\n  var node2;\n\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      node2 = node.cloneNode(false);\n      node2.ownerDocument = doc;\n    //var attrs = node2.attributes;\n    //var len = attrs.length;\n    //for(var i=0;i<len;i++){\n    //node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n    //}\n\n    case DOCUMENT_FRAGMENT_NODE:\n      break;\n\n    case ATTRIBUTE_NODE:\n      deep = true;\n      break;\n    //case ENTITY_REFERENCE_NODE:\n    //case PROCESSING_INSTRUCTION_NODE:\n    ////case TEXT_NODE:\n    //case CDATA_SECTION_NODE:\n    //case COMMENT_NODE:\n    //\tdeep = false;\n    //\tbreak;\n    //case DOCUMENT_NODE:\n    //case DOCUMENT_TYPE_NODE:\n    //cannot be imported.\n    //case ENTITY_NODE:\n    //case NOTATION_NODE：\n    //can not hit in level3\n    //default:throw e;\n  }\n\n  if (!node2) {\n    node2 = node.cloneNode(false); //false\n  }\n\n  node2.ownerDocument = doc;\n  node2.parentNode = null;\n\n  if (deep) {\n    var child = node.firstChild;\n\n    while (child) {\n      node2.appendChild(_importNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n\n  return node2;\n} //\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\n\n\nfunction _cloneNode(doc, node, deep) {\n  var node2 = new node.constructor();\n\n  for (var n in node) {\n    var v = node[n];\n\n    if (typeof v != 'object') {\n      if (v != node2[n]) {\n        node2[n] = v;\n      }\n    }\n  }\n\n  if (node.childNodes) {\n    node2.childNodes = new NodeList();\n  }\n\n  node2.ownerDocument = doc;\n\n  switch (node2.nodeType) {\n    case ELEMENT_NODE:\n      var attrs = node.attributes;\n      var attrs2 = node2.attributes = new NamedNodeMap();\n      var len = attrs.length;\n      attrs2._ownerElement = node2;\n\n      for (var i = 0; i < len; i++) {\n        node2.setAttributeNode(_cloneNode(doc, attrs.item(i), true));\n      }\n\n      break;\n      ;\n\n    case ATTRIBUTE_NODE:\n      deep = true;\n  }\n\n  if (deep) {\n    var child = node.firstChild;\n\n    while (child) {\n      node2.appendChild(_cloneNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n\n  return node2;\n}\n\nfunction __set__(object, key, value) {\n  object[key] = value;\n} //do dynamic\n\n\ntry {\n  if (Object.defineProperty) {\n    var getTextContent = function getTextContent(node) {\n      switch (node.nodeType) {\n        case ELEMENT_NODE:\n        case DOCUMENT_FRAGMENT_NODE:\n          var buf = [];\n          node = node.firstChild;\n\n          while (node) {\n            if (node.nodeType !== 7 && node.nodeType !== 8) {\n              buf.push(getTextContent(node));\n            }\n\n            node = node.nextSibling;\n          }\n\n          return buf.join('');\n\n        default:\n          return node.nodeValue;\n      }\n    };\n\n    Object.defineProperty(LiveNodeList.prototype, 'length', {\n      get: function get() {\n        _updateLiveList(this);\n\n        return this.$$length;\n      }\n    });\n    Object.defineProperty(Node.prototype, 'textContent', {\n      get: function get() {\n        return getTextContent(this);\n      },\n      set: function set(data) {\n        switch (this.nodeType) {\n          case ELEMENT_NODE:\n          case DOCUMENT_FRAGMENT_NODE:\n            while (this.firstChild) {\n              this.removeChild(this.firstChild);\n            }\n\n            if (data || String(data)) {\n              this.appendChild(this.ownerDocument.createTextNode(data));\n            }\n\n            break;\n\n          default:\n            //TODO:\n            this.data = data;\n            this.value = data;\n            this.nodeValue = data;\n        }\n      }\n    });\n\n    __set__ = function __set__(object, key, value) {\n      //console.log(value)\n      object['$$' + key] = value;\n    };\n  }\n} catch (e) {//ie8\n} //if(typeof require == 'function'){\n\n\nexports.DOMImplementation = DOMImplementation;\nexports.XMLSerializer = XMLSerializer; //}","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar toUint8 = function toUint8(bytes) {\n  return bytes instanceof Uint8Array ? bytes : new Uint8Array(bytes && bytes.buffer || bytes, bytes && bytes.byteOffset || 0, bytes && bytes.byteLength || 0);\n};\n\nvar bytesToString = function bytesToString(bytes) {\n  if (!bytes) {\n    return '';\n  }\n\n  bytes = Array.prototype.slice.call(bytes);\n  var string = String.fromCharCode.apply(null, toUint8(bytes));\n\n  try {\n    return decodeURIComponent(escape(string));\n  } catch (e) {// if decodeURIComponent/escape fails, we are dealing with partial\n    // or full non string data. Just return the potentially garbled string.\n  }\n\n  return string;\n};\n\nvar id3Size = function id3Size(bytes, offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  bytes = toUint8(bytes);\n  var returnSize = bytes[offset + 6] << 21 | bytes[offset + 7] << 14 | bytes[offset + 8] << 7 | bytes[offset + 9];\n  var flags = bytes[offset + 5];\n  var footerPresent = (flags & 16) >> 4;\n\n  if (footerPresent) {\n    return returnSize + 20;\n  }\n\n  return returnSize + 10;\n};\n\nvar getId3Offset = function getId3Offset(bytes, offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  bytes = toUint8(bytes);\n\n  if (bytes.length - offset < 10 || bytesToString(bytes.subarray(offset, offset + 3)) !== 'ID3') {\n    return offset;\n  }\n\n  offset += id3Size(bytes, offset); // recursive check for id3 tags as some files\n  // have multiple ID3 tag sections even though\n  // they should not.\n\n  return getId3Offset(bytes, offset);\n};\n\nvar isLikely = {\n  aac: function aac(bytes) {\n    var offset = getId3Offset(bytes);\n    return bytes.length >= offset + 2 && (bytes[offset] & 0xFF) === 0xFF && (bytes[offset + 1] & 0xE0) === 0xE0 && (bytes[offset + 1] & 0x16) === 0x10;\n  },\n  mp3: function mp3(bytes) {\n    var offset = getId3Offset(bytes);\n    return bytes.length >= offset + 2 && (bytes[offset] & 0xFF) === 0xFF && (bytes[offset + 1] & 0xE0) === 0xE0 && (bytes[offset + 1] & 0x06) === 0x02;\n  },\n  webm: function webm(bytes) {\n    return bytes.length >= 4 && (bytes[0] & 0xFF) === 0x1A && (bytes[1] & 0xFF) === 0x45 && (bytes[2] & 0xFF) === 0xDF && (bytes[3] & 0xFF) === 0xA3;\n  },\n  mp4: function mp4(bytes) {\n    return bytes.length >= 8 && /^(f|s)typ$/.test(bytesToString(bytes.subarray(4, 8))) && // not 3gp data\n    !/^ftyp3g$/.test(bytesToString(bytes.subarray(4, 10)));\n  },\n  '3gp': function gp(bytes) {\n    return bytes.length >= 10 && /^ftyp3g$/.test(bytesToString(bytes.subarray(4, 10)));\n  },\n  ts: function ts(bytes) {\n    if (bytes.length < 189 && bytes.length >= 1) {\n      return bytes[0] === 0x47;\n    }\n\n    var i = 0; // check the first 376 bytes for two matching sync bytes\n\n    while (i + 188 < bytes.length && i < 188) {\n      if (bytes[i] === 0x47 && bytes[i + 188] === 0x47) {\n        return true;\n      }\n\n      i += 1;\n    }\n\n    return false;\n  },\n  flac: function flac(bytes) {\n    return bytes.length >= 4 && /^fLaC$/.test(bytesToString(bytes.subarray(0, 4)));\n  },\n  ogg: function ogg(bytes) {\n    return bytes.length >= 4 && /^OggS$/.test(bytesToString(bytes.subarray(0, 4)));\n  }\n}; // get all the isLikely functions\n// but make sure 'ts' is at the bottom\n// as it is the least specific\n\nvar isLikelyTypes = Object.keys(isLikely) // remove ts\n.filter(function (t) {\n  return t !== 'ts';\n}) // add it back to the bottom\n.concat('ts'); // make sure we are dealing with uint8 data.\n\nisLikelyTypes.forEach(function (type) {\n  var isLikelyFn = isLikely[type];\n\n  isLikely[type] = function (bytes) {\n    return isLikelyFn(toUint8(bytes));\n  };\n}); // A useful list of file signatures can be found here\n// https://en.wikipedia.org/wiki/List_of_file_signatures\n\nvar detectContainerForBytes = function detectContainerForBytes(bytes) {\n  bytes = toUint8(bytes);\n\n  for (var i = 0; i < isLikelyTypes.length; i++) {\n    var type = isLikelyTypes[i];\n\n    if (isLikely[type](bytes)) {\n      return type;\n    }\n  }\n\n  return '';\n}; // fmp4 is not a container\n\n\nvar isLikelyFmp4MediaSegment = function isLikelyFmp4MediaSegment(bytes) {\n  bytes = toUint8(bytes);\n  var i = 0;\n\n  while (i < bytes.length) {\n    var size = (bytes[i] << 24 | bytes[i + 1] << 16 | bytes[i + 2] << 8 | bytes[i + 3]) >>> 0;\n    var type = bytesToString(bytes.subarray(i + 4, i + 8));\n\n    if (type === 'moof') {\n      return true;\n    }\n\n    if (size === 0 || size + i > bytes.length) {\n      i = bytes.length;\n    } else {\n      i += size;\n    }\n  }\n\n  return false;\n};\n\nexports.detectContainerForBytes = detectContainerForBytes;\nexports.getId3Offset = getId3Offset;\nexports.id3Size = id3Size;\nexports.isLikely = isLikely;\nexports.isLikelyFmp4MediaSegment = isLikelyFmp4MediaSegment;","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n */\nvar toUnsigned = function toUnsigned(value) {\n  return value >>> 0;\n};\n\nvar toHexString = function toHexString(value) {\n  return ('00' + value.toString(16)).slice(-2);\n};\n\nmodule.exports = {\n  toUnsigned: toUnsigned,\n  toHexString: toHexString\n};","module.exports = isFunction;\nvar toString = Object.prototype.toString;\n\nfunction isFunction(fn) {\n  if (!fn) {\n    return false;\n  }\n\n  var string = toString.call(fn);\n  return string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && ( // IE8 and below\n  fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n}\n\n;","var parseSidx = function parseSidx(data) {\n  var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n      result = {\n    version: data[0],\n    flags: new Uint8Array(data.subarray(1, 4)),\n    references: [],\n    referenceId: view.getUint32(4),\n    timescale: view.getUint32(8),\n    earliestPresentationTime: view.getUint32(12),\n    firstOffset: view.getUint32(16)\n  },\n      referenceCount = view.getUint16(22),\n      i;\n\n  for (i = 24; referenceCount; i += 12, referenceCount--) {\n    result.references.push({\n      referenceType: (data[i] & 0x80) >>> 7,\n      referencedSize: view.getUint32(i) & 0x7FFFFFFF,\n      subsegmentDuration: view.getUint32(i + 4),\n      startsWithSap: !!(data[i + 8] & 0x80),\n      sapType: (data[i + 8] & 0x70) >>> 4,\n      sapDeltaTime: view.getUint32(i + 8) & 0x0FFFFFFF\n    });\n  }\n\n  return result;\n};\n\nmodule.exports = parseSidx;","import \"core-js/modules/es.array.reduce\";\n\n/*! @name mpd-parser @version 0.14.0 @license Apache-2.0 */\nimport resolveUrl from '@videojs/vhs-utils/dist/resolve-url';\nimport window from 'global/window';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/dist/decode-b64-to-uint8-array';\nimport { DOMParser } from 'xmldom';\nvar version = \"0.14.0\";\n\nvar isObject = function isObject(obj) {\n  return !!obj && typeof obj === 'object';\n};\n\nvar merge = function merge() {\n  for (var _len = arguments.length, objects = new Array(_len), _key = 0; _key < _len; _key++) {\n    objects[_key] = arguments[_key];\n  }\n\n  return objects.reduce(function (result, source) {\n    Object.keys(source).forEach(function (key) {\n      if (Array.isArray(result[key]) && Array.isArray(source[key])) {\n        result[key] = result[key].concat(source[key]);\n      } else if (isObject(result[key]) && isObject(source[key])) {\n        result[key] = merge(result[key], source[key]);\n      } else {\n        result[key] = source[key];\n      }\n    });\n    return result;\n  }, {});\n};\n\nvar values = function values(o) {\n  return Object.keys(o).map(function (k) {\n    return o[k];\n  });\n};\n\nvar range = function range(start, end) {\n  var result = [];\n\n  for (var i = start; i < end; i++) {\n    result.push(i);\n  }\n\n  return result;\n};\n\nvar flatten = function flatten(lists) {\n  return lists.reduce(function (x, y) {\n    return x.concat(y);\n  }, []);\n};\n\nvar from = function from(list) {\n  if (!list.length) {\n    return [];\n  }\n\n  var result = [];\n\n  for (var i = 0; i < list.length; i++) {\n    result.push(list[i]);\n  }\n\n  return result;\n};\n\nvar findIndexes = function findIndexes(l, key) {\n  return l.reduce(function (a, e, i) {\n    if (e[key]) {\n      a.push(i);\n    }\n\n    return a;\n  }, []);\n};\n\nvar errors = {\n  INVALID_NUMBER_OF_PERIOD: 'INVALID_NUMBER_OF_PERIOD',\n  DASH_EMPTY_MANIFEST: 'DASH_EMPTY_MANIFEST',\n  DASH_INVALID_XML: 'DASH_INVALID_XML',\n  NO_BASE_URL: 'NO_BASE_URL',\n  MISSING_SEGMENT_INFORMATION: 'MISSING_SEGMENT_INFORMATION',\n  SEGMENT_TIME_UNSPECIFIED: 'SEGMENT_TIME_UNSPECIFIED',\n  UNSUPPORTED_UTC_TIMING_SCHEME: 'UNSUPPORTED_UTC_TIMING_SCHEME'\n};\n/**\n * @typedef {Object} SingleUri\n * @property {string} uri - relative location of segment\n * @property {string} resolvedUri - resolved location of segment\n * @property {Object} byterange - Object containing information on how to make byte range\n *   requests following byte-range-spec per RFC2616.\n * @property {String} byterange.length - length of range request\n * @property {String} byterange.offset - byte offset of range request\n *\n * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1\n */\n\n/**\n * Converts a URLType node (5.3.9.2.3 Table 13) to a segment object\n * that conforms to how m3u8-parser is structured\n *\n * @see https://github.com/videojs/m3u8-parser\n *\n * @param {string} baseUrl - baseUrl provided by <BaseUrl> nodes\n * @param {string} source - source url for segment\n * @param {string} range - optional range used for range calls,\n *   follows  RFC 2616, Clause 14.35.1\n * @return {SingleUri} full segment information transformed into a format similar\n *   to m3u8-parser\n */\n\nvar urlTypeToSegment = function urlTypeToSegment(_ref) {\n  var _ref$baseUrl = _ref.baseUrl,\n      baseUrl = _ref$baseUrl === void 0 ? '' : _ref$baseUrl,\n      _ref$source = _ref.source,\n      source = _ref$source === void 0 ? '' : _ref$source,\n      _ref$range = _ref.range,\n      range = _ref$range === void 0 ? '' : _ref$range,\n      _ref$indexRange = _ref.indexRange,\n      indexRange = _ref$indexRange === void 0 ? '' : _ref$indexRange;\n  var segment = {\n    uri: source,\n    resolvedUri: resolveUrl(baseUrl || '', source)\n  };\n\n  if (range || indexRange) {\n    var rangeStr = range ? range : indexRange;\n    var ranges = rangeStr.split('-');\n    var startRange = parseInt(ranges[0], 10);\n    var endRange = parseInt(ranges[1], 10); // byterange should be inclusive according to\n    // RFC 2616, Clause 14.35.1\n\n    segment.byterange = {\n      length: endRange - startRange + 1,\n      offset: startRange\n    };\n  }\n\n  return segment;\n};\n\nvar byteRangeToString = function byteRangeToString(byterange) {\n  // `endRange` is one less than `offset + length` because the HTTP range\n  // header uses inclusive ranges\n  var endRange = byterange.offset + byterange.length - 1;\n  return byterange.offset + \"-\" + endRange;\n};\n/**\n * Functions for calculating the range of available segments in static and dynamic\n * manifests.\n */\n\n\nvar segmentRange = {\n  /**\n   * Returns the entire range of available segments for a static MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  static: function _static(attributes) {\n    var duration = attributes.duration,\n        _attributes$timescale = attributes.timescale,\n        timescale = _attributes$timescale === void 0 ? 1 : _attributes$timescale,\n        sourceDuration = attributes.sourceDuration;\n    return {\n      start: 0,\n      end: Math.ceil(sourceDuration / (duration / timescale))\n    };\n  },\n\n  /**\n   * Returns the current live window range of available segments for a dynamic MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  dynamic: function dynamic(attributes) {\n    var NOW = attributes.NOW,\n        clientOffset = attributes.clientOffset,\n        availabilityStartTime = attributes.availabilityStartTime,\n        _attributes$timescale2 = attributes.timescale,\n        timescale = _attributes$timescale2 === void 0 ? 1 : _attributes$timescale2,\n        duration = attributes.duration,\n        _attributes$start = attributes.start,\n        start = _attributes$start === void 0 ? 0 : _attributes$start,\n        _attributes$minimumUp = attributes.minimumUpdatePeriod,\n        minimumUpdatePeriod = _attributes$minimumUp === void 0 ? 0 : _attributes$minimumUp,\n        _attributes$timeShift = attributes.timeShiftBufferDepth,\n        timeShiftBufferDepth = _attributes$timeShift === void 0 ? Infinity : _attributes$timeShift;\n    var now = (NOW + clientOffset) / 1000;\n    var periodStartWC = availabilityStartTime + start;\n    var periodEndWC = now + minimumUpdatePeriod;\n    var periodDuration = periodEndWC - periodStartWC;\n    var segmentCount = Math.ceil(periodDuration * timescale / duration);\n    var availableStart = Math.floor((now - periodStartWC - timeShiftBufferDepth) * timescale / duration);\n    var availableEnd = Math.floor((now - periodStartWC) * timescale / duration);\n    return {\n      start: Math.max(0, availableStart),\n      end: Math.min(segmentCount, availableEnd)\n    };\n  }\n};\n/**\n * Maps a range of numbers to objects with information needed to build the corresponding\n * segment list\n *\n * @name toSegmentsCallback\n * @function\n * @param {number} number\n *        Number of the segment\n * @param {number} index\n *        Index of the number in the range list\n * @return {{ number: Number, duration: Number, timeline: Number, time: Number }}\n *         Object with segment timing and duration info\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping a range of numbers to\n * information needed to build the segment list.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {toSegmentsCallback}\n *         Callback map function\n */\n\nvar toSegments = function toSegments(attributes) {\n  return function (number, index) {\n    var duration = attributes.duration,\n        _attributes$timescale3 = attributes.timescale,\n        timescale = _attributes$timescale3 === void 0 ? 1 : _attributes$timescale3,\n        periodIndex = attributes.periodIndex,\n        _attributes$startNumb = attributes.startNumber,\n        startNumber = _attributes$startNumb === void 0 ? 1 : _attributes$startNumb;\n    return {\n      number: startNumber + number,\n      duration: duration / timescale,\n      timeline: periodIndex,\n      time: index * duration\n    };\n  };\n};\n/**\n * Returns a list of objects containing segment timing and duration info used for\n * building the list of segments. This uses the @duration attribute specified\n * in the MPD manifest to derive the range of segments.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseByDuration = function parseByDuration(attributes) {\n  var _attributes$type = attributes.type,\n      type = _attributes$type === void 0 ? 'static' : _attributes$type,\n      duration = attributes.duration,\n      _attributes$timescale4 = attributes.timescale,\n      timescale = _attributes$timescale4 === void 0 ? 1 : _attributes$timescale4,\n      sourceDuration = attributes.sourceDuration;\n\n  var _segmentRange$type = segmentRange[type](attributes),\n      start = _segmentRange$type.start,\n      end = _segmentRange$type.end;\n\n  var segments = range(start, end).map(toSegments(attributes));\n\n  if (type === 'static') {\n    var index = segments.length - 1; // final segment may be less than full segment duration\n\n    segments[index].duration = sourceDuration - duration / timescale * index;\n  }\n\n  return segments;\n};\n/**\n * Translates SegmentBase into a set of segments.\n * (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @return {Object.<Array>} list of segments\n */\n\n\nvar segmentsFromBase = function segmentsFromBase(attributes) {\n  var baseUrl = attributes.baseUrl,\n      _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {} : _attributes$initializ,\n      sourceDuration = attributes.sourceDuration,\n      _attributes$indexRang = attributes.indexRange,\n      indexRange = _attributes$indexRang === void 0 ? '' : _attributes$indexRang,\n      duration = attributes.duration; // base url is required for SegmentBase to work, per spec (Section 5.3.9.2.1)\n\n  if (!baseUrl) {\n    throw new Error(errors.NO_BASE_URL);\n  }\n\n  var initSegment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  var segment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: baseUrl,\n    indexRange: indexRange\n  });\n  segment.map = initSegment; // If there is a duration, use it, otherwise use the given duration of the source\n  // (since SegmentBase is only for one total segment)\n\n  if (duration) {\n    var segmentTimeInfo = parseByDuration(attributes);\n\n    if (segmentTimeInfo.length) {\n      segment.duration = segmentTimeInfo[0].duration;\n      segment.timeline = segmentTimeInfo[0].timeline;\n    }\n  } else if (sourceDuration) {\n    segment.duration = sourceDuration;\n    segment.timeline = 0;\n  } // This is used for mediaSequence\n\n\n  segment.number = 0;\n  return [segment];\n};\n/**\n * Given a playlist, a sidx box, and a baseUrl, update the segment list of the playlist\n * according to the sidx information given.\n *\n * playlist.sidx has metadadata about the sidx where-as the sidx param\n * is the parsed sidx box itself.\n *\n * @param {Object} playlist the playlist to update the sidx information for\n * @param {Object} sidx the parsed sidx box\n * @return {Object} the playlist object with the updated sidx information\n */\n\n\nvar addSegmentsToPlaylist = function addSegmentsToPlaylist(playlist, sidx, baseUrl) {\n  // Retain init segment information\n  var initSegment = playlist.sidx.map ? playlist.sidx.map : null; // Retain source duration from initial master manifest parsing\n\n  var sourceDuration = playlist.sidx.duration; // Retain source timeline\n\n  var timeline = playlist.timeline || 0;\n  var sidxByteRange = playlist.sidx.byterange;\n  var sidxEnd = sidxByteRange.offset + sidxByteRange.length; // Retain timescale of the parsed sidx\n\n  var timescale = sidx.timescale; // referenceType 1 refers to other sidx boxes\n\n  var mediaReferences = sidx.references.filter(function (r) {\n    return r.referenceType !== 1;\n  });\n  var segments = []; // firstOffset is the offset from the end of the sidx box\n\n  var startIndex = sidxEnd + sidx.firstOffset;\n\n  for (var i = 0; i < mediaReferences.length; i++) {\n    var reference = sidx.references[i]; // size of the referenced (sub)segment\n\n    var size = reference.referencedSize; // duration of the referenced (sub)segment, in  the  timescale\n    // this will be converted to seconds when generating segments\n\n    var duration = reference.subsegmentDuration; // should be an inclusive range\n\n    var endIndex = startIndex + size - 1;\n    var indexRange = startIndex + \"-\" + endIndex;\n    var attributes = {\n      baseUrl: baseUrl,\n      timescale: timescale,\n      timeline: timeline,\n      // this is used in parseByDuration\n      periodIndex: timeline,\n      duration: duration,\n      sourceDuration: sourceDuration,\n      indexRange: indexRange\n    };\n    var segment = segmentsFromBase(attributes)[0];\n\n    if (initSegment) {\n      segment.map = initSegment;\n    }\n\n    segments.push(segment);\n    startIndex += size;\n  }\n\n  playlist.segments = segments;\n  return playlist;\n};\n\nvar mergeDiscontiguousPlaylists = function mergeDiscontiguousPlaylists(playlists) {\n  var mergedPlaylists = values(playlists.reduce(function (acc, playlist) {\n    // assuming playlist IDs are the same across periods\n    // TODO: handle multiperiod where representation sets are not the same\n    // across periods\n    var name = playlist.attributes.id + (playlist.attributes.lang || ''); // Periods after first\n\n    if (acc[name]) {\n      var _acc$name$segments; // first segment of subsequent periods signal a discontinuity\n\n\n      if (playlist.segments[0]) {\n        playlist.segments[0].discontinuity = true;\n      }\n\n      (_acc$name$segments = acc[name].segments).push.apply(_acc$name$segments, playlist.segments); // bubble up contentProtection, this assumes all DRM content\n      // has the same contentProtection\n\n\n      if (playlist.attributes.contentProtection) {\n        acc[name].attributes.contentProtection = playlist.attributes.contentProtection;\n      }\n    } else {\n      // first Period\n      acc[name] = playlist;\n    }\n\n    return acc;\n  }, {}));\n  return mergedPlaylists.map(function (playlist) {\n    playlist.discontinuityStarts = findIndexes(playlist.segments, 'discontinuity');\n    return playlist;\n  });\n};\n\nvar addSegmentInfoFromSidx = function addSegmentInfoFromSidx(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  if (!Object.keys(sidxMapping).length) {\n    return playlists;\n  }\n\n  for (var i in playlists) {\n    var playlist = playlists[i];\n\n    if (!playlist.sidx) {\n      continue;\n    }\n\n    var sidxKey = playlist.sidx.uri + '-' + byteRangeToString(playlist.sidx.byterange);\n    var sidxMatch = sidxMapping[sidxKey] && sidxMapping[sidxKey].sidx;\n\n    if (playlist.sidx && sidxMatch) {\n      addSegmentsToPlaylist(playlist, sidxMatch, playlist.sidx.resolvedUri);\n    }\n  }\n\n  return playlists;\n};\n\nvar formatAudioPlaylist = function formatAudioPlaylist(_ref) {\n  var _attributes;\n\n  var attributes = _ref.attributes,\n      segments = _ref.segments,\n      sidx = _ref.sidx;\n  var playlist = {\n    attributes: (_attributes = {\n      NAME: attributes.id,\n      BANDWIDTH: attributes.bandwidth,\n      CODECS: attributes.codecs\n    }, _attributes['PROGRAM-ID'] = 1, _attributes),\n    uri: '',\n    endList: (attributes.type || 'static') === 'static',\n    timeline: attributes.periodIndex,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    segments: segments,\n    mediaSequence: segments.length ? segments[0].number : 1\n  };\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  return playlist;\n};\n\nvar formatVttPlaylist = function formatVttPlaylist(_ref2) {\n  var _m3u8Attributes;\n\n  var attributes = _ref2.attributes,\n      segments = _ref2.segments;\n\n  if (typeof segments === 'undefined') {\n    // vtt tracks may use single file in BaseURL\n    segments = [{\n      uri: attributes.baseUrl,\n      timeline: attributes.periodIndex,\n      resolvedUri: attributes.baseUrl || '',\n      duration: attributes.sourceDuration,\n      number: 0\n    }]; // targetDuration should be the same duration as the only segment\n\n    attributes.duration = attributes.sourceDuration;\n  }\n\n  var m3u8Attributes = (_m3u8Attributes = {\n    NAME: attributes.id,\n    BANDWIDTH: attributes.bandwidth\n  }, _m3u8Attributes['PROGRAM-ID'] = 1, _m3u8Attributes);\n\n  if (attributes.codecs) {\n    m3u8Attributes.CODECS = attributes.codecs;\n  }\n\n  return {\n    attributes: m3u8Attributes,\n    uri: '',\n    endList: (attributes.type || 'static') === 'static',\n    timeline: attributes.periodIndex,\n    resolvedUri: attributes.baseUrl || '',\n    targetDuration: attributes.duration,\n    segments: segments,\n    mediaSequence: segments.length ? segments[0].number : 1\n  };\n};\n\nvar organizeAudioPlaylists = function organizeAudioPlaylists(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  var mainPlaylist;\n  var formattedPlaylists = playlists.reduce(function (a, playlist) {\n    var role = playlist.attributes.role && playlist.attributes.role.value || '';\n    var language = playlist.attributes.lang || '';\n    var label = 'main';\n\n    if (language) {\n      var roleLabel = role ? \" (\" + role + \")\" : '';\n      label = \"\" + playlist.attributes.lang + roleLabel;\n    } // skip if we already have the highest quality audio for a language\n\n\n    if (a[label] && a[label].playlists[0].attributes.BANDWIDTH > playlist.attributes.bandwidth) {\n      return a;\n    }\n\n    a[label] = {\n      language: language,\n      autoselect: true,\n      default: role === 'main',\n      playlists: addSegmentInfoFromSidx([formatAudioPlaylist(playlist)], sidxMapping),\n      uri: ''\n    };\n\n    if (typeof mainPlaylist === 'undefined' && role === 'main') {\n      mainPlaylist = playlist;\n      mainPlaylist.default = true;\n    }\n\n    return a;\n  }, {}); // if no playlists have role \"main\", mark the first as main\n\n  if (!mainPlaylist) {\n    var firstLabel = Object.keys(formattedPlaylists)[0];\n    formattedPlaylists[firstLabel].default = true;\n  }\n\n  return formattedPlaylists;\n};\n\nvar organizeVttPlaylists = function organizeVttPlaylists(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  return playlists.reduce(function (a, playlist) {\n    var label = playlist.attributes.lang || 'text'; // skip if we already have subtitles\n\n    if (a[label]) {\n      return a;\n    }\n\n    a[label] = {\n      language: label,\n      default: false,\n      autoselect: false,\n      playlists: addSegmentInfoFromSidx([formatVttPlaylist(playlist)], sidxMapping),\n      uri: ''\n    };\n    return a;\n  }, {});\n};\n\nvar formatVideoPlaylist = function formatVideoPlaylist(_ref3) {\n  var _attributes2;\n\n  var attributes = _ref3.attributes,\n      segments = _ref3.segments,\n      sidx = _ref3.sidx;\n  var playlist = {\n    attributes: (_attributes2 = {\n      NAME: attributes.id,\n      AUDIO: 'audio',\n      SUBTITLES: 'subs',\n      RESOLUTION: {\n        width: attributes.width,\n        height: attributes.height\n      },\n      CODECS: attributes.codecs,\n      BANDWIDTH: attributes.bandwidth\n    }, _attributes2['PROGRAM-ID'] = 1, _attributes2),\n    uri: '',\n    endList: (attributes.type || 'static') === 'static',\n    timeline: attributes.periodIndex,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    segments: segments,\n    mediaSequence: segments.length ? segments[0].number : 1\n  };\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  return playlist;\n};\n\nvar toM3u8 = function toM3u8(dashPlaylists, locations, sidxMapping) {\n  var _mediaGroups;\n\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  if (!dashPlaylists.length) {\n    return {};\n  } // grab all master attributes\n\n\n  var _dashPlaylists$0$attr = dashPlaylists[0].attributes,\n      duration = _dashPlaylists$0$attr.sourceDuration,\n      _dashPlaylists$0$attr2 = _dashPlaylists$0$attr.type,\n      type = _dashPlaylists$0$attr2 === void 0 ? 'static' : _dashPlaylists$0$attr2,\n      suggestedPresentationDelay = _dashPlaylists$0$attr.suggestedPresentationDelay,\n      minimumUpdatePeriod = _dashPlaylists$0$attr.minimumUpdatePeriod;\n\n  var videoOnly = function videoOnly(_ref4) {\n    var attributes = _ref4.attributes;\n    return attributes.mimeType === 'video/mp4' || attributes.contentType === 'video';\n  };\n\n  var audioOnly = function audioOnly(_ref5) {\n    var attributes = _ref5.attributes;\n    return attributes.mimeType === 'audio/mp4' || attributes.contentType === 'audio';\n  };\n\n  var vttOnly = function vttOnly(_ref6) {\n    var attributes = _ref6.attributes;\n    return attributes.mimeType === 'text/vtt' || attributes.contentType === 'text';\n  };\n\n  var videoPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist);\n  var audioPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly));\n  var vttPlaylists = dashPlaylists.filter(vttOnly);\n  var master = {\n    allowCache: true,\n    discontinuityStarts: [],\n    segments: [],\n    endList: true,\n    mediaGroups: (_mediaGroups = {\n      AUDIO: {},\n      VIDEO: {}\n    }, _mediaGroups['CLOSED-CAPTIONS'] = {}, _mediaGroups.SUBTITLES = {}, _mediaGroups),\n    uri: '',\n    duration: duration,\n    playlists: addSegmentInfoFromSidx(videoPlaylists, sidxMapping)\n  };\n\n  if (minimumUpdatePeriod >= 0) {\n    master.minimumUpdatePeriod = minimumUpdatePeriod * 1000;\n  }\n\n  if (locations) {\n    master.locations = locations;\n  }\n\n  if (type === 'dynamic') {\n    master.suggestedPresentationDelay = suggestedPresentationDelay;\n  }\n\n  if (audioPlaylists.length) {\n    master.mediaGroups.AUDIO.audio = organizeAudioPlaylists(audioPlaylists, sidxMapping);\n  }\n\n  if (vttPlaylists.length) {\n    master.mediaGroups.SUBTITLES.subs = organizeVttPlaylists(vttPlaylists, sidxMapping);\n  }\n\n  return master;\n};\n/**\n * Calculates the R (repetition) value for a live stream (for the final segment\n * in a manifest where the r value is negative 1)\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {number} time\n *        current time (typically the total time up until the final segment)\n * @param {number} duration\n *        duration property for the given <S />\n *\n * @return {number}\n *        R value to reach the end of the given period\n */\n\n\nvar getLiveRValue = function getLiveRValue(attributes, time, duration) {\n  var NOW = attributes.NOW,\n      clientOffset = attributes.clientOffset,\n      availabilityStartTime = attributes.availabilityStartTime,\n      _attributes$timescale = attributes.timescale,\n      timescale = _attributes$timescale === void 0 ? 1 : _attributes$timescale,\n      _attributes$start = attributes.start,\n      start = _attributes$start === void 0 ? 0 : _attributes$start,\n      _attributes$minimumUp = attributes.minimumUpdatePeriod,\n      minimumUpdatePeriod = _attributes$minimumUp === void 0 ? 0 : _attributes$minimumUp;\n  var now = (NOW + clientOffset) / 1000;\n  var periodStartWC = availabilityStartTime + start;\n  var periodEndWC = now + minimumUpdatePeriod;\n  var periodDuration = periodEndWC - periodStartWC;\n  return Math.ceil((periodDuration * timescale - time) / duration);\n};\n/**\n * Uses information provided by SegmentTemplate.SegmentTimeline to determine segment\n * timing and duration\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseByTimeline = function parseByTimeline(attributes, segmentTimeline) {\n  var _attributes$type = attributes.type,\n      type = _attributes$type === void 0 ? 'static' : _attributes$type,\n      _attributes$minimumUp2 = attributes.minimumUpdatePeriod,\n      minimumUpdatePeriod = _attributes$minimumUp2 === void 0 ? 0 : _attributes$minimumUp2,\n      _attributes$media = attributes.media,\n      media = _attributes$media === void 0 ? '' : _attributes$media,\n      sourceDuration = attributes.sourceDuration,\n      _attributes$timescale2 = attributes.timescale,\n      timescale = _attributes$timescale2 === void 0 ? 1 : _attributes$timescale2,\n      _attributes$startNumb = attributes.startNumber,\n      startNumber = _attributes$startNumb === void 0 ? 1 : _attributes$startNumb,\n      timeline = attributes.periodIndex;\n  var segments = [];\n  var time = -1;\n\n  for (var sIndex = 0; sIndex < segmentTimeline.length; sIndex++) {\n    var S = segmentTimeline[sIndex];\n    var duration = S.d;\n    var repeat = S.r || 0;\n    var segmentTime = S.t || 0;\n\n    if (time < 0) {\n      // first segment\n      time = segmentTime;\n    }\n\n    if (segmentTime && segmentTime > time) {\n      // discontinuity\n      // TODO: How to handle this type of discontinuity\n      // timeline++ here would treat it like HLS discontuity and content would\n      // get appended without gap\n      // E.G.\n      //  <S t=\"0\" d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S t=\"5\" d=\"1\" />\n      // would have $Time$ values of [0, 1, 2, 5]\n      // should this be appened at time positions [0, 1, 2, 3],(#EXT-X-DISCONTINUITY)\n      // or [0, 1, 2, gap, gap, 5]? (#EXT-X-GAP)\n      // does the value of sourceDuration consider this when calculating arbitrary\n      // negative @r repeat value?\n      // E.G. Same elements as above with this added at the end\n      //  <S d=\"1\" r=\"-1\" />\n      //  with a sourceDuration of 10\n      // Would the 2 gaps be included in the time duration calculations resulting in\n      // 8 segments with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9] or 10 segments\n      // with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9, 10, 11] ?\n      time = segmentTime;\n    }\n\n    var count = void 0;\n\n    if (repeat < 0) {\n      var nextS = sIndex + 1;\n\n      if (nextS === segmentTimeline.length) {\n        // last segment\n        if (type === 'dynamic' && minimumUpdatePeriod > 0 && media.indexOf('$Number$') > 0) {\n          count = getLiveRValue(attributes, time, duration);\n        } else {\n          // TODO: This may be incorrect depending on conclusion of TODO above\n          count = (sourceDuration * timescale - time) / duration;\n        }\n      } else {\n        count = (segmentTimeline[nextS].t - time) / duration;\n      }\n    } else {\n      count = repeat + 1;\n    }\n\n    var end = startNumber + segments.length + count;\n    var number = startNumber + segments.length;\n\n    while (number < end) {\n      segments.push({\n        number: number,\n        duration: duration / timescale,\n        time: time,\n        timeline: timeline\n      });\n      time += duration;\n      number++;\n    }\n  }\n\n  return segments;\n};\n\nvar identifierPattern = /\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g;\n/**\n * Replaces template identifiers with corresponding values. To be used as the callback\n * for String.prototype.replace\n *\n * @name replaceCallback\n * @function\n * @param {string} match\n *        Entire match of identifier\n * @param {string} identifier\n *        Name of matched identifier\n * @param {string} format\n *        Format tag string. Its presence indicates that padding is expected\n * @param {string} width\n *        Desired length of the replaced value. Values less than this width shall be left\n *        zero padded\n * @return {string}\n *         Replacement for the matched identifier\n */\n\n/**\n * Returns a function to be used as a callback for String.prototype.replace to replace\n * template identifiers\n *\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {replaceCallback}\n *         Callback to be used with String.prototype.replace to replace identifiers\n */\n\nvar identifierReplacement = function identifierReplacement(values) {\n  return function (match, identifier, format, width) {\n    if (match === '$$') {\n      // escape sequence\n      return '$';\n    }\n\n    if (typeof values[identifier] === 'undefined') {\n      return match;\n    }\n\n    var value = '' + values[identifier];\n\n    if (identifier === 'RepresentationID') {\n      // Format tag shall not be present with RepresentationID\n      return value;\n    }\n\n    if (!format) {\n      width = 1;\n    } else {\n      width = parseInt(width, 10);\n    }\n\n    if (value.length >= width) {\n      return value;\n    }\n\n    return \"\" + new Array(width - value.length + 1).join('0') + value;\n  };\n};\n/**\n * Constructs a segment url from a template string\n *\n * @param {string} url\n *        Template string to construct url from\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {string}\n *         Segment url with identifiers replaced\n */\n\n\nvar constructTemplateUrl = function constructTemplateUrl(url, values) {\n  return url.replace(identifierPattern, identifierReplacement(values));\n};\n/**\n * Generates a list of objects containing timing and duration information about each\n * segment needed to generate segment uris and the complete segment object\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseTemplateInfo = function parseTemplateInfo(attributes, segmentTimeline) {\n  if (!attributes.duration && !segmentTimeline) {\n    // if neither @duration or SegmentTimeline are present, then there shall be exactly\n    // one media segment\n    return [{\n      number: attributes.startNumber || 1,\n      duration: attributes.sourceDuration,\n      time: 0,\n      timeline: attributes.periodIndex\n    }];\n  }\n\n  if (attributes.duration) {\n    return parseByDuration(attributes);\n  }\n\n  return parseByTimeline(attributes, segmentTimeline);\n};\n/**\n * Generates a list of segments using information provided by the SegmentTemplate element\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object[]}\n *         List of segment objects\n */\n\n\nvar segmentsFromTemplate = function segmentsFromTemplate(attributes, segmentTimeline) {\n  var templateValues = {\n    RepresentationID: attributes.id,\n    Bandwidth: attributes.bandwidth || 0\n  };\n  var _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {\n    sourceURL: '',\n    range: ''\n  } : _attributes$initializ;\n  var mapSegment = urlTypeToSegment({\n    baseUrl: attributes.baseUrl,\n    source: constructTemplateUrl(initialization.sourceURL, templateValues),\n    range: initialization.range\n  });\n  var segments = parseTemplateInfo(attributes, segmentTimeline);\n  return segments.map(function (segment) {\n    templateValues.Number = segment.number;\n    templateValues.Time = segment.time;\n    var uri = constructTemplateUrl(attributes.media || '', templateValues);\n    return {\n      uri: uri,\n      timeline: segment.timeline,\n      duration: segment.duration,\n      resolvedUri: resolveUrl(attributes.baseUrl || '', uri),\n      map: mapSegment,\n      number: segment.number\n    };\n  });\n};\n/**\n * Converts a <SegmentUrl> (of type URLType from the DASH spec 5.3.9.2 Table 14)\n * to an object that matches the output of a segment in videojs/mpd-parser\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object} segmentUrl\n *   <SegmentURL> node to translate into a segment object\n * @return {Object} translated segment object\n */\n\n\nvar SegmentURLToSegmentObject = function SegmentURLToSegmentObject(attributes, segmentUrl) {\n  var baseUrl = attributes.baseUrl,\n      _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {} : _attributes$initializ;\n  var initSegment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  var segment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: segmentUrl.media,\n    range: segmentUrl.mediaRange\n  });\n  segment.map = initSegment;\n  return segment;\n};\n/**\n * Generates a list of segments using information provided by the SegmentList element\n * SegmentList (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object.<Array>} list of segments\n */\n\n\nvar segmentsFromList = function segmentsFromList(attributes, segmentTimeline) {\n  var duration = attributes.duration,\n      _attributes$segmentUr = attributes.segmentUrls,\n      segmentUrls = _attributes$segmentUr === void 0 ? [] : _attributes$segmentUr; // Per spec (5.3.9.2.1) no way to determine segment duration OR\n  // if both SegmentTimeline and @duration are defined, it is outside of spec.\n\n  if (!duration && !segmentTimeline || duration && segmentTimeline) {\n    throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);\n  }\n\n  var segmentUrlMap = segmentUrls.map(function (segmentUrlObject) {\n    return SegmentURLToSegmentObject(attributes, segmentUrlObject);\n  });\n  var segmentTimeInfo;\n\n  if (duration) {\n    segmentTimeInfo = parseByDuration(attributes);\n  }\n\n  if (segmentTimeline) {\n    segmentTimeInfo = parseByTimeline(attributes, segmentTimeline);\n  }\n\n  var segments = segmentTimeInfo.map(function (segmentTime, index) {\n    if (segmentUrlMap[index]) {\n      var segment = segmentUrlMap[index];\n      segment.timeline = segmentTime.timeline;\n      segment.duration = segmentTime.duration;\n      segment.number = segmentTime.number;\n      return segment;\n    } // Since we're mapping we should get rid of any blank segments (in case\n    // the given SegmentTimeline is handling for more elements than we have\n    // SegmentURLs for).\n\n  }).filter(function (segment) {\n    return segment;\n  });\n  return segments;\n};\n\nvar generateSegments = function generateSegments(_ref) {\n  var attributes = _ref.attributes,\n      segmentInfo = _ref.segmentInfo;\n  var segmentAttributes;\n  var segmentsFn;\n\n  if (segmentInfo.template) {\n    segmentsFn = segmentsFromTemplate;\n    segmentAttributes = merge(attributes, segmentInfo.template);\n  } else if (segmentInfo.base) {\n    segmentsFn = segmentsFromBase;\n    segmentAttributes = merge(attributes, segmentInfo.base);\n  } else if (segmentInfo.list) {\n    segmentsFn = segmentsFromList;\n    segmentAttributes = merge(attributes, segmentInfo.list);\n  }\n\n  var segmentsInfo = {\n    attributes: attributes\n  };\n\n  if (!segmentsFn) {\n    return segmentsInfo;\n  }\n\n  var segments = segmentsFn(segmentAttributes, segmentInfo.timeline); // The @duration attribute will be used to determin the playlist's targetDuration which\n  // must be in seconds. Since we've generated the segment list, we no longer need\n  // @duration to be in @timescale units, so we can convert it here.\n\n  if (segmentAttributes.duration) {\n    var _segmentAttributes = segmentAttributes,\n        duration = _segmentAttributes.duration,\n        _segmentAttributes$ti = _segmentAttributes.timescale,\n        timescale = _segmentAttributes$ti === void 0 ? 1 : _segmentAttributes$ti;\n    segmentAttributes.duration = duration / timescale;\n  } else if (segments.length) {\n    // if there is no @duration attribute, use the largest segment duration as\n    // as target duration\n    segmentAttributes.duration = segments.reduce(function (max, segment) {\n      return Math.max(max, Math.ceil(segment.duration));\n    }, 0);\n  } else {\n    segmentAttributes.duration = 0;\n  }\n\n  segmentsInfo.attributes = segmentAttributes;\n  segmentsInfo.segments = segments; // This is a sidx box without actual segment information\n\n  if (segmentInfo.base && segmentAttributes.indexRange) {\n    segmentsInfo.sidx = segments[0];\n    segmentsInfo.segments = [];\n  }\n\n  return segmentsInfo;\n};\n\nvar toPlaylists = function toPlaylists(representations) {\n  return representations.map(generateSegments);\n};\n\nvar findChildren = function findChildren(element, name) {\n  return from(element.childNodes).filter(function (_ref) {\n    var tagName = _ref.tagName;\n    return tagName === name;\n  });\n};\n\nvar getContent = function getContent(element) {\n  return element.textContent.trim();\n};\n\nvar parseDuration = function parseDuration(str) {\n  var SECONDS_IN_YEAR = 365 * 24 * 60 * 60;\n  var SECONDS_IN_MONTH = 30 * 24 * 60 * 60;\n  var SECONDS_IN_DAY = 24 * 60 * 60;\n  var SECONDS_IN_HOUR = 60 * 60;\n  var SECONDS_IN_MIN = 60; // P10Y10M10DT10H10M10.1S\n\n  var durationRegex = /P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/;\n  var match = durationRegex.exec(str);\n\n  if (!match) {\n    return 0;\n  }\n\n  var _match$slice = match.slice(1),\n      year = _match$slice[0],\n      month = _match$slice[1],\n      day = _match$slice[2],\n      hour = _match$slice[3],\n      minute = _match$slice[4],\n      second = _match$slice[5];\n\n  return parseFloat(year || 0) * SECONDS_IN_YEAR + parseFloat(month || 0) * SECONDS_IN_MONTH + parseFloat(day || 0) * SECONDS_IN_DAY + parseFloat(hour || 0) * SECONDS_IN_HOUR + parseFloat(minute || 0) * SECONDS_IN_MIN + parseFloat(second || 0);\n};\n\nvar parseDate = function parseDate(str) {\n  // Date format without timezone according to ISO 8601\n  // YYY-MM-DDThh:mm:ss.ssssss\n  var dateRegex = /^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/; // If the date string does not specifiy a timezone, we must specifiy UTC. This is\n  // expressed by ending with 'Z'\n\n  if (dateRegex.test(str)) {\n    str += 'Z';\n  }\n\n  return Date.parse(str);\n};\n\nvar parsers = {\n  /**\n   * Specifies the duration of the entire Media Presentation. Format is a duration string\n   * as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  mediaPresentationDuration: function mediaPresentationDuration(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the Segment availability start time for all Segments referred to in this\n   * MPD. For a dynamic manifest, it specifies the anchor for the earliest availability\n   * time. Format is a date string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The date as seconds from unix epoch\n   */\n  availabilityStartTime: function availabilityStartTime(value) {\n    return parseDate(value) / 1000;\n  },\n\n  /**\n   * Specifies the smallest period between potential changes to the MPD. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  minimumUpdatePeriod: function minimumUpdatePeriod(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the suggested presentation delay. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  suggestedPresentationDelay: function suggestedPresentationDelay(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * specifices the type of mpd. Can be either \"static\" or \"dynamic\"\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   *\n   * @return {string}\n   *         The type as a string\n   */\n  type: function type(value) {\n    return value;\n  },\n\n  /**\n   * Specifies the duration of the smallest time shifting buffer for any Representation\n   * in the MPD. Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  timeShiftBufferDepth: function timeShiftBufferDepth(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the PeriodStart time of the Period relative to the availabilityStarttime.\n   * Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  start: function start(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the width of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed width\n   */\n  width: function width(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the height of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed height\n   */\n  height: function height(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the bitrate of the representation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed bandwidth\n   */\n  bandwidth: function bandwidth(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the number of the first Media Segment in this Representation in the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  startNumber: function startNumber(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the timescale in units per seconds\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The aprsed timescale\n   */\n  timescale: function timescale(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the constant approximate Segment duration\n   * NOTE: The <Period> element also contains an @duration attribute. This duration\n   *       specifies the duration of the Period. This attribute is currently not\n   *       supported by the rest of the parser, however we still check for it to prevent\n   *       errors.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  duration: function duration(value) {\n    var parsedValue = parseInt(value, 10);\n\n    if (isNaN(parsedValue)) {\n      return parseDuration(value);\n    }\n\n    return parsedValue;\n  },\n\n  /**\n   * Specifies the Segment duration, in units of the value of the @timescale.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  d: function d(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the MPD start time, in @timescale units, the first Segment in the series\n   * starts relative to the beginning of the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed time\n   */\n  t: function t(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the repeat count of the number of following contiguous Segments with the\n   * same duration expressed by the value of @d\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  r: function r(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Default parser for all other attributes. Acts as a no-op and just returns the value\n   * as a string\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {string}\n   *         Unparsed value\n   */\n  DEFAULT: function DEFAULT(value) {\n    return value;\n  }\n};\n/**\n * Gets all the attributes and values of the provided node, parses attributes with known\n * types, and returns an object with attribute names mapped to values.\n *\n * @param {Node} el\n *        The node to parse attributes from\n * @return {Object}\n *         Object with all attributes of el parsed\n */\n\nvar parseAttributes = function parseAttributes(el) {\n  if (!(el && el.attributes)) {\n    return {};\n  }\n\n  return from(el.attributes).reduce(function (a, e) {\n    var parseFn = parsers[e.name] || parsers.DEFAULT;\n    a[e.name] = parseFn(e.value);\n    return a;\n  }, {});\n};\n\nvar keySystemsMap = {\n  'urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b': 'org.w3.clearkey',\n  'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed': 'com.widevine.alpha',\n  'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95': 'com.microsoft.playready',\n  'urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb': 'com.adobe.primetime'\n};\n/**\n * Builds a list of urls that is the product of the reference urls and BaseURL values\n *\n * @param {string[]} referenceUrls\n *        List of reference urls to resolve to\n * @param {Node[]} baseUrlElements\n *        List of BaseURL nodes from the mpd\n * @return {string[]}\n *         List of resolved urls\n */\n\nvar buildBaseUrls = function buildBaseUrls(referenceUrls, baseUrlElements) {\n  if (!baseUrlElements.length) {\n    return referenceUrls;\n  }\n\n  return flatten(referenceUrls.map(function (reference) {\n    return baseUrlElements.map(function (baseUrlElement) {\n      return resolveUrl(reference, getContent(baseUrlElement));\n    });\n  }));\n};\n/**\n * Contains all Segment information for its containing AdaptationSet\n *\n * @typedef {Object} SegmentInformation\n * @property {Object|undefined} template\n *           Contains the attributes for the SegmentTemplate node\n * @property {Object[]|undefined} timeline\n *           Contains a list of atrributes for each S node within the SegmentTimeline node\n * @property {Object|undefined} list\n *           Contains the attributes for the SegmentList node\n * @property {Object|undefined} base\n *           Contains the attributes for the SegmentBase node\n */\n\n/**\n * Returns all available Segment information contained within the AdaptationSet node\n *\n * @param {Node} adaptationSet\n *        The AdaptationSet node to get Segment information from\n * @return {SegmentInformation}\n *         The Segment information contained within the provided AdaptationSet\n */\n\n\nvar getSegmentInformation = function getSegmentInformation(adaptationSet) {\n  var segmentTemplate = findChildren(adaptationSet, 'SegmentTemplate')[0];\n  var segmentList = findChildren(adaptationSet, 'SegmentList')[0];\n  var segmentUrls = segmentList && findChildren(segmentList, 'SegmentURL').map(function (s) {\n    return merge({\n      tag: 'SegmentURL'\n    }, parseAttributes(s));\n  });\n  var segmentBase = findChildren(adaptationSet, 'SegmentBase')[0];\n  var segmentTimelineParentNode = segmentList || segmentTemplate;\n  var segmentTimeline = segmentTimelineParentNode && findChildren(segmentTimelineParentNode, 'SegmentTimeline')[0];\n  var segmentInitializationParentNode = segmentList || segmentBase || segmentTemplate;\n  var segmentInitialization = segmentInitializationParentNode && findChildren(segmentInitializationParentNode, 'Initialization')[0]; // SegmentTemplate is handled slightly differently, since it can have both\n  // @initialization and an <Initialization> node.  @initialization can be templated,\n  // while the node can have a url and range specified.  If the <SegmentTemplate> has\n  // both @initialization and an <Initialization> subelement we opt to override with\n  // the node, as this interaction is not defined in the spec.\n\n  var template = segmentTemplate && parseAttributes(segmentTemplate);\n\n  if (template && segmentInitialization) {\n    template.initialization = segmentInitialization && parseAttributes(segmentInitialization);\n  } else if (template && template.initialization) {\n    // If it is @initialization we convert it to an object since this is the format that\n    // later functions will rely on for the initialization segment.  This is only valid\n    // for <SegmentTemplate>\n    template.initialization = {\n      sourceURL: template.initialization\n    };\n  }\n\n  var segmentInfo = {\n    template: template,\n    timeline: segmentTimeline && findChildren(segmentTimeline, 'S').map(function (s) {\n      return parseAttributes(s);\n    }),\n    list: segmentList && merge(parseAttributes(segmentList), {\n      segmentUrls: segmentUrls,\n      initialization: parseAttributes(segmentInitialization)\n    }),\n    base: segmentBase && merge(parseAttributes(segmentBase), {\n      initialization: parseAttributes(segmentInitialization)\n    })\n  };\n  Object.keys(segmentInfo).forEach(function (key) {\n    if (!segmentInfo[key]) {\n      delete segmentInfo[key];\n    }\n  });\n  return segmentInfo;\n};\n/**\n * Contains Segment information and attributes needed to construct a Playlist object\n * from a Representation\n *\n * @typedef {Object} RepresentationInformation\n * @property {SegmentInformation} segmentInfo\n *           Segment information for this Representation\n * @property {Object} attributes\n *           Inherited attributes for this Representation\n */\n\n/**\n * Maps a Representation node to an object containing Segment information and attributes\n *\n * @name inheritBaseUrlsCallback\n * @function\n * @param {Node} representation\n *        Representation node from the mpd\n * @return {RepresentationInformation}\n *         Representation information needed to construct a Playlist object\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Representation nodes to\n * Segment information and attributes using inherited BaseURL nodes.\n *\n * @param {Object} adaptationSetAttributes\n *        Contains attributes inherited by the AdaptationSet\n * @param {string[]} adaptationSetBaseUrls\n *        Contains list of resolved base urls inherited by the AdaptationSet\n * @param {SegmentInformation} adaptationSetSegmentInfo\n *        Contains Segment information for the AdaptationSet\n * @return {inheritBaseUrlsCallback}\n *         Callback map function\n */\n\n\nvar inheritBaseUrls = function inheritBaseUrls(adaptationSetAttributes, adaptationSetBaseUrls, adaptationSetSegmentInfo) {\n  return function (representation) {\n    var repBaseUrlElements = findChildren(representation, 'BaseURL');\n    var repBaseUrls = buildBaseUrls(adaptationSetBaseUrls, repBaseUrlElements);\n    var attributes = merge(adaptationSetAttributes, parseAttributes(representation));\n    var representationSegmentInfo = getSegmentInformation(representation);\n    return repBaseUrls.map(function (baseUrl) {\n      return {\n        segmentInfo: merge(adaptationSetSegmentInfo, representationSegmentInfo),\n        attributes: merge(attributes, {\n          baseUrl: baseUrl\n        })\n      };\n    });\n  };\n};\n/**\n * Tranforms a series of content protection nodes to\n * an object containing pssh data by key system\n *\n * @param {Node[]} contentProtectionNodes\n *        Content protection nodes\n * @return {Object}\n *        Object containing pssh data by key system\n */\n\n\nvar generateKeySystemInformation = function generateKeySystemInformation(contentProtectionNodes) {\n  return contentProtectionNodes.reduce(function (acc, node) {\n    var attributes = parseAttributes(node);\n    var keySystem = keySystemsMap[attributes.schemeIdUri];\n\n    if (keySystem) {\n      acc[keySystem] = {\n        attributes: attributes\n      };\n      var psshNode = findChildren(node, 'cenc:pssh')[0];\n\n      if (psshNode) {\n        var pssh = getContent(psshNode);\n        var psshBuffer = pssh && decodeB64ToUint8Array(pssh);\n        acc[keySystem].pssh = psshBuffer;\n      }\n    }\n\n    return acc;\n  }, {});\n};\n/**\n * Maps an AdaptationSet node to a list of Representation information objects\n *\n * @name toRepresentationsCallback\n * @function\n * @param {Node} adaptationSet\n *        AdaptationSet node from the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping AdaptationSet nodes to a list of\n * Representation information objects\n *\n * @param {Object} periodAttributes\n *        Contains attributes inherited by the Period\n * @param {string[]} periodBaseUrls\n *        Contains list of resolved base urls inherited by the Period\n * @param {string[]} periodSegmentInfo\n *        Contains Segment Information at the period level\n * @return {toRepresentationsCallback}\n *         Callback map function\n */\n\n\nvar toRepresentations = function toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo) {\n  return function (adaptationSet) {\n    var adaptationSetAttributes = parseAttributes(adaptationSet);\n    var adaptationSetBaseUrls = buildBaseUrls(periodBaseUrls, findChildren(adaptationSet, 'BaseURL'));\n    var role = findChildren(adaptationSet, 'Role')[0];\n    var roleAttributes = {\n      role: parseAttributes(role)\n    };\n    var attrs = merge(periodAttributes, adaptationSetAttributes, roleAttributes);\n    var contentProtection = generateKeySystemInformation(findChildren(adaptationSet, 'ContentProtection'));\n\n    if (Object.keys(contentProtection).length) {\n      attrs = merge(attrs, {\n        contentProtection: contentProtection\n      });\n    }\n\n    var segmentInfo = getSegmentInformation(adaptationSet);\n    var representations = findChildren(adaptationSet, 'Representation');\n    var adaptationSetSegmentInfo = merge(periodSegmentInfo, segmentInfo);\n    return flatten(representations.map(inheritBaseUrls(attrs, adaptationSetBaseUrls, adaptationSetSegmentInfo)));\n  };\n};\n/**\n * Maps an Period node to a list of Representation inforamtion objects for all\n * AdaptationSet nodes contained within the Period\n *\n * @name toAdaptationSetsCallback\n * @function\n * @param {Node} period\n *        Period node from the mpd\n * @param {number} periodIndex\n *        Index of the Period within the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Period nodes to a list of\n * Representation information objects\n *\n * @param {Object} mpdAttributes\n *        Contains attributes inherited by the mpd\n * @param {string[]} mpdBaseUrls\n *        Contains list of resolved base urls inherited by the mpd\n * @return {toAdaptationSetsCallback}\n *         Callback map function\n */\n\n\nvar toAdaptationSets = function toAdaptationSets(mpdAttributes, mpdBaseUrls) {\n  return function (period, index) {\n    var periodBaseUrls = buildBaseUrls(mpdBaseUrls, findChildren(period, 'BaseURL'));\n    var periodAtt = parseAttributes(period);\n    var parsedPeriodId = parseInt(periodAtt.id, 10); // fallback to mapping index if Period@id is not a number\n\n    var periodIndex = window.isNaN(parsedPeriodId) ? index : parsedPeriodId;\n    var periodAttributes = merge(mpdAttributes, {\n      periodIndex: periodIndex\n    });\n    var adaptationSets = findChildren(period, 'AdaptationSet');\n    var periodSegmentInfo = getSegmentInformation(period);\n    return flatten(adaptationSets.map(toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo)));\n  };\n};\n/**\n * Traverses the mpd xml tree to generate a list of Representation information objects\n * that have inherited attributes from parent nodes\n *\n * @param {Node} mpd\n *        The root node of the mpd\n * @param {Object} options\n *        Available options for inheritAttributes\n * @param {string} options.manifestUri\n *        The uri source of the mpd\n * @param {number} options.NOW\n *        Current time per DASH IOP.  Default is current time in ms since epoch\n * @param {number} options.clientOffset\n *        Client time difference from NOW (in milliseconds)\n * @return {RepresentationInformation[]}\n *         List of objects containing Representation information\n */\n\n\nvar inheritAttributes = function inheritAttributes(mpd, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$manifestUri = _options.manifestUri,\n      manifestUri = _options$manifestUri === void 0 ? '' : _options$manifestUri,\n      _options$NOW = _options.NOW,\n      NOW = _options$NOW === void 0 ? Date.now() : _options$NOW,\n      _options$clientOffset = _options.clientOffset,\n      clientOffset = _options$clientOffset === void 0 ? 0 : _options$clientOffset;\n  var periods = findChildren(mpd, 'Period');\n\n  if (!periods.length) {\n    throw new Error(errors.INVALID_NUMBER_OF_PERIOD);\n  }\n\n  var locations = findChildren(mpd, 'Location');\n  var mpdAttributes = parseAttributes(mpd);\n  var mpdBaseUrls = buildBaseUrls([manifestUri], findChildren(mpd, 'BaseURL'));\n  mpdAttributes.sourceDuration = mpdAttributes.mediaPresentationDuration || 0;\n  mpdAttributes.NOW = NOW;\n  mpdAttributes.clientOffset = clientOffset;\n\n  if (locations.length) {\n    mpdAttributes.locations = locations.map(getContent);\n  }\n\n  return {\n    locations: mpdAttributes.locations,\n    representationInfo: flatten(periods.map(toAdaptationSets(mpdAttributes, mpdBaseUrls)))\n  };\n};\n\nvar stringToMpdXml = function stringToMpdXml(manifestString) {\n  if (manifestString === '') {\n    throw new Error(errors.DASH_EMPTY_MANIFEST);\n  }\n\n  var parser = new DOMParser();\n  var xml = parser.parseFromString(manifestString, 'application/xml');\n  var mpd = xml && xml.documentElement.tagName === 'MPD' ? xml.documentElement : null;\n\n  if (!mpd || mpd && mpd.getElementsByTagName('parsererror').length > 0) {\n    throw new Error(errors.DASH_INVALID_XML);\n  }\n\n  return mpd;\n};\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} mpd\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\n\nvar parseUTCTimingScheme = function parseUTCTimingScheme(mpd) {\n  var UTCTimingNode = findChildren(mpd, 'UTCTiming')[0];\n\n  if (!UTCTimingNode) {\n    return null;\n  }\n\n  var attributes = parseAttributes(UTCTimingNode);\n\n  switch (attributes.schemeIdUri) {\n    case 'urn:mpeg:dash:utc:http-head:2014':\n    case 'urn:mpeg:dash:utc:http-head:2012':\n      attributes.method = 'HEAD';\n      break;\n\n    case 'urn:mpeg:dash:utc:http-xsdate:2014':\n    case 'urn:mpeg:dash:utc:http-iso:2014':\n    case 'urn:mpeg:dash:utc:http-xsdate:2012':\n    case 'urn:mpeg:dash:utc:http-iso:2012':\n      attributes.method = 'GET';\n      break;\n\n    case 'urn:mpeg:dash:utc:direct:2014':\n    case 'urn:mpeg:dash:utc:direct:2012':\n      attributes.method = 'DIRECT';\n      attributes.value = Date.parse(attributes.value);\n      break;\n\n    case 'urn:mpeg:dash:utc:http-ntp:2014':\n    case 'urn:mpeg:dash:utc:ntp:2014':\n    case 'urn:mpeg:dash:utc:sntp:2014':\n    default:\n      throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME);\n  }\n\n  return attributes;\n};\n\nvar VERSION = version;\n\nvar parse = function parse(manifestString, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var parsedManifestInfo = inheritAttributes(stringToMpdXml(manifestString), options);\n  var playlists = toPlaylists(parsedManifestInfo.representationInfo);\n  return toM3u8(playlists, parsedManifestInfo.locations, options.sidxMapping);\n};\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} manifestString\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\n\nvar parseUTCTiming = function parseUTCTiming(manifestString) {\n  return parseUTCTimingScheme(stringToMpdXml(manifestString));\n};\n\nexport { VERSION, inheritAttributes, parse, parseUTCTiming, stringToMpdXml, toM3u8, toPlaylists };","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\nvar window = require('global/window');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar window__default = /*#__PURE__*/_interopDefaultLegacy(window);\n\nvar atob = function atob(s) {\n  return window__default['default'].atob ? window__default['default'].atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nfunction decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}\n\nmodule.exports = decodeB64ToUint8Array;","var parseSampleFlags = require('./parse-sample-flags.js');\n\nvar trun = function trun(data) {\n  var result = {\n    version: data[0],\n    flags: new Uint8Array(data.subarray(1, 4)),\n    samples: []\n  },\n      view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n      // Flag interpretation\n  dataOffsetPresent = result.flags[2] & 0x01,\n      // compare with 2nd byte of 0x1\n  firstSampleFlagsPresent = result.flags[2] & 0x04,\n      // compare with 2nd byte of 0x4\n  sampleDurationPresent = result.flags[1] & 0x01,\n      // compare with 2nd byte of 0x100\n  sampleSizePresent = result.flags[1] & 0x02,\n      // compare with 2nd byte of 0x200\n  sampleFlagsPresent = result.flags[1] & 0x04,\n      // compare with 2nd byte of 0x400\n  sampleCompositionTimeOffsetPresent = result.flags[1] & 0x08,\n      // compare with 2nd byte of 0x800\n  sampleCount = view.getUint32(4),\n      offset = 8,\n      sample;\n\n  if (dataOffsetPresent) {\n    // 32 bit signed integer\n    result.dataOffset = view.getInt32(offset);\n    offset += 4;\n  } // Overrides the flags for the first sample only. The order of\n  // optional values will be: duration, size, compositionTimeOffset\n\n\n  if (firstSampleFlagsPresent && sampleCount) {\n    sample = {\n      flags: parseSampleFlags(data.subarray(offset, offset + 4))\n    };\n    offset += 4;\n\n    if (sampleDurationPresent) {\n      sample.duration = view.getUint32(offset);\n      offset += 4;\n    }\n\n    if (sampleSizePresent) {\n      sample.size = view.getUint32(offset);\n      offset += 4;\n    }\n\n    if (sampleCompositionTimeOffsetPresent) {\n      if (result.version === 1) {\n        sample.compositionTimeOffset = view.getInt32(offset);\n      } else {\n        sample.compositionTimeOffset = view.getUint32(offset);\n      }\n\n      offset += 4;\n    }\n\n    result.samples.push(sample);\n    sampleCount--;\n  }\n\n  while (sampleCount--) {\n    sample = {};\n\n    if (sampleDurationPresent) {\n      sample.duration = view.getUint32(offset);\n      offset += 4;\n    }\n\n    if (sampleSizePresent) {\n      sample.size = view.getUint32(offset);\n      offset += 4;\n    }\n\n    if (sampleFlagsPresent) {\n      sample.flags = parseSampleFlags(data.subarray(offset, offset + 4));\n      offset += 4;\n    }\n\n    if (sampleCompositionTimeOffsetPresent) {\n      if (result.version === 1) {\n        sample.compositionTimeOffset = view.getInt32(offset);\n      } else {\n        sample.compositionTimeOffset = view.getUint32(offset);\n      }\n\n      offset += 4;\n    }\n\n    result.samples.push(sample);\n  }\n\n  return result;\n};\n\nmodule.exports = trun;","module.exports = SafeParseTuple;\n\nfunction SafeParseTuple(obj, reviver) {\n  var json;\n  var error = null;\n\n  try {\n    json = JSON.parse(obj, reviver);\n  } catch (err) {\n    error = err;\n  }\n\n  return [error, json];\n}","var parseType = function parseType(buffer) {\n  var result = '';\n  result += String.fromCharCode(buffer[0]);\n  result += String.fromCharCode(buffer[1]);\n  result += String.fromCharCode(buffer[2]);\n  result += String.fromCharCode(buffer[3]);\n  return result;\n};\n\nmodule.exports = parseType;","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\nrequire(\"core-js/modules/es.array.reduce\");\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar isTypedArray = function isTypedArray(obj) {\n  return ArrayBuffer.isView(obj);\n};\n\nvar toUint8 = function toUint8(bytes) {\n  return bytes instanceof Uint8Array ? bytes : new Uint8Array(bytes && bytes.buffer || bytes, bytes && bytes.byteOffset || 0, bytes && bytes.byteLength || 0);\n};\n\nvar bytesToString = function bytesToString(bytes) {\n  if (!bytes) {\n    return '';\n  }\n\n  bytes = Array.prototype.slice.call(bytes);\n  var string = String.fromCharCode.apply(null, toUint8(bytes));\n\n  try {\n    return decodeURIComponent(escape(string));\n  } catch (e) {// if decodeURIComponent/escape fails, we are dealing with partial\n    // or full non string data. Just return the potentially garbled string.\n  }\n\n  return string;\n};\n\nvar stringToBytes = function stringToBytes(string, stringIsBytes) {\n  if (stringIsBytes === void 0) {\n    stringIsBytes = false;\n  }\n\n  var bytes = [];\n\n  if (typeof string !== 'string' && string && typeof string.toString === 'function') {\n    string = string.toString();\n  }\n\n  if (typeof string !== 'string') {\n    return bytes;\n  } // If the string already is bytes, we don't have to do this\n\n\n  if (!stringIsBytes) {\n    string = unescape(encodeURIComponent(string));\n  }\n\n  return string.split('').map(function (s) {\n    return s.charCodeAt(0) & 0xFF;\n  });\n};\n\nvar concatTypedArrays = function concatTypedArrays() {\n  for (var _len = arguments.length, buffers = new Array(_len), _key = 0; _key < _len; _key++) {\n    buffers[_key] = arguments[_key];\n  }\n\n  var totalLength = buffers.reduce(function (total, buf) {\n    var len = buf && (buf.byteLength || buf.length);\n    total += len || 0;\n    return total;\n  }, 0);\n  var tempBuffer = new Uint8Array(totalLength);\n  var offset = 0;\n  buffers.forEach(function (buf) {\n    buf = toUint8(buf);\n    tempBuffer.set(buf, offset);\n    offset += buf.byteLength;\n  });\n  return tempBuffer;\n};\n\nexports.bytesToString = bytesToString;\nexports.concatTypedArrays = concatTypedArrays;\nexports.isTypedArray = isTypedArray;\nexports.stringToBytes = stringToBytes;\nexports.toUint8 = toUint8;","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n */\n'use strict';\n\nmodule.exports = {\n  H264_STREAM_TYPE: 0x1B,\n  ADTS_STREAM_TYPE: 0x0F,\n  METADATA_STREAM_TYPE: 0x15\n};","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar autoKeyword = \"auto\";\nvar directionSetting = {\n  \"\": 1,\n  \"lr\": 1,\n  \"rl\": 1\n};\nvar alignSetting = {\n  \"start\": 1,\n  \"center\": 1,\n  \"end\": 1,\n  \"left\": 1,\n  \"right\": 1,\n  \"auto\": 1,\n  \"line-left\": 1,\n  \"line-right\": 1\n};\n\nfunction findDirectionSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\nfunction findAlignSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\nfunction VTTCue(startTime, endTime, text) {\n  /**\n   * Shim implementation specific properties. These properties are not in\n   * the spec.\n   */\n  // Lets us know when the VTTCue's data has changed in such a way that we need\n  // to recompute its display state. This lets us compute its display state\n  // lazily.\n  this.hasBeenReset = false;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n\n  var _id = \"\";\n  var _pauseOnExit = false;\n  var _startTime = startTime;\n  var _endTime = endTime;\n  var _text = text;\n  var _region = null;\n  var _vertical = \"\";\n  var _snapToLines = true;\n  var _line = \"auto\";\n  var _lineAlign = \"start\";\n  var _position = \"auto\";\n  var _positionAlign = \"auto\";\n  var _size = 100;\n  var _align = \"center\";\n  Object.defineProperties(this, {\n    \"id\": {\n      enumerable: true,\n      get: function get() {\n        return _id;\n      },\n      set: function set(value) {\n        _id = \"\" + value;\n      }\n    },\n    \"pauseOnExit\": {\n      enumerable: true,\n      get: function get() {\n        return _pauseOnExit;\n      },\n      set: function set(value) {\n        _pauseOnExit = !!value;\n      }\n    },\n    \"startTime\": {\n      enumerable: true,\n      get: function get() {\n        return _startTime;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Start time must be set to a number.\");\n        }\n\n        _startTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"endTime\": {\n      enumerable: true,\n      get: function get() {\n        return _endTime;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"End time must be set to a number.\");\n        }\n\n        _endTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"text\": {\n      enumerable: true,\n      get: function get() {\n        return _text;\n      },\n      set: function set(value) {\n        _text = \"\" + value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"region\": {\n      enumerable: true,\n      get: function get() {\n        return _region;\n      },\n      set: function set(value) {\n        _region = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"vertical\": {\n      enumerable: true,\n      get: function get() {\n        return _vertical;\n      },\n      set: function set(value) {\n        var setting = findDirectionSetting(value); // Have to check for false because the setting an be an empty string.\n\n        if (setting === false) {\n          throw new SyntaxError(\"Vertical: an invalid or illegal direction string was specified.\");\n        }\n\n        _vertical = setting;\n        this.hasBeenReset = true;\n      }\n    },\n    \"snapToLines\": {\n      enumerable: true,\n      get: function get() {\n        return _snapToLines;\n      },\n      set: function set(value) {\n        _snapToLines = !!value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"line\": {\n      enumerable: true,\n      get: function get() {\n        return _line;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\" && value !== autoKeyword) {\n          throw new SyntaxError(\"Line: an invalid number or illegal string was specified.\");\n        }\n\n        _line = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"lineAlign\": {\n      enumerable: true,\n      get: function get() {\n        return _lineAlign;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          console.warn(\"lineAlign: an invalid or illegal string was specified.\");\n        } else {\n          _lineAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n    \"position\": {\n      enumerable: true,\n      get: function get() {\n        return _position;\n      },\n      set: function set(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Position must be between 0 and 100.\");\n        }\n\n        _position = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"positionAlign\": {\n      enumerable: true,\n      get: function get() {\n        return _positionAlign;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          console.warn(\"positionAlign: an invalid or illegal string was specified.\");\n        } else {\n          _positionAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n    \"size\": {\n      enumerable: true,\n      get: function get() {\n        return _size;\n      },\n      set: function set(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Size must be between 0 and 100.\");\n        }\n\n        _size = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"align\": {\n      enumerable: true,\n      get: function get() {\n        return _align;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          throw new SyntaxError(\"align: an invalid or illegal alignment string was specified.\");\n        }\n\n        _align = setting;\n        this.hasBeenReset = true;\n      }\n    }\n  });\n  /**\n   * Other <track> spec defined properties\n   */\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n\n  this.displayState = undefined;\n}\n/**\n * VTTCue methods\n */\n\n\nVTTCue.prototype.getCueAsHTML = function () {\n  // Assume WebVTT.convertCueToDOMTree is on the global.\n  return WebVTT.convertCueToDOMTree(window, this.text);\n};\n\nmodule.exports = VTTCue;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar MPEGURL_REGEX = /^(audio|video|application)\\/(x-|vnd\\.apple\\.)?mpegurl/i;\nvar DASH_REGEX = /^application\\/dash\\+xml/i;\n/**\n * Returns a string that describes the type of source based on a video source object's\n * media type.\n *\n * @see {@link https://dev.w3.org/html5/pf-summary/video.html#dom-source-type|Source Type}\n *\n * @param {string} type\n *        Video source object media type\n * @return {('hls'|'dash'|'vhs-json'|null)}\n *         VHS source type string\n */\n\nvar simpleTypeFromSourceType = function simpleTypeFromSourceType(type) {\n  if (MPEGURL_REGEX.test(type)) {\n    return 'hls';\n  }\n\n  if (DASH_REGEX.test(type)) {\n    return 'dash';\n  } // Denotes the special case of a manifest object passed to http-streaming instead of a\n  // source URL.\n  //\n  // See https://en.wikipedia.org/wiki/Media_type for details on specifying media types.\n  //\n  // In this case, vnd stands for vendor, video.js for the organization, VHS for this\n  // project, and the +json suffix identifies the structure of the media type.\n\n\n  if (type === 'application/vnd.videojs.vhs+json') {\n    return 'vhs-json';\n  }\n\n  return null;\n};\n\nexports.simpleTypeFromSourceType = simpleTypeFromSourceType;","var win;\n\nif (typeof window !== \"undefined\") {\n  win = window;\n} else if (typeof global !== \"undefined\") {\n  win = global;\n} else if (typeof self !== \"undefined\") {\n  win = self;\n} else {\n  win = {};\n}\n\nmodule.exports = win;","var tfhd = function tfhd(data) {\n  var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n      result = {\n    version: data[0],\n    flags: new Uint8Array(data.subarray(1, 4)),\n    trackId: view.getUint32(4)\n  },\n      baseDataOffsetPresent = result.flags[2] & 0x01,\n      sampleDescriptionIndexPresent = result.flags[2] & 0x02,\n      defaultSampleDurationPresent = result.flags[2] & 0x08,\n      defaultSampleSizePresent = result.flags[2] & 0x10,\n      defaultSampleFlagsPresent = result.flags[2] & 0x20,\n      durationIsEmpty = result.flags[0] & 0x010000,\n      defaultBaseIsMoof = result.flags[0] & 0x020000,\n      i;\n  i = 8;\n\n  if (baseDataOffsetPresent) {\n    i += 4; // truncate top 4 bytes\n    // FIXME: should we read the full 64 bits?\n\n    result.baseDataOffset = view.getUint32(12);\n    i += 4;\n  }\n\n  if (sampleDescriptionIndexPresent) {\n    result.sampleDescriptionIndex = view.getUint32(i);\n    i += 4;\n  }\n\n  if (defaultSampleDurationPresent) {\n    result.defaultSampleDuration = view.getUint32(i);\n    i += 4;\n  }\n\n  if (defaultSampleSizePresent) {\n    result.defaultSampleSize = view.getUint32(i);\n    i += 4;\n  }\n\n  if (defaultSampleFlagsPresent) {\n    result.defaultSampleFlags = view.getUint32(i);\n  }\n\n  if (durationIsEmpty) {\n    result.durationIsEmpty = true;\n  }\n\n  if (!baseDataOffsetPresent && defaultBaseIsMoof) {\n    result.baseDataOffsetIsMoof = true;\n  }\n\n  return result;\n};\n\nmodule.exports = tfhd;","var topLevel = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {};\n\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n  doccy = document;\n} else {\n  doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n  if (!doccy) {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n  }\n}\n\nmodule.exports = doccy;","var parseSampleFlags = function parseSampleFlags(flags) {\n  return {\n    isLeading: (flags[0] & 0x0c) >>> 2,\n    dependsOn: flags[0] & 0x03,\n    isDependedOn: (flags[1] & 0xc0) >>> 6,\n    hasRedundancy: (flags[1] & 0x30) >>> 4,\n    paddingValue: (flags[1] & 0x0e) >>> 1,\n    isNonSyncSample: flags[1] & 0x01,\n    degradationPriority: flags[2] << 8 | flags[3]\n  };\n};\n\nmodule.exports = parseSampleFlags;"],"sourceRoot":""}