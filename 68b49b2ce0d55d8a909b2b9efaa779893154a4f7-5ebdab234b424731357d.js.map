{"version":3,"sources":["webpack:///./node_modules/mux.js/lib/aac/utils.js","webpack:///./node_modules/videojs-vtt.js/lib/vttregion.js","webpack:///./node_modules/videojs-vtt.js/lib/vtt.js","webpack:///./node_modules/url-toolkit/src/url-toolkit.js","webpack:///./node_modules/m3u8-parser/dist/m3u8-parser.es.js","webpack:///./node_modules/xmldom/sax.js","webpack:///./node_modules/mux.js/lib/tools/ts-inspector.js","webpack:///./node_modules/mux.js/lib/tools/caption-packet-parser.js","webpack:///./node_modules/keycode/index.js","webpack:///./node_modules/videojs-youtube/dist/Youtube.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/global/document.js","webpack:///./node_modules/libass-wasm/dist/js/subtitles-octopus.js","webpack:///./node_modules/@videojs/xhr/index.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///./node_modules/mux.js/lib/m2ts/timestamp-rollover-stream.js","webpack:///./node_modules/videojs-vtt.js/lib/browser-index.js","webpack:///./node_modules/mux.js/lib/mp4/probe.js","webpack:///./node_modules/xmldom/dom-parser.js","webpack:///./node_modules/mux.js/lib/utils/clock.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/pkcs7/dist/pkcs7.es.js","webpack:///./node_modules/aes-decrypter/dist/aes-decrypter.es.js","webpack:///./node_modules/videojs-landscape-fullscreen/dist/videojs-landscape-fullscreen.min.js","webpack:///./node_modules/mux.js/lib/m2ts/probe.js","webpack:///./node_modules/mux.js/lib/utils/stream.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./src/utils/subtitles.js","webpack:///./src/components/player.jsx","webpack:///./node_modules/mux.js/lib/m2ts/caption-stream.js","webpack:///./node_modules/@videojs/vhs-utils/dist/resolve-url.js","webpack:///./node_modules/video.js/node_modules/global/window.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///./node_modules/xmldom/dom.js","webpack:///./node_modules/mux.js/lib/utils/bin.js","webpack:///./node_modules/is-function/index.js","webpack:///./node_modules/mpd-parser/dist/mpd-parser.es.js","webpack:///./node_modules/@videojs/vhs-utils/dist/decode-b64-to-uint8-array.js","webpack:///./node_modules/safe-json-parse/tuple.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/mux.js/lib/tools/mp4-inspector.js","webpack:///./node_modules/mux.js/lib/mp4/caption-parser.js","webpack:///./node_modules/mux.js/lib/m2ts/stream-types.js","webpack:///./node_modules/videojs-vtt.js/lib/vttcue.js","webpack:///./node_modules/@babel/runtime/helpers/construct.js","webpack:///./node_modules/global/window.js","webpack:///./node_modules/video.js/node_modules/global/document.js"],"names":["ADTS_SAMPLING_FREQUENCIES","parseSyncSafeInteger","data","module","exports","isLikelyAacData","charCodeAt","parseId3TagSize","header","byteIndex","returnSize","parseAdtsSize","lowThree","middle","parseType","parseSampleRate","packet","i","length","parseAacTimestamp","frameStart","frameSize","frame","subarray","String","fromCharCode","byteLength","unescape","bytes","start","end","result","toString","slice","percentEncode","d","size","scrollSetting","isValidPercentValue","value","_width","_lines","_regionAnchorX","_regionAnchorY","_viewportAnchorX","_viewportAnchorY","_scroll","Object","defineProperties","this","enumerable","get","set","Error","TypeError","setting","toLowerCase","findScrollSetting","console","warn","document","_objCreate","create","F","o","arguments","prototype","ParsingError","errorData","message","name","code","parseTimeStamp","input","computeSeconds","h","m","s","f","match","replace","Settings","values","parseOptions","callback","keyValueDelim","groupDelim","groups","split","kv","parseCue","cue","regionList","oInput","consumeTimeStamp","ts","Errors","BadTimeStamp","skipWhitespace","startTime","substr","endTime","settings","k","v","id","region","alt","vals","vals0","integer","percent","vertical","line","e","lineAlign","snapToLines","align","position","left","center","right","positionAlign","consumeCueSettings","constructor","BadSignature","dflt","defaultKey","has","a","n","test","parseInt","parseFloat","TEXTAREA_ELEMENT","createElement","TAG_NAME","c","b","u","ruby","rt","lang","DEFAULT_COLOR_CLASS","white","lime","cyan","red","yellow","magenta","blue","black","TAG_ANNOTATION","NEEDS_PARENT","parseContent","window","nextToken","shouldAdd","current","element","localName","type","annotation","tagName","trim","t","rootDiv","tagStack","appendChild","createTextNode","innerHTML","textContent","pop","parentNode","node","createProcessingInstruction","classes","forEach","cl","bgColor","colorName","hasOwnProperty","propName","propValue","style","className","join","push","strongRTLRanges","isStrongRTLChar","charCode","currentRange","determineBidi","cueDiv","nodeStack","text","childNodes","pushNodes","nextTextNode","innerText","StyleBox","CueStyleBox","styleOptions","call","styles","color","backgroundColor","top","bottom","display","writingMode","unicodeBidi","applyStyles","div","direction","textAlign","font","whiteSpace","textPos","formatStyle","width","height","move","box","BoxPosition","obj","lh","offsetHeight","offsetWidth","offsetTop","rects","getClientRects","getBoundingClientRect","Math","max","lineHeight","undefined","moveBoxToLinePosition","styleBox","containerBox","boxPositions","boxPosition","linePos","track","textTrackList","mediaElement","trackList","count","mode","computeLinePos","axis","step","round","maxPosition","initialAxis","abs","ceil","reverse","calculatedPercentage","bestPosition","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","p","intersectPercentage","findBestPosition","toCSSCompatValues","WebVTT","prop","val","unit","toMove","overlaps","b2","boxes","container","min","reference","getSimpleBoxPosition","StringDecoder","decode","decodeURIComponent","encodeURIComponent","convertCueToDOMTree","cuetext","processCues","cues","overlay","firstChild","removeChild","paddedOverlay","margin","hasBeenReset","displayState","shouldCompute","fontSize","Parser","vttjs","decoder","state","buffer","TextDecoder","reportOrThrowError","onparsingerror","parse","self","collectNextLine","pos","parseHeader","ontimestampmap","parseTimestampMap","xy","anchor","VTTRegion","lines","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","onregion","parseRegion","stream","alreadyCollectedLine","VTTCue","indexOf","hasSubstring","oncue","flush","onflush","URL_REGEX","FIRST_SEGMENT_REGEX","SLASH_DOT_REGEX","SLASH_DOT_DOT_REGEX","URLToolkit","buildAbsoluteURL","baseURL","relativeURL","opts","alwaysNormalize","basePartsForNormalise","parseURL","path","normalizePath","buildURLFromParts","relativeParts","scheme","baseParts","netLoc","pathParts","exec","builtParts","params","query","fragment","baseURLPath","newPath","substring","lastIndexOf","url","parts","_extends","assign","target","source","key","apply","_inheritsLoose","subClass","superClass","__proto__","Stream","listeners","_proto","on","listener","off","index","splice","trigger","args","callbacks","Array","dispose","pipe","destination","LineStream","_Stream","_this","nextNewline","parseAttributes","attributes","attr","attrs","RegExp","ParseStream","customParsers","tagMappers","event","_this2","reduce","acc","mapper","mappedLine","concat","newLine","tagType","duration","title","version","number","playlistType","offset","allowed","URI","uri","BYTERANGE","_attributes$BYTERANGE","byterange","RESOLUTION","resolution","BANDWIDTH","dateTimeString","dateTimeObject","Date","IV","Uint32Array","PRECISE","addParser","_ref","_this3","expression","customType","dataParser","segment","addTagMapper","_ref2","map","decodeB64ToUint8Array","b64Text","decodedString","atob","array","Uint8Array","lineStream","parseStream","currentMap","_key","ReferenceError","_assertThisInitialized","uris","currentUri","noop","defaultMediaGroups","currentTimeline","manifest","allowCache","discontinuityStarts","segments","entry","mediaGroup","rendition","tag","endlist","endList","inf","mediaSequence","discontinuitySequence","METHOD","KEYFORMAT","KEYID","contentProtection","schemeIdUri","keyId","pssh","method","iv","isFinite","playlist","playlists","mediaGroups","media","TYPE","NAME","mediaGroupType","default","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","language","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","targetduration","targetDuration","totalduration","totalDuration","isNaN","timeOffset","precise","cueOut","cueOutCont","cueIn","timeline","comment","custom","chunk","options","nameStartChar","nameChar","tagNamePattern","XMLReader","copyLocator","lineNumber","columnNumber","parseElementStartPart","el","currentNSMap","entityReplacer","errorHandler","attrName","charAt","warning","add","setTagName","closed","error","appendElement","domBuilder","localNSMap","qName","nsp","prefix","nsPrefix","_copy","startPrefixMapping","ns","startElement","endElement","endPrefixMapping","parseHtmlSpecialContent","elStartEnd","elEndStart","characters","fixSelfClosed","closeMap","parseDCC","startCDATA","endCDATA","matchs","buf","reg","lastIndex","len","pubid","sysid","lastMatch","startDTD","endDTD","parseInstruction","processingInstruction","ElementAttributes","_set_proto_","thiz","parent","defaultNSMap","entityMap","startDocument","defaultNSMapCopy","surrogate1","surrogate2","fixedFromCharCode","appendText","xt","locator","lineEnd","linePattern","lineStart","parseStack","tagStart","doc","currentElement","config","endMatch","fatalError","nbsp","locator2","_parse","endDocument","getLocalName","getLocator","getQName","getURI","getValue","StreamTypes","handleRollover","probe","aac","ONE_SECOND_IN_TS","parseAudioPes_","pmt","pesType","pusi","parsed","startIndex","endIndex","endLoop","pid","parsePesType","table","parsePayloadUnitStartIndicator","parsePesTime","audio","parseVideoPes_","pes","currentFrame","video","firstKeyFrame","shift","videoPacketContainsKeyFrame","inspectTs_","parsePat","parsePmt","parsePsi_","H264_STREAM_TYPE","ADTS_STREAM_TYPE","inspect","baseTimestamp","audioCount","sampleRate","timestamp","audioTimescale","dts","pts","inspectAac_","segmentInfo","audioBaseTimestamp","info","dtsTime","ptsTime","videoBaseTimestamp","adjustTimestamp_","parseSei","payloadType","payloadSize","payload","parseUserData","sei","parseCaptionPackets","userData","results","ccData","discardEmulationPreventionBytes","newLength","newData","emulationPreventionBytesPositions","sourceIndex","USER_DATA_REGISTERED_ITU_T_T35","keyCode","searchInput","hasKeyCode","which","names","foundNamedKey","search","codes","aliases","isEventKey","nameOrCode","alias","videojs","css","head","src","loaded","firstScriptTag","_isOnMobile","browser","IS_IOS","IS_NATIVE_ANDROID","Tech","getTech","Youtube","extend","ready","setPoster","poster","setSrc","options_","setTimeout","el_","isApiReady","initYTPlayer","apiReadyQueue","bind","ytPlayer","stopVideo","destroy","createEl","setAttribute","techId","divWrapper","ytControls","divBlocker","onclick","pause","playerVars","controls","modestbranding","rel","showinfo","loop","autohide","disablekb","fs","srcEndTime","hl","list","listId","listType","playsinline","srcStartTime","theme","customVars","keys","activeVideoId","videoId","activeList","playerConfig","events","onReady","onPlayerReady","onPlaybackQualityChange","onPlayerPlaybackQualityChange","onPlaybackRateChange","onPlayerPlaybackRateChange","onStateChange","onPlayerStateChange","onVolumeChange","onPlayerVolumeChange","onError","onPlayerError","enablePrivacyEnhancedMode","host","YT","Player","muted","mute","getAvailablePlaybackRates","featuresPlaybackRate","playerReady_","triggerReady","playOnReady","play","cueOnReady","cueVideoById_","lastState","errorNumber","PlayerState","ENDED","PLAYING","isSeeking","onSeeked","PAUSED","BUFFERING","player_","loadVideoById_","startSeconds","endSeconds","loadVideoById","cueVideoById","_src","poster_","parseUrl","checkHighResPoster","autoplay","isReady_","setAutoplay","setLoop","wasPausedBeforeSeek","playVideo","loadPlaylist","pauseVideo","paused","currentTime","getCurrentTime","setCurrentTime","seconds","timeBeforeSeek","seekTo","clearInterval","checkSeekedInPauseInterval","setInterval","seeking","seekable","createTimeRange","getDuration","playbackRate","getPlaybackRate","setPlaybackRate","suggestedRate","currentSrc","ended","volume","getVolume","setVolume","percentAsDecimal","isMuted","setMuted","unMute","buffered","getVideoLoadedFraction","bufferedEnd","preload","load","reset","networkState","getPlayerState","readyState","supportsFullScreen","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","image","Image","onload","naturalHeight","naturalWidth","onerror","isSupported","canPlaySource","canPlayType","getElementsByTagName","insertBefore","onreadystatechange","styleSheet","cssText","registerTech","registerComponent","factory","isArray","arr","setPrototypeOf","writable","configurable","doccy","minDoc","topLevel","SubtitlesOctopusOnLoad","supportsWebAssembly","WebAssembly","instantiate","_module","Module","of","Instance","log","renderFrames","renderFramesData","beforeDrawTime","performance","now","ctx","clearRect","canvas","canvases","bufferCanvas","w","imageBuffer","Uint8ClampedArray","hasAlphaBug","j","imageData","ImageData","bufferCanvasCtx","putImageData","drawImage","x","y","debug","drawTime","spentTime","renderStart","renderFastFrames","bitmaps","bitmap","libassTime","decodeTime","lossyRender","isOurCanvas","canvasParent","fonts","availableFonts","onReadyEvent","workerUrl","legacyWorkerUrl","subUrl","subContent","onErrorEvent","lastRenderTime","pixelRatio","devicePixelRatio","getContext","createImageData","workerError","init","Worker","worker","onmessage","onWorkerMessage","workerActive","createCanvas","setVideo","setSubUrl","postMessage","URL","currentScript","preMain","fastRender","nextSibling","testBuf","testImage","prePut","getImageData","postPut","timeupdate","addEventListener","setIsPaused","removeEventListener","setRate","resizeWithTimeout","ResizeObserver","ro","observe","videoWidth","resize","callee","getVideoPosition","videoRatio","videoHeight","realWidth","realHeight","floor","renderFrameData","frameId","content","JSON","op","time","requestAnimationFrame","object","property","videoSize","pointerEvents","runBenchmark","customMessage","setTrackByUrl","setTrack","freeTrack","render","isPaused","rate","terminate","createEvent","getEvents","setEvent","removeEvent","createStyle","getStyles","setStyle","removeStyle","isFunction","initParams","createXHR","_createXHR","called","err","response","body","getBody","xhr","responseText","responseType","responseXML","firefoxBugTakenEffect","documentElement","nodeName","getXml","isJson","errorFunc","evt","clearTimeout","timeoutTimer","statusCode","failureResponse","loadFunc","aborted","status","useXDR","headers","rawRequest","getAllResponseHeaders","row","parseHeaders","cors","XDomainRequest","XMLHttpRequest","sync","json","stringify","onprogress","onabort","ontimeout","open","username","password","withCredentials","timeout","abort","setRequestHeader","isEmpty","beforeSend","send","iterator","forEachArray","toUpperCase","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","Arr","_byteLength","curByte","revLookup","fromByteArray","uint8","extraBytes","len2","encodeChunk","lookup","num","output","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","arg","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","isBuffer","checked","copy","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","Number","remaining","strLen","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","typedArraySupport","poolSize","_augment","Symbol","species","defineProperty","fill","allocUnsafeSlow","_isBuffer","compare","swap16","swap32","swap64","equals","thisStart","thisEnd","thisCopy","targetCopy","includes","toJSON","_arr","ret","out","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","stringtrim","base64clean","dst","TimestampRolloverStream","lastDTS","referenceDTS","type_","endTimeline","cueShim","regionShim","nativeVTTCue","nativeVTTRegion","shim","restore","timescale","compositionStartTime","getVideoTrackIds","getTracks","toUnsigned","toHexString","mp4Inspector","findBox","trak","tkhd","mdhd","trafs","baseTimes","traf","tfhd","scale","tfdt","timescales","trackId","trafBoxes","baseMediaDecodeTime","compositionTimeOffset","parsedTraf","parseTraf","samples","traks","videoTrackIds","hdlrs","tkhds","hdlr","view","handlerType","DataView","getUint8","getUint32","tracks","stsd","sampleDescriptions","codec","codecConfig","codecBox","DOMParser","DOMHandler","cdata","_locator","l","systemId","_toString","chars","java","hander","parseFromString","mimeType","sax","xmlns","setDocumentLocator","errorImpl","isCallback","Function","build","fn","msg","buildErrorHandler","xml","DOMImplementation","createDocument","documentURI","namespaceURI","createElementNS","createAttributeNS","nodeValue","setAttributeNode","ins","ignorableWhitespace","ch","charNode","createCDATASection","skippedEntity","normalize","comm","createComment","publicId","impl","implementation","createDocumentType","dt","_error","XMLSerializer","secondsToVideoTs","secondsToAudioTs","videoTsToSeconds","audioTsToSeconds","audioTsToVideoTs","videoTsToAudioTs","metadataTsToSeconds","timelineStartPts","keepOriginalTimestamps","_getPrototypeOf","getPrototypeOf","classCallCheck","instance","Constructor","createClass","props","descriptor","protoProps","staticProps","aesTables","AES","tables","encTable","decTable","sbox","sboxInv","xInv","th","x2","x4","tEnc","tDec","precompute","_tables","encKey","decKey","keyLen","rcon","decrypt","encrypted0","encrypted1","encrypted2","encrypted3","a2","c2","nInnerRounds","kIndex","table0","table1","table2","table3","_length","_i","AsyncStream","possibleConstructorReturn","jobs","delay","timeout_","inherits","processJob_","job","ntoh","word","encrypted","initVector","encrypted32","Int32Array","decipher","decrypted","decrypted32","init0","init1","init2","init3","wordIx","Decrypter","done","STEP","asyncStream_","decryptChunk_","padded","fullscreen","enterOnRotate","alwaysInLandscapeMode","iOS","r","screen","lockOrientationUniversal","orientation","lock","then","mozLockOrientation","msLockOrientation","angle","registerPlugin","plugin","IS_ANDROID","addClass","IOS_VERSION","ownerDocument","querySelector","tech_","requestFullscreen","isFullscreen","exitFullscreen","onchange","mergeOptions","VERSION","fetch","parsePid","parseAdaptionField","parseNalUnitType","pmtPid","programMapTable","payloadOffset","tableEnd","METADATA_STREAM_TYPE","ptsDtsFlags","frameBuffer","frameI","frameSyncPoint","foundKeyFrame","flushSource","partialFlush","_setPrototypeOf","configure","player","subtitle","octopusInstance","libass","resizePlayer","offsetLeft","resizePlayerWithTimeout","configurePlayer","componentDidMount","html5","hls","overrideNative","IS_SAFARI","videoNode","landscapeFullscreen","subtitles","themeName","onPlay","sources","componentWillUnmount","componentWillReceiveProps","nextProps","removeClass","data-vjs-player","ref","playsInline","React","Component","cea708Parser","CaptionStream","captionPackets_","ccStreams_","Cea608Stream","cc","newCaptionPackets","nalUnitType","escapedRBSP","latestDts_","ignoreNextEqualDts_","numSameDts_","flushCCStreams","flushType","flushStream","elem","idx","presortIndex","sort","dispatchCea608Packet","activeCea608Channel_","ccStream","setsTextOrXDSActive","setsChannel1Active","setsChannel2Active","CHARACTER_TRANSLATION","getCharFromCode","ROWS","createDisplayBuffer","BOTTOM_ROW","field","dataChannel","field_","dataChannel_","name_","setConstants","char0","char1","lastControlCode_","PADDING_","RESUME_CAPTION_LOADING_","mode_","END_OF_CAPTION_","clearFormatting","flushDisplayed","displayed_","nonDisplayed_","startPts_","ROLL_UP_2_ROWS_","rollUpRows_","setRollUp","ROLL_UP_3_ROWS_","ROLL_UP_4_ROWS_","CARRIAGE_RETURN_","shiftRowsUp_","BACKSPACE_","row_","ERASE_DISPLAYED_MEMORY_","ERASE_NON_DISPLAYED_MEMORY_","RESUME_DIRECT_CAPTIONING_","isSpecialCharacter","column_","isExtCharacter","isMidRowCode","addFormatting","isOffsetControlCode","isPAC","formatting_","isColorPAC","isNormalChar","startPts","endPts","topRow_","BASE_","EXT_","CONTROL_","OFFSET_","char","newBaseRow","format","popOn","baseRow","rollUp","paintOn","_interopDefault","ex","baseUrl","relativeUrl","location","href","win","_typeof","assertThisInitialized","Reflect","construct","sham","Proxy","dest","Class","Super","pt","ppt","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_nsMap","_onAddAttribute","_removeNamedNode","features","_features","feature","Node","_xmlEncoder","_visitNode","Document","remove","_onUpdateChild","newChild","cs","child","_removeChild","previous","previousSibling","next","lastChild","_insertBefore","nextChild","cp","nodeType","newFirst","newLast","pre","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","nodeSerializeToString","isHtml","nodeFilter","refNode","lookupPrefix","visibleNamespaces","namespace","serializeToString","needNamespaceDefine","isHTML","item","internalSubset","getNamedItem","setNamedItem","_ownerElement","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","versions","qualifiedName","doctype","root","refChild","replaceChild","oldChild","hasChildNodes","cloneNode","deep","_cloneNode","node2","attrs2","appendData","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importNode","importedNode","_importNode","getElementById","rtv","getAttribute","createDocumentFragment","createAttribute","specified","createEntityReference","pl","hasAttribute","getAttributeNode","removeAttribute","removeAttributeNode","_appendSingleChild","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","base","getElementsByTagNameNS","substringData","insertData","replaceData","deleteData","splitText","newText","newNode","$$length","getTextContent","alert","confirm","prompt","isObject","merge","_len","objects","flatten","lists","errors","urlTypeToSegment","_ref$baseUrl","_ref$source","_ref$range","range","_ref$indexRange","indexRange","resolvedUri","ranges","startRange","endRange","segmentRange","static","_attributes$timescale","sourceDuration","dynamic","NOW","clientOffset","availabilityStartTime","_attributes$timescale2","_attributes$start","_attributes$minimumUp","minimumUpdatePeriod","_attributes$timeShift","timeShiftBufferDepth","periodStartWC","periodDuration","segmentCount","availableStart","availableEnd","parseByDuration","_attributes$type","_attributes$timescale4","_segmentRange$type","_attributes$timescale3","periodIndex","_attributes$startNumb","startNumber","toSegments","segmentsFromBase","_attributes$initializ","initialization","_attributes$indexRang","initSegment","sourceURL","segmentTimeInfo","addSegmentsToPlaylist","sidx","sidxByteRange","sidxEnd","mediaReferences","references","filter","referenceType","firstOffset","referencedSize","subsegmentDuration","mergeDiscontiguousPlaylists","_acc$name$segments","addSegmentInfoFromSidx","sidxMapping","sidxKey","sidxMatch","formatAudioPlaylist","_attributes","bandwidth","CODECS","codecs","formatVideoPlaylist","_ref3","_attributes3","AUDIO","SUBTITLES","toM3u8","dashPlaylists","_mediaGroups","_dashPlaylists$0$attr","_dashPlaylists$0$attr2","suggestedPresentationDelay","_dashPlaylists$0$attr3","videoPlaylists","_ref4","contentType","audioPlaylists","_ref5","vttPlaylists","_ref6","master","VIDEO","mainPlaylist","formattedPlaylists","role","label","roleLabel","organizeAudioPlaylists","subs","_attributes2","organizeVttPlaylists","getLiveRValue","parseByTimeline","segmentTimeline","_attributes$minimumUp2","_attributes$media","sIndex","S","repeat","segmentTime","nextS","identifierPattern","constructTemplateUrl","identifier","identifierReplacement","segmentsFromTemplate","templateValues","RepresentationID","Bandwidth","mapSegment","parseTemplateInfo","Time","segmentsFromList","_attributes$segmentUr","segmentUrls","segmentUrlMap","segmentUrlObject","segmentUrl","mediaRange","SegmentURLToSegmentObject","generateSegments","segmentAttributes","segmentsFn","template","segmentsInfo","_segmentAttributes","_segmentAttributes$ti","findChildren","getContent","parseDuration","_match$slice","year","month","day","hour","minute","second","parsers","mediaPresentationDuration","parsedValue","parseFn","keySystemsMap","buildBaseUrls","referenceUrls","baseUrlElements","baseUrlElement","getSegmentInformation","adaptationSet","segmentTemplate","segmentList","segmentBase","segmentTimelineParentNode","segmentInitializationParentNode","segmentInitialization","toRepresentations","periodAttributes","periodBaseUrls","periodSegmentInfo","adaptationSetAttributes","adaptationSetBaseUrls","roleAttributes","keySystem","psshNode","psshBuffer","representations","adaptationSetSegmentInfo","representation","repBaseUrlElements","repBaseUrls","representationSegmentInfo","inheritBaseUrls","inheritAttributes","mpd","_options","_options$manifestUri","manifestUri","_options$NOW","_options$clientOffset","periods","mpdAttributes","mpdBaseUrls","period","periodAtt","parsedPeriodId","adaptationSets","toAdaptationSets","stringToMpdXml","manifestString","parseUTCTiming","UTCTimingNode","parseUTCTimingScheme","reviver","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","LN2","inspectMp4","_textifyMp","parseMp4Date","parseSampleFlags","flags","isLeading","dependsOn","isDependedOn","hasRedundancy","paddingValue","isNonSyncSample","degradationPriority","nalParse","avcStream","avcView","avc1","dataReferenceIndex","getUint16","horizresolution","vertresolution","frameCount","depth","avcC","numOfPictureParameterSets","nalSize","configurationVersion","avcProfileIndication","profileCompatibility","avcLevelIndication","lengthSizeMinusOne","sps","pps","numOfSequenceParameterSets","btrt","bufferSizeDB","maxBitrate","avgBitrate","esds","esId","streamPriority","decoderConfig","objectProfileIndication","streamType","bufferSize","decoderConfigDescriptor","audioObjectType","samplingFrequencyIndex","channelConfiguration","ftyp","majorBrand","minorVersion","compatibleBrands","dinf","dref","dataReferences","escape","mdat","nals","creationTime","modificationTime","mdia","mfhd","sequenceNumber","minf","mp4a","channelcount","samplesize","samplerate","streamDescriptor","moof","moov","mvex","mvhd","matrix","nextTrackId","pdin","initialDelay","sdtp","referenceId","earliestPresentationTime","referenceCount","startsWithSap","sapType","sapDeltaTime","smhd","balance","stbl","stco","chunkOffsets","entryCount","stsc","sampleToChunks","firstChunk","samplesPerChunk","sampleDescriptionIndex","stsz","sampleSize","entries","stts","timeToSamples","sampleCount","sampleDelta","styp","baseDataOffsetPresent","sampleDescriptionIndexPresent","defaultSampleDurationPresent","defaultSampleSizePresent","defaultSampleFlagsPresent","durationIsEmpty","defaultBaseIsMoof","baseDataOffset","defaultSampleDuration","defaultSampleSize","defaultSampleFlags","baseDataOffsetIsMoof","layer","alternateGroup","trex","defaultSampleDescriptionIndex","sampleDependsOn","sampleIsDependedOn","sampleHasRedundancy","samplePaddingValue","sampleIsDifferenceSample","sampleDegradationPriority","trun","sample","dataOffsetPresent","firstSampleFlagsPresent","sampleDurationPresent","sampleSizePresent","sampleFlagsPresent","sampleCompositionTimeOffsetPresent","dataOffset","getInt32","vmhd","graphicsmode","opcolor","Uint16Array","ab","z","inspectedMp4","indent","byte","textify","subresults","parseTfdt","parseHdlr","parseTfhd","parseTrun","parseSidx","mapToSample","approximateOffset","parseCaptionNals","videoTrackId","mdats","captionNals","mdatTrafPairs","matchingTraf","pair","seiNals","headerInfo","truns","seiNal","lastMatchedSample","matchingSample","findSeiNals","currentDts","allSamples","parseSamples","captionStream","segmentCache","parsedCaptions","parsingPartial","isInitialized","isPartial","captions","captionStreams","isNewInit","parsedData","cachedSegment","parseEmbeddedCaptions","pushNals","nal","clearParsedCaptions","resetCaptionStream","clearAllCaptions","directionSetting","alignSetting","findAlignSetting","_id","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","findDirectionSetting","SyntaxError","getCueAsHTML","isNativeReflectConstruct","_construct","Parent"],"mappings":"6FAUA,IAAIA,EAA4B,CAAC,KAAO,MAAO,KAAO,KAAO,MAAO,KAAO,KAAO,MAAO,KAAO,KAAO,MAAO,IAAM,MAUhHC,EAAuB,SAA8BC,GACvD,OAAOA,EAAK,IAAM,GAAKA,EAAK,IAAM,GAAKA,EAAK,IAAM,EAAIA,EAAK,IAwH7DC,EAAOC,QAAU,CACfC,gBAlIoB,SAAyBH,GAC7C,OAAIA,EAAK,KAAO,IAAII,WAAW,IAAMJ,EAAK,KAAO,IAAII,WAAW,IAAMJ,EAAK,KAAO,IAAII,WAAW,IAkIjGC,gBApGoB,SAAyBC,EAAQC,GACrD,IAAIC,EAAaF,EAAOC,EAAY,IAAM,GAAKD,EAAOC,EAAY,IAAM,GAAKD,EAAOC,EAAY,IAAM,EAAID,EAAOC,EAAY,GAI7H,OAF6B,GADjBD,EAAOC,EAAY,KACK,EAG3BC,EAAa,GAGfA,EAAa,IA4FpBC,cAzFkB,SAAuBH,EAAQC,GACjD,IAAIG,GAAoC,IAAxBJ,EAAOC,EAAY,KAAc,EAC7CI,EAASL,EAAOC,EAAY,IAAM,EAEtC,OADsC,KAAxBD,EAAOC,EAAY,GAChBI,EAASD,GAsF1BE,UAnFc,SAAmBN,EAAQC,GACzC,OAAID,EAAOC,KAAe,IAAIH,WAAW,IAAME,EAAOC,EAAY,KAAO,IAAIH,WAAW,IAAME,EAAOC,EAAY,KAAO,IAAIH,WAAW,GAC9H,kBACsB,EAApBE,EAAOC,IAAiE,MAAV,IAAxBD,EAAOC,EAAY,IAC3D,QAGF,MA6EPM,gBA1EoB,SAAyBC,GAG7C,IAFA,IAAIC,EAAI,EAEDA,EAAI,EAAID,EAAOE,QAAQ,CAC5B,GAAkB,MAAdF,EAAOC,IAA0C,MAAV,IAAhBD,EAAOC,EAAI,IAOtC,OAAOjB,GAA2C,GAAhBgB,EAAOC,EAAI,MAAe,GAJ1DA,IAOJ,OAAO,MA6DPE,kBA1DsB,SAA2BH,GACjD,IAAII,EAAYC,EAAWC,EAE3BF,EAAa,GAEG,GAAZJ,EAAO,KAETI,GAAc,EAEdA,GAAcnB,EAAqBe,EAAOO,SAAS,GAAI,MAKzD,EAAG,CAID,IAFAF,EAAYpB,EAAqBe,EAAOO,SAASH,EAAa,EAAGA,EAAa,KAE9D,EACd,OAAO,KAKT,GAAoB,SAFNI,OAAOC,aAAaT,EAAOI,GAAaJ,EAAOI,EAAa,GAAIJ,EAAOI,EAAa,GAAIJ,EAAOI,EAAa,IAE9F,CAC1BE,EAAQN,EAAOO,SAASH,EAAa,GAAIA,EAAaC,EAAY,IAElE,IAAK,IAAIJ,EAAI,EAAGA,EAAIK,EAAMI,WAAYT,IACpC,GAAiB,IAAbK,EAAML,GAAU,CAGlB,GAAc,iDAhFfU,SAdW,SAAuBC,EAAOC,EAAOC,GACvD,IAAIb,EACAc,EAAS,GAEb,IAAKd,EAAIY,EAAOZ,EAAIa,EAAKb,IACvBc,GAAU,KAAO,KAAOH,EAAMX,GAAGe,SAAS,KAAKC,OAAO,GAGxD,OAAOF,EAMSG,CA8EkBZ,EAAO,EAAGL,IAE0B,CAC5D,IAAIkB,EAAIb,EAAMC,SAASN,EAAI,GACvBmB,GAAe,EAAPD,EAAE,KAAc,GAAKA,EAAE,IAAM,GAAKA,EAAE,IAAM,GAAKA,EAAE,IAAM,EAAIA,EAAE,KAAO,EAGhF,OAFAC,GAAQ,EACRA,GAAe,EAAPD,EAAE,GAIZ,OAKNf,GAAc,GAEdA,GAAcC,QACPD,EAAaJ,EAAOU,YAE7B,OAAO,Q,qBC3HT,IAAIW,EAAgB,CAClB,IAAI,EACJ,IAAM,GAYR,SAASC,EAAoBC,GAC3B,MAAwB,iBAAVA,GAAsBA,GAAS,GAAKA,GAAS,IA6G7DpC,EAAOC,QAzGP,WACE,IAAIoC,EAAS,IACTC,EAAS,EACTC,EAAiB,EACjBC,EAAiB,IACjBC,EAAmB,EACnBC,EAAmB,IACnBC,EAAU,GACdC,OAAOC,iBAAiBC,KAAM,CAC5B,MAAS,CACPC,YAAY,EACZC,IAAK,WACH,OAAOX,GAETY,IAAK,SAAab,GAChB,IAAKD,EAAoBC,GACvB,MAAM,IAAIc,MAAM,oCAGlBb,EAASD,IAGb,MAAS,CACPW,YAAY,EACZC,IAAK,WACH,OAAOV,GAETW,IAAK,SAAab,GAChB,GAAqB,iBAAVA,EACT,MAAM,IAAIe,UAAU,kCAGtBb,EAASF,IAGb,cAAiB,CACfW,YAAY,EACZC,IAAK,WACH,OAAOR,GAETS,IAAK,SAAab,GAChB,IAAKD,EAAoBC,GACvB,MAAM,IAAIc,MAAM,4CAGlBV,EAAiBJ,IAGrB,cAAiB,CACfW,YAAY,EACZC,IAAK,WACH,OAAOT,GAETU,IAAK,SAAab,GAChB,IAAKD,EAAoBC,GACvB,MAAM,IAAIc,MAAM,4CAGlBX,EAAiBH,IAGrB,gBAAmB,CACjBW,YAAY,EACZC,IAAK,WACH,OAAON,GAETO,IAAK,SAAab,GAChB,IAAKD,EAAoBC,GACvB,MAAM,IAAIc,MAAM,8CAGlBR,EAAmBN,IAGvB,gBAAmB,CACjBW,YAAY,EACZC,IAAK,WACH,OAAOP,GAETQ,IAAK,SAAab,GAChB,IAAKD,EAAoBC,GACvB,MAAM,IAAIc,MAAM,8CAGlBT,EAAmBL,IAGvB,OAAU,CACRW,YAAY,EACZC,IAAK,WACH,OAAOL,GAETM,IAAK,SAAab,GAChB,IAAIgB,EA3GZ,SAA2BhB,GACzB,MAAqB,iBAAVA,MAIEF,EAAcE,EAAMiB,gBACjBjB,EAAMiB,eAqGFC,CAAkBlB,IAEhB,IAAZgB,EACFG,QAAQC,KAAK,uDAEbb,EAAUS,Q,yCCjHpB,IAAIK,EAAW,EAAQ,QAEnBC,EAAad,OAAOe,QAAU,WAChC,SAASC,KAET,OAAO,SAAUC,GACf,GAAyB,IAArBC,UAAU/C,OACZ,MAAM,IAAImC,MAAM,kDAIlB,OADAU,EAAEG,UAAYF,EACP,IAAID,GATmB,GAiBlC,SAASI,EAAaC,EAAWC,GAC/BpB,KAAKqB,KAAO,eACZrB,KAAKsB,KAAOH,EAAUG,KACtBtB,KAAKoB,QAAUA,GAAWD,EAAUC,QAiBtC,SAASG,EAAeC,GACtB,SAASC,EAAeC,EAAGC,EAAGC,EAAGC,GAC/B,OAAiB,MAAL,EAAJH,GAA0B,IAAL,EAAJC,IAAmB,EAAJC,IAAc,EAAJC,GAAS,IAG7D,IAAIF,EAAIH,EAAMM,MAAM,wCAEpB,OAAKH,EAIDA,EAAE,GAEGF,EAAeE,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAGI,QAAQ,IAAK,IAAKJ,EAAE,IAClDA,EAAE,GAAK,GAGTF,EAAeE,EAAE,GAAIA,EAAE,GAAI,EAAGA,EAAE,IAGhCF,EAAe,EAAGE,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAZhC,KAkBX,SAASK,IACPhC,KAAKiC,OAASrB,EAAW,MA4D3B,SAASsB,EAAaV,EAAOW,EAAUC,EAAeC,GACpD,IAAIC,EAASD,EAAab,EAAMe,MAAMF,GAAc,CAACb,GAErD,IAAK,IAAIxD,KAAKsE,EACZ,GAAyB,iBAAdA,EAAOtE,GAAlB,CAIA,IAAIwE,EAAKF,EAAOtE,GAAGuE,MAAMH,GAEzB,GAAkB,IAAdI,EAAGvE,OAMPkE,EAFQK,EAAG,GACHA,EAAG,KAKf,SAASC,EAASjB,EAAOkB,EAAKC,GAE5B,IAAIC,EAASpB,EAEb,SAASqB,IACP,IAAIC,EAAKvB,EAAeC,GAExB,GAAW,OAAPsB,EACF,MAAM,IAAI5B,EAAaA,EAAa6B,OAAOC,aAAc,wBAA0BJ,GAKrF,OADApB,EAAQA,EAAMO,QAAQ,iBAAkB,IACjCe,EAgGT,SAASG,IACPzB,EAAQA,EAAMO,QAAQ,OAAQ,IAShC,GALAkB,IACAP,EAAIQ,UAAYL,IAEhBI,IAE2B,WAAvBzB,EAAM2B,OAAO,EAAG,GAElB,MAAM,IAAIjC,EAAaA,EAAa6B,OAAOC,aAAc,qEAAoEJ,GAG/HpB,EAAQA,EAAM2B,OAAO,GACrBF,IACAP,EAAIU,QAAUP,IAGdI,IAhHA,SAA4BzB,EAAOkB,GACjC,IAAIW,EAAW,IAAIrB,EACnBE,EAAaV,GAAO,SAAU8B,EAAGC,GAC/B,OAAQD,GACN,IAAK,SAEH,IAAK,IAAItF,EAAI2E,EAAW1E,OAAS,EAAGD,GAAK,EAAGA,IAC1C,GAAI2E,EAAW3E,GAAGwF,KAAOD,EAAG,CAC1BF,EAASlD,IAAImD,EAAGX,EAAW3E,GAAGyF,QAC9B,MAIJ,MAEF,IAAK,WACHJ,EAASK,IAAIJ,EAAGC,EAAG,CAAC,KAAM,OAC1B,MAEF,IAAK,OACH,IAAII,EAAOJ,EAAEhB,MAAM,KACfqB,EAAQD,EAAK,GACjBN,EAASQ,QAAQP,EAAGM,GACpBP,EAASS,QAAQR,EAAGM,IAASP,EAASlD,IAAI,eAAe,GACzDkD,EAASK,IAAIJ,EAAGM,EAAO,CAAC,SAEJ,IAAhBD,EAAK1F,QACPoF,EAASK,IAAI,YAAaC,EAAK,GAAI,CAAC,QAAS,SAAU,QAGzD,MAEF,IAAK,WACHA,EAAOJ,EAAEhB,MAAM,KACfc,EAASS,QAAQR,EAAGK,EAAK,IAEL,IAAhBA,EAAK1F,QACPoF,EAASK,IAAI,gBAAiBC,EAAK,GAAI,CAAC,QAAS,SAAU,QAG7D,MAEF,IAAK,OACHN,EAASS,QAAQR,EAAGC,GACpB,MAEF,IAAK,QACHF,EAASK,IAAIJ,EAAGC,EAAG,CAAC,QAAS,SAAU,MAAO,OAAQ,aAGzD,IAAK,MAERb,EAAIe,OAASJ,EAASnD,IAAI,SAAU,MACpCwC,EAAIqB,SAAWV,EAASnD,IAAI,WAAY,IAExC,IACEwC,EAAIsB,KAAOX,EAASnD,IAAI,OAAQ,QAChC,MAAO+D,IAETvB,EAAIwB,UAAYb,EAASnD,IAAI,YAAa,SAC1CwC,EAAIyB,YAAcd,EAASnD,IAAI,eAAe,GAC9CwC,EAAIvD,KAAOkE,EAASnD,IAAI,OAAQ,KAEhC,IACEwC,EAAI0B,MAAQf,EAASnD,IAAI,QAAS,UAClC,MAAO+D,GACPvB,EAAI0B,MAAQf,EAASnD,IAAI,QAAS,UAGpC,IACEwC,EAAI2B,SAAWhB,EAASnD,IAAI,WAAY,QACxC,MAAO+D,GACPvB,EAAI2B,SAAWhB,EAASnD,IAAI,WAAY,CACtCtB,MAAO,EACP0F,KAAM,EACNC,OAAQ,GACR3G,OAAQ,GACRiB,IAAK,IACL2F,MAAO,KACN9B,EAAI0B,OAGT1B,EAAI+B,cAAgBpB,EAASnD,IAAI,gBAAiB,CAChDtB,MAAO,QACP0F,KAAM,QACNC,OAAQ,SACR3G,OAAQ,SACRiB,IAAK,MACL2F,MAAO,OACN9B,EAAI0B,OAwBTM,CAAmBlD,EAAOkB,GA3P5BxB,EAAaD,UAAYL,EAAWR,MAAMa,WAC1CC,EAAaD,UAAU0D,YAAczD,EAErCA,EAAa6B,OAAS,CACpB6B,aAAc,CACZtD,KAAM,EACNF,QAAS,+BAEX4B,aAAc,CACZ1B,KAAM,EACNF,QAAS,0BAkCbY,EAASf,UAAY,CAEnBd,IAAK,SAAamD,EAAGC,GACdvD,KAAKE,IAAIoD,IAAY,KAANC,IAClBvD,KAAKiC,OAAOqB,GAAKC,IAQrBrD,IAAK,SAAaoD,EAAGuB,EAAMC,GACzB,OAAIA,EACK9E,KAAK+E,IAAIzB,GAAKtD,KAAKiC,OAAOqB,GAAKuB,EAAKC,GAGtC9E,KAAK+E,IAAIzB,GAAKtD,KAAKiC,OAAOqB,GAAKuB,GAGxCE,IAAK,SAAazB,GAChB,OAAOA,KAAKtD,KAAKiC,QAGnByB,IAAK,SAAaJ,EAAGC,EAAGyB,GACtB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAE/G,SAAUgH,EAC9B,GAAI1B,IAAMyB,EAAEC,GAAI,CACdjF,KAAKG,IAAImD,EAAGC,GACZ,QAKNM,QAAS,SAAiBP,EAAGC,GACvB,UAAU2B,KAAK3B,IAEjBvD,KAAKG,IAAImD,EAAG6B,SAAS5B,EAAG,MAI5BO,QAAS,SAAiBR,EAAGC,GAG3B,SAAQA,EAAEzB,MAAM,8BACdyB,EAAI6B,WAAW7B,KAEN,GAAKA,GAAK,OACjBvD,KAAKG,IAAImD,EAAGC,IACL,KAkKf,IAAI8B,EAAmB1E,EAAS2E,cAAc,YAC1CC,EAAW,CACbC,EAAG,OACHxH,EAAG,IACHyH,EAAG,IACHC,EAAG,IACHC,KAAM,OACNC,GAAI,KACJrC,EAAG,OACHsC,KAAM,QAIJC,EAAsB,CACxBC,MAAO,sBACPC,KAAM,kBACNC,KAAM,oBACNC,IAAK,kBACLC,OAAQ,oBACRC,QAAS,oBACTC,KAAM,kBACNC,MAAO,iBAELC,EAAiB,CACnBhD,EAAG,QACHsC,KAAM,QAEJW,EAAe,CACjBZ,GAAI,QAGN,SAASa,EAAaC,EAAQlF,GAC5B,SAASmF,IAEP,IAAKnF,EACH,OAAO,KAST,IALiB1C,EAKb6C,EAAIH,EAAMM,MAAM,uBAGpB,OARiBhD,EAQF6C,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAP7BH,EAAQA,EAAM2B,OAAOrE,EAAOb,QACrBa,EAgBX,SAAS8H,EAAUC,EAASC,GAC1B,OAAQN,EAAaM,EAAQC,YAAcP,EAAaM,EAAQC,aAAeF,EAAQE,UAIzF,SAASzB,EAAc0B,EAAMC,GAC3B,IAAIC,EAAU3B,EAASyB,GAEvB,IAAKE,EACH,OAAO,KAGT,IAAIJ,EAAUJ,EAAO/F,SAAS2E,cAAc4B,GACxC7F,EAAOkF,EAAeS,GAM1B,OAJI3F,GAAQ4F,IACVH,EAAQzF,GAAQ4F,EAAWE,QAGtBL,EAQT,IALA,IAEIM,EA/BcxF,EA6BdyF,EAAUX,EAAO/F,SAAS2E,cAAc,OACxCuB,EAAUQ,EAEVC,EAAW,GAEc,QAArBF,EAAIT,MACV,GAAa,MAATS,EAAE,GAmENP,EAAQU,YAAYb,EAAO/F,SAAS6G,gBAtGpB5F,EAsG4CwF,EArG5D/B,EAAiBoC,UAAY7F,EAC7BA,EAAIyD,EAAiBqC,YACrBrC,EAAiBqC,YAAc,GACxB9F,SA+BP,CACE,GAAa,MAATwF,EAAE,GAAY,CAEZE,EAASrJ,QAAUqJ,EAASA,EAASrJ,OAAS,KAAOmJ,EAAEjE,OAAO,GAAGpB,QAAQ,IAAK,MAChFuF,EAASK,MACTd,EAAUA,EAAQe,YAIpB,SAGF,IACIC,EADA/E,EAAKvB,EAAe6F,EAAEjE,OAAO,EAAGiE,EAAEnJ,OAAS,IAG/C,GAAI6E,EAAI,CAEN+E,EAAOnB,EAAO/F,SAASmH,4BAA4B,YAAahF,GAChE+D,EAAQU,YAAYM,GACpB,SAGF,IAAIlG,EAAIyF,EAAEtF,MAAM,oDAEhB,IAAKH,EACH,SAMF,KAFAkG,EAAOvC,EAAc3D,EAAE,GAAIA,EAAE,KAG3B,SAKF,IAAKiF,EAAUC,EAASgB,GACtB,SAIF,GAAIlG,EAAE,GAAI,CACR,IAAIoG,EAAUpG,EAAE,GAAGY,MAAM,KACzBwF,EAAQC,SAAQ,SAAUC,GACxB,IAAIC,EAAU,OAAOhD,KAAK+C,GAEtBE,EAAYD,EAAUD,EAAGjJ,MAAM,GAAKiJ,EAExC,GAAInC,EAAoBsC,eAAeD,GAAY,CACjD,IAAIE,EAAWH,EAAU,mBAAqB,QAC1CI,EAAYxC,EAAoBqC,GACpCN,EAAKU,MAAMF,GAAYC,MAG3BT,EAAKW,UAAYT,EAAQU,KAAK,KAKhCnB,EAASoB,KAAK/G,EAAE,IAChBkF,EAAQU,YAAYM,GACpBhB,EAAUgB,EAQd,OAAOR,EAQT,IAAIsB,EAAkB,CAAC,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAQ,MAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAA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","file":"68b49b2ce0d55d8a909b2b9efaa779893154a4f7-5ebdab234b424731357d.js","sourcesContent":["/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Utilities to detect basic properties and metadata about Aac data.\n */\n'use strict';\n\nvar ADTS_SAMPLING_FREQUENCIES = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n\nvar isLikelyAacData = function isLikelyAacData(data) {\n  if (data[0] === 'I'.charCodeAt(0) && data[1] === 'D'.charCodeAt(0) && data[2] === '3'.charCodeAt(0)) {\n    return true;\n  }\n\n  return false;\n};\n\nvar parseSyncSafeInteger = function parseSyncSafeInteger(data) {\n  return data[0] << 21 | data[1] << 14 | data[2] << 7 | data[3];\n}; // return a percent-encoded representation of the specified byte range\n// @see http://en.wikipedia.org/wiki/Percent-encoding\n\n\nvar percentEncode = function percentEncode(bytes, start, end) {\n  var i,\n      result = '';\n\n  for (i = start; i < end; i++) {\n    result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n  }\n\n  return result;\n}; // return the string representation of the specified byte range,\n// interpreted as ISO-8859-1.\n\n\nvar parseIso88591 = function parseIso88591(bytes, start, end) {\n  return unescape(percentEncode(bytes, start, end)); // jshint ignore:line\n};\n\nvar parseId3TagSize = function parseId3TagSize(header, byteIndex) {\n  var returnSize = header[byteIndex + 6] << 21 | header[byteIndex + 7] << 14 | header[byteIndex + 8] << 7 | header[byteIndex + 9],\n      flags = header[byteIndex + 5],\n      footerPresent = (flags & 16) >> 4;\n\n  if (footerPresent) {\n    return returnSize + 20;\n  }\n\n  return returnSize + 10;\n};\n\nvar parseAdtsSize = function parseAdtsSize(header, byteIndex) {\n  var lowThree = (header[byteIndex + 5] & 0xE0) >> 5,\n      middle = header[byteIndex + 4] << 3,\n      highTwo = header[byteIndex + 3] & 0x3 << 11;\n  return highTwo | middle | lowThree;\n};\n\nvar parseType = function parseType(header, byteIndex) {\n  if (header[byteIndex] === 'I'.charCodeAt(0) && header[byteIndex + 1] === 'D'.charCodeAt(0) && header[byteIndex + 2] === '3'.charCodeAt(0)) {\n    return 'timed-metadata';\n  } else if (header[byteIndex] & 0xff === 0xff && (header[byteIndex + 1] & 0xf0) === 0xf0) {\n    return 'audio';\n  }\n\n  return null;\n};\n\nvar parseSampleRate = function parseSampleRate(packet) {\n  var i = 0;\n\n  while (i + 5 < packet.length) {\n    if (packet[i] !== 0xFF || (packet[i + 1] & 0xF6) !== 0xF0) {\n      // If a valid header was not found,  jump one forward and attempt to\n      // find a valid ADTS header starting at the next byte\n      i++;\n      continue;\n    }\n\n    return ADTS_SAMPLING_FREQUENCIES[(packet[i + 2] & 0x3c) >>> 2];\n  }\n\n  return null;\n};\n\nvar parseAacTimestamp = function parseAacTimestamp(packet) {\n  var frameStart, frameSize, frame, frameHeader; // find the start of the first frame and the end of the tag\n\n  frameStart = 10;\n\n  if (packet[5] & 0x40) {\n    // advance the frame start past the extended header\n    frameStart += 4; // header size field\n\n    frameStart += parseSyncSafeInteger(packet.subarray(10, 14));\n  } // parse one or more ID3 frames\n  // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n\n\n  do {\n    // determine the number of bytes in this frame\n    frameSize = parseSyncSafeInteger(packet.subarray(frameStart + 4, frameStart + 8));\n\n    if (frameSize < 1) {\n      return null;\n    }\n\n    frameHeader = String.fromCharCode(packet[frameStart], packet[frameStart + 1], packet[frameStart + 2], packet[frameStart + 3]);\n\n    if (frameHeader === 'PRIV') {\n      frame = packet.subarray(frameStart + 10, frameStart + frameSize + 10);\n\n      for (var i = 0; i < frame.byteLength; i++) {\n        if (frame[i] === 0) {\n          var owner = parseIso88591(frame, 0, i);\n\n          if (owner === 'com.apple.streaming.transportStreamTimestamp') {\n            var d = frame.subarray(i + 1);\n            var size = (d[3] & 0x01) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;\n            size *= 4;\n            size += d[7] & 0x03;\n            return size;\n          }\n\n          break;\n        }\n      }\n    }\n\n    frameStart += 10; // advance past the frame header\n\n    frameStart += frameSize; // advance past the frame body\n  } while (frameStart < packet.byteLength);\n\n  return null;\n};\n\nmodule.exports = {\n  isLikelyAacData: isLikelyAacData,\n  parseId3TagSize: parseId3TagSize,\n  parseAdtsSize: parseAdtsSize,\n  parseType: parseType,\n  parseSampleRate: parseSampleRate,\n  parseAacTimestamp: parseAacTimestamp\n};","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar scrollSetting = {\n  \"\": true,\n  \"up\": true\n};\n\nfunction findScrollSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var scroll = scrollSetting[value.toLowerCase()];\n  return scroll ? value.toLowerCase() : false;\n}\n\nfunction isValidPercentValue(value) {\n  return typeof value === \"number\" && value >= 0 && value <= 100;\n} // VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\n\n\nfunction VTTRegion() {\n  var _width = 100;\n  var _lines = 3;\n  var _regionAnchorX = 0;\n  var _regionAnchorY = 100;\n  var _viewportAnchorX = 0;\n  var _viewportAnchorY = 100;\n  var _scroll = \"\";\n  Object.defineProperties(this, {\n    \"width\": {\n      enumerable: true,\n      get: function get() {\n        return _width;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"Width must be between 0 and 100.\");\n        }\n\n        _width = value;\n      }\n    },\n    \"lines\": {\n      enumerable: true,\n      get: function get() {\n        return _lines;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Lines must be set to a number.\");\n        }\n\n        _lines = value;\n      }\n    },\n    \"regionAnchorY\": {\n      enumerable: true,\n      get: function get() {\n        return _regionAnchorY;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n        }\n\n        _regionAnchorY = value;\n      }\n    },\n    \"regionAnchorX\": {\n      enumerable: true,\n      get: function get() {\n        return _regionAnchorX;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n        }\n\n        _regionAnchorX = value;\n      }\n    },\n    \"viewportAnchorY\": {\n      enumerable: true,\n      get: function get() {\n        return _viewportAnchorY;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n        }\n\n        _viewportAnchorY = value;\n      }\n    },\n    \"viewportAnchorX\": {\n      enumerable: true,\n      get: function get() {\n        return _viewportAnchorX;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n        }\n\n        _viewportAnchorX = value;\n      }\n    },\n    \"scroll\": {\n      enumerable: true,\n      get: function get() {\n        return _scroll;\n      },\n      set: function set(value) {\n        var setting = findScrollSetting(value); // Have to check for false as an empty string is a legal value.\n\n        if (setting === false) {\n          console.warn(\"Scroll: an invalid or illegal string was specified.\");\n        } else {\n          _scroll = setting;\n        }\n      }\n    }\n  });\n}\n\nmodule.exports = VTTRegion;","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\nvar document = require('global/document');\n\nvar _objCreate = Object.create || function () {\n  function F() {}\n\n  return function (o) {\n    if (arguments.length !== 1) {\n      throw new Error('Object.create shim only accepts one parameter.');\n    }\n\n    F.prototype = o;\n    return new F();\n  };\n}(); // Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\n\n\nfunction ParsingError(errorData, message) {\n  this.name = \"ParsingError\";\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\n\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError; // ParsingError metadata for acceptable ParsingErrors.\n\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: \"Malformed WebVTT signature.\"\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: \"Malformed time stamp.\"\n  }\n}; // Try to parse input as a time stamp.\n\nfunction parseTimeStamp(input) {\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  var m = input.match(/^(\\d+):(\\d{1,2})(:\\d{1,2})?\\.(\\d{3})/);\n\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n} // A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\n\n\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function set(k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function get(k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function has(k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function alt(k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function integer(k, v) {\n    if (/^-?\\d+$/.test(v)) {\n      // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function percent(k, v) {\n    var m;\n\n    if (m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/)) {\n      v = parseFloat(v);\n\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n\n    return false;\n  }\n}; // Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\n\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n\n  for (var i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n\n    var kv = groups[i].split(keyValueDelim);\n\n    if (kv.length !== 2) {\n      continue;\n    }\n\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input; // 4.1 WebVTT timestamp\n\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed timestamp: \" + oInput);\n    } // Remove time stamp from input.\n\n\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  } // 4.4.2 WebVTT cue settings\n\n\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n    parseOptions(input, function (k, v) {\n      switch (k) {\n        case \"region\":\n          // Find the last region we parsed with the same region id.\n          for (var i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n\n          break;\n\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n\n        case \"line\":\n          var vals = v.split(\",\"),\n              vals0 = vals[0];\n          settings.integer(k, vals0);\n          settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n          settings.alt(k, vals0, [\"auto\"]);\n\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n          }\n\n          break;\n\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n          }\n\n          break;\n\n        case \"size\":\n          settings.percent(k, v);\n          break;\n\n        case \"align\":\n          settings.alt(k, v, [\"start\", \"center\", \"end\", \"left\", \"right\"]);\n          break;\n      }\n    }, /:/, /\\s/); // Apply default values for any missing fields.\n\n    cue.region = settings.get(\"region\", null);\n    cue.vertical = settings.get(\"vertical\", \"\");\n\n    try {\n      cue.line = settings.get(\"line\", \"auto\");\n    } catch (e) {}\n\n    cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue.snapToLines = settings.get(\"snapToLines\", true);\n    cue.size = settings.get(\"size\", 100); // Safari still uses the old middle value and won't accept center\n\n    try {\n      cue.align = settings.get(\"align\", \"center\");\n    } catch (e) {\n      cue.align = settings.get(\"align\", \"middle\");\n    }\n\n    try {\n      cue.position = settings.get(\"position\", \"auto\");\n    } catch (e) {\n      cue.position = settings.get(\"position\", {\n        start: 0,\n        left: 0,\n        center: 50,\n        middle: 50,\n        end: 100,\n        right: 100\n      }, cue.align);\n    }\n\n    cue.positionAlign = settings.get(\"positionAlign\", {\n      start: \"start\",\n      left: \"start\",\n      center: \"center\",\n      middle: \"center\",\n      end: \"end\",\n      right: \"end\"\n    }, cue.align);\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  } // 4.1 WebVTT cue timings.\n\n\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp(); // (1) collect cue start time\n\n  skipWhitespace();\n\n  if (input.substr(0, 3) !== \"-->\") {\n    // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed time stamp (time stamps must be separated by '-->'): \" + oInput);\n  }\n\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp(); // (5) collect cue end time\n  // 4.1 WebVTT cue settings list.\n\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\n\nvar TEXTAREA_ELEMENT = document.createElement(\"textarea\");\nvar TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n}; // 5.1 default text color\n// 5.2 default text background color is equivalent to text color with bg_ prefix\n\nvar DEFAULT_COLOR_CLASS = {\n  white: 'rgba(255,255,255,1)',\n  lime: 'rgba(0,255,0,1)',\n  cyan: 'rgba(0,255,255,1)',\n  red: 'rgba(255,0,0,1)',\n  yellow: 'rgba(255,255,0,1)',\n  magenta: 'rgba(255,0,255,1)',\n  blue: 'rgba(0,0,255,1)',\n  black: 'rgba(0,0,0,1)'\n};\nvar TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\nvar NEEDS_PARENT = {\n  rt: \"ruby\"\n}; // Parse content into a document fragment.\n\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    } // Consume 'n' characters from the input.\n\n\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    var m = input.match(/^([^<]*)(<[^>]*>?)?/); // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  function unescape(s) {\n    TEXTAREA_ELEMENT.innerHTML = s;\n    s = TEXTAREA_ELEMENT.textContent;\n    TEXTAREA_ELEMENT.textContent = \"\";\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] || NEEDS_PARENT[element.localName] === current.localName;\n  } // Create an element for this tag.\n\n\n  function createElement(type, annotation) {\n    var tagName = TAG_NAME[type];\n\n    if (!tagName) {\n      return null;\n    }\n\n    var element = window.document.createElement(tagName);\n    var name = TAG_ANNOTATION[type];\n\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n\n    return element;\n  }\n\n  var rootDiv = window.document.createElement(\"div\"),\n      current = rootDiv,\n      t,\n      tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length && tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        } // Otherwise just ignore the end tag.\n\n\n        continue;\n      }\n\n      var ts = parseTimeStamp(t.substr(1, t.length - 2));\n      var node;\n\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n\n      var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/); // If we can't parse the tag, skip to the next tag.\n\n      if (!m) {\n        continue;\n      } // Try to construct an element, and ignore the tag if we couldn't.\n\n\n      node = createElement(m[1], m[3]);\n\n      if (!node) {\n        continue;\n      } // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n\n\n      if (!shouldAdd(current, node)) {\n        continue;\n      } // Set the class list (as a list of classes, separated by space).\n\n\n      if (m[2]) {\n        var classes = m[2].split('.');\n        classes.forEach(function (cl) {\n          var bgColor = /^bg_/.test(cl); // slice out `bg_` if it's a background color\n\n          var colorName = bgColor ? cl.slice(3) : cl;\n\n          if (DEFAULT_COLOR_CLASS.hasOwnProperty(colorName)) {\n            var propName = bgColor ? 'background-color' : 'color';\n            var propValue = DEFAULT_COLOR_CLASS[colorName];\n            node.style[propName] = propValue;\n          }\n        });\n        node.className = classes.join(' ');\n      } // Append the node to the current node, and enter the scope of the new\n      // node.\n\n\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    } // Text nodes are leaf nodes.\n\n\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n} // This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\n\n\nvar strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6], [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d], [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6], [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5], [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815], [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858], [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f], [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c], [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1], [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc], [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808], [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855], [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f], [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13], [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58], [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72], [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f], [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32], [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42], [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f], [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59], [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62], [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77], [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b], [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (var i = 0; i < strongRTLRanges.length; i++) {\n    var currentRange = strongRTLRanges[i];\n\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  var nodeStack = [],\n      text = \"\",\n      charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    var node = nodeStack.pop(),\n        text = node.textContent || node.innerText;\n\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      var m = text.match(/^.*(\\n|\\r)/);\n\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n\n      return text;\n    }\n\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n\n  while (text = nextTextNode(nodeStack)) {\n    for (var i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" && (cue.snapToLines || cue.line >= 0 && cue.line <= 100)) {\n    return cue.line;\n  }\n\n  if (!cue.track || !cue.track.textTrackList || !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n\n  var track = cue.track,\n      trackList = track.textTrackList,\n      count = 0;\n\n  for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n\n  return ++count * -1;\n}\n\nfunction StyleBox() {} // Apply styles to a div. If there is no div passed then it defaults to the\n// div on 'this'.\n\n\nStyleBox.prototype.applyStyles = function (styles, div) {\n  div = div || this.div;\n\n  for (var prop in styles) {\n    if (styles.hasOwnProperty(prop)) {\n      div.style[prop] = styles[prop];\n    }\n  }\n};\n\nStyleBox.prototype.formatStyle = function (val, unit) {\n  return val === 0 ? 0 : val + unit;\n}; // Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\n\n\nfunction CueStyleBox(window, cue, styleOptions) {\n  StyleBox.call(this);\n  this.cue = cue; // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n  // have inline positioning and will function as the cue background box.\n\n  this.cueDiv = parseContent(window, cue.text);\n  var styles = {\n    color: \"rgba(255, 255, 255, 1)\",\n    backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n    position: \"relative\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    display: \"inline\",\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n    unicodeBidi: \"plaintext\"\n  };\n  this.applyStyles(styles, this.cueDiv); // Create an absolutely positioned div that will be used to position the cue\n  // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n  // mirrors of them except middle instead of center on Safari.\n\n  this.div = window.document.createElement(\"div\");\n  styles = {\n    direction: determineBidi(this.cueDiv),\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n    unicodeBidi: \"plaintext\",\n    textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n    font: styleOptions.font,\n    whiteSpace: \"pre-line\",\n    position: \"absolute\"\n  };\n  this.applyStyles(styles);\n  this.div.appendChild(this.cueDiv); // Calculate the distance from the reference edge of the viewport to the text\n  // position of the cue box. The reference edge will be resolved later when\n  // the box orientation styles are applied.\n\n  var textPos = 0;\n\n  switch (cue.positionAlign) {\n    case \"start\":\n      textPos = cue.position;\n      break;\n\n    case \"center\":\n      textPos = cue.position - cue.size / 2;\n      break;\n\n    case \"end\":\n      textPos = cue.position - cue.size;\n      break;\n  } // Horizontal box orientation; textPos is the distance from the left edge of the\n  // area to the left edge of the box and cue.size is the distance extending to\n  // the right from there.\n\n\n  if (cue.vertical === \"\") {\n    this.applyStyles({\n      left: this.formatStyle(textPos, \"%\"),\n      width: this.formatStyle(cue.size, \"%\")\n    }); // Vertical box orientation; textPos is the distance from the top edge of the\n    // area to the top edge of the box and cue.size is the height extending\n    // downwards from there.\n  } else {\n    this.applyStyles({\n      top: this.formatStyle(textPos, \"%\"),\n      height: this.formatStyle(cue.size, \"%\")\n    });\n  }\n\n  this.move = function (box) {\n    this.applyStyles({\n      top: this.formatStyle(box.top, \"px\"),\n      bottom: this.formatStyle(box.bottom, \"px\"),\n      left: this.formatStyle(box.left, \"px\"),\n      right: this.formatStyle(box.right, \"px\"),\n      height: this.formatStyle(box.height, \"px\"),\n      width: this.formatStyle(box.width, \"px\")\n    });\n  };\n}\n\nCueStyleBox.prototype = _objCreate(StyleBox.prototype);\nCueStyleBox.prototype.constructor = CueStyleBox; // Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\n\nfunction BoxPosition(obj) {\n  // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n  // was passed in and we need to copy the results of 'getBoundingClientRect'\n  // as the object returned is readonly. All co-ordinate values are in reference\n  // to the viewport origin (top left).\n  var lh, height, width, top;\n\n  if (obj.div) {\n    height = obj.div.offsetHeight;\n    width = obj.div.offsetWidth;\n    top = obj.div.offsetTop;\n    var rects = (rects = obj.div.childNodes) && (rects = rects[0]) && rects.getClientRects && rects.getClientRects();\n    obj = obj.div.getBoundingClientRect(); // In certain cases the outter div will be slightly larger then the sum of\n    // the inner div's lines. This could be due to bold text, etc, on some platforms.\n    // In this case we should get the average line height and use that. This will\n    // result in the desired behaviour.\n\n    lh = rects ? Math.max(rects[0] && rects[0].height || 0, obj.height / rects.length) : 0;\n  }\n\n  this.left = obj.left;\n  this.right = obj.right;\n  this.top = obj.top || top;\n  this.height = obj.height || height;\n  this.bottom = obj.bottom || top + (obj.height || height);\n  this.width = obj.width || width;\n  this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n} // Move the box along a particular axis. Optionally pass in an amount to move\n// the box. If no amount is passed then the default is the line height of the\n// box.\n\n\nBoxPosition.prototype.move = function (axis, toMove) {\n  toMove = toMove !== undefined ? toMove : this.lineHeight;\n\n  switch (axis) {\n    case \"+x\":\n      this.left += toMove;\n      this.right += toMove;\n      break;\n\n    case \"-x\":\n      this.left -= toMove;\n      this.right -= toMove;\n      break;\n\n    case \"+y\":\n      this.top += toMove;\n      this.bottom += toMove;\n      break;\n\n    case \"-y\":\n      this.top -= toMove;\n      this.bottom -= toMove;\n      break;\n  }\n}; // Check if this box overlaps another box, b2.\n\n\nBoxPosition.prototype.overlaps = function (b2) {\n  return this.left < b2.right && this.right > b2.left && this.top < b2.bottom && this.bottom > b2.top;\n}; // Check if this box overlaps any other boxes in boxes.\n\n\nBoxPosition.prototype.overlapsAny = function (boxes) {\n  for (var i = 0; i < boxes.length; i++) {\n    if (this.overlaps(boxes[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // Check if this box is within another box.\n\n\nBoxPosition.prototype.within = function (container) {\n  return this.top >= container.top && this.bottom <= container.bottom && this.left >= container.left && this.right <= container.right;\n}; // Check if this box is entirely within the container or it is overlapping\n// on the edge opposite of the axis direction passed. For example, if \"+x\" is\n// passed and the box is overlapping on the left edge of the container, then\n// return true.\n\n\nBoxPosition.prototype.overlapsOppositeAxis = function (container, axis) {\n  switch (axis) {\n    case \"+x\":\n      return this.left < container.left;\n\n    case \"-x\":\n      return this.right > container.right;\n\n    case \"+y\":\n      return this.top < container.top;\n\n    case \"-y\":\n      return this.bottom > container.bottom;\n  }\n}; // Find the percentage of the area that this box is overlapping with another\n// box.\n\n\nBoxPosition.prototype.intersectPercentage = function (b2) {\n  var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n  return intersectArea / (this.height * this.width);\n}; // Convert the positions from this box to CSS compatible positions using\n// the reference container's positions. This has to be done because this\n// box's positions are in reference to the viewport origin, whereas, CSS\n// values are in referecne to their respective edges.\n\n\nBoxPosition.prototype.toCSSCompatValues = function (reference) {\n  return {\n    top: this.top - reference.top,\n    bottom: reference.bottom - this.bottom,\n    left: this.left - reference.left,\n    right: reference.right - this.right,\n    height: this.height,\n    width: this.width\n  };\n}; // Get an object that represents the box's position without anything extra.\n// Can pass a StyleBox, HTMLElement, or another BoxPositon.\n\n\nBoxPosition.getSimpleBoxPosition = function (obj) {\n  var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n  var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n  var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n  obj = obj.div ? obj.div.getBoundingClientRect() : obj.tagName ? obj.getBoundingClientRect() : obj;\n  var ret = {\n    left: obj.left,\n    right: obj.right,\n    top: obj.top || top,\n    height: obj.height || height,\n    bottom: obj.bottom || top + (obj.height || height),\n    width: obj.width || width\n  };\n  return ret;\n}; // Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\n\n\nfunction moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    var bestPosition,\n        specifiedPosition = new BoxPosition(b),\n        percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (var i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) || b.within(containerBox) && b.overlapsAny(boxPositions)) {\n        b.move(axis[i]);\n      } // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n\n\n      if (b.within(containerBox)) {\n        return b;\n      }\n\n      var p = b.intersectPercentage(containerBox); // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      } // Reset the box position to the specified position.\n\n\n      b = new BoxPosition(specifiedPosition);\n    }\n\n    return bestPosition || specifiedPosition;\n  }\n\n  var boxPosition = new BoxPosition(styleBox),\n      cue = styleBox.cue,\n      linePos = computeLinePos(cue),\n      axis = []; // If we have a line number to align the cue to.\n\n  if (cue.snapToLines) {\n    var size;\n\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    var step = boxPosition.lineHeight,\n        position = step * Math.round(linePos),\n        maxPosition = containerBox[size] + step,\n        initialAxis = axis[0]; // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    } // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n\n\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    } // Move the box to the specified position. This may not be its best\n    // position.\n\n\n    boxPosition.move(initialAxis, position);\n  } else {\n    // If we have a percentage line value for the cue.\n    var calculatedPercentage = boxPosition.lineHeight / containerBox.height * 100;\n\n    switch (cue.lineAlign) {\n      case \"center\":\n        linePos -= calculatedPercentage / 2;\n        break;\n\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    } // Apply initial line position to the cue box.\n\n\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"]; // Get the box position again after we've applied the specified positioning\n    // to it.\n\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  var bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction WebVTT() {// Nothing\n} // Helper to allow strings to be decoded instead of the default binary utf8 data.\n\n\nWebVTT.StringDecoder = function () {\n  return {\n    decode: function decode(data) {\n      if (!data) {\n        return \"\";\n      }\n\n      if (typeof data !== \"string\") {\n        throw new Error(\"Error - expected string data.\");\n      }\n\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nWebVTT.convertCueToDOMTree = function (window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n\n  return parseContent(window, cuetext);\n};\n\nvar FONT_SIZE_PERCENT = 0.05;\nvar FONT_STYLE = \"sans-serif\";\nvar CUE_BACKGROUND_PADDING = \"1.5%\"; // Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\n\nWebVTT.processCues = function (window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  } // Remove all previous children.\n\n\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  var paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay); // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n\n  function shouldCompute(cues) {\n    for (var i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n\n    return false;\n  } // We don't need to recompute the cues' display states. Just reuse them.\n\n\n  if (!shouldCompute(cues)) {\n    for (var i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n\n    return;\n  }\n\n  var boxPositions = [],\n      containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n      fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  var styleOptions = {\n    font: fontSize + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    var styleBox, cue;\n\n    for (var i = 0; i < cues.length; i++) {\n      cue = cues[i]; // Compute the intial position and styles of the cue div.\n\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div); // Move the cue div to it's correct line position.\n\n      moveBoxToLinePosition(window, styleBox, containerBox, boxPositions); // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n\n      cue.displayState = styleBox.div;\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nWebVTT.Parser = function (window, vttjs, decoder) {\n  if (!decoder) {\n    decoder = vttjs;\n    vttjs = {};\n  }\n\n  if (!vttjs) {\n    vttjs = {};\n  }\n\n  this.window = window;\n  this.vttjs = vttjs;\n  this.state = \"INITIAL\";\n  this.buffer = \"\";\n  this.decoder = decoder || new TextDecoder(\"utf8\");\n  this.regionList = [];\n};\n\nWebVTT.Parser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function reportOrThrowError(e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function parse(data) {\n    var self = this; // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, {\n        stream: true\n      });\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n\n      var line = buffer.substr(0, pos); // Advance the buffer early in case we fail below.\n\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n\n      self.buffer = buffer.substr(pos);\n      return line;\n    } // 3.4 WebVTT region and WebVTT region settings syntax\n\n\n    function parseRegion(input) {\n      var settings = new Settings();\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"id\":\n            settings.set(k, v);\n            break;\n\n          case \"width\":\n            settings.percent(k, v);\n            break;\n\n          case \"lines\":\n            settings.integer(k, v);\n            break;\n\n          case \"regionanchor\":\n          case \"viewportanchor\":\n            var xy = v.split(',');\n\n            if (xy.length !== 2) {\n              break;\n            } // We have to make sure both x and y parse, so use a temporary\n            // settings object here.\n\n\n            var anchor = new Settings();\n            anchor.percent(\"x\", xy[0]);\n            anchor.percent(\"y\", xy[1]);\n\n            if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n              break;\n            }\n\n            settings.set(k + \"X\", anchor.get(\"x\"));\n            settings.set(k + \"Y\", anchor.get(\"y\"));\n            break;\n\n          case \"scroll\":\n            settings.alt(k, v, [\"up\"]);\n            break;\n        }\n      }, /=/, /\\s/); // Create the region, using default values for any values that were not\n      // specified.\n\n      if (settings.has(\"id\")) {\n        var region = new (self.vttjs.VTTRegion || self.window.VTTRegion)();\n        region.width = settings.get(\"width\", 100);\n        region.lines = settings.get(\"lines\", 3);\n        region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n        region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n        region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n        region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n        region.scroll = settings.get(\"scroll\", \"\"); // Register the region.\n\n        self.onregion && self.onregion(region); // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n\n        self.regionList.push({\n          id: settings.get(\"id\"),\n          region: region\n        });\n      }\n    } // draft-pantos-http-live-streaming-20\n    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-20#section-3.5\n    // 3.5 WebVTT\n\n\n    function parseTimestampMap(input) {\n      var settings = new Settings();\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"MPEGT\":\n            settings.integer(k + 'S', v);\n            break;\n\n          case \"LOCA\":\n            settings.set(k + 'L', parseTimeStamp(v));\n            break;\n        }\n      }, /[^\\d]:/, /,/);\n      self.ontimestampmap && self.ontimestampmap({\n        \"MPEGTS\": settings.get(\"MPEGTS\"),\n        \"LOCAL\": settings.get(\"LOCAL\")\n      });\n    } // 3.2 WebVTT metadata header syntax\n\n\n    function parseHeader(input) {\n      if (input.match(/X-TIMESTAMP-MAP/)) {\n        // This line contains HLS X-TIMESTAMP-MAP metadata\n        parseOptions(input, function (k, v) {\n          switch (k) {\n            case \"X-TIMESTAMP-MAP\":\n              parseTimestampMap(v);\n              break;\n          }\n        }, /=/);\n      } else {\n        parseOptions(input, function (k, v) {\n          switch (k) {\n            case \"Region\":\n              // 3.3 WebVTT region metadata header syntax\n              parseRegion(v);\n              break;\n          }\n        }, /:/);\n      }\n    } // 5.1 WebVTT file parsing.\n\n\n    try {\n      var line;\n\n      if (self.state === \"INITIAL\") {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = \"HEADER\";\n      }\n\n      var alreadyCollectedLine = false;\n\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n          case \"HEADER\":\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = \"ID\";\n            }\n\n            continue;\n\n          case \"NOTE\":\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = \"ID\";\n            }\n\n            continue;\n\n          case \"ID\":\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = \"NOTE\";\n              break;\n            } // 19-29 - Allow any number of line terminators, then initialize new cue values.\n\n\n            if (!line) {\n              continue;\n            }\n\n            self.cue = new (self.vttjs.VTTCue || self.window.VTTCue)(0, 0, \"\"); // Safari still uses the old middle value and won't accept center\n\n            try {\n              self.cue.align = \"center\";\n            } catch (e) {\n              self.cue.align = \"middle\";\n            }\n\n            self.state = \"CUE\"; // 30-39 - Check if self line contains an optional identifier or timing data.\n\n            if (line.indexOf(\"-->\") === -1) {\n              self.cue.id = line;\n              continue;\n            }\n\n          // Process line as start of a cue.\n\n          /*falls through*/\n\n          case \"CUE\":\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e); // In case of an error ignore rest of the cue.\n\n              self.cue = null;\n              self.state = \"BADCUE\";\n              continue;\n            }\n\n            self.state = \"CUETEXT\";\n            continue;\n\n          case \"CUETEXT\":\n            var hasSubstring = line.indexOf(\"-->\") !== -1; // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '-->' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n\n            if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = \"ID\";\n              continue;\n            }\n\n            if (self.cue.text) {\n              self.cue.text += \"\\n\";\n            }\n\n            self.cue.text += line.replace(/\\u2028/g, '\\n').replace(/u2029/g, '\\n');\n            continue;\n\n          case \"BADCUE\":\n            // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = \"ID\";\n            }\n\n            continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e); // If we are currently parsing a cue, report what we have.\n\n      if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n\n      self.cue = null; // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n\n      self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n\n    return this;\n  },\n  flush: function flush() {\n    var self = this;\n\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode(); // Synthesize the end of the current cue or region.\n\n      if (self.cue || self.state === \"HEADER\") {\n        self.buffer += \"\\n\\n\";\n        self.parse();\n      } // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n\n\n      if (self.state === \"INITIAL\") {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n    }\n\n    self.onflush && self.onflush();\n    return this;\n  }\n};\nmodule.exports = WebVTT;","// see https://tools.ietf.org/html/rfc1808\n(function (root) {\n  var URL_REGEX = /^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/?#]*\\/)*[^;?#]*)?(;[^?#]*)?(\\?[^#]*)?(#.*)?$/;\n  var FIRST_SEGMENT_REGEX = /^([^\\/?#]*)(.*)$/;\n  var SLASH_DOT_REGEX = /(?:\\/|^)\\.(?=\\/)/g;\n  var SLASH_DOT_DOT_REGEX = /(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g;\n  var URLToolkit = {\n    // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //\n    // E.g\n    // With opts.alwaysNormalize = false (default, spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g\n    // With opts.alwaysNormalize = true (not spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/g\n    buildAbsoluteURL: function buildAbsoluteURL(baseURL, relativeURL, opts) {\n      opts = opts || {}; // remove any remaining space and CRLF\n\n      baseURL = baseURL.trim();\n      relativeURL = relativeURL.trim();\n\n      if (!relativeURL) {\n        // 2a) If the embedded URL is entirely empty, it inherits the\n        // entire base URL (i.e., is set equal to the base URL)\n        // and we are done.\n        if (!opts.alwaysNormalize) {\n          return baseURL;\n        }\n\n        var basePartsForNormalise = URLToolkit.parseURL(baseURL);\n\n        if (!basePartsForNormalise) {\n          throw new Error('Error trying to parse base URL.');\n        }\n\n        basePartsForNormalise.path = URLToolkit.normalizePath(basePartsForNormalise.path);\n        return URLToolkit.buildURLFromParts(basePartsForNormalise);\n      }\n\n      var relativeParts = URLToolkit.parseURL(relativeURL);\n\n      if (!relativeParts) {\n        throw new Error('Error trying to parse relative URL.');\n      }\n\n      if (relativeParts.scheme) {\n        // 2b) If the embedded URL starts with a scheme name, it is\n        // interpreted as an absolute URL and we are done.\n        if (!opts.alwaysNormalize) {\n          return relativeURL;\n        }\n\n        relativeParts.path = URLToolkit.normalizePath(relativeParts.path);\n        return URLToolkit.buildURLFromParts(relativeParts);\n      }\n\n      var baseParts = URLToolkit.parseURL(baseURL);\n\n      if (!baseParts) {\n        throw new Error('Error trying to parse base URL.');\n      }\n\n      if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== '/') {\n        // If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc\n        // This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'\n        var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);\n        baseParts.netLoc = pathParts[1];\n        baseParts.path = pathParts[2];\n      }\n\n      if (baseParts.netLoc && !baseParts.path) {\n        baseParts.path = '/';\n      }\n\n      var builtParts = {\n        // 2c) Otherwise, the embedded URL inherits the scheme of\n        // the base URL.\n        scheme: baseParts.scheme,\n        netLoc: relativeParts.netLoc,\n        path: null,\n        params: relativeParts.params,\n        query: relativeParts.query,\n        fragment: relativeParts.fragment\n      };\n\n      if (!relativeParts.netLoc) {\n        // 3) If the embedded URL's <net_loc> is non-empty, we skip to\n        // Step 7.  Otherwise, the embedded URL inherits the <net_loc>\n        // (if any) of the base URL.\n        builtParts.netLoc = baseParts.netLoc; // 4) If the embedded URL path is preceded by a slash \"/\", the\n        // path is not relative and we skip to Step 7.\n\n        if (relativeParts.path[0] !== '/') {\n          if (!relativeParts.path) {\n            // 5) If the embedded URL path is empty (and not preceded by a\n            // slash), then the embedded URL inherits the base URL path\n            builtParts.path = baseParts.path; // 5a) if the embedded URL's <params> is non-empty, we skip to\n            // step 7; otherwise, it inherits the <params> of the base\n            // URL (if any) and\n\n            if (!relativeParts.params) {\n              builtParts.params = baseParts.params; // 5b) if the embedded URL's <query> is non-empty, we skip to\n              // step 7; otherwise, it inherits the <query> of the base\n              // URL (if any) and we skip to step 7.\n\n              if (!relativeParts.query) {\n                builtParts.query = baseParts.query;\n              }\n            }\n          } else {\n            // 6) The last segment of the base URL's path (anything\n            // following the rightmost slash \"/\", or the entire path if no\n            // slash is present) is removed and the embedded URL's path is\n            // appended in its place.\n            var baseURLPath = baseParts.path;\n            var newPath = baseURLPath.substring(0, baseURLPath.lastIndexOf('/') + 1) + relativeParts.path;\n            builtParts.path = URLToolkit.normalizePath(newPath);\n          }\n        }\n      }\n\n      if (builtParts.path === null) {\n        builtParts.path = opts.alwaysNormalize ? URLToolkit.normalizePath(relativeParts.path) : relativeParts.path;\n      }\n\n      return URLToolkit.buildURLFromParts(builtParts);\n    },\n    parseURL: function parseURL(url) {\n      var parts = URL_REGEX.exec(url);\n\n      if (!parts) {\n        return null;\n      }\n\n      return {\n        scheme: parts[1] || '',\n        netLoc: parts[2] || '',\n        path: parts[3] || '',\n        params: parts[4] || '',\n        query: parts[5] || '',\n        fragment: parts[6] || ''\n      };\n    },\n    normalizePath: function normalizePath(path) {\n      // The following operations are\n      // then applied, in order, to the new path:\n      // 6a) All occurrences of \"./\", where \".\" is a complete path\n      // segment, are removed.\n      // 6b) If the path ends with \".\" as a complete path segment,\n      // that \".\" is removed.\n      path = path.split('').reverse().join('').replace(SLASH_DOT_REGEX, ''); // 6c) All occurrences of \"<segment>/../\", where <segment> is a\n      // complete path segment not equal to \"..\", are removed.\n      // Removal of these path segments is performed iteratively,\n      // removing the leftmost matching pattern on each iteration,\n      // until no matching pattern remains.\n      // 6d) If the path ends with \"<segment>/..\", where <segment> is a\n      // complete path segment not equal to \"..\", that\n      // \"<segment>/..\" is removed.\n\n      while (path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, '')).length) {}\n\n      return path.split('').reverse().join('');\n    },\n    buildURLFromParts: function buildURLFromParts(parts) {\n      return parts.scheme + parts.netLoc + parts.path + parts.params + parts.query + parts.fragment;\n    }\n  };\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = URLToolkit;else if (typeof define === 'function' && define.amd) define([], function () {\n    return URLToolkit;\n  });else if (typeof exports === 'object') exports['URLToolkit'] = URLToolkit;else root['URLToolkit'] = URLToolkit;\n})(this);","/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */\nimport window from 'global/window';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implementation that handles event dispatching.\n *\n * @class Stream\n */\n\n\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n    var i;\n    var length;\n    var args;\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      length = callbacks.length;\n\n      for (i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      args = Array.prototype.slice.call(arguments, 1);\n      length = callbacks.length;\n\n      for (i = 0; i < length; ++i) {\n        callbacks[i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\n\nvar LineStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(LineStream, _Stream);\n\n  function LineStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.buffer = '';\n    return _this;\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  var _proto = LineStream.prototype;\n\n  _proto.push = function push(data) {\n    var nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  };\n\n  return LineStream;\n}(Stream);\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\n\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nvar ParseStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(ParseStream, _Stream);\n\n  function ParseStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.customParsers = [];\n    _this.tagMappers = [];\n    return _this;\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  var _proto = ParseStream.prototype;\n\n  _proto.push = function push(line) {\n    var _this2 = this;\n\n    var match;\n    var event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    var newLines = this.tagMappers.reduce(function (acc, mapper) {\n      var mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(function (newLine) {\n      for (var i = 0; i < _this2.customParsers.length; i++) {\n        if (_this2.customParsers[i].call(_this2, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        _this2.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n\n        return;\n      }\n\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'totalduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'byterange'\n        };\n\n        if (match[1]) {\n          event.length = parseInt(match[1], 10);\n        }\n\n        if (match[2]) {\n          event.offset = parseInt(match[2], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            var _attributes$BYTERANGE = attributes.BYTERANGE.split('@'),\n                length = _attributes$BYTERANGE[0],\n                offset = _attributes$BYTERANGE[1];\n\n            event.byterange = {};\n\n            if (length) {\n              event.byterange.length = parseInt(length, 10);\n            }\n\n            if (offset) {\n              event.byterange.offset = parseInt(offset, 10);\n            }\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      } // unknown tag type\n\n\n      _this2.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(_ref) {\n    var _this3 = this;\n\n    var expression = _ref.expression,\n        customType = _ref.customType,\n        dataParser = _ref.dataParser,\n        segment = _ref.segment;\n\n    if (typeof dataParser !== 'function') {\n      dataParser = function dataParser(line) {\n        return line;\n      };\n    }\n\n    this.customParsers.push(function (line) {\n      var match = expression.exec(line);\n\n      if (match) {\n        _this3.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType: customType,\n          segment: segment\n        });\n\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(_ref2) {\n    var expression = _ref2.expression,\n        map = _ref2.map;\n\n    var mapFn = function mapFn(line) {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  };\n\n  return ParseStream;\n}(Stream);\n\nfunction decodeB64ToUint8Array(b64Text) {\n  var decodedString = window.atob(b64Text || '');\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\n\nvar Parser = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(Parser, _Stream);\n\n  function Parser() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.lineStream = new LineStream();\n    _this.parseStream = new ParseStream();\n\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n\n\n    var self = _assertThisInitialized(_this);\n    /* eslint-enable consistent-this */\n\n\n    var uris = [];\n    var currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    var currentMap; // if specified, the active decryption key\n\n    var _key;\n\n    var noop = function noop() {};\n\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    var widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // update the manifest with the m3u8 entry from the parse stream\n\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup;\n      var rendition;\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  this.trigger('info', {\n                    message: 'defaulting offset to zero'\n                  });\n                  entry.offset = 0;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                var VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = {\n                  'com.widevine.alpha': {\n                    attributes: {\n                      schemeIdUri: entry.attributes.KEYFORMAT,\n                      // remove '0x' from the key id string\n                      keyId: entry.attributes.KEYID.substring(2)\n                    },\n                    // decode the base64-encoded PSSH box\n                    pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                  }\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n            },\n            totalduration: function totalduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid total duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.totalDuration = entry.duration;\n            },\n            start: function start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (_key) {\n            currentUri.key = _key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // prepare for the next URI\n\n\n          currentUri = {};\n        },\n        comment: function comment() {// comments are not important for playback\n        },\n        custom: function custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n\n\n  var _proto = Parser.prototype;\n\n  _proto.push = function push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n  ;\n\n  _proto.end = function end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  };\n\n  return Parser;\n}(Stream);\n\nexport { LineStream, ParseStream, Parser };","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/; //\\u10000-\\uEFFFF\n\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\" + nameStartChar.source.slice(1, -1) + \"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^' + nameStartChar.source + nameChar.source + '*(?:\\:' + nameStartChar.source + nameChar.source + '*)?$'); //var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\nvar S_TAG = 0; //tag name offerring\n\nvar S_ATTR = 1; //attr name offerring \n\nvar S_ATTR_SPACE = 2; //attr name end and space offer\n\nvar S_EQ = 3; //=space?\n\nvar S_ATTR_NOQUOT_VALUE = 4; //attr value(no quot value only)\n\nvar S_ATTR_END = 5; //attr value end and no space(quot end)\n\nvar S_TAG_SPACE = 6; //(attr value end || tag end ) && (space offer)\n\nvar S_TAG_CLOSE = 7; //closed el<el />\n\nfunction XMLReader() {}\n\nXMLReader.prototype = {\n  parse: function parse(source, defaultNSMap, entityMap) {\n    var domBuilder = this.domBuilder;\n    domBuilder.startDocument();\n\n    _copy(defaultNSMap, defaultNSMap = {});\n\n    _parse(source, defaultNSMap, entityMap, domBuilder, this.errorHandler);\n\n    domBuilder.endDocument();\n  }\n};\n\nfunction _parse(source, defaultNSMapCopy, entityMap, domBuilder, errorHandler) {\n  function fixedFromCharCode(code) {\n    // String.prototype.fromCharCode does not supports\n    // > 2 bytes unicode chars directly\n    if (code > 0xffff) {\n      code -= 0x10000;\n      var surrogate1 = 0xd800 + (code >> 10),\n          surrogate2 = 0xdc00 + (code & 0x3ff);\n      return String.fromCharCode(surrogate1, surrogate2);\n    } else {\n      return String.fromCharCode(code);\n    }\n  }\n\n  function entityReplacer(a) {\n    var k = a.slice(1, -1);\n\n    if (k in entityMap) {\n      return entityMap[k];\n    } else if (k.charAt(0) === '#') {\n      return fixedFromCharCode(parseInt(k.substr(1).replace('x', '0x')));\n    } else {\n      errorHandler.error('entity not found:' + a);\n      return a;\n    }\n  }\n\n  function appendText(end) {\n    //has some bugs\n    if (end > start) {\n      var xt = source.substring(start, end).replace(/&#?\\w+;/g, entityReplacer);\n      locator && position(start);\n      domBuilder.characters(xt, 0, end - start);\n      start = end;\n    }\n  }\n\n  function position(p, m) {\n    while (p >= lineEnd && (m = linePattern.exec(source))) {\n      lineStart = m.index;\n      lineEnd = lineStart + m[0].length;\n      locator.lineNumber++; //console.log('line++:',locator,startPos,endPos)\n    }\n\n    locator.columnNumber = p - lineStart + 1;\n  }\n\n  var lineStart = 0;\n  var lineEnd = 0;\n  var linePattern = /.*(?:\\r\\n?|\\n)|.*$/g;\n  var locator = domBuilder.locator;\n  var parseStack = [{\n    currentNSMap: defaultNSMapCopy\n  }];\n  var closeMap = {};\n  var start = 0;\n\n  while (true) {\n    try {\n      var tagStart = source.indexOf('<', start);\n\n      if (tagStart < 0) {\n        if (!source.substr(start).match(/^\\s*$/)) {\n          var doc = domBuilder.doc;\n          var text = doc.createTextNode(source.substr(start));\n          doc.appendChild(text);\n          domBuilder.currentElement = text;\n        }\n\n        return;\n      }\n\n      if (tagStart > start) {\n        appendText(tagStart);\n      }\n\n      switch (source.charAt(tagStart + 1)) {\n        case '/':\n          var end = source.indexOf('>', tagStart + 3);\n          var tagName = source.substring(tagStart + 2, end);\n          var config = parseStack.pop();\n\n          if (end < 0) {\n            tagName = source.substring(tagStart + 2).replace(/[\\s<].*/, ''); //console.error('#@@@@@@'+tagName)\n\n            errorHandler.error(\"end tag name: \" + tagName + ' is not complete:' + config.tagName);\n            end = tagStart + 1 + tagName.length;\n          } else if (tagName.match(/\\s</)) {\n            tagName = tagName.replace(/[\\s<].*/, '');\n            errorHandler.error(\"end tag name: \" + tagName + ' maybe not complete');\n            end = tagStart + 1 + tagName.length;\n          } //console.error(parseStack.length,parseStack)\n          //console.error(config);\n\n\n          var localNSMap = config.localNSMap;\n          var endMatch = config.tagName == tagName;\n          var endIgnoreCaseMach = endMatch || config.tagName && config.tagName.toLowerCase() == tagName.toLowerCase();\n\n          if (endIgnoreCaseMach) {\n            domBuilder.endElement(config.uri, config.localName, tagName);\n\n            if (localNSMap) {\n              for (var prefix in localNSMap) {\n                domBuilder.endPrefixMapping(prefix);\n              }\n            }\n\n            if (!endMatch) {\n              errorHandler.fatalError(\"end tag name: \" + tagName + ' is not match the current start tagName:' + config.tagName);\n            }\n          } else {\n            parseStack.push(config);\n          }\n\n          end++;\n          break;\n        // end elment\n\n        case '?':\n          // <?...?>\n          locator && position(tagStart);\n          end = parseInstruction(source, tagStart, domBuilder);\n          break;\n\n        case '!':\n          // <!doctype,<![CDATA,<!--\n          locator && position(tagStart);\n          end = parseDCC(source, tagStart, domBuilder, errorHandler);\n          break;\n\n        default:\n          locator && position(tagStart);\n          var el = new ElementAttributes();\n          var currentNSMap = parseStack[parseStack.length - 1].currentNSMap; //elStartEnd\n\n          var end = parseElementStartPart(source, tagStart, el, currentNSMap, entityReplacer, errorHandler);\n          var len = el.length;\n\n          if (!el.closed && fixSelfClosed(source, end, el.tagName, closeMap)) {\n            el.closed = true;\n\n            if (!entityMap.nbsp) {\n              errorHandler.warning('unclosed xml attribute');\n            }\n          }\n\n          if (locator && len) {\n            var locator2 = copyLocator(locator, {}); //try{//attribute position fixed\n\n            for (var i = 0; i < len; i++) {\n              var a = el[i];\n              position(a.offset);\n              a.locator = copyLocator(locator, {});\n            } //}catch(e){console.error('@@@@@'+e)}\n\n\n            domBuilder.locator = locator2;\n\n            if (appendElement(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n\n            domBuilder.locator = locator;\n          } else {\n            if (appendElement(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n          }\n\n          if (el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed) {\n            end = parseHtmlSpecialContent(source, end, el.tagName, entityReplacer, domBuilder);\n          } else {\n            end++;\n          }\n\n      }\n    } catch (e) {\n      errorHandler.error('element parse error: ' + e); //errorHandler.error('element parse error: '+e);\n\n      end = -1; //throw e;\n    }\n\n    if (end > start) {\n      start = end;\n    } else {\n      //TODO: 这里有可能sax回退，有位置错误风险\n      appendText(Math.max(tagStart, start) + 1);\n    }\n  }\n}\n\nfunction copyLocator(f, t) {\n  t.lineNumber = f.lineNumber;\n  t.columnNumber = f.columnNumber;\n  return t;\n}\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\n\n\nfunction parseElementStartPart(source, start, el, currentNSMap, entityReplacer, errorHandler) {\n  var attrName;\n  var value;\n  var p = ++start;\n  var s = S_TAG; //status\n\n  while (true) {\n    var c = source.charAt(p);\n\n    switch (c) {\n      case '=':\n        if (s === S_ATTR) {\n          //attrName\n          attrName = source.slice(start, p);\n          s = S_EQ;\n        } else if (s === S_ATTR_SPACE) {\n          s = S_EQ;\n        } else {\n          //fatalError: equal must after attrName or space after attrName\n          throw new Error('attribute equal must after attrName');\n        }\n\n        break;\n\n      case '\\'':\n      case '\"':\n        if (s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n        ) {\n            //equal\n            if (s === S_ATTR) {\n              errorHandler.warning('attribute value must after \"=\"');\n              attrName = source.slice(start, p);\n            }\n\n            start = p + 1;\n            p = source.indexOf(c, start);\n\n            if (p > 0) {\n              value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n              el.add(attrName, value, start - 1);\n              s = S_ATTR_END;\n            } else {\n              //fatalError: no end quot match\n              throw new Error('attribute value no end \\'' + c + '\\' match');\n            }\n          } else if (s == S_ATTR_NOQUOT_VALUE) {\n          value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer); //console.log(attrName,value,start,p)\n\n          el.add(attrName, value, start); //console.dir(el)\n\n          errorHandler.warning('attribute \"' + attrName + '\" missed start quot(' + c + ')!!');\n          start = p + 1;\n          s = S_ATTR_END;\n        } else {\n          //fatalError: no equal before\n          throw new Error('attribute value must after \"=\"');\n        }\n\n        break;\n\n      case '/':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            s = S_TAG_CLOSE;\n            el.closed = true;\n\n          case S_ATTR_NOQUOT_VALUE:\n          case S_ATTR:\n          case S_ATTR_SPACE:\n            break;\n          //case S_EQ:\n\n          default:\n            throw new Error(\"attribute invalid close char('/')\");\n        }\n\n        break;\n\n      case '':\n        //end document\n        //throw new Error('unexpected end of input')\n        errorHandler.error('unexpected end of input');\n\n        if (s == S_TAG) {\n          el.setTagName(source.slice(start, p));\n        }\n\n        return p;\n\n      case '>':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            break;\n          //normal\n\n          case S_ATTR_NOQUOT_VALUE: //Compatible state\n\n          case S_ATTR:\n            value = source.slice(start, p);\n\n            if (value.slice(-1) === '/') {\n              el.closed = true;\n              value = value.slice(0, -1);\n            }\n\n          case S_ATTR_SPACE:\n            if (s === S_ATTR_SPACE) {\n              value = attrName;\n            }\n\n            if (s == S_ATTR_NOQUOT_VALUE) {\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n              el.add(attrName, value.replace(/&#?\\w+;/g, entityReplacer), start);\n            } else {\n              if (currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + value + '\" missed value!! \"' + value + '\" instead!!');\n              }\n\n              el.add(value, value, start);\n            }\n\n            break;\n\n          case S_EQ:\n            throw new Error('attribute value missed!!');\n        } //\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\n\n        return p;\n\n      /*xml space '\\x20' | #x9 | #xD | #xA; */\n\n      case \"\\x80\":\n        c = ' ';\n\n      default:\n        if (c <= ' ') {\n          //space\n          switch (s) {\n            case S_TAG:\n              el.setTagName(source.slice(start, p)); //tagName\n\n              s = S_TAG_SPACE;\n              break;\n\n            case S_ATTR:\n              attrName = source.slice(start, p);\n              s = S_ATTR_SPACE;\n              break;\n\n            case S_ATTR_NOQUOT_VALUE:\n              var value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n              el.add(attrName, value, start);\n\n            case S_ATTR_END:\n              s = S_TAG_SPACE;\n              break;\n            //case S_TAG_SPACE:\n            //case S_EQ:\n            //case S_ATTR_SPACE:\n            //\tvoid();break;\n            //case S_TAG_CLOSE:\n            //ignore warning\n          }\n        } else {\n          //not space\n          //S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n          //S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n          switch (s) {\n            //case S_TAG:void();break;\n            //case S_ATTR:void();break;\n            //case S_ATTR_NOQUOT_VALUE:void();break;\n            case S_ATTR_SPACE:\n              var tagName = el.tagName;\n\n              if (currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + attrName + '\" missed value!! \"' + attrName + '\" instead2!!');\n              }\n\n              el.add(attrName, attrName, start);\n              start = p;\n              s = S_ATTR;\n              break;\n\n            case S_ATTR_END:\n              errorHandler.warning('attribute space is required\"' + attrName + '\"!!');\n\n            case S_TAG_SPACE:\n              s = S_ATTR;\n              start = p;\n              break;\n\n            case S_EQ:\n              s = S_ATTR_NOQUOT_VALUE;\n              start = p;\n              break;\n\n            case S_TAG_CLOSE:\n              throw new Error(\"elements closed character '/' and '>' must be connected to\");\n          }\n        }\n\n    } //end outer switch\n    //console.log('p++',p)\n\n\n    p++;\n  }\n}\n/**\r\n * @return true if has new namespace define\r\n */\n\n\nfunction appendElement(el, domBuilder, currentNSMap) {\n  var tagName = el.tagName;\n  var localNSMap = null; //var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\n  var i = el.length;\n\n  while (i--) {\n    var a = el[i];\n    var qName = a.qName;\n    var value = a.value;\n    var nsp = qName.indexOf(':');\n\n    if (nsp > 0) {\n      var prefix = a.prefix = qName.slice(0, nsp);\n      var localName = qName.slice(nsp + 1);\n      var nsPrefix = prefix === 'xmlns' && localName;\n    } else {\n      localName = qName;\n      prefix = null;\n      nsPrefix = qName === 'xmlns' && '';\n    } //can not set prefix,because prefix !== ''\n\n\n    a.localName = localName; //prefix == null for no ns prefix attribute \n\n    if (nsPrefix !== false) {\n      //hack!!\n      if (localNSMap == null) {\n        localNSMap = {}; //console.log(currentNSMap,0)\n\n        _copy(currentNSMap, currentNSMap = {}); //console.log(currentNSMap,1)\n\n      }\n\n      currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n      a.uri = 'http://www.w3.org/2000/xmlns/';\n      domBuilder.startPrefixMapping(nsPrefix, value);\n    }\n  }\n\n  var i = el.length;\n\n  while (i--) {\n    a = el[i];\n    var prefix = a.prefix;\n\n    if (prefix) {\n      //no prefix attribute has no namespace\n      if (prefix === 'xml') {\n        a.uri = 'http://www.w3.org/XML/1998/namespace';\n      }\n\n      if (prefix !== 'xmlns') {\n        a.uri = currentNSMap[prefix || '']; //{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n      }\n    }\n  }\n\n  var nsp = tagName.indexOf(':');\n\n  if (nsp > 0) {\n    prefix = el.prefix = tagName.slice(0, nsp);\n    localName = el.localName = tagName.slice(nsp + 1);\n  } else {\n    prefix = null; //important!!\n\n    localName = el.localName = tagName;\n  } //no prefix element has default namespace\n\n\n  var ns = el.uri = currentNSMap[prefix || ''];\n  domBuilder.startElement(ns, localName, tagName, el); //endPrefixMapping and startPrefixMapping have not any help for dom builder\n  //localNSMap = null\n\n  if (el.closed) {\n    domBuilder.endElement(ns, localName, tagName);\n\n    if (localNSMap) {\n      for (prefix in localNSMap) {\n        domBuilder.endPrefixMapping(prefix);\n      }\n    }\n  } else {\n    el.currentNSMap = currentNSMap;\n    el.localNSMap = localNSMap; //parseStack.push(el);\n\n    return true;\n  }\n}\n\nfunction parseHtmlSpecialContent(source, elStartEnd, tagName, entityReplacer, domBuilder) {\n  if (/^(?:script|textarea)$/i.test(tagName)) {\n    var elEndStart = source.indexOf('</' + tagName + '>', elStartEnd);\n    var text = source.substring(elStartEnd + 1, elEndStart);\n\n    if (/[&<]/.test(text)) {\n      if (/^script$/i.test(tagName)) {\n        //if(!/\\]\\]>/.test(text)){\n        //lexHandler.startCDATA();\n        domBuilder.characters(text, 0, text.length); //lexHandler.endCDATA();\n\n        return elEndStart; //}\n      } //}else{//text area\n\n\n      text = text.replace(/&#?\\w+;/g, entityReplacer);\n      domBuilder.characters(text, 0, text.length);\n      return elEndStart; //}\n    }\n  }\n\n  return elStartEnd + 1;\n}\n\nfunction fixSelfClosed(source, elStartEnd, tagName, closeMap) {\n  //if(tagName in closeMap){\n  var pos = closeMap[tagName];\n\n  if (pos == null) {\n    //console.log(tagName)\n    pos = source.lastIndexOf('</' + tagName + '>');\n\n    if (pos < elStartEnd) {\n      //忘记闭合\n      pos = source.lastIndexOf('</' + tagName);\n    }\n\n    closeMap[tagName] = pos;\n  }\n\n  return pos < elStartEnd; //} \n}\n\nfunction _copy(source, target) {\n  for (var n in source) {\n    target[n] = source[n];\n  }\n}\n\nfunction parseDCC(source, start, domBuilder, errorHandler) {\n  //sure start with '<!'\n  var next = source.charAt(start + 2);\n\n  switch (next) {\n    case '-':\n      if (source.charAt(start + 3) === '-') {\n        var end = source.indexOf('-->', start + 4); //append comment source.substring(4,end)//<!--\n\n        if (end > start) {\n          domBuilder.comment(source, start + 4, end - start - 4);\n          return end + 3;\n        } else {\n          errorHandler.error(\"Unclosed comment\");\n          return -1;\n        }\n      } else {\n        //error\n        return -1;\n      }\n\n    default:\n      if (source.substr(start + 3, 6) == 'CDATA[') {\n        var end = source.indexOf(']]>', start + 9);\n        domBuilder.startCDATA();\n        domBuilder.characters(source, start + 9, end - start - 9);\n        domBuilder.endCDATA();\n        return end + 3;\n      } //<!DOCTYPE\n      //startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \n\n\n      var matchs = split(source, start);\n      var len = matchs.length;\n\n      if (len > 1 && /!doctype/i.test(matchs[0][0])) {\n        var name = matchs[1][0];\n        var pubid = len > 3 && /^public$/i.test(matchs[2][0]) && matchs[3][0];\n        var sysid = len > 4 && matchs[4][0];\n        var lastMatch = matchs[len - 1];\n        domBuilder.startDTD(name, pubid && pubid.replace(/^(['\"])(.*?)\\1$/, '$2'), sysid && sysid.replace(/^(['\"])(.*?)\\1$/, '$2'));\n        domBuilder.endDTD();\n        return lastMatch.index + lastMatch[0].length;\n      }\n\n  }\n\n  return -1;\n}\n\nfunction parseInstruction(source, start, domBuilder) {\n  var end = source.indexOf('?>', start);\n\n  if (end) {\n    var match = source.substring(start, end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\n    if (match) {\n      var len = match[0].length;\n      domBuilder.processingInstruction(match[1], match[2]);\n      return end + 2;\n    } else {\n      //error\n      return -1;\n    }\n  }\n\n  return -1;\n}\n/**\r\n * @param source\r\n */\n\n\nfunction ElementAttributes(source) {}\n\nElementAttributes.prototype = {\n  setTagName: function setTagName(tagName) {\n    if (!tagNamePattern.test(tagName)) {\n      throw new Error('invalid tagName:' + tagName);\n    }\n\n    this.tagName = tagName;\n  },\n  add: function add(qName, value, offset) {\n    if (!tagNamePattern.test(qName)) {\n      throw new Error('invalid attribute:' + qName);\n    }\n\n    this[this.length++] = {\n      qName: qName,\n      value: value,\n      offset: offset\n    };\n  },\n  length: 0,\n  getLocalName: function getLocalName(i) {\n    return this[i].localName;\n  },\n  getLocator: function getLocator(i) {\n    return this[i].locator;\n  },\n  getQName: function getQName(i) {\n    return this[i].qName;\n  },\n  getURI: function getURI(i) {\n    return this[i].uri;\n  },\n  getValue: function getValue(i) {\n    return this[i].value;\n  } //\t,getIndex:function(uri, localName)){\n  //\t\tif(localName){\n  //\t\t\t\n  //\t\t}else{\n  //\t\t\tvar qName = uri\n  //\t\t}\n  //\t},\n  //\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n  //\tgetType:function(uri,localName){}\n  //\tgetType:function(i){},\n\n};\n\nfunction _set_proto_(thiz, parent) {\n  thiz.__proto__ = parent;\n  return thiz;\n}\n\nif (!(_set_proto_({}, _set_proto_.prototype) instanceof _set_proto_)) {\n  _set_proto_ = function _set_proto_(thiz, parent) {\n    function p() {}\n\n    ;\n    p.prototype = parent;\n    p = new p();\n\n    for (parent in thiz) {\n      p[parent] = thiz[parent];\n    }\n\n    return p;\n  };\n}\n\nfunction split(source, start) {\n  var match;\n  var buf = [];\n  var reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n  reg.lastIndex = start;\n  reg.exec(source); //skip <\n\n  while (match = reg.exec(source)) {\n    buf.push(match);\n    if (match[1]) return buf;\n  }\n}\n\nexports.XMLReader = XMLReader;","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Parse mpeg2 transport stream packets to extract basic timing information\n */\n'use strict';\n\nvar StreamTypes = require('../m2ts/stream-types.js');\n\nvar handleRollover = require('../m2ts/timestamp-rollover-stream.js').handleRollover;\n\nvar probe = {};\nprobe.ts = require('../m2ts/probe.js');\nprobe.aac = require('../aac/utils.js');\n\nvar ONE_SECOND_IN_TS = require('../utils/clock').ONE_SECOND_IN_TS;\n\nvar MP2T_PACKET_LENGTH = 188,\n    // bytes\nSYNC_BYTE = 0x47;\n/**\n * walks through segment data looking for pat and pmt packets to parse out\n * program map table information\n */\n\nvar parsePsi_ = function parsePsi_(bytes, pmt) {\n  var startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      packet,\n      type;\n\n  while (endIndex < bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pat':\n          if (!pmt.pid) {\n            pmt.pid = probe.ts.parsePat(packet);\n          }\n\n          break;\n\n        case 'pmt':\n          if (!pmt.table) {\n            pmt.table = probe.ts.parsePmt(packet);\n          }\n\n          break;\n\n        default:\n          break;\n      } // Found the pat and pmt, we can stop walking the segment\n\n\n      if (pmt.pid && pmt.table) {\n        return;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex++;\n    endIndex++;\n  }\n};\n/**\n * walks through the segment data from the start and end to get timing information\n * for the first and last audio pes packets\n */\n\n\nvar parseAudioPes_ = function parseAudioPes_(bytes, pmt, result) {\n  var startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      packet,\n      type,\n      pesType,\n      pusi,\n      parsed;\n  var endLoop = false; // Start walking from start of segment to get first audio packet\n\n  while (endIndex <= bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && (bytes[endIndex] === SYNC_BYTE || endIndex === bytes.byteLength)) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'audio' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n\n            if (parsed) {\n              parsed.type = 'audio';\n              result.audio.push(parsed);\n              endLoop = true;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex++;\n    endIndex++;\n  } // Start walking from end of segment to get last audio packet\n\n\n  endIndex = bytes.byteLength;\n  startIndex = endIndex - MP2T_PACKET_LENGTH;\n  endLoop = false;\n\n  while (startIndex >= 0) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && (bytes[endIndex] === SYNC_BYTE || endIndex === bytes.byteLength)) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'audio' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n\n            if (parsed) {\n              parsed.type = 'audio';\n              result.audio.push(parsed);\n              endLoop = true;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex -= MP2T_PACKET_LENGTH;\n      endIndex -= MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex--;\n    endIndex--;\n  }\n};\n/**\n * walks through the segment data from the start and end to get timing information\n * for the first and last video pes packets as well as timing information for the first\n * key frame.\n */\n\n\nvar parseVideoPes_ = function parseVideoPes_(bytes, pmt, result) {\n  var startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      packet,\n      type,\n      pesType,\n      pusi,\n      parsed,\n      frame,\n      i,\n      pes;\n  var endLoop = false;\n  var currentFrame = {\n    data: [],\n    size: 0\n  }; // Start walking from start of segment to get first video packet\n\n  while (endIndex < bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'video') {\n            if (pusi && !endLoop) {\n              parsed = probe.ts.parsePesTime(packet);\n\n              if (parsed) {\n                parsed.type = 'video';\n                result.video.push(parsed);\n                endLoop = true;\n              }\n            }\n\n            if (!result.firstKeyFrame) {\n              if (pusi) {\n                if (currentFrame.size !== 0) {\n                  frame = new Uint8Array(currentFrame.size);\n                  i = 0;\n\n                  while (currentFrame.data.length) {\n                    pes = currentFrame.data.shift();\n                    frame.set(pes, i);\n                    i += pes.byteLength;\n                  }\n\n                  if (probe.ts.videoPacketContainsKeyFrame(frame)) {\n                    var firstKeyFrame = probe.ts.parsePesTime(frame); // PTS/DTS may not be available. Simply *not* setting\n                    // the keyframe seems to work fine with HLS playback\n                    // and definitely preferable to a crash with TypeError...\n\n                    if (firstKeyFrame) {\n                      result.firstKeyFrame = firstKeyFrame;\n                      result.firstKeyFrame.type = 'video';\n                    } else {\n                      // eslint-disable-next-line\n                      console.warn('Failed to extract PTS/DTS from PES at first keyframe. ' + 'This could be an unusual TS segment, or else mux.js did not ' + 'parse your TS segment correctly. If you know your TS ' + 'segments do contain PTS/DTS on keyframes please file a bug ' + 'report! You can try ffprobe to double check for yourself.');\n                    }\n                  }\n\n                  currentFrame.size = 0;\n                }\n              }\n\n              currentFrame.data.push(packet);\n              currentFrame.size += packet.byteLength;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop && result.firstKeyFrame) {\n        break;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex++;\n    endIndex++;\n  } // Start walking from end of segment to get last video packet\n\n\n  endIndex = bytes.byteLength;\n  startIndex = endIndex - MP2T_PACKET_LENGTH;\n  endLoop = false;\n\n  while (startIndex >= 0) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n          if (pesType === 'video' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n\n            if (parsed) {\n              parsed.type = 'video';\n              result.video.push(parsed);\n              endLoop = true;\n            }\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex -= MP2T_PACKET_LENGTH;\n      endIndex -= MP2T_PACKET_LENGTH;\n      continue;\n    } // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n\n\n    startIndex--;\n    endIndex--;\n  }\n};\n/**\n * Adjusts the timestamp information for the segment to account for\n * rollover and convert to seconds based on pes packet timescale (90khz clock)\n */\n\n\nvar adjustTimestamp_ = function adjustTimestamp_(segmentInfo, baseTimestamp) {\n  if (segmentInfo.audio && segmentInfo.audio.length) {\n    var audioBaseTimestamp = baseTimestamp;\n\n    if (typeof audioBaseTimestamp === 'undefined') {\n      audioBaseTimestamp = segmentInfo.audio[0].dts;\n    }\n\n    segmentInfo.audio.forEach(function (info) {\n      info.dts = handleRollover(info.dts, audioBaseTimestamp);\n      info.pts = handleRollover(info.pts, audioBaseTimestamp); // time in seconds\n\n      info.dtsTime = info.dts / ONE_SECOND_IN_TS;\n      info.ptsTime = info.pts / ONE_SECOND_IN_TS;\n    });\n  }\n\n  if (segmentInfo.video && segmentInfo.video.length) {\n    var videoBaseTimestamp = baseTimestamp;\n\n    if (typeof videoBaseTimestamp === 'undefined') {\n      videoBaseTimestamp = segmentInfo.video[0].dts;\n    }\n\n    segmentInfo.video.forEach(function (info) {\n      info.dts = handleRollover(info.dts, videoBaseTimestamp);\n      info.pts = handleRollover(info.pts, videoBaseTimestamp); // time in seconds\n\n      info.dtsTime = info.dts / ONE_SECOND_IN_TS;\n      info.ptsTime = info.pts / ONE_SECOND_IN_TS;\n    });\n\n    if (segmentInfo.firstKeyFrame) {\n      var frame = segmentInfo.firstKeyFrame;\n      frame.dts = handleRollover(frame.dts, videoBaseTimestamp);\n      frame.pts = handleRollover(frame.pts, videoBaseTimestamp); // time in seconds\n\n      frame.dtsTime = frame.dts / ONE_SECOND_IN_TS;\n      frame.ptsTime = frame.dts / ONE_SECOND_IN_TS;\n    }\n  }\n};\n/**\n * inspects the aac data stream for start and end time information\n */\n\n\nvar inspectAac_ = function inspectAac_(bytes) {\n  var endLoop = false,\n      audioCount = 0,\n      sampleRate = null,\n      timestamp = null,\n      frameSize = 0,\n      byteIndex = 0,\n      packet;\n\n  while (bytes.length - byteIndex >= 3) {\n    var type = probe.aac.parseType(bytes, byteIndex);\n\n    switch (type) {\n      case 'timed-metadata':\n        // Exit early because we don't have enough to parse\n        // the ID3 tag header\n        if (bytes.length - byteIndex < 10) {\n          endLoop = true;\n          break;\n        }\n\n        frameSize = probe.aac.parseId3TagSize(bytes, byteIndex); // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n\n        if (frameSize > bytes.length) {\n          endLoop = true;\n          break;\n        }\n\n        if (timestamp === null) {\n          packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n          timestamp = probe.aac.parseAacTimestamp(packet);\n        }\n\n        byteIndex += frameSize;\n        break;\n\n      case 'audio':\n        // Exit early because we don't have enough to parse\n        // the ADTS frame header\n        if (bytes.length - byteIndex < 7) {\n          endLoop = true;\n          break;\n        }\n\n        frameSize = probe.aac.parseAdtsSize(bytes, byteIndex); // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n\n        if (frameSize > bytes.length) {\n          endLoop = true;\n          break;\n        }\n\n        if (sampleRate === null) {\n          packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n          sampleRate = probe.aac.parseSampleRate(packet);\n        }\n\n        audioCount++;\n        byteIndex += frameSize;\n        break;\n\n      default:\n        byteIndex++;\n        break;\n    }\n\n    if (endLoop) {\n      return null;\n    }\n  }\n\n  if (sampleRate === null || timestamp === null) {\n    return null;\n  }\n\n  var audioTimescale = ONE_SECOND_IN_TS / sampleRate;\n  var result = {\n    audio: [{\n      type: 'audio',\n      dts: timestamp,\n      pts: timestamp\n    }, {\n      type: 'audio',\n      dts: timestamp + audioCount * 1024 * audioTimescale,\n      pts: timestamp + audioCount * 1024 * audioTimescale\n    }]\n  };\n  return result;\n};\n/**\n * inspects the transport stream segment data for start and end time information\n * of the audio and video tracks (when present) as well as the first key frame's\n * start time.\n */\n\n\nvar inspectTs_ = function inspectTs_(bytes) {\n  var pmt = {\n    pid: null,\n    table: null\n  };\n  var result = {};\n  parsePsi_(bytes, pmt);\n\n  for (var pid in pmt.table) {\n    if (pmt.table.hasOwnProperty(pid)) {\n      var type = pmt.table[pid];\n\n      switch (type) {\n        case StreamTypes.H264_STREAM_TYPE:\n          result.video = [];\n          parseVideoPes_(bytes, pmt, result);\n\n          if (result.video.length === 0) {\n            delete result.video;\n          }\n\n          break;\n\n        case StreamTypes.ADTS_STREAM_TYPE:\n          result.audio = [];\n          parseAudioPes_(bytes, pmt, result);\n\n          if (result.audio.length === 0) {\n            delete result.audio;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n\n  return result;\n};\n/**\n * Inspects segment byte data and returns an object with start and end timing information\n *\n * @param {Uint8Array} bytes The segment byte data\n * @param {Number} baseTimestamp Relative reference timestamp used when adjusting frame\n *  timestamps for rollover. This value must be in 90khz clock.\n * @return {Object} Object containing start and end frame timing info of segment.\n */\n\n\nvar inspect = function inspect(bytes, baseTimestamp) {\n  var isAacData = probe.aac.isLikelyAacData(bytes);\n  var result;\n\n  if (isAacData) {\n    result = inspectAac_(bytes);\n  } else {\n    result = inspectTs_(bytes);\n  }\n\n  if (!result || !result.audio && !result.video) {\n    return null;\n  }\n\n  adjustTimestamp_(result, baseTimestamp);\n  return result;\n};\n\nmodule.exports = {\n  inspect: inspect,\n  parseAudioPes_: parseAudioPes_\n};","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Reads in-band caption information from a video elementary\n * stream. Captions must follow the CEA-708 standard for injection\n * into an MPEG-2 transport streams.\n * @see https://en.wikipedia.org/wiki/CEA-708\n * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf\n */\n'use strict'; // Supplemental enhancement information (SEI) NAL units have a\n// payload type field to indicate how they are to be\n// interpreted. CEAS-708 caption content is always transmitted with\n// payload type 0x04.\n\nvar USER_DATA_REGISTERED_ITU_T_T35 = 4,\n    RBSP_TRAILING_BITS = 128;\n/**\n  * Parse a supplemental enhancement information (SEI) NAL unit.\n  * Stops parsing once a message of type ITU T T35 has been found.\n  *\n  * @param bytes {Uint8Array} the bytes of a SEI NAL unit\n  * @return {object} the parsed SEI payload\n  * @see Rec. ITU-T H.264, 7.3.2.3.1\n  */\n\nvar parseSei = function parseSei(bytes) {\n  var i = 0,\n      result = {\n    payloadType: -1,\n    payloadSize: 0\n  },\n      payloadType = 0,\n      payloadSize = 0; // go through the sei_rbsp parsing each each individual sei_message\n\n  while (i < bytes.byteLength) {\n    // stop once we have hit the end of the sei_rbsp\n    if (bytes[i] === RBSP_TRAILING_BITS) {\n      break;\n    } // Parse payload type\n\n\n    while (bytes[i] === 0xFF) {\n      payloadType += 255;\n      i++;\n    }\n\n    payloadType += bytes[i++]; // Parse payload size\n\n    while (bytes[i] === 0xFF) {\n      payloadSize += 255;\n      i++;\n    }\n\n    payloadSize += bytes[i++]; // this sei_message is a 608/708 caption so save it and break\n    // there can only ever be one caption message in a frame's sei\n\n    if (!result.payload && payloadType === USER_DATA_REGISTERED_ITU_T_T35) {\n      result.payloadType = payloadType;\n      result.payloadSize = payloadSize;\n      result.payload = bytes.subarray(i, i + payloadSize);\n      break;\n    } // skip the payload and parse the next message\n\n\n    i += payloadSize;\n    payloadType = 0;\n    payloadSize = 0;\n  }\n\n  return result;\n}; // see ANSI/SCTE 128-1 (2013), section 8.1\n\n\nvar parseUserData = function parseUserData(sei) {\n  // itu_t_t35_contry_code must be 181 (United States) for\n  // captions\n  if (sei.payload[0] !== 181) {\n    return null;\n  } // itu_t_t35_provider_code should be 49 (ATSC) for captions\n\n\n  if ((sei.payload[1] << 8 | sei.payload[2]) !== 49) {\n    return null;\n  } // the user_identifier should be \"GA94\" to indicate ATSC1 data\n\n\n  if (String.fromCharCode(sei.payload[3], sei.payload[4], sei.payload[5], sei.payload[6]) !== 'GA94') {\n    return null;\n  } // finally, user_data_type_code should be 0x03 for caption data\n\n\n  if (sei.payload[7] !== 0x03) {\n    return null;\n  } // return the user_data_type_structure and strip the trailing\n  // marker bits\n\n\n  return sei.payload.subarray(8, sei.payload.length - 1);\n}; // see CEA-708-D, section 4.4\n\n\nvar parseCaptionPackets = function parseCaptionPackets(pts, userData) {\n  var results = [],\n      i,\n      count,\n      offset,\n      data; // if this is just filler, return immediately\n\n  if (!(userData[0] & 0x40)) {\n    return results;\n  } // parse out the cc_data_1 and cc_data_2 fields\n\n\n  count = userData[0] & 0x1f;\n\n  for (i = 0; i < count; i++) {\n    offset = i * 3;\n    data = {\n      type: userData[offset + 2] & 0x03,\n      pts: pts\n    }; // capture cc data when cc_valid is 1\n\n    if (userData[offset + 2] & 0x04) {\n      data.ccData = userData[offset + 3] << 8 | userData[offset + 4];\n      results.push(data);\n    }\n  }\n\n  return results;\n};\n\nvar discardEmulationPreventionBytes = function discardEmulationPreventionBytes(data) {\n  var length = data.byteLength,\n      emulationPreventionBytesPositions = [],\n      i = 1,\n      newLength,\n      newData; // Find all `Emulation Prevention Bytes`\n\n  while (i < length - 2) {\n    if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 0x03) {\n      emulationPreventionBytesPositions.push(i + 2);\n      i += 2;\n    } else {\n      i++;\n    }\n  } // If no Emulation Prevention Bytes were found just return the original\n  // array\n\n\n  if (emulationPreventionBytesPositions.length === 0) {\n    return data;\n  } // Create a new array to hold the NAL unit data\n\n\n  newLength = length - emulationPreventionBytesPositions.length;\n  newData = new Uint8Array(newLength);\n  var sourceIndex = 0;\n\n  for (i = 0; i < newLength; sourceIndex++, i++) {\n    if (sourceIndex === emulationPreventionBytesPositions[0]) {\n      // Skip this byte\n      sourceIndex++; // Remove this position index\n\n      emulationPreventionBytesPositions.shift();\n    }\n\n    newData[i] = data[sourceIndex];\n  }\n\n  return newData;\n}; // exports\n\n\nmodule.exports = {\n  parseSei: parseSei,\n  parseUserData: parseUserData,\n  parseCaptionPackets: parseCaptionPackets,\n  discardEmulationPreventionBytes: discardEmulationPreventionBytes,\n  USER_DATA_REGISTERED_ITU_T_T35: USER_DATA_REGISTERED_ITU_T_T35\n};","// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\nfunction keyCode(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === typeof searchInput) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode;\n    if (hasKeyCode) searchInput = hasKeyCode;\n  } // Numbers\n\n\n  if ('number' === typeof searchInput) return names[searchInput]; // Everything else (cast to string)\n\n  var search = String(searchInput); // check codes\n\n  var foundNamedKey = codes[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey; // check aliases\n\n  var foundNamedKey = aliases[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey; // weird character?\n\n  if (search.length === 1) return search.charCodeAt(0);\n  return undefined;\n}\n/**\n * Compares a keyboard event with a given keyCode or keyName.\n *\n * @param {Event} event Keyboard event that should be tested\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Boolean}\n * @api public\n */\n\n\nkeyCode.isEventKey = function isEventKey(event, nameOrCode) {\n  if (event && 'object' === typeof event) {\n    var keyCode = event.which || event.keyCode || event.charCode;\n\n    if (keyCode === null || keyCode === undefined) {\n      return false;\n    }\n\n    if (typeof nameOrCode === 'string') {\n      // check codes\n      var foundNamedKey = codes[nameOrCode.toLowerCase()];\n\n      if (foundNamedKey) {\n        return foundNamedKey === keyCode;\n      } // check aliases\n\n\n      var foundNamedKey = aliases[nameOrCode.toLowerCase()];\n\n      if (foundNamedKey) {\n        return foundNamedKey === keyCode;\n      }\n    } else if (typeof nameOrCode === 'number') {\n      return nameOrCode === keyCode;\n    }\n\n    return false;\n  }\n};\n\nexports = module.exports = keyCode;\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'left command': 91,\n  'right command': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222\n}; // Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '⇧': 16,\n  '⌥': 18,\n  '⌃': 17,\n  '⌘': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'spacebar': 32,\n  'pgup': 33,\n  'pgdn': 34,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n};\n/*!\n * Programatically add the following\n */\n// lower case chars\n\nfor (i = 97; i < 123; i++) {\n  codes[String.fromCharCode(i)] = i - 32;\n} // numbers\n\n\nfor (var i = 48; i < 58; i++) {\n  codes[i - 48] = i;\n} // function keys\n\n\nfor (i = 1; i < 13; i++) {\n  codes['f' + i] = i + 111;\n} // numpad keys\n\n\nfor (i = 0; i < 10; i++) {\n  codes['numpad ' + i] = i + 96;\n}\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\n\nvar names = exports.names = exports.title = {}; // title for backward compat\n// Create reverse mapping\n\nfor (i in codes) {\n  names[codes[i]] = i;\n} // Add aliases\n\n\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias];\n}","/* The MIT License (MIT)\n\nCopyright (c) 2014-2015 Benoit Tremblay <trembl.ben@gmail.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/*global define, YT*/\n(function (root, factory) {\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\n    var videojs = require('video.js');\n\n    module.exports = factory(videojs.default || videojs);\n  } else if (typeof define === 'function' && define.amd) {\n    define(['videojs'], function (videojs) {\n      return root.Youtube = factory(videojs);\n    });\n  } else {\n    root.Youtube = factory(root.videojs);\n  }\n})(this, function (videojs) {\n  'use strict';\n\n  var _isOnMobile = videojs.browser.IS_IOS || videojs.browser.IS_NATIVE_ANDROID;\n\n  var Tech = videojs.getTech('Tech');\n  var Youtube = videojs.extend(Tech, {\n    constructor: function constructor(options, ready) {\n      Tech.call(this, options, ready);\n      this.setPoster(options.poster);\n      this.setSrc(this.options_.source, true); // Set the vjs-youtube class to the player\n      // Parent is not set yet so we have to wait a tick\n\n      this.setTimeout(function () {\n        if (this.el_) {\n          this.el_.parentNode.className += ' vjs-youtube';\n\n          if (_isOnMobile) {\n            this.el_.parentNode.className += ' vjs-youtube-mobile';\n          }\n\n          if (Youtube.isApiReady) {\n            this.initYTPlayer();\n          } else {\n            Youtube.apiReadyQueue.push(this);\n          }\n        }\n      }.bind(this));\n    },\n    dispose: function dispose() {\n      if (this.ytPlayer) {\n        //Dispose of the YouTube Player\n        if (this.ytPlayer.stopVideo) {\n          this.ytPlayer.stopVideo();\n        }\n\n        if (this.ytPlayer.destroy) {\n          this.ytPlayer.destroy();\n        }\n      } else {\n        //YouTube API hasn't finished loading or the player is already disposed\n        var index = Youtube.apiReadyQueue.indexOf(this);\n\n        if (index !== -1) {\n          Youtube.apiReadyQueue.splice(index, 1);\n        }\n      }\n\n      this.ytPlayer = null;\n      this.el_.parentNode.className = this.el_.parentNode.className.replace(' vjs-youtube', '').replace(' vjs-youtube-mobile', '');\n      this.el_.parentNode.removeChild(this.el_); //Needs to be called after the YouTube player is destroyed, otherwise there will be a null reference exception\n\n      Tech.prototype.dispose.call(this);\n    },\n    createEl: function createEl() {\n      var div = document.createElement('div');\n      div.setAttribute('id', this.options_.techId);\n      div.setAttribute('style', 'width:100%;height:100%;top:0;left:0;position:absolute');\n      div.setAttribute('class', 'vjs-tech');\n      var divWrapper = document.createElement('div');\n      divWrapper.appendChild(div);\n\n      if (!_isOnMobile && !this.options_.ytControls) {\n        var divBlocker = document.createElement('div');\n        divBlocker.setAttribute('class', 'vjs-iframe-blocker');\n        divBlocker.setAttribute('style', 'position:absolute;top:0;left:0;width:100%;height:100%'); // In case the blocker is still there and we want to pause\n\n        divBlocker.onclick = function () {\n          this.pause();\n        }.bind(this);\n\n        divWrapper.appendChild(divBlocker);\n      }\n\n      return divWrapper;\n    },\n    initYTPlayer: function initYTPlayer() {\n      var playerVars = {\n        controls: 0,\n        modestbranding: 1,\n        rel: 0,\n        showinfo: 0,\n        loop: this.options_.loop ? 1 : 0\n      }; // Let the user set any YouTube parameter\n      // https://developers.google.com/youtube/player_parameters?playerVersion=HTML5#Parameters\n      // To use YouTube controls, you must use ytControls instead\n      // To use the loop or autoplay, use the video.js settings\n\n      if (typeof this.options_.autohide !== 'undefined') {\n        playerVars.autohide = this.options_.autohide;\n      }\n\n      if (typeof this.options_['cc_load_policy'] !== 'undefined') {\n        playerVars['cc_load_policy'] = this.options_['cc_load_policy'];\n      }\n\n      if (typeof this.options_.ytControls !== 'undefined') {\n        playerVars.controls = this.options_.ytControls;\n      }\n\n      if (typeof this.options_.disablekb !== 'undefined') {\n        playerVars.disablekb = this.options_.disablekb;\n      }\n\n      if (typeof this.options_.color !== 'undefined') {\n        playerVars.color = this.options_.color;\n      }\n\n      if (!playerVars.controls) {\n        // Let video.js handle the fullscreen unless it is the YouTube native controls\n        playerVars.fs = 0;\n      } else if (typeof this.options_.fs !== 'undefined') {\n        playerVars.fs = this.options_.fs;\n      }\n\n      if (this.options_.source.src.indexOf('end=') !== -1) {\n        var srcEndTime = this.options_.source.src.match(/end=([0-9]*)/);\n        this.options_.end = parseInt(srcEndTime[1]);\n      }\n\n      if (typeof this.options_.end !== 'undefined') {\n        playerVars.end = this.options_.end;\n      }\n\n      if (typeof this.options_.hl !== 'undefined') {\n        playerVars.hl = this.options_.hl;\n      } else if (typeof this.options_.language !== 'undefined') {\n        // Set the YouTube player on the same language than video.js\n        playerVars.hl = this.options_.language.substr(0, 2);\n      }\n\n      if (typeof this.options_['iv_load_policy'] !== 'undefined') {\n        playerVars['iv_load_policy'] = this.options_['iv_load_policy'];\n      }\n\n      if (typeof this.options_.list !== 'undefined') {\n        playerVars.list = this.options_.list;\n      } else if (this.url && typeof this.url.listId !== 'undefined') {\n        playerVars.list = this.url.listId;\n      }\n\n      if (typeof this.options_.listType !== 'undefined') {\n        playerVars.listType = this.options_.listType;\n      }\n\n      if (typeof this.options_.modestbranding !== 'undefined') {\n        playerVars.modestbranding = this.options_.modestbranding;\n      }\n\n      if (typeof this.options_.playlist !== 'undefined') {\n        playerVars.playlist = this.options_.playlist;\n      }\n\n      if (typeof this.options_.playsinline !== 'undefined') {\n        playerVars.playsinline = this.options_.playsinline;\n      }\n\n      if (typeof this.options_.rel !== 'undefined') {\n        playerVars.rel = this.options_.rel;\n      }\n\n      if (typeof this.options_.showinfo !== 'undefined') {\n        playerVars.showinfo = this.options_.showinfo;\n      }\n\n      if (this.options_.source.src.indexOf('start=') !== -1) {\n        var srcStartTime = this.options_.source.src.match(/start=([0-9]*)/);\n        this.options_.start = parseInt(srcStartTime[1]);\n      }\n\n      if (typeof this.options_.start !== 'undefined') {\n        playerVars.start = this.options_.start;\n      }\n\n      if (typeof this.options_.theme !== 'undefined') {\n        playerVars.theme = this.options_.theme;\n      } // Allow undocumented options to be passed along via customVars\n\n\n      if (typeof this.options_.customVars !== 'undefined') {\n        var customVars = this.options_.customVars;\n        Object.keys(customVars).forEach(function (key) {\n          playerVars[key] = customVars[key];\n        });\n      }\n\n      this.activeVideoId = this.url ? this.url.videoId : null;\n      this.activeList = playerVars.list;\n      var playerConfig = {\n        videoId: this.activeVideoId,\n        playerVars: playerVars,\n        events: {\n          onReady: this.onPlayerReady.bind(this),\n          onPlaybackQualityChange: this.onPlayerPlaybackQualityChange.bind(this),\n          onPlaybackRateChange: this.onPlayerPlaybackRateChange.bind(this),\n          onStateChange: this.onPlayerStateChange.bind(this),\n          onVolumeChange: this.onPlayerVolumeChange.bind(this),\n          onError: this.onPlayerError.bind(this)\n        }\n      };\n\n      if (typeof this.options_.enablePrivacyEnhancedMode !== 'undefined' && this.options_.enablePrivacyEnhancedMode) {\n        playerConfig.host = 'https://www.youtube-nocookie.com';\n      }\n\n      this.ytPlayer = new YT.Player(this.options_.techId, playerConfig);\n    },\n    onPlayerReady: function onPlayerReady() {\n      if (this.options_.muted) {\n        this.ytPlayer.mute();\n      }\n\n      var playbackRates = this.ytPlayer.getAvailablePlaybackRates();\n\n      if (playbackRates.length > 1) {\n        this.featuresPlaybackRate = true;\n      }\n\n      this.playerReady_ = true;\n      this.triggerReady();\n\n      if (this.playOnReady) {\n        this.play();\n      } else if (this.cueOnReady) {\n        this.cueVideoById_(this.url.videoId);\n        this.activeVideoId = this.url.videoId;\n      }\n    },\n    onPlayerPlaybackQualityChange: function onPlayerPlaybackQualityChange() {},\n    onPlayerPlaybackRateChange: function onPlayerPlaybackRateChange() {\n      this.trigger('ratechange');\n    },\n    onPlayerStateChange: function onPlayerStateChange(e) {\n      var state = e.data;\n\n      if (state === this.lastState || this.errorNumber) {\n        return;\n      }\n\n      this.lastState = state;\n\n      switch (state) {\n        case -1:\n          this.trigger('loadstart');\n          this.trigger('loadedmetadata');\n          this.trigger('durationchange');\n          this.trigger('ratechange');\n          break;\n\n        case YT.PlayerState.ENDED:\n          this.trigger('ended');\n          break;\n\n        case YT.PlayerState.PLAYING:\n          this.trigger('timeupdate');\n          this.trigger('durationchange');\n          this.trigger('playing');\n          this.trigger('play');\n\n          if (this.isSeeking) {\n            this.onSeeked();\n          }\n\n          break;\n\n        case YT.PlayerState.PAUSED:\n          this.trigger('canplay');\n\n          if (this.isSeeking) {\n            this.onSeeked();\n          } else {\n            this.trigger('pause');\n          }\n\n          break;\n\n        case YT.PlayerState.BUFFERING:\n          this.player_.trigger('timeupdate');\n          this.player_.trigger('waiting');\n          break;\n      }\n    },\n    onPlayerVolumeChange: function onPlayerVolumeChange() {\n      this.trigger('volumechange');\n    },\n    onPlayerError: function onPlayerError(e) {\n      this.errorNumber = e.data;\n      this.trigger('pause');\n      this.trigger('error');\n    },\n    error: function error() {\n      var code = 1000 + this.errorNumber; // as smaller codes are reserved\n\n      switch (this.errorNumber) {\n        case 5:\n          return {\n            code: code,\n            message: 'Error while trying to play the video'\n          };\n\n        case 2:\n        case 100:\n          return {\n            code: code,\n            message: 'Unable to find the video'\n          };\n\n        case 101:\n        case 150:\n          return {\n            code: code,\n            message: 'Playback on other Websites has been disabled by the video owner.'\n          };\n      }\n\n      return {\n        code: code,\n        message: 'YouTube unknown error (' + this.errorNumber + ')'\n      };\n    },\n    loadVideoById_: function loadVideoById_(id) {\n      var options = {\n        videoId: id\n      };\n\n      if (this.options_.start) {\n        options.startSeconds = this.options_.start;\n      }\n\n      if (this.options_.end) {\n        options.endSeconds = this.options_.end;\n      }\n\n      this.ytPlayer.loadVideoById(options);\n    },\n    cueVideoById_: function cueVideoById_(id) {\n      var options = {\n        videoId: id\n      };\n\n      if (this.options_.start) {\n        options.startSeconds = this.options_.start;\n      }\n\n      if (this.options_.end) {\n        options.endSeconds = this.options_.end;\n      }\n\n      this.ytPlayer.cueVideoById(options);\n    },\n    src: function src(_src) {\n      if (_src) {\n        this.setSrc({\n          src: _src\n        });\n      }\n\n      return this.source;\n    },\n    poster: function poster() {\n      // You can't start programmaticlly a video with a mobile\n      // through the iframe so we hide the poster and the play button (with CSS)\n      if (_isOnMobile) {\n        return null;\n      }\n\n      return this.poster_;\n    },\n    setPoster: function setPoster(poster) {\n      this.poster_ = poster;\n    },\n    setSrc: function setSrc(source) {\n      if (!source || !source.src) {\n        return;\n      }\n\n      delete this.errorNumber;\n      this.source = source;\n      this.url = Youtube.parseUrl(source.src);\n\n      if (!this.options_.poster) {\n        if (this.url.videoId) {\n          // Set the low resolution first\n          this.poster_ = 'https://img.youtube.com/vi/' + this.url.videoId + '/0.jpg';\n          this.trigger('posterchange'); // Check if their is a high res\n\n          this.checkHighResPoster();\n        }\n      }\n\n      if (this.options_.autoplay && !_isOnMobile) {\n        if (this.isReady_) {\n          this.play();\n        } else {\n          this.playOnReady = true;\n        }\n      } else if (this.activeVideoId !== this.url.videoId) {\n        if (this.isReady_) {\n          this.cueVideoById_(this.url.videoId);\n          this.activeVideoId = this.url.videoId;\n        } else {\n          this.cueOnReady = true;\n        }\n      }\n    },\n    autoplay: function autoplay() {\n      return this.options_.autoplay;\n    },\n    setAutoplay: function setAutoplay(val) {\n      this.options_.autoplay = val;\n    },\n    loop: function loop() {\n      return this.options_.loop;\n    },\n    setLoop: function setLoop(val) {\n      this.options_.loop = val;\n    },\n    play: function play() {\n      if (!this.url || !this.url.videoId) {\n        return;\n      }\n\n      this.wasPausedBeforeSeek = false;\n\n      if (this.isReady_) {\n        if (this.url.listId) {\n          if (this.activeList === this.url.listId) {\n            this.ytPlayer.playVideo();\n          } else {\n            this.ytPlayer.loadPlaylist(this.url.listId);\n            this.activeList = this.url.listId;\n          }\n        }\n\n        if (this.activeVideoId === this.url.videoId) {\n          this.ytPlayer.playVideo();\n        } else {\n          this.loadVideoById_(this.url.videoId);\n          this.activeVideoId = this.url.videoId;\n        }\n      } else {\n        this.trigger('waiting');\n        this.playOnReady = true;\n      }\n    },\n    pause: function pause() {\n      if (this.ytPlayer) {\n        this.ytPlayer.pauseVideo();\n      }\n    },\n    paused: function paused() {\n      return this.ytPlayer ? this.lastState !== YT.PlayerState.PLAYING && this.lastState !== YT.PlayerState.BUFFERING : true;\n    },\n    currentTime: function currentTime() {\n      return this.ytPlayer ? this.ytPlayer.getCurrentTime() : 0;\n    },\n    setCurrentTime: function setCurrentTime(seconds) {\n      if (this.lastState === YT.PlayerState.PAUSED) {\n        this.timeBeforeSeek = this.currentTime();\n      }\n\n      if (!this.isSeeking) {\n        this.wasPausedBeforeSeek = this.paused();\n      }\n\n      this.ytPlayer.seekTo(seconds, true);\n      this.trigger('timeupdate');\n      this.trigger('seeking');\n      this.isSeeking = true; // A seek event during pause does not return an event to trigger a seeked event,\n      // so run an interval timer to look for the currentTime to change\n\n      if (this.lastState === YT.PlayerState.PAUSED && this.timeBeforeSeek !== seconds) {\n        clearInterval(this.checkSeekedInPauseInterval);\n        this.checkSeekedInPauseInterval = setInterval(function () {\n          if (this.lastState !== YT.PlayerState.PAUSED || !this.isSeeking) {\n            // If something changed while we were waiting for the currentTime to change,\n            //  clear the interval timer\n            clearInterval(this.checkSeekedInPauseInterval);\n          } else if (this.currentTime() !== this.timeBeforeSeek) {\n            this.trigger('timeupdate');\n            this.onSeeked();\n          }\n        }.bind(this), 250);\n      }\n    },\n    seeking: function seeking() {\n      return this.isSeeking;\n    },\n    seekable: function seekable() {\n      if (!this.ytPlayer) {\n        return videojs.createTimeRange();\n      }\n\n      return videojs.createTimeRange(0, this.ytPlayer.getDuration());\n    },\n    onSeeked: function onSeeked() {\n      clearInterval(this.checkSeekedInPauseInterval);\n      this.isSeeking = false;\n\n      if (this.wasPausedBeforeSeek) {\n        this.pause();\n      }\n\n      this.trigger('seeked');\n    },\n    playbackRate: function playbackRate() {\n      return this.ytPlayer ? this.ytPlayer.getPlaybackRate() : 1;\n    },\n    setPlaybackRate: function setPlaybackRate(suggestedRate) {\n      if (!this.ytPlayer) {\n        return;\n      }\n\n      this.ytPlayer.setPlaybackRate(suggestedRate);\n    },\n    duration: function duration() {\n      return this.ytPlayer ? this.ytPlayer.getDuration() : 0;\n    },\n    currentSrc: function currentSrc() {\n      return this.source && this.source.src;\n    },\n    ended: function ended() {\n      return this.ytPlayer ? this.lastState === YT.PlayerState.ENDED : false;\n    },\n    volume: function volume() {\n      return this.ytPlayer ? this.ytPlayer.getVolume() / 100.0 : 1;\n    },\n    setVolume: function setVolume(percentAsDecimal) {\n      if (!this.ytPlayer) {\n        return;\n      }\n\n      this.ytPlayer.setVolume(percentAsDecimal * 100.0);\n    },\n    muted: function muted() {\n      return this.ytPlayer ? this.ytPlayer.isMuted() : false;\n    },\n    setMuted: function setMuted(mute) {\n      if (!this.ytPlayer) {\n        return;\n      } else {\n        this.muted(true);\n      }\n\n      if (mute) {\n        this.ytPlayer.mute();\n      } else {\n        this.ytPlayer.unMute();\n      }\n\n      this.setTimeout(function () {\n        this.trigger('volumechange');\n      }, 50);\n    },\n    buffered: function buffered() {\n      if (!this.ytPlayer || !this.ytPlayer.getVideoLoadedFraction) {\n        return videojs.createTimeRange();\n      }\n\n      var bufferedEnd = this.ytPlayer.getVideoLoadedFraction() * this.ytPlayer.getDuration();\n      return videojs.createTimeRange(0, bufferedEnd);\n    },\n    // TODO: Can we really do something with this on YouTUbe?\n    preload: function preload() {},\n    load: function load() {},\n    reset: function reset() {},\n    networkState: function networkState() {\n      if (!this.ytPlayer) {\n        return 0; //NETWORK_EMPTY\n      }\n\n      switch (this.ytPlayer.getPlayerState()) {\n        case -1:\n          //unstarted\n          return 0;\n        //NETWORK_EMPTY\n\n        case 3:\n          //buffering\n          return 2;\n        //NETWORK_LOADING\n\n        default:\n          return 1;\n        //NETWORK_IDLE\n      }\n    },\n    readyState: function readyState() {\n      if (!this.ytPlayer) {\n        return 0; //HAVE_NOTHING\n      }\n\n      switch (this.ytPlayer.getPlayerState()) {\n        case -1:\n          //unstarted\n          return 0;\n        //HAVE_NOTHING\n\n        case 5:\n          //video cued\n          return 1;\n        //HAVE_METADATA\n\n        case 3:\n          //buffering\n          return 2;\n        //HAVE_CURRENT_DATA\n\n        default:\n          return 4;\n        //HAVE_ENOUGH_DATA\n      }\n    },\n    supportsFullScreen: function supportsFullScreen() {\n      return document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled;\n    },\n    // Tries to get the highest resolution thumbnail available for the video\n    checkHighResPoster: function checkHighResPoster() {\n      var uri = 'https://img.youtube.com/vi/' + this.url.videoId + '/maxresdefault.jpg';\n\n      try {\n        var image = new Image();\n\n        image.onload = function () {\n          // Onload may still be called if YouTube returns the 120x90 error thumbnail\n          if ('naturalHeight' in image) {\n            if (image.naturalHeight <= 90 || image.naturalWidth <= 120) {\n              return;\n            }\n          } else if (image.height <= 90 || image.width <= 120) {\n            return;\n          }\n\n          this.poster_ = uri;\n          this.trigger('posterchange');\n        }.bind(this);\n\n        image.onerror = function () {};\n\n        image.src = uri;\n      } catch (e) {}\n    }\n  });\n\n  Youtube.isSupported = function () {\n    return true;\n  };\n\n  Youtube.canPlaySource = function (e) {\n    return Youtube.canPlayType(e.type);\n  };\n\n  Youtube.canPlayType = function (e) {\n    return e === 'video/youtube';\n  };\n\n  Youtube.parseUrl = function (url) {\n    var result = {\n      videoId: null\n    };\n    var regex = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n    var match = url.match(regex);\n\n    if (match && match[2].length === 11) {\n      result.videoId = match[2];\n    }\n\n    var regPlaylist = /[?&]list=([^#\\&\\?]+)/;\n    match = url.match(regPlaylist);\n\n    if (match && match[1]) {\n      result.listId = match[1];\n    }\n\n    return result;\n  };\n\n  function apiLoaded() {\n    YT.ready(function () {\n      Youtube.isApiReady = true;\n\n      for (var i = 0; i < Youtube.apiReadyQueue.length; ++i) {\n        Youtube.apiReadyQueue[i].initYTPlayer();\n      }\n    });\n  }\n\n  function loadScript(src, callback) {\n    var loaded = false;\n    var tag = document.createElement('script');\n    var firstScriptTag = document.getElementsByTagName('script')[0];\n\n    if (!firstScriptTag) {\n      // when loaded in jest without jsdom setup it doesn't get any element.\n      // In jest it doesn't really make sense to do anything, because no one is watching youtube in jest\n      return;\n    }\n\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n    tag.onload = function () {\n      if (!loaded) {\n        loaded = true;\n        callback();\n      }\n    };\n\n    tag.onreadystatechange = function () {\n      if (!loaded && (this.readyState === 'complete' || this.readyState === 'loaded')) {\n        loaded = true;\n        callback();\n      }\n    };\n\n    tag.src = src;\n  }\n\n  function injectCss() {\n    var css = // iframe blocker to catch mouse events\n    '.vjs-youtube .vjs-iframe-blocker { display: none; }' + '.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }' + '.vjs-youtube .vjs-poster { background-size: cover; }' + '.vjs-youtube-mobile .vjs-big-play-button { display: none; }';\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    head.appendChild(style);\n  }\n\n  Youtube.apiReadyQueue = [];\n\n  if (typeof document !== 'undefined') {\n    loadScript('https://www.youtube.com/iframe_api', apiLoaded);\n    injectCss();\n  } // Older versions of VJS5 doesn't have the registerTech function\n\n\n  if (typeof videojs.registerTech !== 'undefined') {\n    videojs.registerTech('Youtube', Youtube);\n  } else {\n    videojs.registerComponent('Youtube', Youtube);\n  }\n});","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var topLevel = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {};\n\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n  doccy = document;\n} else {\n  doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n  if (!doccy) {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n  }\n}\n\nmodule.exports = doccy;","var SubtitlesOctopus = function SubtitlesOctopus(options) {\n  var supportsWebAssembly = false;\n\n  try {\n    if (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n      var _module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n\n      if (_module instanceof WebAssembly.Module) supportsWebAssembly = new WebAssembly.Instance(_module) instanceof WebAssembly.Instance;\n    }\n  } catch (e) {}\n\n  console.log(\"WebAssembly support detected: \" + (supportsWebAssembly ? \"yes\" : \"no\"));\n  var self = this;\n  self.canvas = options.canvas; // HTML canvas element (optional if video specified)\n\n  self.lossyRender = options.lossyRender; // Speedup render for heavy subs\n\n  self.isOurCanvas = false; // (internal) we created canvas and manage it\n\n  self.video = options.video; // HTML video element (optional if canvas specified)\n\n  self.canvasParent = null; // (internal) HTML canvas parent element\n\n  self.fonts = options.fonts || []; // Array with links to fonts used in sub (optional)\n\n  self.availableFonts = options.availableFonts || []; // Object with all available fonts (optional). Key is font name in lower case, value is link: {\"arial\": \"/font1.ttf\"}\n\n  self.onReadyEvent = options.onReady; // Function called when SubtitlesOctopus is ready (optional)\n\n  if (supportsWebAssembly) {\n    self.workerUrl = options.workerUrl || 'subtitles-octopus-worker.js'; // Link to WebAssembly worker\n  } else {\n    self.workerUrl = options.legacyWorkerUrl || 'subtitles-octopus-worker-legacy.js'; // Link to legacy worker\n  }\n\n  self.subUrl = options.subUrl; // Link to sub file (optional if subContent specified)\n\n  self.subContent = options.subContent || null; // Sub content (optional if subUrl specified)\n\n  self.onErrorEvent = options.onError; // Function called in case of critical error meaning sub wouldn't be shown and you should use alternative method (for instance it occurs if browser doesn't support web workers).\n\n  self.debug = options.debug || false; // When debug enabled, some performance info printed in console.\n\n  self.lastRenderTime = 0; // (internal) Last time we got some frame from worker\n\n  self.pixelRatio = window.devicePixelRatio || 1; // (internal) Device pixel ratio (for high dpi devices)\n\n  self.timeOffset = options.timeOffset || 0; // Time offset would be applied to currentTime from video (option)\n\n  self.hasAlphaBug = false;\n\n  (function () {\n    if (typeof ImageData.prototype.constructor === 'function') {\n      try {\n        // try actually calling ImageData, as on some browsers it's reported\n        // as existing but calling it errors out as \"TypeError: Illegal constructor\"\n        new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n        return;\n      } catch (e) {\n        console.log(\"detected that ImageData is not constructable despite browser saying so\");\n      }\n    }\n\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n\n    window.ImageData = function () {\n      var i = 0;\n\n      if (arguments[0] instanceof Uint8ClampedArray) {\n        var data = arguments[i++];\n      }\n\n      var width = arguments[i++];\n      var height = arguments[i];\n      var imageData = ctx.createImageData(width, height);\n      if (data) imageData.data.set(data);\n      return imageData;\n    };\n  })();\n\n  self.workerError = function (error) {\n    console.error('Worker error: ', error);\n\n    if (self.onErrorEvent) {\n      self.onErrorEvent(error);\n    }\n\n    if (!self.debug) {\n      self.dispose();\n      throw new Error('Worker error: ' + error);\n    }\n  }; // Not tested for repeated usage yet\n\n\n  self.init = function () {\n    if (!window.Worker) {\n      self.workerError('worker not supported');\n      return;\n    } // Worker\n\n\n    if (!self.worker) {\n      self.worker = new Worker(self.workerUrl);\n      self.worker.onmessage = self.onWorkerMessage;\n      self.worker.onerror = self.workerError;\n    }\n\n    self.workerActive = false;\n    self.createCanvas();\n    self.setVideo(options.video);\n    self.setSubUrl(options.subUrl);\n    self.worker.postMessage({\n      target: 'worker-init',\n      width: self.canvas.width,\n      height: self.canvas.height,\n      URL: document.URL,\n      currentScript: self.workerUrl,\n      preMain: true,\n      fastRender: self.lossyRender,\n      subUrl: self.subUrl,\n      subContent: self.subContent,\n      fonts: self.fonts,\n      availableFonts: self.availableFonts,\n      debug: self.debug\n    });\n  };\n\n  self.createCanvas = function () {\n    if (!self.canvas) {\n      if (self.video) {\n        self.isOurCanvas = true;\n        self.canvas = document.createElement('canvas');\n        self.canvas.className = 'libassjs-canvas';\n        self.canvas.style.display = 'none';\n        self.canvasParent = document.createElement('div');\n        self.canvasParent.className = 'libassjs-canvas-parent';\n        self.canvasParent.appendChild(self.canvas);\n\n        if (self.video.nextSibling) {\n          self.video.parentNode.insertBefore(self.canvasParent, self.video.nextSibling);\n        } else {\n          self.video.parentNode.appendChild(self.canvasParent);\n        }\n      } else {\n        if (!self.canvas) {\n          self.workerError('Don\\'t know where to render: you should give video or canvas in options.');\n        }\n      }\n    }\n\n    self.ctx = self.canvas.getContext('2d');\n    self.bufferCanvas = document.createElement('canvas');\n    self.bufferCanvasCtx = self.bufferCanvas.getContext('2d'); // test for alpha bug, where e.g. WebKit can render a transparent pixel\n    // (with alpha == 0) as non-black which then leads to visual artifacts\n\n    self.bufferCanvas.width = 1;\n    self.bufferCanvas.height = 1;\n    var testBuf = new Uint8ClampedArray([0, 255, 0, 0]);\n    var testImage = new ImageData(testBuf, 1, 1);\n    self.bufferCanvasCtx.clearRect(0, 0, 1, 1);\n    self.ctx.clearRect(0, 0, 1, 1);\n    var prePut = self.ctx.getImageData(0, 0, 1, 1).data;\n    self.bufferCanvasCtx.putImageData(testImage, 0, 0);\n    self.ctx.drawImage(self.bufferCanvas, 0, 0);\n    var postPut = self.ctx.getImageData(0, 0, 1, 1).data;\n    self.hasAlphaBug = prePut[1] != postPut[1];\n\n    if (self.hasAlphaBug) {\n      console.log(\"Detected a browser having issue with transparent pixels, applying workaround\");\n    }\n  };\n\n  self.setVideo = function (video) {\n    self.video = video;\n\n    if (self.video) {\n      var timeupdate = function timeupdate() {\n        self.setCurrentTime(video.currentTime + self.timeOffset);\n      };\n\n      self.video.addEventListener(\"timeupdate\", timeupdate, false);\n      self.video.addEventListener(\"playing\", function () {\n        self.setIsPaused(false, video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"pause\", function () {\n        self.setIsPaused(true, video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"seeking\", function () {\n        self.video.removeEventListener(\"timeupdate\", timeupdate);\n      }, false);\n      self.video.addEventListener(\"seeked\", function () {\n        self.video.addEventListener(\"timeupdate\", timeupdate, false);\n        self.setCurrentTime(video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"ratechange\", function () {\n        self.setRate(video.playbackRate);\n      }, false);\n      self.video.addEventListener(\"timeupdate\", function () {\n        self.setCurrentTime(video.currentTime + self.timeOffset);\n      }, false);\n      self.video.addEventListener(\"waiting\", function () {\n        self.setIsPaused(true, video.currentTime + self.timeOffset);\n      }, false);\n      document.addEventListener(\"fullscreenchange\", self.resizeWithTimeout, false);\n      document.addEventListener(\"mozfullscreenchange\", self.resizeWithTimeout, false);\n      document.addEventListener(\"webkitfullscreenchange\", self.resizeWithTimeout, false);\n      document.addEventListener(\"msfullscreenchange\", self.resizeWithTimeout, false);\n      window.addEventListener(\"resize\", self.resizeWithTimeout, false); // Support Element Resize Observer\n\n      if (typeof ResizeObserver !== \"undefined\") {\n        self.ro = new ResizeObserver(self.resizeWithTimeout);\n        self.ro.observe(self.video);\n      }\n\n      if (self.video.videoWidth > 0) {\n        self.resize();\n      } else {\n        self.video.addEventListener(\"loadedmetadata\", function (e) {\n          e.target.removeEventListener(e.type, arguments.callee);\n          self.resize();\n        }, false);\n      }\n    }\n  };\n\n  self.getVideoPosition = function () {\n    var videoRatio = self.video.videoWidth / self.video.videoHeight;\n    var width = self.video.offsetWidth,\n        height = self.video.offsetHeight;\n    var elementRatio = width / height;\n    var realWidth = width,\n        realHeight = height;\n    if (elementRatio > videoRatio) realWidth = Math.floor(height * videoRatio);else realHeight = Math.floor(width / videoRatio);\n    var x = (width - realWidth) / 2;\n    var y = (height - realHeight) / 2;\n    return {\n      width: realWidth,\n      height: realHeight,\n      x: x,\n      y: y\n    };\n  };\n\n  self.setSubUrl = function (subUrl) {\n    self.subUrl = subUrl;\n  };\n\n  self.renderFrameData = null;\n\n  function renderFrames() {\n    var data = self.renderFramesData;\n    var beforeDrawTime = performance.now();\n    self.ctx.clearRect(0, 0, self.canvas.width, self.canvas.height);\n\n    for (var i = 0; i < data.canvases.length; i++) {\n      var image = data.canvases[i];\n      self.bufferCanvas.width = image.w;\n      self.bufferCanvas.height = image.h;\n      var imageBuffer = new Uint8ClampedArray(image.buffer);\n\n      if (self.hasAlphaBug) {\n        for (var j = 3; j < imageBuffer.length; j = j + 4) {\n          imageBuffer[j] = imageBuffer[j] >= 1 ? imageBuffer[j] : 1;\n        }\n      }\n\n      var imageData = new ImageData(imageBuffer, image.w, image.h);\n      self.bufferCanvasCtx.putImageData(imageData, 0, 0);\n      self.ctx.drawImage(self.bufferCanvas, image.x, image.y);\n    }\n\n    if (self.debug) {\n      var drawTime = Math.round(performance.now() - beforeDrawTime);\n      console.log(Math.round(data.spentTime) + ' ms (+ ' + drawTime + ' ms draw)');\n      self.renderStart = performance.now();\n    }\n  }\n  /**\n   * Lossy Render Mode\n   *\n   */\n\n\n  function renderFastFrames() {\n    var data = self.renderFramesData;\n    var beforeDrawTime = performance.now();\n    self.ctx.clearRect(0, 0, self.canvas.width, self.canvas.height);\n\n    for (var i = 0; i < data.bitmaps.length; i++) {\n      var image = data.bitmaps[i];\n      self.ctx.drawImage(image.bitmap, image.x, image.y);\n    }\n\n    if (self.debug) {\n      var drawTime = Math.round(performance.now() - beforeDrawTime);\n      console.log(data.bitmaps.length + ' bitmaps, libass: ' + Math.round(data.libassTime) + 'ms, decode: ' + Math.round(data.decodeTime) + 'ms, draw: ' + drawTime + 'ms');\n      self.renderStart = performance.now();\n    }\n  }\n\n  self.workerActive = false;\n  self.frameId = 0;\n\n  self.onWorkerMessage = function (event) {\n    //dump('\\nclient got ' + JSON.stringify(event.data).substr(0, 150) + '\\n');\n    if (!self.workerActive) {\n      self.workerActive = true;\n\n      if (self.onReadyEvent) {\n        self.onReadyEvent();\n      }\n    }\n\n    var data = event.data;\n\n    switch (data.target) {\n      case 'stdout':\n        {\n          console.log(data.content);\n          break;\n        }\n\n      case 'console-log':\n        {\n          console.log.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-debug':\n        {\n          console.debug.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-info':\n        {\n          console.info.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-warn':\n        {\n          console.warn.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'console-error':\n        {\n          console.error.apply(console, JSON.parse(data.content));\n          break;\n        }\n\n      case 'stderr':\n        {\n          console.error(data.content);\n          break;\n        }\n\n      case 'window':\n        {\n          window[data.method]();\n          break;\n        }\n\n      case 'canvas':\n        {\n          switch (data.op) {\n            case 'getContext':\n              {\n                self.ctx = self.canvas.getContext(data.type, data.attributes);\n                break;\n              }\n\n            case 'resize':\n              {\n                self.resize(data.width, data.height);\n                break;\n              }\n\n            case 'renderCanvas':\n              {\n                if (self.lastRenderTime < data.time) {\n                  self.lastRenderTime = data.time;\n                  self.renderFramesData = data;\n                  window.requestAnimationFrame(renderFrames);\n                }\n\n                break;\n              }\n\n            case 'renderFastCanvas':\n              {\n                if (self.lastRenderTime < data.time) {\n                  self.lastRenderTime = data.time;\n                  self.renderFramesData = data;\n                  window.requestAnimationFrame(renderFastFrames);\n                }\n\n                break;\n              }\n\n            case 'setObjectProperty':\n              {\n                self.canvas[data.object][data.property] = data.value;\n                break;\n              }\n\n            default:\n              throw 'eh?';\n          }\n\n          break;\n        }\n\n      case 'tick':\n        {\n          self.frameId = data.id;\n          self.worker.postMessage({\n            target: 'tock',\n            id: self.frameId\n          });\n          break;\n        }\n\n      case 'custom':\n        {\n          if (self['onCustomMessage']) {\n            self['onCustomMessage'](event);\n          } else {\n            throw 'Custom message received but client onCustomMessage not implemented.';\n          }\n\n          break;\n        }\n\n      case 'setimmediate':\n        {\n          self.worker.postMessage({\n            target: 'setimmediate'\n          });\n          break;\n        }\n\n      case 'get-events':\n        {\n          console.log(data.target);\n          console.log(data.events);\n          break;\n        }\n\n      case 'get-styles':\n        {\n          console.log(data.target);\n          console.log(data.styles);\n          break;\n        }\n\n      default:\n        throw 'what? ' + data.target;\n    }\n  };\n\n  self.resize = function (width, height, top, left) {\n    var videoSize = null;\n    top = top || 0;\n    left = left || 0;\n\n    if ((!width || !height) && self.video) {\n      videoSize = self.getVideoPosition();\n      width = videoSize.width * self.pixelRatio;\n      height = videoSize.height * self.pixelRatio;\n      var offset = self.canvasParent.getBoundingClientRect().top - self.video.getBoundingClientRect().top;\n      top = videoSize.y - offset;\n      left = videoSize.x;\n    }\n\n    if (!width || !height) {\n      if (!self.video) {\n        console.error('width or height is 0. You should specify width & height for resize.');\n      }\n\n      return;\n    }\n\n    if (self.canvas.width != width || self.canvas.height != height || self.canvas.style.top != top || self.canvas.style.left != left) {\n      self.canvas.width = width;\n      self.canvas.height = height;\n\n      if (videoSize != null) {\n        self.canvasParent.style.position = 'relative';\n        self.canvas.style.display = 'block';\n        self.canvas.style.position = 'absolute';\n        self.canvas.style.width = videoSize.width + 'px';\n        self.canvas.style.height = videoSize.height + 'px';\n        self.canvas.style.top = top + 'px';\n        self.canvas.style.left = left + 'px';\n        self.canvas.style.pointerEvents = 'none';\n      }\n\n      self.worker.postMessage({\n        target: 'canvas',\n        width: self.canvas.width,\n        height: self.canvas.height\n      });\n    }\n  };\n\n  self.resizeWithTimeout = function () {\n    self.resize();\n    setTimeout(self.resize, 100);\n  };\n\n  self.runBenchmark = function () {\n    self.worker.postMessage({\n      target: 'runBenchmark'\n    });\n  };\n\n  self.customMessage = function (data, options) {\n    options = options || {};\n    self.worker.postMessage({\n      target: 'custom',\n      userData: data,\n      preMain: options.preMain\n    });\n  };\n\n  self.setCurrentTime = function (currentTime) {\n    self.worker.postMessage({\n      target: 'video',\n      currentTime: currentTime\n    });\n  };\n\n  self.setTrackByUrl = function (url) {\n    self.worker.postMessage({\n      target: 'set-track-by-url',\n      url: url\n    });\n  };\n\n  self.setTrack = function (content) {\n    self.worker.postMessage({\n      target: 'set-track',\n      content: content\n    });\n  };\n\n  self.freeTrack = function (content) {\n    self.worker.postMessage({\n      target: 'free-track'\n    });\n  };\n\n  self.render = self.setCurrentTime;\n\n  self.setIsPaused = function (isPaused, currentTime) {\n    self.worker.postMessage({\n      target: 'video',\n      isPaused: isPaused,\n      currentTime: currentTime\n    });\n  };\n\n  self.setRate = function (rate) {\n    self.worker.postMessage({\n      target: 'video',\n      rate: rate\n    });\n  };\n\n  self.dispose = function () {\n    self.worker.postMessage({\n      target: 'destroy'\n    });\n    self.worker.terminate();\n    self.workerActive = false; // Remove the canvas element to remove residual subtitles rendered on player\n\n    if (self.video) {\n      self.video.parentNode.removeChild(self.canvasParent);\n    }\n  };\n\n  self.createEvent = function (event) {\n    self.worker.postMessage({\n      target: 'create-event',\n      event: event\n    });\n  };\n\n  self.getEvents = function () {\n    self.worker.postMessage({\n      target: 'get-events'\n    });\n  };\n\n  self.setEvent = function (event, index) {\n    self.worker.postMessage({\n      target: 'set-event',\n      event: event,\n      index: index\n    });\n  };\n\n  self.removeEvent = function (index) {\n    self.worker.postMessage({\n      target: 'remove-event',\n      index: index\n    });\n  };\n\n  self.createStyle = function (style) {\n    self.worker.postMessage({\n      target: 'create-style',\n      style: style\n    });\n  };\n\n  self.getStyles = function () {\n    self.worker.postMessage({\n      target: 'get-styles'\n    });\n  };\n\n  self.setStyle = function (style, index) {\n    self.worker.postMessage({\n      target: 'set-style',\n      style: style,\n      index: index\n    });\n  };\n\n  self.removeStyle = function (index) {\n    self.worker.postMessage({\n      target: 'remove-style',\n      index: index\n    });\n  };\n\n  self.init();\n};\n\nif (typeof SubtitlesOctopusOnLoad == 'function') {\n  SubtitlesOctopusOnLoad();\n}\n\nif (typeof exports !== 'undefined') {\n  if (typeof module !== 'undefined' && module.exports) {\n    exports = module.exports = SubtitlesOctopus;\n  }\n}","\"use strict\";\n\nvar window = require(\"global/window\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar isFunction = require('is-function');\n/**\n * @license\n * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>\n * Copyright (c) 2014 David Björklund\n * Available under the MIT license\n * <https://github.com/kesla/parse-headers/blob/master/LICENCE>\n */\n\n\nvar parseHeaders = function parseHeaders(headers) {\n  var result = {};\n\n  if (!headers) {\n    return result;\n  }\n\n  headers.trim().split('\\n').forEach(function (row) {\n    var index = row.indexOf(':');\n    var key = row.slice(0, index).trim().toLowerCase();\n    var value = row.slice(index + 1).trim();\n\n    if (typeof result[key] === 'undefined') {\n      result[key] = value;\n    } else if (Array.isArray(result[key])) {\n      result[key].push(value);\n    } else {\n      result[key] = [result[key], value];\n    }\n  });\n  return result;\n};\n\nmodule.exports = createXHR; // Allow use of default import syntax in TypeScript\n\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\ncreateXHR.XDomainRequest = \"withCredentials\" in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function (method) {\n  createXHR[method === \"delete\" ? \"del\" : method] = function (uri, options, callback) {\n    options = initParams(uri, options, callback);\n    options.method = method.toUpperCase();\n    return _createXHR(options);\n  };\n});\n\nfunction forEachArray(array, iterator) {\n  for (var i = 0; i < array.length; i++) {\n    iterator(array[i]);\n  }\n}\n\nfunction isEmpty(obj) {\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) return false;\n  }\n\n  return true;\n}\n\nfunction initParams(uri, options, callback) {\n  var params = uri;\n\n  if (isFunction(options)) {\n    callback = options;\n\n    if (typeof uri === \"string\") {\n      params = {\n        uri: uri\n      };\n    }\n  } else {\n    params = _extends({}, options, {\n      uri: uri\n    });\n  }\n\n  params.callback = callback;\n  return params;\n}\n\nfunction createXHR(uri, options, callback) {\n  options = initParams(uri, options, callback);\n  return _createXHR(options);\n}\n\nfunction _createXHR(options) {\n  if (typeof options.callback === \"undefined\") {\n    throw new Error(\"callback argument missing\");\n  }\n\n  var called = false;\n\n  var callback = function cbOnce(err, response, body) {\n    if (!called) {\n      called = true;\n      options.callback(err, response, body);\n    }\n  };\n\n  function readystatechange() {\n    if (xhr.readyState === 4) {\n      setTimeout(loadFunc, 0);\n    }\n  }\n\n  function getBody() {\n    // Chrome with requestType=blob throws errors arround when even testing access to responseText\n    var body = undefined;\n\n    if (xhr.response) {\n      body = xhr.response;\n    } else {\n      body = xhr.responseText || getXml(xhr);\n    }\n\n    if (isJson) {\n      try {\n        body = JSON.parse(body);\n      } catch (e) {}\n    }\n\n    return body;\n  }\n\n  function errorFunc(evt) {\n    clearTimeout(timeoutTimer);\n\n    if (!(evt instanceof Error)) {\n      evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\"));\n    }\n\n    evt.statusCode = 0;\n    return callback(evt, failureResponse);\n  } // will load the data & process the response in a special response object\n\n\n  function loadFunc() {\n    if (aborted) return;\n    var status;\n    clearTimeout(timeoutTimer);\n\n    if (options.useXDR && xhr.status === undefined) {\n      //IE8 CORS GET successful response doesn't have a status field, but body is fine\n      status = 200;\n    } else {\n      status = xhr.status === 1223 ? 204 : xhr.status;\n    }\n\n    var response = failureResponse;\n    var err = null;\n\n    if (status !== 0) {\n      response = {\n        body: getBody(),\n        statusCode: status,\n        method: method,\n        headers: {},\n        url: uri,\n        rawRequest: xhr\n      };\n\n      if (xhr.getAllResponseHeaders) {\n        //remember xhr can in fact be XDR for CORS in IE\n        response.headers = parseHeaders(xhr.getAllResponseHeaders());\n      }\n    } else {\n      err = new Error(\"Internal XMLHttpRequest Error\");\n    }\n\n    return callback(err, response, response.body);\n  }\n\n  var xhr = options.xhr || null;\n\n  if (!xhr) {\n    if (options.cors || options.useXDR) {\n      xhr = new createXHR.XDomainRequest();\n    } else {\n      xhr = new createXHR.XMLHttpRequest();\n    }\n  }\n\n  var key;\n  var aborted;\n  var uri = xhr.url = options.uri || options.url;\n  var method = xhr.method = options.method || \"GET\";\n  var body = options.body || options.data;\n  var headers = xhr.headers = options.headers || {};\n  var sync = !!options.sync;\n  var isJson = false;\n  var timeoutTimer;\n  var failureResponse = {\n    body: undefined,\n    headers: {},\n    statusCode: 0,\n    method: method,\n    url: uri,\n    rawRequest: xhr\n  };\n\n  if (\"json\" in options && options.json !== false) {\n    isJson = true;\n    headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\"); //Don't override existing accept header declared by user\n\n    if (method !== \"GET\" && method !== \"HEAD\") {\n      headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\"); //Don't override existing accept header declared by user\n\n      body = JSON.stringify(options.json === true ? body : options.json);\n    }\n  }\n\n  xhr.onreadystatechange = readystatechange;\n  xhr.onload = loadFunc;\n  xhr.onerror = errorFunc; // IE9 must have onprogress be set to a unique function.\n\n  xhr.onprogress = function () {// IE must die\n  };\n\n  xhr.onabort = function () {\n    aborted = true;\n  };\n\n  xhr.ontimeout = errorFunc;\n  xhr.open(method, uri, !sync, options.username, options.password); //has to be after open\n\n  if (!sync) {\n    xhr.withCredentials = !!options.withCredentials;\n  } // Cannot set timeout with sync request\n  // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n  // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\n\n  if (!sync && options.timeout > 0) {\n    timeoutTimer = setTimeout(function () {\n      if (aborted) return;\n      aborted = true; //IE9 may still call readystatechange\n\n      xhr.abort(\"timeout\");\n      var e = new Error(\"XMLHttpRequest timeout\");\n      e.code = \"ETIMEDOUT\";\n      errorFunc(e);\n    }, options.timeout);\n  }\n\n  if (xhr.setRequestHeader) {\n    for (key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key]);\n      }\n    }\n  } else if (options.headers && !isEmpty(options.headers)) {\n    throw new Error(\"Headers cannot be set on an XDomainRequest object\");\n  }\n\n  if (\"responseType\" in options) {\n    xhr.responseType = options.responseType;\n  }\n\n  if (\"beforeSend\" in options && typeof options.beforeSend === \"function\") {\n    options.beforeSend(xhr);\n  } // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n  // XMLHttpRequest spec says to pass null as body to indicate no body\n  // See https://github.com/naugtur/xhr/issues/100.\n\n\n  xhr.send(body || null);\n  return xhr;\n}\n\nfunction getXml(xhr) {\n  // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n  // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n  try {\n    if (xhr.responseType === \"document\") {\n      return xhr.responseXML;\n    }\n\n    var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\";\n\n    if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n      return xhr.responseXML;\n    }\n  } catch (e) {}\n\n  return null;\n}\n\nfunction noop() {}","'use strict';\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Accepts program elementary stream (PES) data events and corrects\n * decode and presentation time stamps to account for a rollover\n * of the 33 bit value.\n */\n'use strict';\n\nvar Stream = require('../utils/stream');\n\nvar MAX_TS = 8589934592;\nvar RO_THRESH = 4294967296;\nvar TYPE_SHARED = 'shared';\n\nvar handleRollover = function handleRollover(value, reference) {\n  var direction = 1;\n\n  if (value > reference) {\n    // If the current timestamp value is greater than our reference timestamp and we detect a\n    // timestamp rollover, this means the roll over is happening in the opposite direction.\n    // Example scenario: Enter a long stream/video just after a rollover occurred. The reference\n    // point will be set to a small number, e.g. 1. The user then seeks backwards over the\n    // rollover point. In loading this segment, the timestamp values will be very large,\n    // e.g. 2^33 - 1. Since this comes before the data we loaded previously, we want to adjust\n    // the time stamp to be `value - 2^33`.\n    direction = -1;\n  } // Note: A seek forwards or back that is greater than the RO_THRESH (2^32, ~13 hours) will\n  // cause an incorrect adjustment.\n\n\n  while (Math.abs(reference - value) > RO_THRESH) {\n    value += direction * MAX_TS;\n  }\n\n  return value;\n};\n\nvar TimestampRolloverStream = function TimestampRolloverStream(type) {\n  var lastDTS, referenceDTS;\n  TimestampRolloverStream.prototype.init.call(this); // The \"shared\" type is used in cases where a stream will contain muxed\n  // video and audio. We could use `undefined` here, but having a string\n  // makes debugging a little clearer.\n\n  this.type_ = type || TYPE_SHARED;\n\n  this.push = function (data) {\n    // Any \"shared\" rollover streams will accept _all_ data. Otherwise,\n    // streams will only accept data that matches their type.\n    if (this.type_ !== TYPE_SHARED && data.type !== this.type_) {\n      return;\n    }\n\n    if (referenceDTS === undefined) {\n      referenceDTS = data.dts;\n    }\n\n    data.dts = handleRollover(data.dts, referenceDTS);\n    data.pts = handleRollover(data.pts, referenceDTS);\n    lastDTS = data.dts;\n    this.trigger('data', data);\n  };\n\n  this.flush = function () {\n    referenceDTS = lastDTS;\n    this.trigger('done');\n  };\n\n  this.endTimeline = function () {\n    this.flush();\n    this.trigger('endedtimeline');\n  };\n\n  this.discontinuity = function () {\n    referenceDTS = void 0;\n    lastDTS = void 0;\n  };\n\n  this.reset = function () {\n    this.discontinuity();\n    this.trigger('reset');\n  };\n};\n\nTimestampRolloverStream.prototype = new Stream();\nmodule.exports = {\n  TimestampRolloverStream: TimestampRolloverStream,\n  handleRollover: handleRollover\n};","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Default exports for Node. Export the extended versions of VTTCue and\n// VTTRegion in Node since we likely want the capability to convert back and\n// forth between JSON. If we don't then it's not that big of a deal since we're\n// off browser.\nvar window = require('global/window');\n\nvar vttjs = module.exports = {\n  WebVTT: require(\"./vtt.js\"),\n  VTTCue: require(\"./vttcue.js\"),\n  VTTRegion: require(\"./vttregion.js\")\n};\nwindow.vttjs = vttjs;\nwindow.WebVTT = vttjs.WebVTT;\nvar cueShim = vttjs.VTTCue;\nvar regionShim = vttjs.VTTRegion;\nvar nativeVTTCue = window.VTTCue;\nvar nativeVTTRegion = window.VTTRegion;\n\nvttjs.shim = function () {\n  window.VTTCue = cueShim;\n  window.VTTRegion = regionShim;\n};\n\nvttjs.restore = function () {\n  window.VTTCue = nativeVTTCue;\n  window.VTTRegion = nativeVTTRegion;\n};\n\nif (!window.VTTCue) {\n  vttjs.shim();\n}","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Utilities to detect basic properties and metadata about MP4s.\n */\n'use strict';\n\nvar toUnsigned = require('../utils/bin').toUnsigned;\n\nvar toHexString = require('../utils/bin').toHexString;\n\nvar mp4Inspector = require('../tools/mp4-inspector.js');\n\nvar timescale, startTime, compositionStartTime, getVideoTrackIds, getTracks;\n/**\n * Parses an MP4 initialization segment and extracts the timescale\n * values for any declared tracks. Timescale values indicate the\n * number of clock ticks per second to assume for time-based values\n * elsewhere in the MP4.\n *\n * To determine the start time of an MP4, you need two pieces of\n * information: the timescale unit and the earliest base media decode\n * time. Multiple timescales can be specified within an MP4 but the\n * base media decode time is always expressed in the timescale from\n * the media header box for the track:\n * ```\n * moov > trak > mdia > mdhd.timescale\n * ```\n * @param init {Uint8Array} the bytes of the init segment\n * @return {object} a hash of track ids to timescale values or null if\n * the init segment is malformed.\n */\n\ntimescale = function timescale(init) {\n  var result = {},\n      traks = mp4Inspector.findBox(init, ['moov', 'trak']); // mdhd timescale\n\n  return traks.reduce(function (result, trak) {\n    var tkhd, version, index, id, mdhd;\n    tkhd = mp4Inspector.findBox(trak, ['tkhd'])[0];\n\n    if (!tkhd) {\n      return null;\n    }\n\n    version = tkhd[0];\n    index = version === 0 ? 12 : 20;\n    id = toUnsigned(tkhd[index] << 24 | tkhd[index + 1] << 16 | tkhd[index + 2] << 8 | tkhd[index + 3]);\n    mdhd = mp4Inspector.findBox(trak, ['mdia', 'mdhd'])[0];\n\n    if (!mdhd) {\n      return null;\n    }\n\n    version = mdhd[0];\n    index = version === 0 ? 12 : 20;\n    result[id] = toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n    return result;\n  }, result);\n};\n/**\n * Determine the base media decode start time, in seconds, for an MP4\n * fragment. If multiple fragments are specified, the earliest time is\n * returned.\n *\n * The base media decode time can be parsed from track fragment\n * metadata:\n * ```\n * moof > traf > tfdt.baseMediaDecodeTime\n * ```\n * It requires the timescale value from the mdhd to interpret.\n *\n * @param timescale {object} a hash of track ids to timescale values.\n * @return {number} the earliest base media decode start time for the\n * fragment, in seconds\n */\n\n\nstartTime = function startTime(timescale, fragment) {\n  var trafs, baseTimes, result; // we need info from two childrend of each track fragment box\n\n  trafs = mp4Inspector.findBox(fragment, ['moof', 'traf']); // determine the start times for each track\n\n  baseTimes = [].concat.apply([], trafs.map(function (traf) {\n    return mp4Inspector.findBox(traf, ['tfhd']).map(function (tfhd) {\n      var id, scale, baseTime; // get the track id from the tfhd\n\n      id = toUnsigned(tfhd[4] << 24 | tfhd[5] << 16 | tfhd[6] << 8 | tfhd[7]); // assume a 90kHz clock if no timescale was specified\n\n      scale = timescale[id] || 90e3; // get the base media decode time from the tfdt\n\n      baseTime = mp4Inspector.findBox(traf, ['tfdt']).map(function (tfdt) {\n        var version, result;\n        version = tfdt[0];\n        result = toUnsigned(tfdt[4] << 24 | tfdt[5] << 16 | tfdt[6] << 8 | tfdt[7]);\n\n        if (version === 1) {\n          result *= Math.pow(2, 32);\n          result += toUnsigned(tfdt[8] << 24 | tfdt[9] << 16 | tfdt[10] << 8 | tfdt[11]);\n        }\n\n        return result;\n      })[0];\n      baseTime = baseTime || Infinity; // convert base time to seconds\n\n      return baseTime / scale;\n    });\n  })); // return the minimum\n\n  result = Math.min.apply(null, baseTimes);\n  return isFinite(result) ? result : 0;\n};\n/**\n * Determine the composition start, in seconds, for an MP4\n * fragment.\n *\n * The composition start time of a fragment can be calculated using the base\n * media decode time, composition time offset, and timescale, as follows:\n *\n * compositionStartTime = (baseMediaDecodeTime + compositionTimeOffset) / timescale\n *\n * All of the aforementioned information is contained within a media fragment's\n * `traf` box, except for timescale info, which comes from the initialization\n * segment, so a track id (also contained within a `traf`) is also necessary to\n * associate it with a timescale\n *\n *\n * @param timescales {object} - a hash of track ids to timescale values.\n * @param fragment {Unit8Array} - the bytes of a media segment\n * @return {number} the composition start time for the fragment, in seconds\n **/\n\n\ncompositionStartTime = function compositionStartTime(timescales, fragment) {\n  var trafBoxes = mp4Inspector.findBox(fragment, ['moof', 'traf']);\n  var baseMediaDecodeTime = 0;\n  var compositionTimeOffset = 0;\n  var trackId;\n\n  if (trafBoxes && trafBoxes.length) {\n    // The spec states that track run samples contained within a `traf` box are contiguous, but\n    // it does not explicitly state whether the `traf` boxes themselves are contiguous.\n    // We will assume that they are, so we only need the first to calculate start time.\n    var parsedTraf = mp4Inspector.parseTraf(trafBoxes[0]);\n\n    for (var i = 0; i < parsedTraf.boxes.length; i++) {\n      if (parsedTraf.boxes[i].type === 'tfhd') {\n        trackId = parsedTraf.boxes[i].trackId;\n      } else if (parsedTraf.boxes[i].type === 'tfdt') {\n        baseMediaDecodeTime = parsedTraf.boxes[i].baseMediaDecodeTime;\n      } else if (parsedTraf.boxes[i].type === 'trun' && parsedTraf.boxes[i].samples.length) {\n        compositionTimeOffset = parsedTraf.boxes[i].samples[0].compositionTimeOffset || 0;\n      }\n    }\n  } // Get timescale for this specific track. Assume a 90kHz clock if no timescale was\n  // specified.\n\n\n  var timescale = timescales[trackId] || 90e3; // return the composition start time, in seconds\n\n  return (baseMediaDecodeTime + compositionTimeOffset) / timescale;\n};\n/**\n  * Find the trackIds of the video tracks in this source.\n  * Found by parsing the Handler Reference and Track Header Boxes:\n  *   moov > trak > mdia > hdlr\n  *   moov > trak > tkhd\n  *\n  * @param {Uint8Array} init - The bytes of the init segment for this source\n  * @return {Number[]} A list of trackIds\n  *\n  * @see ISO-BMFF-12/2015, Section 8.4.3\n **/\n\n\ngetVideoTrackIds = function getVideoTrackIds(init) {\n  var traks = mp4Inspector.findBox(init, ['moov', 'trak']);\n  var videoTrackIds = [];\n  traks.forEach(function (trak) {\n    var hdlrs = mp4Inspector.findBox(trak, ['mdia', 'hdlr']);\n    var tkhds = mp4Inspector.findBox(trak, ['tkhd']);\n    hdlrs.forEach(function (hdlr, index) {\n      var handlerType = mp4Inspector.parseType(hdlr.subarray(8, 12));\n      var tkhd = tkhds[index];\n      var view;\n      var version;\n      var trackId;\n\n      if (handlerType === 'vide') {\n        view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n        version = view.getUint8(0);\n        trackId = version === 0 ? view.getUint32(12) : view.getUint32(20);\n        videoTrackIds.push(trackId);\n      }\n    });\n  });\n  return videoTrackIds;\n};\n/**\n * Get all the video, audio, and hint tracks from a non fragmented\n * mp4 segment\n */\n\n\ngetTracks = function getTracks(init) {\n  var traks = mp4Inspector.findBox(init, ['moov', 'trak']);\n  var tracks = [];\n  traks.forEach(function (trak) {\n    var track = {};\n    var tkhd = mp4Inspector.findBox(trak, ['tkhd'])[0];\n    var view, version; // id\n\n    if (tkhd) {\n      view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n      version = view.getUint8(0);\n      track.id = version === 0 ? view.getUint32(12) : view.getUint32(20);\n    }\n\n    var hdlr = mp4Inspector.findBox(trak, ['mdia', 'hdlr'])[0]; // type\n\n    if (hdlr) {\n      var type = mp4Inspector.parseType(hdlr.subarray(8, 12));\n\n      if (type === 'vide') {\n        track.type = 'video';\n      } else if (type === 'soun') {\n        track.type = 'audio';\n      } else {\n        track.type = type;\n      }\n    } // codec\n\n\n    var stsd = mp4Inspector.findBox(trak, ['mdia', 'minf', 'stbl', 'stsd'])[0];\n\n    if (stsd) {\n      var sampleDescriptions = stsd.subarray(8); // gives the codec type string\n\n      track.codec = mp4Inspector.parseType(sampleDescriptions.subarray(4, 8));\n      var codecBox = mp4Inspector.findBox(sampleDescriptions, [track.codec])[0];\n      var codecConfig, codecConfigType;\n\n      if (codecBox) {\n        // https://tools.ietf.org/html/rfc6381#section-3.3\n        if (/^[a-z]vc[1-9]$/i.test(track.codec)) {\n          // we don't need anything but the \"config\" parameter of the\n          // avc1 codecBox\n          codecConfig = codecBox.subarray(78);\n          codecConfigType = mp4Inspector.parseType(codecConfig.subarray(4, 8));\n\n          if (codecConfigType === 'avcC' && codecConfig.length > 11) {\n            track.codec += '.'; // left padded with zeroes for single digit hex\n            // profile idc\n\n            track.codec += toHexString(codecConfig[9]); // the byte containing the constraint_set flags\n\n            track.codec += toHexString(codecConfig[10]); // level idc\n\n            track.codec += toHexString(codecConfig[11]);\n          } else {\n            // TODO: show a warning that we couldn't parse the codec\n            // and are using the default\n            track.codec = 'avc1.4d400d';\n          }\n        } else if (/^mp4[a,v]$/i.test(track.codec)) {\n          // we do not need anything but the streamDescriptor of the mp4a codecBox\n          codecConfig = codecBox.subarray(28);\n          codecConfigType = mp4Inspector.parseType(codecConfig.subarray(4, 8));\n\n          if (codecConfigType === 'esds' && codecConfig.length > 20 && codecConfig[19] !== 0) {\n            track.codec += '.' + toHexString(codecConfig[19]); // this value is only a single digit\n\n            track.codec += '.' + toHexString(codecConfig[20] >>> 2 & 0x3f).replace(/^0/, '');\n          } else {\n            // TODO: show a warning that we couldn't parse the codec\n            // and are using the default\n            track.codec = 'mp4a.40.2';\n          }\n        } else {// TODO: show a warning? for unknown codec type\n        }\n      }\n    }\n\n    var mdhd = mp4Inspector.findBox(trak, ['mdia', 'mdhd'])[0];\n\n    if (mdhd && tkhd) {\n      var index = version === 0 ? 12 : 20;\n      track.timescale = toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n    }\n\n    tracks.push(track);\n  });\n  return tracks;\n};\n\nmodule.exports = {\n  // export mp4 inspector's findBox and parseType for backwards compatibility\n  findBox: mp4Inspector.findBox,\n  parseType: mp4Inspector.parseType,\n  timescale: timescale,\n  startTime: startTime,\n  compositionStartTime: compositionStartTime,\n  videoTrackIds: getVideoTrackIds,\n  tracks: getTracks\n};","function DOMParser(options) {\n  this.options = options || {\n    locator: {}\n  };\n}\n\nDOMParser.prototype.parseFromString = function (source, mimeType) {\n  var options = this.options;\n  var sax = new XMLReader();\n  var domBuilder = options.domBuilder || new DOMHandler(); //contentHandler and LexicalHandler\n\n  var errorHandler = options.errorHandler;\n  var locator = options.locator;\n  var defaultNSMap = options.xmlns || {};\n  var entityMap = {\n    'lt': '<',\n    'gt': '>',\n    'amp': '&',\n    'quot': '\"',\n    'apos': \"'\"\n  };\n\n  if (locator) {\n    domBuilder.setDocumentLocator(locator);\n  }\n\n  sax.errorHandler = buildErrorHandler(errorHandler, domBuilder, locator);\n  sax.domBuilder = options.domBuilder || domBuilder;\n\n  if (/\\/x?html?$/.test(mimeType)) {\n    entityMap.nbsp = '\\xa0';\n    entityMap.copy = '\\xa9';\n    defaultNSMap[''] = 'http://www.w3.org/1999/xhtml';\n  }\n\n  defaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\n\n  if (source) {\n    sax.parse(source, defaultNSMap, entityMap);\n  } else {\n    sax.errorHandler.error(\"invalid doc source\");\n  }\n\n  return domBuilder.doc;\n};\n\nfunction buildErrorHandler(errorImpl, domBuilder, locator) {\n  if (!errorImpl) {\n    if (domBuilder instanceof DOMHandler) {\n      return domBuilder;\n    }\n\n    errorImpl = domBuilder;\n  }\n\n  var errorHandler = {};\n  var isCallback = errorImpl instanceof Function;\n  locator = locator || {};\n\n  function build(key) {\n    var fn = errorImpl[key];\n\n    if (!fn && isCallback) {\n      fn = errorImpl.length == 2 ? function (msg) {\n        errorImpl(key, msg);\n      } : errorImpl;\n    }\n\n    errorHandler[key] = fn && function (msg) {\n      fn('[xmldom ' + key + ']\\t' + msg + _locator(locator));\n    } || function () {};\n  }\n\n  build('warning');\n  build('error');\n  build('fatalError');\n  return errorHandler;\n} //console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\n\n\nfunction DOMHandler() {\n  this.cdata = false;\n}\n\nfunction position(locator, node) {\n  node.lineNumber = locator.lineNumber;\n  node.columnNumber = locator.columnNumber;\n}\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */\n\n\nDOMHandler.prototype = {\n  startDocument: function startDocument() {\n    this.doc = new DOMImplementation().createDocument(null, null, null);\n\n    if (this.locator) {\n      this.doc.documentURI = this.locator.systemId;\n    }\n  },\n  startElement: function startElement(namespaceURI, localName, qName, attrs) {\n    var doc = this.doc;\n    var el = doc.createElementNS(namespaceURI, qName || localName);\n    var len = attrs.length;\n    appendElement(this, el);\n    this.currentElement = el;\n    this.locator && position(this.locator, el);\n\n    for (var i = 0; i < len; i++) {\n      var namespaceURI = attrs.getURI(i);\n      var value = attrs.getValue(i);\n      var qName = attrs.getQName(i);\n      var attr = doc.createAttributeNS(namespaceURI, qName);\n      this.locator && position(attrs.getLocator(i), attr);\n      attr.value = attr.nodeValue = value;\n      el.setAttributeNode(attr);\n    }\n  },\n  endElement: function endElement(namespaceURI, localName, qName) {\n    var current = this.currentElement;\n    var tagName = current.tagName;\n    this.currentElement = current.parentNode;\n  },\n  startPrefixMapping: function startPrefixMapping(prefix, uri) {},\n  endPrefixMapping: function endPrefixMapping(prefix) {},\n  processingInstruction: function processingInstruction(target, data) {\n    var ins = this.doc.createProcessingInstruction(target, data);\n    this.locator && position(this.locator, ins);\n    appendElement(this, ins);\n  },\n  ignorableWhitespace: function ignorableWhitespace(ch, start, length) {},\n  characters: function characters(chars, start, length) {\n    chars = _toString.apply(this, arguments); //console.log(chars)\n\n    if (chars) {\n      if (this.cdata) {\n        var charNode = this.doc.createCDATASection(chars);\n      } else {\n        var charNode = this.doc.createTextNode(chars);\n      }\n\n      if (this.currentElement) {\n        this.currentElement.appendChild(charNode);\n      } else if (/^\\s*$/.test(chars)) {\n        this.doc.appendChild(charNode); //process xml\n      }\n\n      this.locator && position(this.locator, charNode);\n    }\n  },\n  skippedEntity: function skippedEntity(name) {},\n  endDocument: function endDocument() {\n    this.doc.normalize();\n  },\n  setDocumentLocator: function setDocumentLocator(locator) {\n    if (this.locator = locator) {\n      // && !('lineNumber' in locator)){\n      locator.lineNumber = 0;\n    }\n  },\n  //LexicalHandler\n  comment: function comment(chars, start, length) {\n    chars = _toString.apply(this, arguments);\n    var comm = this.doc.createComment(chars);\n    this.locator && position(this.locator, comm);\n    appendElement(this, comm);\n  },\n  startCDATA: function startCDATA() {\n    //used in characters() methods\n    this.cdata = true;\n  },\n  endCDATA: function endCDATA() {\n    this.cdata = false;\n  },\n  startDTD: function startDTD(name, publicId, systemId) {\n    var impl = this.doc.implementation;\n\n    if (impl && impl.createDocumentType) {\n      var dt = impl.createDocumentType(name, publicId, systemId);\n      this.locator && position(this.locator, dt);\n      appendElement(this, dt);\n    }\n  },\n\n  /**\r\n   * @see org.xml.sax.ErrorHandler\r\n   * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n   */\n  warning: function warning(error) {\n    console.warn('[xmldom warning]\\t' + error, _locator(this.locator));\n  },\n  error: function error(_error) {\n    console.error('[xmldom error]\\t' + _error, _locator(this.locator));\n  },\n  fatalError: function fatalError(error) {\n    console.error('[xmldom fatalError]\\t' + error, _locator(this.locator));\n    throw error;\n  }\n};\n\nfunction _locator(l) {\n  if (l) {\n    return '\\n@' + (l.systemId || '') + '#[line:' + l.lineNumber + ',col:' + l.columnNumber + ']';\n  }\n}\n\nfunction _toString(chars, start, length) {\n  if (typeof chars == 'string') {\n    return chars.substr(start, length);\n  } else {\n    //java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n    if (chars.length >= start + length || start) {\n      return new java.lang.String(chars, start, length) + '';\n    }\n\n    return chars;\n  }\n}\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\n\n\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g, function (key) {\n  DOMHandler.prototype[key] = function () {\n    return null;\n  };\n});\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\n\nfunction appendElement(hander, node) {\n  if (!hander.currentElement) {\n    hander.doc.appendChild(node);\n  } else {\n    hander.currentElement.appendChild(node);\n  }\n} //appendChild and setAttributeNS are preformance key\n//if(typeof require == 'function'){\n\n\nvar XMLReader = require('./sax').XMLReader;\n\nvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\n\nexports.XMLSerializer = require('./dom').XMLSerializer;\nexports.DOMParser = DOMParser; //}","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n */\nvar ONE_SECOND_IN_TS = 90000,\n    // 90kHz clock\nsecondsToVideoTs,\n    secondsToAudioTs,\n    videoTsToSeconds,\n    audioTsToSeconds,\n    audioTsToVideoTs,\n    videoTsToAudioTs,\n    metadataTsToSeconds;\n\nsecondsToVideoTs = function secondsToVideoTs(seconds) {\n  return seconds * ONE_SECOND_IN_TS;\n};\n\nsecondsToAudioTs = function secondsToAudioTs(seconds, sampleRate) {\n  return seconds * sampleRate;\n};\n\nvideoTsToSeconds = function videoTsToSeconds(timestamp) {\n  return timestamp / ONE_SECOND_IN_TS;\n};\n\naudioTsToSeconds = function audioTsToSeconds(timestamp, sampleRate) {\n  return timestamp / sampleRate;\n};\n\naudioTsToVideoTs = function audioTsToVideoTs(timestamp, sampleRate) {\n  return secondsToVideoTs(audioTsToSeconds(timestamp, sampleRate));\n};\n\nvideoTsToAudioTs = function videoTsToAudioTs(timestamp, sampleRate) {\n  return secondsToAudioTs(videoTsToSeconds(timestamp), sampleRate);\n};\n/**\n * Adjust ID3 tag or caption timing information by the timeline pts values\n * (if keepOriginalTimestamps is false) and convert to seconds\n */\n\n\nmetadataTsToSeconds = function metadataTsToSeconds(timestamp, timelineStartPts, keepOriginalTimestamps) {\n  return videoTsToSeconds(keepOriginalTimestamps ? timestamp : timestamp - timelineStartPts);\n};\n\nmodule.exports = {\n  ONE_SECOND_IN_TS: ONE_SECOND_IN_TS,\n  secondsToVideoTs: secondsToVideoTs,\n  secondsToAudioTs: secondsToAudioTs,\n  videoTsToSeconds: videoTsToSeconds,\n  audioTsToSeconds: audioTsToSeconds,\n  audioTsToVideoTs: audioTsToVideoTs,\n  videoTsToAudioTs: videoTsToAudioTs,\n  metadataTsToSeconds: metadataTsToSeconds\n};","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/*\n * pkcs7.pad\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\nvar PADDING = void 0;\n/**\n * Returns a new Uint8Array that is padded with PKCS#7 padding.\n * @param plaintext {Uint8Array} the input bytes before encryption\n * @return {Uint8Array} the padded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\n\nfunction pad(plaintext) {\n  var padding = PADDING[plaintext.byteLength % 16 || 0];\n  var result = new Uint8Array(plaintext.byteLength + padding.length);\n  result.set(plaintext);\n  result.set(padding, plaintext.byteLength);\n  return result;\n} // pre-define the padding values\n\n\nPADDING = [[16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16], [15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15], [14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14], [13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13], [12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12], [11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11], [10, 10, 10, 10, 10, 10, 10, 10, 10, 10], [9, 9, 9, 9, 9, 9, 9, 9, 9], [8, 8, 8, 8, 8, 8, 8, 8], [7, 7, 7, 7, 7, 7, 7], [6, 6, 6, 6, 6, 6], [5, 5, 5, 5, 5], [4, 4, 4, 4], [3, 3, 3], [2, 2], [1]];\n/**\n * Returns the subarray of a Uint8Array without PKCS#7 padding.\n * @param padded {Uint8Array} unencrypted bytes that have been padded\n * @return {Uint8Array} the unpadded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\n\nfunction unpad(padded) {\n  return padded.subarray(0, padded.byteLength - padded[padded.byteLength - 1]);\n}\n\nvar version = \"1.0.2\";\nexport { pad, unpad, version as VERSION };","import { unpad } from 'pkcs7';\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n/**\n * @file aes.js\n *\n * This file contains an adaptation of the AES decryption algorithm\n * from the Standford Javascript Cryptography Library. That work is\n * covered by the following copyright and permissions notice:\n *\n * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR\n * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN\n * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation\n * are those of the authors and should not be interpreted as representing\n * official policies, either expressed or implied, of the authors.\n */\n\n/**\n * Expand the S-box tables.\n *\n * @private\n */\n\n\nvar precompute = function precompute() {\n  var tables = [[[], [], [], [], []], [[], [], [], [], []]];\n  var encTable = tables[0];\n  var decTable = tables[1];\n  var sbox = encTable[4];\n  var sboxInv = decTable[4];\n  var i = void 0;\n  var x = void 0;\n  var xInv = void 0;\n  var d = [];\n  var th = [];\n  var x2 = void 0;\n  var x4 = void 0;\n  var x8 = void 0;\n  var s = void 0;\n  var tEnc = void 0;\n  var tDec = void 0; // Compute double and third tables\n\n  for (i = 0; i < 256; i++) {\n    th[(d[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;\n  }\n\n  for (x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {\n    // Compute sbox\n    s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\n    s = s >> 8 ^ s & 255 ^ 99;\n    sbox[x] = s;\n    sboxInv[s] = x; // Compute MixColumns\n\n    x8 = d[x4 = d[x2 = d[x]]];\n    tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\n    tEnc = d[s] * 0x101 ^ s * 0x1010100;\n\n    for (i = 0; i < 4; i++) {\n      encTable[i][x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n      decTable[i][s] = tDec = tDec << 24 ^ tDec >>> 8;\n    }\n  } // Compactify. Considerable speedup on Firefox.\n\n\n  for (i = 0; i < 5; i++) {\n    encTable[i] = encTable[i].slice(0);\n    decTable[i] = decTable[i].slice(0);\n  }\n\n  return tables;\n};\n\nvar aesTables = null;\n/**\n * Schedule out an AES key for both encryption and decryption. This\n * is a low-level class. Use a cipher mode to do bulk encryption.\n *\n * @class AES\n * @param key {Array} The key as an array of 4, 6 or 8 words.\n */\n\nvar AES = function () {\n  function AES(key) {\n    classCallCheck(this, AES);\n    /**\n     * The expanded S-box and inverse S-box tables. These will be computed\n     * on the client so that we don't have to send them down the wire.\n     *\n     * There are two tables, _tables[0] is for encryption and\n     * _tables[1] is for decryption.\n     *\n     * The first 4 sub-tables are the expanded S-box with MixColumns. The\n     * last (_tables[01][4]) is the S-box itself.\n     *\n     * @private\n     */\n    // if we have yet to precompute the S-box tables\n    // do so now\n\n    if (!aesTables) {\n      aesTables = precompute();\n    } // then make a copy of that object for use\n\n\n    this._tables = [[aesTables[0][0].slice(), aesTables[0][1].slice(), aesTables[0][2].slice(), aesTables[0][3].slice(), aesTables[0][4].slice()], [aesTables[1][0].slice(), aesTables[1][1].slice(), aesTables[1][2].slice(), aesTables[1][3].slice(), aesTables[1][4].slice()]];\n    var i = void 0;\n    var j = void 0;\n    var tmp = void 0;\n    var encKey = void 0;\n    var decKey = void 0;\n    var sbox = this._tables[0][4];\n    var decTable = this._tables[1];\n    var keyLen = key.length;\n    var rcon = 1;\n\n    if (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {\n      throw new Error('Invalid aes key size');\n    }\n\n    encKey = key.slice(0);\n    decKey = [];\n    this._key = [encKey, decKey]; // schedule encryption keys\n\n    for (i = keyLen; i < 4 * keyLen + 28; i++) {\n      tmp = encKey[i - 1]; // apply sbox\n\n      if (i % keyLen === 0 || keyLen === 8 && i % keyLen === 4) {\n        tmp = sbox[tmp >>> 24] << 24 ^ sbox[tmp >> 16 & 255] << 16 ^ sbox[tmp >> 8 & 255] << 8 ^ sbox[tmp & 255]; // shift rows and add rcon\n\n        if (i % keyLen === 0) {\n          tmp = tmp << 8 ^ tmp >>> 24 ^ rcon << 24;\n          rcon = rcon << 1 ^ (rcon >> 7) * 283;\n        }\n      }\n\n      encKey[i] = encKey[i - keyLen] ^ tmp;\n    } // schedule decryption keys\n\n\n    for (j = 0; i; j++, i--) {\n      tmp = encKey[j & 3 ? i : i - 4];\n\n      if (i <= 4 || j < 4) {\n        decKey[j] = tmp;\n      } else {\n        decKey[j] = decTable[0][sbox[tmp >>> 24]] ^ decTable[1][sbox[tmp >> 16 & 255]] ^ decTable[2][sbox[tmp >> 8 & 255]] ^ decTable[3][sbox[tmp & 255]];\n      }\n    }\n  }\n  /**\n   * Decrypt 16 bytes, specified as four 32-bit words.\n   *\n   * @param {Number} encrypted0 the first word to decrypt\n   * @param {Number} encrypted1 the second word to decrypt\n   * @param {Number} encrypted2 the third word to decrypt\n   * @param {Number} encrypted3 the fourth word to decrypt\n   * @param {Int32Array} out the array to write the decrypted words\n   * into\n   * @param {Number} offset the offset into the output array to start\n   * writing results\n   * @return {Array} The plaintext.\n   */\n\n\n  AES.prototype.decrypt = function decrypt(encrypted0, encrypted1, encrypted2, encrypted3, out, offset) {\n    var key = this._key[1]; // state variables a,b,c,d are loaded with pre-whitened data\n\n    var a = encrypted0 ^ key[0];\n    var b = encrypted3 ^ key[1];\n    var c = encrypted2 ^ key[2];\n    var d = encrypted1 ^ key[3];\n    var a2 = void 0;\n    var b2 = void 0;\n    var c2 = void 0; // key.length === 2 ?\n\n    var nInnerRounds = key.length / 4 - 2;\n    var i = void 0;\n    var kIndex = 4;\n    var table = this._tables[1]; // load up the tables\n\n    var table0 = table[0];\n    var table1 = table[1];\n    var table2 = table[2];\n    var table3 = table[3];\n    var sbox = table[4]; // Inner rounds. Cribbed from OpenSSL.\n\n    for (i = 0; i < nInnerRounds; i++) {\n      a2 = table0[a >>> 24] ^ table1[b >> 16 & 255] ^ table2[c >> 8 & 255] ^ table3[d & 255] ^ key[kIndex];\n      b2 = table0[b >>> 24] ^ table1[c >> 16 & 255] ^ table2[d >> 8 & 255] ^ table3[a & 255] ^ key[kIndex + 1];\n      c2 = table0[c >>> 24] ^ table1[d >> 16 & 255] ^ table2[a >> 8 & 255] ^ table3[b & 255] ^ key[kIndex + 2];\n      d = table0[d >>> 24] ^ table1[a >> 16 & 255] ^ table2[b >> 8 & 255] ^ table3[c & 255] ^ key[kIndex + 3];\n      kIndex += 4;\n      a = a2;\n      b = b2;\n      c = c2;\n    } // Last round.\n\n\n    for (i = 0; i < 4; i++) {\n      out[(3 & -i) + offset] = sbox[a >>> 24] << 24 ^ sbox[b >> 16 & 255] << 16 ^ sbox[c >> 8 & 255] << 8 ^ sbox[d & 255] ^ key[kIndex++];\n      a2 = a;\n      a = b;\n      b = c;\n      c = d;\n      d = a2;\n    }\n  };\n\n  return AES;\n}();\n/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\n\n\nvar Stream = function () {\n  function Stream() {\n    classCallCheck(this, Stream);\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {String} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  Stream.prototype.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  };\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {String} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {Boolean} if we could turn it off or not\n   */\n\n\n  Stream.prototype.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  };\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {String} type the event name\n   */\n\n\n  Stream.prototype.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  };\n  /**\n   * Destroys the stream and cleans up.\n   */\n\n\n  Stream.prototype.dispose = function dispose() {\n    this.listeners = {};\n  };\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n\n\n  Stream.prototype.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n/**\n * @file async-stream.js\n */\n\n/**\n * A wrapper around the Stream class to use setTiemout\n * and run stream \"jobs\" Asynchronously\n *\n * @class AsyncStream\n * @extends Stream\n */\n\n\nvar AsyncStream = function (_Stream) {\n  inherits(AsyncStream, _Stream);\n\n  function AsyncStream() {\n    classCallCheck(this, AsyncStream);\n\n    var _this = possibleConstructorReturn(this, _Stream.call(this, Stream));\n\n    _this.jobs = [];\n    _this.delay = 1;\n    _this.timeout_ = null;\n    return _this;\n  }\n  /**\n   * process an async job\n   *\n   * @private\n   */\n\n\n  AsyncStream.prototype.processJob_ = function processJob_() {\n    this.jobs.shift()();\n\n    if (this.jobs.length) {\n      this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n    } else {\n      this.timeout_ = null;\n    }\n  };\n  /**\n   * push a job into the stream\n   *\n   * @param {Function} job the job to push into the stream\n   */\n\n\n  AsyncStream.prototype.push = function push(job) {\n    this.jobs.push(job);\n\n    if (!this.timeout_) {\n      this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n    }\n  };\n\n  return AsyncStream;\n}(Stream);\n/**\n * @file decrypter.js\n *\n * An asynchronous implementation of AES-128 CBC decryption with\n * PKCS#7 padding.\n */\n\n/**\n * Convert network-order (big-endian) bytes into their little-endian\n * representation.\n */\n\n\nvar ntoh = function ntoh(word) {\n  return word << 24 | (word & 0xff00) << 8 | (word & 0xff0000) >> 8 | word >>> 24;\n};\n/**\n * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint32Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * use for the first round of CBC.\n * @return {Uint8Array} the decrypted bytes\n *\n * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n * @see https://tools.ietf.org/html/rfc2315\n */\n\n\nvar decrypt = function decrypt(encrypted, key, initVector) {\n  // word-level access to the encrypted bytes\n  var encrypted32 = new Int32Array(encrypted.buffer, encrypted.byteOffset, encrypted.byteLength >> 2);\n  var decipher = new AES(Array.prototype.slice.call(key)); // byte and word-level access for the decrypted output\n\n  var decrypted = new Uint8Array(encrypted.byteLength);\n  var decrypted32 = new Int32Array(decrypted.buffer); // temporary variables for working with the IV, encrypted, and\n  // decrypted data\n\n  var init0 = void 0;\n  var init1 = void 0;\n  var init2 = void 0;\n  var init3 = void 0;\n  var encrypted0 = void 0;\n  var encrypted1 = void 0;\n  var encrypted2 = void 0;\n  var encrypted3 = void 0; // iteration variable\n\n  var wordIx = void 0; // pull out the words of the IV to ensure we don't modify the\n  // passed-in reference and easier access\n\n  init0 = initVector[0];\n  init1 = initVector[1];\n  init2 = initVector[2];\n  init3 = initVector[3]; // decrypt four word sequences, applying cipher-block chaining (CBC)\n  // to each decrypted block\n\n  for (wordIx = 0; wordIx < encrypted32.length; wordIx += 4) {\n    // convert big-endian (network order) words into little-endian\n    // (javascript order)\n    encrypted0 = ntoh(encrypted32[wordIx]);\n    encrypted1 = ntoh(encrypted32[wordIx + 1]);\n    encrypted2 = ntoh(encrypted32[wordIx + 2]);\n    encrypted3 = ntoh(encrypted32[wordIx + 3]); // decrypt the block\n\n    decipher.decrypt(encrypted0, encrypted1, encrypted2, encrypted3, decrypted32, wordIx); // XOR with the IV, and restore network byte-order to obtain the\n    // plaintext\n\n    decrypted32[wordIx] = ntoh(decrypted32[wordIx] ^ init0);\n    decrypted32[wordIx + 1] = ntoh(decrypted32[wordIx + 1] ^ init1);\n    decrypted32[wordIx + 2] = ntoh(decrypted32[wordIx + 2] ^ init2);\n    decrypted32[wordIx + 3] = ntoh(decrypted32[wordIx + 3] ^ init3); // setup the IV for the next round\n\n    init0 = encrypted0;\n    init1 = encrypted1;\n    init2 = encrypted2;\n    init3 = encrypted3;\n  }\n\n  return decrypted;\n};\n/**\n * The `Decrypter` class that manages decryption of AES\n * data through `AsyncStream` objects and the `decrypt`\n * function\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint32Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * @param {Function} done the function to run when done\n * @class Decrypter\n */\n\n\nvar Decrypter = function () {\n  function Decrypter(encrypted, key, initVector, done) {\n    classCallCheck(this, Decrypter);\n    var step = Decrypter.STEP;\n    var encrypted32 = new Int32Array(encrypted.buffer);\n    var decrypted = new Uint8Array(encrypted.byteLength);\n    var i = 0;\n    this.asyncStream_ = new AsyncStream(); // split up the encryption job and do the individual chunks asynchronously\n\n    this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n\n    for (i = step; i < encrypted32.length; i += step) {\n      initVector = new Uint32Array([ntoh(encrypted32[i - 4]), ntoh(encrypted32[i - 3]), ntoh(encrypted32[i - 2]), ntoh(encrypted32[i - 1])]);\n      this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n    } // invoke the done() callback when everything is finished\n\n\n    this.asyncStream_.push(function () {\n      // remove pkcs#7 padding from the decrypted bytes\n      done(null, unpad(decrypted));\n    });\n  }\n  /**\n   * a getter for step the maximum number of bytes to process at one time\n   *\n   * @return {Number} the value of step 32000\n   */\n\n  /**\n   * @private\n   */\n\n\n  Decrypter.prototype.decryptChunk_ = function decryptChunk_(encrypted, key, initVector, decrypted) {\n    return function () {\n      var bytes = decrypt(encrypted, key, initVector);\n      decrypted.set(bytes, encrypted.byteOffset);\n    };\n  };\n\n  createClass(Decrypter, null, [{\n    key: 'STEP',\n    get: function get$$1() {\n      // 4 * 8000;\n      return 32000;\n    }\n  }]);\n  return Decrypter;\n}();\n/**\n * @file index.js\n *\n * Index module to easily import the primary components of AES-128\n * decryption. Like this:\n *\n * ```js\n * import {Decrypter, decrypt, AsyncStream} from 'aes-decrypter';\n * ```\n */\n\n\nexport { decrypt, Decrypter, AsyncStream };","/*! @name videojs-landscape-fullscreen @version 11.1.0 @license ISC */\n!function (e, n) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = n(require(\"video.js\"), require(\"global/window\")) : \"function\" == typeof define && define.amd ? define([\"video.js\", \"global/window\"], n) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).videojsLandscapeFullscreen = n(e.videojs, e.window);\n}(this, function (e, n) {\n  \"use strict\";\n\n  function t(e) {\n    return e && \"object\" == typeof e && \"default\" in e ? e : {\n      default: e\n    };\n  }\n\n  var o = t(e),\n      i = t(n),\n      l = {\n    fullscreen: {\n      enterOnRotate: !0,\n      alwaysInLandscapeMode: !0,\n      iOS: !0\n    }\n  },\n      r = i.default.screen;\n\n  r.lockOrientationUniversal = function (e) {\n    return r.orientation && r.orientation.lock(e).then(function () {}, function (e) {\n      return console.log(e);\n    }) || r.mozLockOrientation && r.mozLockOrientation(e) || r.msLockOrientation && r.msLockOrientation(e);\n  };\n\n  var a = function a() {\n    return \"number\" == typeof i.default.orientation || r && r.orientation && r.orientation.angle ? i.default.orientation : (o.default.log(\"angle unknown\"), 0);\n  },\n      s = o.default.registerPlugin || o.default.plugin,\n      u = function u(e) {\n    var n = this;\n    (o.default.browser.IS_ANDROID || o.default.browser.IS_IOS) && this.ready(function () {\n      !function (e, n) {\n        e.addClass(\"vjs-landscape-fullscreen\"), n.fullscreen.iOS && o.default.browser.IS_IOS && o.default.browser.IOS_VERSION > 9 && !e.el_.ownerDocument.querySelector(\".bc-iframe\") && (e.tech_.el_.setAttribute(\"playsinline\", \"playsinline\"), e.tech_.supportsFullScreen = function () {\n          return !1;\n        });\n\n        var t = function t() {\n          var n = a();\n          90 !== n && 270 !== n && -90 !== n || !1 === e.paused() && (e.requestFullscreen(), r.lockOrientationUniversal(\"landscape\")), 0 !== n && 180 !== n || e.isFullscreen() && e.exitFullscreen();\n        };\n\n        o.default.browser.IS_IOS ? i.default.addEventListener(\"orientationchange\", t) : r && r.orientation && (r.orientation.onchange = t), e.on(\"fullscreenchange\", function (t) {\n          (o.default.browser.IS_ANDROID || o.default.browser.IS_IOS) && !a() && e.isFullscreen() && n.fullscreen.alwaysInLandscapeMode && r.lockOrientationUniversal(\"landscape\");\n        });\n      }(n, o.default.mergeOptions(l, e));\n    });\n  };\n\n  return s(\"landscapeFullscreen\", u), u.VERSION = \"11.1.0\", fetch(\"https://cdn.jsdelivr.net/npm/videojs-landscape-fullscreen@11.1.0/dist/videojs-landscape-fullscreen.min.js\"), u;\n});","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Utilities to detect basic properties and metadata about TS Segments.\n */\n'use strict';\n\nvar StreamTypes = require('./stream-types.js');\n\nvar parsePid = function parsePid(packet) {\n  var pid = packet[1] & 0x1f;\n  pid <<= 8;\n  pid |= packet[2];\n  return pid;\n};\n\nvar parsePayloadUnitStartIndicator = function parsePayloadUnitStartIndicator(packet) {\n  return !!(packet[1] & 0x40);\n};\n\nvar parseAdaptionField = function parseAdaptionField(packet) {\n  var offset = 0; // if an adaption field is present, its length is specified by the\n  // fifth byte of the TS packet header. The adaptation field is\n  // used to add stuffing to PES packets that don't fill a complete\n  // TS packet, and to specify some forms of timing and control data\n  // that we do not currently use.\n\n  if ((packet[3] & 0x30) >>> 4 > 0x01) {\n    offset += packet[4] + 1;\n  }\n\n  return offset;\n};\n\nvar parseType = function parseType(packet, pmtPid) {\n  var pid = parsePid(packet);\n\n  if (pid === 0) {\n    return 'pat';\n  } else if (pid === pmtPid) {\n    return 'pmt';\n  } else if (pmtPid) {\n    return 'pes';\n  }\n\n  return null;\n};\n\nvar parsePat = function parsePat(packet) {\n  var pusi = parsePayloadUnitStartIndicator(packet);\n  var offset = 4 + parseAdaptionField(packet);\n\n  if (pusi) {\n    offset += packet[offset] + 1;\n  }\n\n  return (packet[offset + 10] & 0x1f) << 8 | packet[offset + 11];\n};\n\nvar parsePmt = function parsePmt(packet) {\n  var programMapTable = {};\n  var pusi = parsePayloadUnitStartIndicator(packet);\n  var payloadOffset = 4 + parseAdaptionField(packet);\n\n  if (pusi) {\n    payloadOffset += packet[payloadOffset] + 1;\n  } // PMTs can be sent ahead of the time when they should actually\n  // take effect. We don't believe this should ever be the case\n  // for HLS but we'll ignore \"forward\" PMT declarations if we see\n  // them. Future PMT declarations have the current_next_indicator\n  // set to zero.\n\n\n  if (!(packet[payloadOffset + 5] & 0x01)) {\n    return;\n  }\n\n  var sectionLength, tableEnd, programInfoLength; // the mapping table ends at the end of the current section\n\n  sectionLength = (packet[payloadOffset + 1] & 0x0f) << 8 | packet[payloadOffset + 2];\n  tableEnd = 3 + sectionLength - 4; // to determine where the table is, we have to figure out how\n  // long the program info descriptors are\n\n  programInfoLength = (packet[payloadOffset + 10] & 0x0f) << 8 | packet[payloadOffset + 11]; // advance the offset to the first entry in the mapping table\n\n  var offset = 12 + programInfoLength;\n\n  while (offset < tableEnd) {\n    var i = payloadOffset + offset; // add an entry that maps the elementary_pid to the stream_type\n\n    programMapTable[(packet[i + 1] & 0x1F) << 8 | packet[i + 2]] = packet[i]; // move to the next table entry\n    // skip past the elementary stream descriptors, if present\n\n    offset += ((packet[i + 3] & 0x0F) << 8 | packet[i + 4]) + 5;\n  }\n\n  return programMapTable;\n};\n\nvar parsePesType = function parsePesType(packet, programMapTable) {\n  var pid = parsePid(packet);\n  var type = programMapTable[pid];\n\n  switch (type) {\n    case StreamTypes.H264_STREAM_TYPE:\n      return 'video';\n\n    case StreamTypes.ADTS_STREAM_TYPE:\n      return 'audio';\n\n    case StreamTypes.METADATA_STREAM_TYPE:\n      return 'timed-metadata';\n\n    default:\n      return null;\n  }\n};\n\nvar parsePesTime = function parsePesTime(packet) {\n  var pusi = parsePayloadUnitStartIndicator(packet);\n\n  if (!pusi) {\n    return null;\n  }\n\n  var offset = 4 + parseAdaptionField(packet);\n\n  if (offset >= packet.byteLength) {\n    // From the H 222.0 MPEG-TS spec\n    // \"For transport stream packets carrying PES packets, stuffing is needed when there\n    //  is insufficient PES packet data to completely fill the transport stream packet\n    //  payload bytes. Stuffing is accomplished by defining an adaptation field longer than\n    //  the sum of the lengths of the data elements in it, so that the payload bytes\n    //  remaining after the adaptation field exactly accommodates the available PES packet\n    //  data.\"\n    //\n    // If the offset is >= the length of the packet, then the packet contains no data\n    // and instead is just adaption field stuffing bytes\n    return null;\n  }\n\n  var pes = null;\n  var ptsDtsFlags; // PES packets may be annotated with a PTS value, or a PTS value\n  // and a DTS value. Determine what combination of values is\n  // available to work with.\n\n  ptsDtsFlags = packet[offset + 7]; // PTS and DTS are normally stored as a 33-bit number.  Javascript\n  // performs all bitwise operations on 32-bit integers but javascript\n  // supports a much greater range (52-bits) of integer using standard\n  // mathematical operations.\n  // We construct a 31-bit value using bitwise operators over the 31\n  // most significant bits and then multiply by 4 (equal to a left-shift\n  // of 2) before we add the final 2 least significant bits of the\n  // timestamp (equal to an OR.)\n\n  if (ptsDtsFlags & 0xC0) {\n    pes = {}; // the PTS and DTS are not written out directly. For information\n    // on how they are encoded, see\n    // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n\n    pes.pts = (packet[offset + 9] & 0x0E) << 27 | (packet[offset + 10] & 0xFF) << 20 | (packet[offset + 11] & 0xFE) << 12 | (packet[offset + 12] & 0xFF) << 5 | (packet[offset + 13] & 0xFE) >>> 3;\n    pes.pts *= 4; // Left shift by 2\n\n    pes.pts += (packet[offset + 13] & 0x06) >>> 1; // OR by the two LSBs\n\n    pes.dts = pes.pts;\n\n    if (ptsDtsFlags & 0x40) {\n      pes.dts = (packet[offset + 14] & 0x0E) << 27 | (packet[offset + 15] & 0xFF) << 20 | (packet[offset + 16] & 0xFE) << 12 | (packet[offset + 17] & 0xFF) << 5 | (packet[offset + 18] & 0xFE) >>> 3;\n      pes.dts *= 4; // Left shift by 2\n\n      pes.dts += (packet[offset + 18] & 0x06) >>> 1; // OR by the two LSBs\n    }\n  }\n\n  return pes;\n};\n\nvar parseNalUnitType = function parseNalUnitType(type) {\n  switch (type) {\n    case 0x05:\n      return 'slice_layer_without_partitioning_rbsp_idr';\n\n    case 0x06:\n      return 'sei_rbsp';\n\n    case 0x07:\n      return 'seq_parameter_set_rbsp';\n\n    case 0x08:\n      return 'pic_parameter_set_rbsp';\n\n    case 0x09:\n      return 'access_unit_delimiter_rbsp';\n\n    default:\n      return null;\n  }\n};\n\nvar videoPacketContainsKeyFrame = function videoPacketContainsKeyFrame(packet) {\n  var offset = 4 + parseAdaptionField(packet);\n  var frameBuffer = packet.subarray(offset);\n  var frameI = 0;\n  var frameSyncPoint = 0;\n  var foundKeyFrame = false;\n  var nalType; // advance the sync point to a NAL start, if necessary\n\n  for (; frameSyncPoint < frameBuffer.byteLength - 3; frameSyncPoint++) {\n    if (frameBuffer[frameSyncPoint + 2] === 1) {\n      // the sync point is properly aligned\n      frameI = frameSyncPoint + 5;\n      break;\n    }\n  }\n\n  while (frameI < frameBuffer.byteLength) {\n    // look at the current byte to determine if we've hit the end of\n    // a NAL unit boundary\n    switch (frameBuffer[frameI]) {\n      case 0:\n        // skip past non-sync sequences\n        if (frameBuffer[frameI - 1] !== 0) {\n          frameI += 2;\n          break;\n        } else if (frameBuffer[frameI - 2] !== 0) {\n          frameI++;\n          break;\n        }\n\n        if (frameSyncPoint + 3 !== frameI - 2) {\n          nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n          if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n            foundKeyFrame = true;\n          }\n        } // drop trailing zeroes\n\n\n        do {\n          frameI++;\n        } while (frameBuffer[frameI] !== 1 && frameI < frameBuffer.length);\n\n        frameSyncPoint = frameI - 2;\n        frameI += 3;\n        break;\n\n      case 1:\n        // skip past non-sync sequences\n        if (frameBuffer[frameI - 1] !== 0 || frameBuffer[frameI - 2] !== 0) {\n          frameI += 3;\n          break;\n        }\n\n        nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n        if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n          foundKeyFrame = true;\n        }\n\n        frameSyncPoint = frameI - 2;\n        frameI += 3;\n        break;\n\n      default:\n        // the current byte isn't a one or zero, so it cannot be part\n        // of a sync sequence\n        frameI += 3;\n        break;\n    }\n  }\n\n  frameBuffer = frameBuffer.subarray(frameSyncPoint);\n  frameI -= frameSyncPoint;\n  frameSyncPoint = 0; // parse the final nal\n\n  if (frameBuffer && frameBuffer.byteLength > 3) {\n    nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n    if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n      foundKeyFrame = true;\n    }\n  }\n\n  return foundKeyFrame;\n};\n\nmodule.exports = {\n  parseType: parseType,\n  parsePat: parsePat,\n  parsePmt: parsePmt,\n  parsePayloadUnitStartIndicator: parsePayloadUnitStartIndicator,\n  parsePesType: parsePesType,\n  parsePesTime: parsePesTime,\n  videoPacketContainsKeyFrame: videoPacketContainsKeyFrame\n};","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * A lightweight readable stream implemention that handles event dispatching.\n * Objects that inherit from streams should call init in their constructors.\n */\n'use strict';\n\nvar Stream = function Stream() {\n  this.init = function () {\n    var listeners = {};\n    /**\n     * Add a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} the callback to be invoked when an event of\n     * the specified type occurs\n     */\n\n    this.on = function (type, listener) {\n      if (!listeners[type]) {\n        listeners[type] = [];\n      }\n\n      listeners[type] = listeners[type].concat(listener);\n    };\n    /**\n     * Remove a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} a function previously registered for this\n     * type of event through `on`\n     */\n\n\n    this.off = function (type, listener) {\n      var index;\n\n      if (!listeners[type]) {\n        return false;\n      }\n\n      index = listeners[type].indexOf(listener);\n      listeners[type] = listeners[type].slice();\n      listeners[type].splice(index, 1);\n      return index > -1;\n    };\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     * @param type {string} the event name\n     */\n\n\n    this.trigger = function (type) {\n      var callbacks, i, length, args;\n      callbacks = listeners[type];\n\n      if (!callbacks) {\n        return;\n      } // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n\n\n      if (arguments.length === 2) {\n        length = callbacks.length;\n\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = [];\n        i = arguments.length;\n\n        for (i = 1; i < arguments.length; ++i) {\n          args.push(arguments[i]);\n        }\n\n        length = callbacks.length;\n\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    };\n    /**\n     * Destroys the stream and cleans up.\n     */\n\n\n    this.dispose = function () {\n      listeners = {};\n    };\n  };\n};\n/**\n * Forwards all `data` events on this stream to the destination stream. The\n * destination stream should provide a method `push` to receive the data\n * events as they arrive.\n * @param destination {stream} the stream that will receive all `data` events\n * @param autoFlush {boolean} if false, we will not call `flush` on the destination\n *                            when the current stream emits a 'done' event\n * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n */\n\n\nStream.prototype.pipe = function (destination) {\n  this.on('data', function (data) {\n    destination.push(data);\n  });\n  this.on('done', function (flushSource) {\n    destination.flush(flushSource);\n  });\n  this.on('partialdone', function (flushSource) {\n    destination.partialFlush(flushSource);\n  });\n  this.on('endedtimeline', function (flushSource) {\n    destination.endTimeline(flushSource);\n  });\n  this.on('reset', function (flushSource) {\n    destination.reset(flushSource);\n  });\n  return destination;\n}; // Default stream functions that are expected to be overridden to perform\n// actual work. These are provided by the prototype as a sort of no-op\n// implementation so that we don't have to check for their existence in the\n// `pipe` function above.\n\n\nStream.prototype.push = function (data) {\n  this.trigger('data', data);\n};\n\nStream.prototype.flush = function (flushSource) {\n  this.trigger('done', flushSource);\n};\n\nStream.prototype.partialFlush = function (flushSource) {\n  this.trigger('partialdone', flushSource);\n};\n\nStream.prototype.endTimeline = function (flushSource) {\n  this.trigger('endedtimeline', flushSource);\n};\n\nStream.prototype.reset = function (flushSource) {\n  this.trigger('reset', flushSource);\n};\n\nmodule.exports = Stream;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","import libass from \"libass-wasm\"\n\nfunction configure(player, subtitle, fonts) {\n  function configurePlayer(instance, player) {\n    function resizePlayer() {\n      // canvasParent.style.position = \"relative\"\n      canvas.style.display = \"block\"\n      canvas.style.position = \"absolute\"\n\n      if (player && player.el_) {\n        if (player.el_.offsetWidth) {\n          canvas.style.width = player.el_.offsetWidth + \"px\"\n        }\n\n        if (player.el_.offsetHeight) {\n          canvas.style.height = player.el_.offsetHeight + \"px\"\n        }\n      }\n\n      canvas.style.height = player.el_.offsetHeight + \"px\"\n      canvas.style.top = \"0px\" //player.el_.offsetTop + \"px\";\n      canvas.style.left = \"0px\" // player.el_.offsetLeft + \"px\";\n      canvas.style.pointerEvents = \"none\"\n\n      // console.log({\n      //   offsetWidth: player.el_.offsetWidth,\n      //   offsetHeight: player.el_.offsetHeight,\n      //   offsetTop: player.el_.offsetTop,\n      //   offsetLeft: player.el_.offsetLeft,\n      // })\n\n      if (\n        player &&\n        player.el_ &&\n        player.el_.offsetWidth &&\n        player.el_.offsetHeight &&\n        player.el_.offsetTop &&\n        player.el_.offsetLeft\n      ) {\n        instance.resize(\n          player.el_.offsetWidth,\n          player.el_.offsetHeight,\n          player.el_.offsetTop,\n          player.el_.offsetLeft\n        )\n      }\n    }\n    function resizePlayerWithTimeout() {\n      resizePlayer()\n      setTimeout(resizePlayer, 100)\n    }\n    const timeupdate = function () {\n      instance.setCurrentTime(player.currentTime() + instance.timeOffset)\n    }\n\n    player.on(\"timeupdate\", timeupdate)\n\n    player.on(\"playing\", function () {\n      instance.setIsPaused(false, player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"pause\", function () {\n      instance.setIsPaused(true, player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"seeking\", function () {\n      player.off(\"timeupdate\", timeupdate)\n    })\n\n    player.on(\"seeked\", function () {\n      player.on(\"timeupdate\", timeupdate)\n      instance.setCurrentTime(player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"ratechange\", function () {\n      instance.setRate(player.playbackRate())\n    })\n\n    player.on(\"timeupdate\", function () {\n      instance.setCurrentTime(player.currentTime() + instance.timeOffset)\n    })\n\n    player.on(\"waiting\", function () {\n      instance.setIsPaused(true, player.currentTime() + instance.timeOffset)\n    })\n\n    document.addEventListener(\"fullscreenchange\", resizePlayerWithTimeout);\n    document.addEventListener(\"mozfullscreenchange\", resizePlayerWithTimeout);\n    document.addEventListener(\"webkitfullscreenchange\", resizePlayerWithTimeout);\n    document.addEventListener(\"msfullscreenchange\", resizePlayerWithTimeout);\n    window.addEventListener(\"resize\", resizePlayerWithTimeout);\n\n    // Support Element Resize Observer\n    // if (typeof ResizeObserver !== \"undefined\") {\n    //   self.ro = new ResizeObserver(instance.resizeWithTimeout);\n    //   self.ro.observe(self.video);\n    // }\n\n    if (player.videoWidth() > 0) {\n      // instance.resize(840, 460, 0, 0);\n      resizePlayerWithTimeout()\n    } else {\n      player.on(\"loadedmetadata\", function (e) {\n        // e.target.removeEventListener(e.type, arguments.callee)\n        // instance.resize(840, 460, 0, 0);\n        resizePlayerWithTimeout()\n      })\n    }\n\n    return {\n      dispose: function dispose() {\n        if (octopusInstance) {\n          octopusInstance.dispose()\n        }\n\n        document.removeEventListener(\n          \"fullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        document.removeEventListener(\n          \"mozfullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        document.removeEventListener(\n          \"webkitfullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        document.removeEventListener(\n          \"msfullscreenchange\",\n          resizePlayerWithTimeout\n        )\n        window.removeEventListener(\"resize\", resizePlayerWithTimeout)\n      },\n    };\n  }\n  // const video = document.getElementById(\"vjs_video_3_youtube_api\")\n  const video = document.querySelector(\"iframe[id^='vjs_video']\")\n  const canvas = document.createElement(\"canvas\")\n  const canvasParent = document.createElement(\"div\")\n\n  canvas.className = \"libassjs-canvas\"\n  canvas.style.display = \"none\"\n\n  canvasParent.className = \"libassjs-canvas-parent\"\n  canvasParent.appendChild(canvas)\n\n  if (video.nextSibling) {\n    video.parentNode.insertBefore(canvasParent, video.nextSibling)\n  } else {\n    video.parentNode.appendChild(canvasParent)\n  }\n\n  var options = {\n    canvas,\n    subUrl: subtitle,\n    fonts,\n    debug: false,\n    onError: function (err) {\n      console.log(err)\n    },\n    workerUrl: \"/octopus/subtitles-octopus-worker.js\",\n  }\n\n  const octopusInstance = new libass(options)\n  return configurePlayer(octopusInstance, player)\n}\n\nexport default configure\n","import React from \"react\"\nimport videojs from \"video.js\"\nimport \"videojs-youtube\"\nimport \"videojs-landscape-fullscreen\"\n// import \"video.js/dist/video-js.css\"\nimport subtitles from \"../utils/subtitles\"\n\nclass Player extends React.Component {\n  componentDidMount() {\n    const options = {\n      html5: {\n        hls: {\n          overrideNative: !videojs.browser.IS_SAFARI,\n        },\n      },\n      ...this.props,\n    }\n    this.player = videojs(this.videoNode, options, function onPlayerReady() {\n      // console.log('onPlayerReady', this);\n    });\n\n    console.log(\"this.player.landscapeFullscreen\", this.player.landscapeFullscreen);\n\n    this.player.landscapeFullscreen({\n      fullscreen: {\n        enterOnRotate: true,\n        alwaysInLandscapeMode: true,\n        iOS: true,\n      },\n    });\n\n    this.subtitles = null;\n\n    this.player.addClass(`vjs-theme-${this.props.themeName}`)\n\n    this.player.on(\"play\", this.props.onPlay)\n    this.player.on(\"ready\", () => {\n      this.subtitles = subtitles(\n        this.player,\n        // `/bands${this.props.sources[0].url}/subtitle.ass`,\n        this.props.sources[0].subtitle,\n        this.props.sources[0].fonts.map(font => `/fonts/${font}`)\n      )\n    })\n  }\n\n  componentWillUnmount() {\n    if (this.player) {\n      this.player.dispose()\n      console.log(\">>> Player is dispose\")\n    }\n\n    if (this.subtitles) {\n      this.subtitles.dispose()\n      this.subtitles = null;\n      console.log('>>> Subs are dispose');\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.themeName !== this.props.themeName) {\n      this.player.removeClass(`vjs-theme-${this.props.themeName}`)\n      this.player.addClass(`vjs-theme-${nextProps.themeName}`)\n\n      this.player.src(nextProps.sources)\n      this.player.poster(nextProps.poster)\n    }\n  }\n  render() {\n    return (\n      <div>\n        <div data-vjs-player>\n          {/* eslint-disable jsx-a11y/media-has-caption */}\n          <video\n            ref={node => (this.videoNode = node)}\n            className=\"video-js vjs-16-9 vjs-big-play-centered\"\n            playsInline={this.props.playsInline}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Player\n","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Reads in-band caption information from a video elementary\n * stream. Captions must follow the CEA-708 standard for injection\n * into an MPEG-2 transport streams.\n * @see https://en.wikipedia.org/wiki/CEA-708\n * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf\n */\n'use strict'; // -----------------\n// Link To Transport\n// -----------------\n\nvar Stream = require('../utils/stream');\n\nvar cea708Parser = require('../tools/caption-packet-parser');\n\nvar CaptionStream = function CaptionStream() {\n  CaptionStream.prototype.init.call(this);\n  this.captionPackets_ = [];\n  this.ccStreams_ = [new Cea608Stream(0, 0), // eslint-disable-line no-use-before-define\n  new Cea608Stream(0, 1), // eslint-disable-line no-use-before-define\n  new Cea608Stream(1, 0), // eslint-disable-line no-use-before-define\n  new Cea608Stream(1, 1) // eslint-disable-line no-use-before-define\n  ];\n  this.reset(); // forward data and done events from CCs to this CaptionStream\n\n  this.ccStreams_.forEach(function (cc) {\n    cc.on('data', this.trigger.bind(this, 'data'));\n    cc.on('partialdone', this.trigger.bind(this, 'partialdone'));\n    cc.on('done', this.trigger.bind(this, 'done'));\n  }, this);\n};\n\nCaptionStream.prototype = new Stream();\n\nCaptionStream.prototype.push = function (event) {\n  var sei, userData, newCaptionPackets; // only examine SEI NALs\n\n  if (event.nalUnitType !== 'sei_rbsp') {\n    return;\n  } // parse the sei\n\n\n  sei = cea708Parser.parseSei(event.escapedRBSP); // ignore everything but user_data_registered_itu_t_t35\n\n  if (sei.payloadType !== cea708Parser.USER_DATA_REGISTERED_ITU_T_T35) {\n    return;\n  } // parse out the user data payload\n\n\n  userData = cea708Parser.parseUserData(sei); // ignore unrecognized userData\n\n  if (!userData) {\n    return;\n  } // Sometimes, the same segment # will be downloaded twice. To stop the\n  // caption data from being processed twice, we track the latest dts we've\n  // received and ignore everything with a dts before that. However, since\n  // data for a specific dts can be split across packets on either side of\n  // a segment boundary, we need to make sure we *don't* ignore the packets\n  // from the *next* segment that have dts === this.latestDts_. By constantly\n  // tracking the number of packets received with dts === this.latestDts_, we\n  // know how many should be ignored once we start receiving duplicates.\n\n\n  if (event.dts < this.latestDts_) {\n    // We've started getting older data, so set the flag.\n    this.ignoreNextEqualDts_ = true;\n    return;\n  } else if (event.dts === this.latestDts_ && this.ignoreNextEqualDts_) {\n    this.numSameDts_--;\n\n    if (!this.numSameDts_) {\n      // We've received the last duplicate packet, time to start processing again\n      this.ignoreNextEqualDts_ = false;\n    }\n\n    return;\n  } // parse out CC data packets and save them for later\n\n\n  newCaptionPackets = cea708Parser.parseCaptionPackets(event.pts, userData);\n  this.captionPackets_ = this.captionPackets_.concat(newCaptionPackets);\n\n  if (this.latestDts_ !== event.dts) {\n    this.numSameDts_ = 0;\n  }\n\n  this.numSameDts_++;\n  this.latestDts_ = event.dts;\n};\n\nCaptionStream.prototype.flushCCStreams = function (flushType) {\n  this.ccStreams_.forEach(function (cc) {\n    return flushType === 'flush' ? cc.flush() : cc.partialFlush();\n  }, this);\n};\n\nCaptionStream.prototype.flushStream = function (flushType) {\n  // make sure we actually parsed captions before proceeding\n  if (!this.captionPackets_.length) {\n    this.flushCCStreams(flushType);\n    return;\n  } // In Chrome, the Array#sort function is not stable so add a\n  // presortIndex that we can use to ensure we get a stable-sort\n\n\n  this.captionPackets_.forEach(function (elem, idx) {\n    elem.presortIndex = idx;\n  }); // sort caption byte-pairs based on their PTS values\n\n  this.captionPackets_.sort(function (a, b) {\n    if (a.pts === b.pts) {\n      return a.presortIndex - b.presortIndex;\n    }\n\n    return a.pts - b.pts;\n  });\n  this.captionPackets_.forEach(function (packet) {\n    if (packet.type < 2) {\n      // Dispatch packet to the right Cea608Stream\n      this.dispatchCea608Packet(packet);\n    } // this is where an 'else' would go for a dispatching packets\n    // to a theoretical Cea708Stream that handles SERVICEn data\n\n  }, this);\n  this.captionPackets_.length = 0;\n  this.flushCCStreams(flushType);\n};\n\nCaptionStream.prototype.flush = function () {\n  return this.flushStream('flush');\n}; // Only called if handling partial data\n\n\nCaptionStream.prototype.partialFlush = function () {\n  return this.flushStream('partialFlush');\n};\n\nCaptionStream.prototype.reset = function () {\n  this.latestDts_ = null;\n  this.ignoreNextEqualDts_ = false;\n  this.numSameDts_ = 0;\n  this.activeCea608Channel_ = [null, null];\n  this.ccStreams_.forEach(function (ccStream) {\n    ccStream.reset();\n  });\n}; // From the CEA-608 spec:\n\n/*\n * When XDS sub-packets are interleaved with other services, the end of each sub-packet shall be followed\n * by a control pair to change to a different service. When any of the control codes from 0x10 to 0x1F is\n * used to begin a control code pair, it indicates the return to captioning or Text data. The control code pair\n * and subsequent data should then be processed according to the FCC rules. It may be necessary for the\n * line 21 data encoder to automatically insert a control code pair (i.e. RCL, RU2, RU3, RU4, RDC, or RTD)\n * to switch to captioning or Text.\n*/\n// With that in mind, we ignore any data between an XDS control code and a\n// subsequent closed-captioning control code.\n\n\nCaptionStream.prototype.dispatchCea608Packet = function (packet) {\n  // NOTE: packet.type is the CEA608 field\n  if (this.setsTextOrXDSActive(packet)) {\n    this.activeCea608Channel_[packet.type] = null;\n  } else if (this.setsChannel1Active(packet)) {\n    this.activeCea608Channel_[packet.type] = 0;\n  } else if (this.setsChannel2Active(packet)) {\n    this.activeCea608Channel_[packet.type] = 1;\n  }\n\n  if (this.activeCea608Channel_[packet.type] === null) {\n    // If we haven't received anything to set the active channel, or the\n    // packets are Text/XDS data, discard the data; we don't want jumbled\n    // captions\n    return;\n  }\n\n  this.ccStreams_[(packet.type << 1) + this.activeCea608Channel_[packet.type]].push(packet);\n};\n\nCaptionStream.prototype.setsChannel1Active = function (packet) {\n  return (packet.ccData & 0x7800) === 0x1000;\n};\n\nCaptionStream.prototype.setsChannel2Active = function (packet) {\n  return (packet.ccData & 0x7800) === 0x1800;\n};\n\nCaptionStream.prototype.setsTextOrXDSActive = function (packet) {\n  return (packet.ccData & 0x7100) === 0x0100 || (packet.ccData & 0x78fe) === 0x102a || (packet.ccData & 0x78fe) === 0x182a;\n}; // ----------------------\n// Session to Application\n// ----------------------\n// This hash maps non-ASCII, special, and extended character codes to their\n// proper Unicode equivalent. The first keys that are only a single byte\n// are the non-standard ASCII characters, which simply map the CEA608 byte\n// to the standard ASCII/Unicode. The two-byte keys that follow are the CEA608\n// character codes, but have their MSB bitmasked with 0x03 so that a lookup\n// can be performed regardless of the field and data channel on which the\n// character code was received.\n\n\nvar CHARACTER_TRANSLATION = {\n  0x2a: 0xe1,\n  // á\n  0x5c: 0xe9,\n  // é\n  0x5e: 0xed,\n  // í\n  0x5f: 0xf3,\n  // ó\n  0x60: 0xfa,\n  // ú\n  0x7b: 0xe7,\n  // ç\n  0x7c: 0xf7,\n  // ÷\n  0x7d: 0xd1,\n  // Ñ\n  0x7e: 0xf1,\n  // ñ\n  0x7f: 0x2588,\n  // █\n  0x0130: 0xae,\n  // ®\n  0x0131: 0xb0,\n  // °\n  0x0132: 0xbd,\n  // ½\n  0x0133: 0xbf,\n  // ¿\n  0x0134: 0x2122,\n  // ™\n  0x0135: 0xa2,\n  // ¢\n  0x0136: 0xa3,\n  // £\n  0x0137: 0x266a,\n  // ♪\n  0x0138: 0xe0,\n  // à\n  0x0139: 0xa0,\n  //\n  0x013a: 0xe8,\n  // è\n  0x013b: 0xe2,\n  // â\n  0x013c: 0xea,\n  // ê\n  0x013d: 0xee,\n  // î\n  0x013e: 0xf4,\n  // ô\n  0x013f: 0xfb,\n  // û\n  0x0220: 0xc1,\n  // Á\n  0x0221: 0xc9,\n  // É\n  0x0222: 0xd3,\n  // Ó\n  0x0223: 0xda,\n  // Ú\n  0x0224: 0xdc,\n  // Ü\n  0x0225: 0xfc,\n  // ü\n  0x0226: 0x2018,\n  // ‘\n  0x0227: 0xa1,\n  // ¡\n  0x0228: 0x2a,\n  // *\n  0x0229: 0x27,\n  // '\n  0x022a: 0x2014,\n  // —\n  0x022b: 0xa9,\n  // ©\n  0x022c: 0x2120,\n  // ℠\n  0x022d: 0x2022,\n  // •\n  0x022e: 0x201c,\n  // “\n  0x022f: 0x201d,\n  // ”\n  0x0230: 0xc0,\n  // À\n  0x0231: 0xc2,\n  // Â\n  0x0232: 0xc7,\n  // Ç\n  0x0233: 0xc8,\n  // È\n  0x0234: 0xca,\n  // Ê\n  0x0235: 0xcb,\n  // Ë\n  0x0236: 0xeb,\n  // ë\n  0x0237: 0xce,\n  // Î\n  0x0238: 0xcf,\n  // Ï\n  0x0239: 0xef,\n  // ï\n  0x023a: 0xd4,\n  // Ô\n  0x023b: 0xd9,\n  // Ù\n  0x023c: 0xf9,\n  // ù\n  0x023d: 0xdb,\n  // Û\n  0x023e: 0xab,\n  // «\n  0x023f: 0xbb,\n  // »\n  0x0320: 0xc3,\n  // Ã\n  0x0321: 0xe3,\n  // ã\n  0x0322: 0xcd,\n  // Í\n  0x0323: 0xcc,\n  // Ì\n  0x0324: 0xec,\n  // ì\n  0x0325: 0xd2,\n  // Ò\n  0x0326: 0xf2,\n  // ò\n  0x0327: 0xd5,\n  // Õ\n  0x0328: 0xf5,\n  // õ\n  0x0329: 0x7b,\n  // {\n  0x032a: 0x7d,\n  // }\n  0x032b: 0x5c,\n  // \\\n  0x032c: 0x5e,\n  // ^\n  0x032d: 0x5f,\n  // _\n  0x032e: 0x7c,\n  // |\n  0x032f: 0x7e,\n  // ~\n  0x0330: 0xc4,\n  // Ä\n  0x0331: 0xe4,\n  // ä\n  0x0332: 0xd6,\n  // Ö\n  0x0333: 0xf6,\n  // ö\n  0x0334: 0xdf,\n  // ß\n  0x0335: 0xa5,\n  // ¥\n  0x0336: 0xa4,\n  // ¤\n  0x0337: 0x2502,\n  // │\n  0x0338: 0xc5,\n  // Å\n  0x0339: 0xe5,\n  // å\n  0x033a: 0xd8,\n  // Ø\n  0x033b: 0xf8,\n  // ø\n  0x033c: 0x250c,\n  // ┌\n  0x033d: 0x2510,\n  // ┐\n  0x033e: 0x2514,\n  // └\n  0x033f: 0x2518 // ┘\n\n};\n\nvar getCharFromCode = function getCharFromCode(code) {\n  if (code === null) {\n    return '';\n  }\n\n  code = CHARACTER_TRANSLATION[code] || code;\n  return String.fromCharCode(code);\n}; // the index of the last row in a CEA-608 display buffer\n\n\nvar BOTTOM_ROW = 14; // This array is used for mapping PACs -> row #, since there's no way of\n// getting it through bit logic.\n\nvar ROWS = [0x1100, 0x1120, 0x1200, 0x1220, 0x1500, 0x1520, 0x1600, 0x1620, 0x1700, 0x1720, 0x1000, 0x1300, 0x1320, 0x1400, 0x1420]; // CEA-608 captions are rendered onto a 34x15 matrix of character\n// cells. The \"bottom\" row is the last element in the outer array.\n\nvar createDisplayBuffer = function createDisplayBuffer() {\n  var result = [],\n      i = BOTTOM_ROW + 1;\n\n  while (i--) {\n    result.push('');\n  }\n\n  return result;\n};\n\nvar Cea608Stream = function Cea608Stream(field, dataChannel) {\n  Cea608Stream.prototype.init.call(this);\n  this.field_ = field || 0;\n  this.dataChannel_ = dataChannel || 0;\n  this.name_ = 'CC' + ((this.field_ << 1 | this.dataChannel_) + 1);\n  this.setConstants();\n  this.reset();\n\n  this.push = function (packet) {\n    var data, swap, char0, char1, text; // remove the parity bits\n\n    data = packet.ccData & 0x7f7f; // ignore duplicate control codes; the spec demands they're sent twice\n\n    if (data === this.lastControlCode_) {\n      this.lastControlCode_ = null;\n      return;\n    } // Store control codes\n\n\n    if ((data & 0xf000) === 0x1000) {\n      this.lastControlCode_ = data;\n    } else if (data !== this.PADDING_) {\n      this.lastControlCode_ = null;\n    }\n\n    char0 = data >>> 8;\n    char1 = data & 0xff;\n\n    if (data === this.PADDING_) {\n      return;\n    } else if (data === this.RESUME_CAPTION_LOADING_) {\n      this.mode_ = 'popOn';\n    } else if (data === this.END_OF_CAPTION_) {\n      // If an EOC is received while in paint-on mode, the displayed caption\n      // text should be swapped to non-displayed memory as if it was a pop-on\n      // caption. Because of that, we should explicitly switch back to pop-on\n      // mode\n      this.mode_ = 'popOn';\n      this.clearFormatting(packet.pts); // if a caption was being displayed, it's gone now\n\n      this.flushDisplayed(packet.pts); // flip memory\n\n      swap = this.displayed_;\n      this.displayed_ = this.nonDisplayed_;\n      this.nonDisplayed_ = swap; // start measuring the time to display the caption\n\n      this.startPts_ = packet.pts;\n    } else if (data === this.ROLL_UP_2_ROWS_) {\n      this.rollUpRows_ = 2;\n      this.setRollUp(packet.pts);\n    } else if (data === this.ROLL_UP_3_ROWS_) {\n      this.rollUpRows_ = 3;\n      this.setRollUp(packet.pts);\n    } else if (data === this.ROLL_UP_4_ROWS_) {\n      this.rollUpRows_ = 4;\n      this.setRollUp(packet.pts);\n    } else if (data === this.CARRIAGE_RETURN_) {\n      this.clearFormatting(packet.pts);\n      this.flushDisplayed(packet.pts);\n      this.shiftRowsUp_();\n      this.startPts_ = packet.pts;\n    } else if (data === this.BACKSPACE_) {\n      if (this.mode_ === 'popOn') {\n        this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1);\n      } else {\n        this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);\n      }\n    } else if (data === this.ERASE_DISPLAYED_MEMORY_) {\n      this.flushDisplayed(packet.pts);\n      this.displayed_ = createDisplayBuffer();\n    } else if (data === this.ERASE_NON_DISPLAYED_MEMORY_) {\n      this.nonDisplayed_ = createDisplayBuffer();\n    } else if (data === this.RESUME_DIRECT_CAPTIONING_) {\n      if (this.mode_ !== 'paintOn') {\n        // NOTE: This should be removed when proper caption positioning is\n        // implemented\n        this.flushDisplayed(packet.pts);\n        this.displayed_ = createDisplayBuffer();\n      }\n\n      this.mode_ = 'paintOn';\n      this.startPts_ = packet.pts; // Append special characters to caption text\n    } else if (this.isSpecialCharacter(char0, char1)) {\n      // Bitmask char0 so that we can apply character transformations\n      // regardless of field and data channel.\n      // Then byte-shift to the left and OR with char1 so we can pass the\n      // entire character code to `getCharFromCode`.\n      char0 = (char0 & 0x03) << 8;\n      text = getCharFromCode(char0 | char1);\n      this[this.mode_](packet.pts, text);\n      this.column_++; // Append extended characters to caption text\n    } else if (this.isExtCharacter(char0, char1)) {\n      // Extended characters always follow their \"non-extended\" equivalents.\n      // IE if a \"è\" is desired, you'll always receive \"eè\"; non-compliant\n      // decoders are supposed to drop the \"è\", while compliant decoders\n      // backspace the \"e\" and insert \"è\".\n      // Delete the previous character\n      if (this.mode_ === 'popOn') {\n        this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1);\n      } else {\n        this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);\n      } // Bitmask char0 so that we can apply character transformations\n      // regardless of field and data channel.\n      // Then byte-shift to the left and OR with char1 so we can pass the\n      // entire character code to `getCharFromCode`.\n\n\n      char0 = (char0 & 0x03) << 8;\n      text = getCharFromCode(char0 | char1);\n      this[this.mode_](packet.pts, text);\n      this.column_++; // Process mid-row codes\n    } else if (this.isMidRowCode(char0, char1)) {\n      // Attributes are not additive, so clear all formatting\n      this.clearFormatting(packet.pts); // According to the standard, mid-row codes\n      // should be replaced with spaces, so add one now\n\n      this[this.mode_](packet.pts, ' ');\n      this.column_++;\n\n      if ((char1 & 0xe) === 0xe) {\n        this.addFormatting(packet.pts, ['i']);\n      }\n\n      if ((char1 & 0x1) === 0x1) {\n        this.addFormatting(packet.pts, ['u']);\n      } // Detect offset control codes and adjust cursor\n\n    } else if (this.isOffsetControlCode(char0, char1)) {\n      // Cursor position is set by indent PAC (see below) in 4-column\n      // increments, with an additional offset code of 1-3 to reach any\n      // of the 32 columns specified by CEA-608. So all we need to do\n      // here is increment the column cursor by the given offset.\n      this.column_ += char1 & 0x03; // Detect PACs (Preamble Address Codes)\n    } else if (this.isPAC(char0, char1)) {\n      // There's no logic for PAC -> row mapping, so we have to just\n      // find the row code in an array and use its index :(\n      var row = ROWS.indexOf(data & 0x1f20); // Configure the caption window if we're in roll-up mode\n\n      if (this.mode_ === 'rollUp') {\n        // This implies that the base row is incorrectly set.\n        // As per the recommendation in CEA-608(Base Row Implementation), defer to the number\n        // of roll-up rows set.\n        if (row - this.rollUpRows_ + 1 < 0) {\n          row = this.rollUpRows_ - 1;\n        }\n\n        this.setRollUp(packet.pts, row);\n      }\n\n      if (row !== this.row_) {\n        // formatting is only persistent for current row\n        this.clearFormatting(packet.pts);\n        this.row_ = row;\n      } // All PACs can apply underline, so detect and apply\n      // (All odd-numbered second bytes set underline)\n\n\n      if (char1 & 0x1 && this.formatting_.indexOf('u') === -1) {\n        this.addFormatting(packet.pts, ['u']);\n      }\n\n      if ((data & 0x10) === 0x10) {\n        // We've got an indent level code. Each successive even number\n        // increments the column cursor by 4, so we can get the desired\n        // column position by bit-shifting to the right (to get n/2)\n        // and multiplying by 4.\n        this.column_ = ((data & 0xe) >> 1) * 4;\n      }\n\n      if (this.isColorPAC(char1)) {\n        // it's a color code, though we only support white, which\n        // can be either normal or italicized. white italics can be\n        // either 0x4e or 0x6e depending on the row, so we just\n        // bitwise-and with 0xe to see if italics should be turned on\n        if ((char1 & 0xe) === 0xe) {\n          this.addFormatting(packet.pts, ['i']);\n        }\n      } // We have a normal character in char0, and possibly one in char1\n\n    } else if (this.isNormalChar(char0)) {\n      if (char1 === 0x00) {\n        char1 = null;\n      }\n\n      text = getCharFromCode(char0);\n      text += getCharFromCode(char1);\n      this[this.mode_](packet.pts, text);\n      this.column_ += text.length;\n    } // finish data processing\n\n  };\n};\n\nCea608Stream.prototype = new Stream(); // Trigger a cue point that captures the current state of the\n// display buffer\n\nCea608Stream.prototype.flushDisplayed = function (pts) {\n  var content = this.displayed_ // remove spaces from the start and end of the string\n  .map(function (row) {\n    try {\n      return row.trim();\n    } catch (e) {\n      // Ordinarily, this shouldn't happen. However, caption\n      // parsing errors should not throw exceptions and\n      // break playback.\n      // eslint-disable-next-line no-console\n      console.error('Skipping malformed caption.');\n      return '';\n    }\n  }) // combine all text rows to display in one cue\n  .join('\\n') // and remove blank rows from the start and end, but not the middle\n  .replace(/^\\n+|\\n+$/g, '');\n\n  if (content.length) {\n    this.trigger('data', {\n      startPts: this.startPts_,\n      endPts: pts,\n      text: content,\n      stream: this.name_\n    });\n  }\n};\n/**\n * Zero out the data, used for startup and on seek\n */\n\n\nCea608Stream.prototype.reset = function () {\n  this.mode_ = 'popOn'; // When in roll-up mode, the index of the last row that will\n  // actually display captions. If a caption is shifted to a row\n  // with a lower index than this, it is cleared from the display\n  // buffer\n\n  this.topRow_ = 0;\n  this.startPts_ = 0;\n  this.displayed_ = createDisplayBuffer();\n  this.nonDisplayed_ = createDisplayBuffer();\n  this.lastControlCode_ = null; // Track row and column for proper line-breaking and spacing\n\n  this.column_ = 0;\n  this.row_ = BOTTOM_ROW;\n  this.rollUpRows_ = 2; // This variable holds currently-applied formatting\n\n  this.formatting_ = [];\n};\n/**\n * Sets up control code and related constants for this instance\n */\n\n\nCea608Stream.prototype.setConstants = function () {\n  // The following attributes have these uses:\n  // ext_ :    char0 for mid-row codes, and the base for extended\n  //           chars (ext_+0, ext_+1, and ext_+2 are char0s for\n  //           extended codes)\n  // control_: char0 for control codes, except byte-shifted to the\n  //           left so that we can do this.control_ | CONTROL_CODE\n  // offset_:  char0 for tab offset codes\n  //\n  // It's also worth noting that control codes, and _only_ control codes,\n  // differ between field 1 and field2. Field 2 control codes are always\n  // their field 1 value plus 1. That's why there's the \"| field\" on the\n  // control value.\n  if (this.dataChannel_ === 0) {\n    this.BASE_ = 0x10;\n    this.EXT_ = 0x11;\n    this.CONTROL_ = (0x14 | this.field_) << 8;\n    this.OFFSET_ = 0x17;\n  } else if (this.dataChannel_ === 1) {\n    this.BASE_ = 0x18;\n    this.EXT_ = 0x19;\n    this.CONTROL_ = (0x1c | this.field_) << 8;\n    this.OFFSET_ = 0x1f;\n  } // Constants for the LSByte command codes recognized by Cea608Stream. This\n  // list is not exhaustive. For a more comprehensive listing and semantics see\n  // http://www.gpo.gov/fdsys/pkg/CFR-2010-title47-vol1/pdf/CFR-2010-title47-vol1-sec15-119.pdf\n  // Padding\n\n\n  this.PADDING_ = 0x0000; // Pop-on Mode\n\n  this.RESUME_CAPTION_LOADING_ = this.CONTROL_ | 0x20;\n  this.END_OF_CAPTION_ = this.CONTROL_ | 0x2f; // Roll-up Mode\n\n  this.ROLL_UP_2_ROWS_ = this.CONTROL_ | 0x25;\n  this.ROLL_UP_3_ROWS_ = this.CONTROL_ | 0x26;\n  this.ROLL_UP_4_ROWS_ = this.CONTROL_ | 0x27;\n  this.CARRIAGE_RETURN_ = this.CONTROL_ | 0x2d; // paint-on mode\n\n  this.RESUME_DIRECT_CAPTIONING_ = this.CONTROL_ | 0x29; // Erasure\n\n  this.BACKSPACE_ = this.CONTROL_ | 0x21;\n  this.ERASE_DISPLAYED_MEMORY_ = this.CONTROL_ | 0x2c;\n  this.ERASE_NON_DISPLAYED_MEMORY_ = this.CONTROL_ | 0x2e;\n};\n/**\n * Detects if the 2-byte packet data is a special character\n *\n * Special characters have a second byte in the range 0x30 to 0x3f,\n * with the first byte being 0x11 (for data channel 1) or 0x19 (for\n * data channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are an special character\n */\n\n\nCea608Stream.prototype.isSpecialCharacter = function (char0, char1) {\n  return char0 === this.EXT_ && char1 >= 0x30 && char1 <= 0x3f;\n};\n/**\n * Detects if the 2-byte packet data is an extended character\n *\n * Extended characters have a second byte in the range 0x20 to 0x3f,\n * with the first byte being 0x12 or 0x13 (for data channel 1) or\n * 0x1a or 0x1b (for data channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are an extended character\n */\n\n\nCea608Stream.prototype.isExtCharacter = function (char0, char1) {\n  return (char0 === this.EXT_ + 1 || char0 === this.EXT_ + 2) && char1 >= 0x20 && char1 <= 0x3f;\n};\n/**\n * Detects if the 2-byte packet is a mid-row code\n *\n * Mid-row codes have a second byte in the range 0x20 to 0x2f, with\n * the first byte being 0x11 (for data channel 1) or 0x19 (for data\n * channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are a mid-row code\n */\n\n\nCea608Stream.prototype.isMidRowCode = function (char0, char1) {\n  return char0 === this.EXT_ && char1 >= 0x20 && char1 <= 0x2f;\n};\n/**\n * Detects if the 2-byte packet is an offset control code\n *\n * Offset control codes have a second byte in the range 0x21 to 0x23,\n * with the first byte being 0x17 (for data channel 1) or 0x1f (for\n * data channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are an offset control code\n */\n\n\nCea608Stream.prototype.isOffsetControlCode = function (char0, char1) {\n  return char0 === this.OFFSET_ && char1 >= 0x21 && char1 <= 0x23;\n};\n/**\n * Detects if the 2-byte packet is a Preamble Address Code\n *\n * PACs have a first byte in the range 0x10 to 0x17 (for data channel 1)\n * or 0x18 to 0x1f (for data channel 2), with the second byte in the\n * range 0x40 to 0x7f.\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are a PAC\n */\n\n\nCea608Stream.prototype.isPAC = function (char0, char1) {\n  return char0 >= this.BASE_ && char0 < this.BASE_ + 8 && char1 >= 0x40 && char1 <= 0x7f;\n};\n/**\n * Detects if a packet's second byte is in the range of a PAC color code\n *\n * PAC color codes have the second byte be in the range 0x40 to 0x4f, or\n * 0x60 to 0x6f.\n *\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the byte is a color PAC\n */\n\n\nCea608Stream.prototype.isColorPAC = function (char1) {\n  return char1 >= 0x40 && char1 <= 0x4f || char1 >= 0x60 && char1 <= 0x7f;\n};\n/**\n * Detects if a single byte is in the range of a normal character\n *\n * Normal text bytes are in the range 0x20 to 0x7f.\n *\n * @param  {Integer} char  The byte\n * @return {Boolean}       Whether the byte is a normal character\n */\n\n\nCea608Stream.prototype.isNormalChar = function (char) {\n  return char >= 0x20 && char <= 0x7f;\n};\n/**\n * Configures roll-up\n *\n * @param  {Integer} pts         Current PTS\n * @param  {Integer} newBaseRow  Used by PACs to slide the current window to\n *                               a new position\n */\n\n\nCea608Stream.prototype.setRollUp = function (pts, newBaseRow) {\n  // Reset the base row to the bottom row when switching modes\n  if (this.mode_ !== 'rollUp') {\n    this.row_ = BOTTOM_ROW;\n    this.mode_ = 'rollUp'; // Spec says to wipe memories when switching to roll-up\n\n    this.flushDisplayed(pts);\n    this.nonDisplayed_ = createDisplayBuffer();\n    this.displayed_ = createDisplayBuffer();\n  }\n\n  if (newBaseRow !== undefined && newBaseRow !== this.row_) {\n    // move currently displayed captions (up or down) to the new base row\n    for (var i = 0; i < this.rollUpRows_; i++) {\n      this.displayed_[newBaseRow - i] = this.displayed_[this.row_ - i];\n      this.displayed_[this.row_ - i] = '';\n    }\n  }\n\n  if (newBaseRow === undefined) {\n    newBaseRow = this.row_;\n  }\n\n  this.topRow_ = newBaseRow - this.rollUpRows_ + 1;\n}; // Adds the opening HTML tag for the passed character to the caption text,\n// and keeps track of it for later closing\n\n\nCea608Stream.prototype.addFormatting = function (pts, format) {\n  this.formatting_ = this.formatting_.concat(format);\n  var text = format.reduce(function (text, format) {\n    return text + '<' + format + '>';\n  }, '');\n  this[this.mode_](pts, text);\n}; // Adds HTML closing tags for current formatting to caption text and\n// clears remembered formatting\n\n\nCea608Stream.prototype.clearFormatting = function (pts) {\n  if (!this.formatting_.length) {\n    return;\n  }\n\n  var text = this.formatting_.reverse().reduce(function (text, format) {\n    return text + '</' + format + '>';\n  }, '');\n  this.formatting_ = [];\n  this[this.mode_](pts, text);\n}; // Mode Implementations\n\n\nCea608Stream.prototype.popOn = function (pts, text) {\n  var baseRow = this.nonDisplayed_[this.row_]; // buffer characters\n\n  baseRow += text;\n  this.nonDisplayed_[this.row_] = baseRow;\n};\n\nCea608Stream.prototype.rollUp = function (pts, text) {\n  var baseRow = this.displayed_[this.row_];\n  baseRow += text;\n  this.displayed_[this.row_] = baseRow;\n};\n\nCea608Stream.prototype.shiftRowsUp_ = function () {\n  var i; // clear out inactive rows\n\n  for (i = 0; i < this.topRow_; i++) {\n    this.displayed_[i] = '';\n  }\n\n  for (i = this.row_ + 1; i < BOTTOM_ROW + 1; i++) {\n    this.displayed_[i] = '';\n  } // shift displayed rows up\n\n\n  for (i = this.topRow_; i < this.row_; i++) {\n    this.displayed_[i] = this.displayed_[i + 1];\n  } // clear out the bottom row\n\n\n  this.displayed_[this.row_] = '';\n};\n\nCea608Stream.prototype.paintOn = function (pts, text) {\n  var baseRow = this.displayed_[this.row_];\n  baseRow += text;\n  this.displayed_[this.row_] = baseRow;\n}; // exports\n\n\nmodule.exports = {\n  CaptionStream: CaptionStream,\n  Cea608Stream: Cea608Stream\n};","/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */\n'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar URLToolkit = _interopDefault(require('url-toolkit'));\n\nvar window = _interopDefault(require('global/window'));\n\nvar resolveUrl = function resolveUrl(baseUrl, relativeUrl) {\n  // return early if we don't need to resolve\n  if (/^[a-z]+:/i.test(relativeUrl)) {\n    return relativeUrl;\n  } // if the base URL is relative then combine with the current location\n\n\n  if (!/\\/\\//i.test(baseUrl)) {\n    baseUrl = URLToolkit.buildAbsoluteURL(window.location && window.location.href || '', baseUrl);\n  }\n\n  return URLToolkit.buildAbsoluteURL(baseUrl, relativeUrl);\n};\n\nmodule.exports = resolveUrl;","var win;\n\nif (typeof window !== \"undefined\") {\n  win = window;\n} else if (typeof global !== \"undefined\") {\n  win = global;\n} else if (typeof self !== \"undefined\") {\n  win = self;\n} else {\n  win = {};\n}\n\nmodule.exports = win;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\nfunction copy(src, dest) {\n  for (var p in src) {\n    dest[p] = src[p];\n  }\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\n\n\nfunction _extends(Class, Super) {\n  var pt = Class.prototype;\n\n  if (Object.create) {\n    var ppt = Object.create(Super.prototype);\n    pt.__proto__ = ppt;\n  }\n\n  if (!(pt instanceof Super)) {\n    function t() {}\n\n    ;\n    t.prototype = Super.prototype;\n    t = new t();\n    copy(pt, t);\n    Class.prototype = pt = t;\n  }\n\n  if (pt.constructor != Class) {\n    if (typeof Class != 'function') {\n      console.error(\"unknow Class:\" + Class);\n    }\n\n    pt.constructor = Class;\n  }\n}\n\nvar htmlns = 'http://www.w3.org/1999/xhtml'; // Node Types\n\nvar NodeType = {};\nvar ELEMENT_NODE = NodeType.ELEMENT_NODE = 1;\nvar ATTRIBUTE_NODE = NodeType.ATTRIBUTE_NODE = 2;\nvar TEXT_NODE = NodeType.TEXT_NODE = 3;\nvar CDATA_SECTION_NODE = NodeType.CDATA_SECTION_NODE = 4;\nvar ENTITY_REFERENCE_NODE = NodeType.ENTITY_REFERENCE_NODE = 5;\nvar ENTITY_NODE = NodeType.ENTITY_NODE = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE = NodeType.COMMENT_NODE = 8;\nvar DOCUMENT_NODE = NodeType.DOCUMENT_NODE = 9;\nvar DOCUMENT_TYPE_NODE = NodeType.DOCUMENT_TYPE_NODE = 10;\nvar DOCUMENT_FRAGMENT_NODE = NodeType.DOCUMENT_FRAGMENT_NODE = 11;\nvar NOTATION_NODE = NodeType.NOTATION_NODE = 12; // ExceptionCode\n\nvar ExceptionCode = {};\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR = ExceptionCode.INDEX_SIZE_ERR = (ExceptionMessage[1] = \"Index size error\", 1);\nvar DOMSTRING_SIZE_ERR = ExceptionCode.DOMSTRING_SIZE_ERR = (ExceptionMessage[2] = \"DOMString size error\", 2);\nvar HIERARCHY_REQUEST_ERR = ExceptionCode.HIERARCHY_REQUEST_ERR = (ExceptionMessage[3] = \"Hierarchy request error\", 3);\nvar WRONG_DOCUMENT_ERR = ExceptionCode.WRONG_DOCUMENT_ERR = (ExceptionMessage[4] = \"Wrong document\", 4);\nvar INVALID_CHARACTER_ERR = ExceptionCode.INVALID_CHARACTER_ERR = (ExceptionMessage[5] = \"Invalid character\", 5);\nvar NO_DATA_ALLOWED_ERR = ExceptionCode.NO_DATA_ALLOWED_ERR = (ExceptionMessage[6] = \"No data allowed\", 6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = (ExceptionMessage[7] = \"No modification allowed\", 7);\nvar NOT_FOUND_ERR = ExceptionCode.NOT_FOUND_ERR = (ExceptionMessage[8] = \"Not found\", 8);\nvar NOT_SUPPORTED_ERR = ExceptionCode.NOT_SUPPORTED_ERR = (ExceptionMessage[9] = \"Not supported\", 9);\nvar INUSE_ATTRIBUTE_ERR = ExceptionCode.INUSE_ATTRIBUTE_ERR = (ExceptionMessage[10] = \"Attribute in use\", 10); //level2\n\nvar INVALID_STATE_ERR = ExceptionCode.INVALID_STATE_ERR = (ExceptionMessage[11] = \"Invalid state\", 11);\nvar SYNTAX_ERR = ExceptionCode.SYNTAX_ERR = (ExceptionMessage[12] = \"Syntax error\", 12);\nvar INVALID_MODIFICATION_ERR = ExceptionCode.INVALID_MODIFICATION_ERR = (ExceptionMessage[13] = \"Invalid modification\", 13);\nvar NAMESPACE_ERR = ExceptionCode.NAMESPACE_ERR = (ExceptionMessage[14] = \"Invalid namespace\", 14);\nvar INVALID_ACCESS_ERR = ExceptionCode.INVALID_ACCESS_ERR = (ExceptionMessage[15] = \"Invalid access\", 15);\n\nfunction DOMException(code, message) {\n  if (message instanceof Error) {\n    var error = message;\n  } else {\n    error = this;\n    Error.call(this, ExceptionMessage[code]);\n    this.message = ExceptionMessage[code];\n    if (Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n  }\n\n  error.code = code;\n  if (message) this.message = this.message + \": \" + message;\n  return error;\n}\n\n;\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode, DOMException);\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\n\nfunction NodeList() {}\n\n;\nNodeList.prototype = {\n  /**\n   * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n   * @standard level1\n   */\n  length: 0,\n\n  /**\n   * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n   * @standard level1\n   * @param index  unsigned long \n   *   Index into the collection.\n   * @return Node\n   * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n   */\n  item: function item(index) {\n    return this[index] || null;\n  },\n  toString: function toString(isHTML, nodeFilter) {\n    for (var buf = [], i = 0; i < this.length; i++) {\n      serializeToString(this[i], buf, isHTML, nodeFilter);\n    }\n\n    return buf.join('');\n  }\n};\n\nfunction LiveNodeList(node, refresh) {\n  this._node = node;\n  this._refresh = refresh;\n\n  _updateLiveList(this);\n}\n\nfunction _updateLiveList(list) {\n  var inc = list._node._inc || list._node.ownerDocument._inc;\n\n  if (list._inc != inc) {\n    var ls = list._refresh(list._node); //console.log(ls.length)\n\n\n    __set__(list, 'length', ls.length);\n\n    copy(ls, list);\n    list._inc = inc;\n  }\n}\n\nLiveNodeList.prototype.item = function (i) {\n  _updateLiveList(this);\n\n  return this[i];\n};\n\n_extends(LiveNodeList, NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\n\n\nfunction NamedNodeMap() {}\n\n;\n\nfunction _findNodeIndex(list, node) {\n  var i = list.length;\n\n  while (i--) {\n    if (list[i] === node) {\n      return i;\n    }\n  }\n}\n\nfunction _addNamedNode(el, list, newAttr, oldAttr) {\n  if (oldAttr) {\n    list[_findNodeIndex(list, oldAttr)] = newAttr;\n  } else {\n    list[list.length++] = newAttr;\n  }\n\n  if (el) {\n    newAttr.ownerElement = el;\n    var doc = el.ownerDocument;\n\n    if (doc) {\n      oldAttr && _onRemoveAttribute(doc, el, oldAttr);\n\n      _onAddAttribute(doc, el, newAttr);\n    }\n  }\n}\n\nfunction _removeNamedNode(el, list, attr) {\n  //console.log('remove attr:'+attr)\n  var i = _findNodeIndex(list, attr);\n\n  if (i >= 0) {\n    var lastIndex = list.length - 1;\n\n    while (i < lastIndex) {\n      list[i] = list[++i];\n    }\n\n    list.length = lastIndex;\n\n    if (el) {\n      var doc = el.ownerDocument;\n\n      if (doc) {\n        _onRemoveAttribute(doc, el, attr);\n\n        attr.ownerElement = null;\n      }\n    }\n  } else {\n    throw DOMException(NOT_FOUND_ERR, new Error(el.tagName + '@' + attr));\n  }\n}\n\nNamedNodeMap.prototype = {\n  length: 0,\n  item: NodeList.prototype.item,\n  getNamedItem: function getNamedItem(key) {\n    //\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n    //\t\t\treturn null;\n    //\t\t}\n    //console.log()\n    var i = this.length;\n\n    while (i--) {\n      var attr = this[i]; //console.log(attr.nodeName,key)\n\n      if (attr.nodeName == key) {\n        return attr;\n      }\n    }\n  },\n  setNamedItem: function setNamedItem(attr) {\n    var el = attr.ownerElement;\n\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n\n    var oldAttr = this.getNamedItem(attr.nodeName);\n\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n\n    return oldAttr;\n  },\n\n  /* returns Node */\n  setNamedItemNS: function setNamedItemNS(attr) {\n    // raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n    var el = attr.ownerElement,\n        oldAttr;\n\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n\n    oldAttr = this.getNamedItemNS(attr.namespaceURI, attr.localName);\n\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n\n    return oldAttr;\n  },\n\n  /* returns Node */\n  removeNamedItem: function removeNamedItem(key) {\n    var attr = this.getNamedItem(key);\n\n    _removeNamedNode(this._ownerElement, this, attr);\n\n    return attr;\n  },\n  // raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n  //for level2\n  removeNamedItemNS: function removeNamedItemNS(namespaceURI, localName) {\n    var attr = this.getNamedItemNS(namespaceURI, localName);\n\n    _removeNamedNode(this._ownerElement, this, attr);\n\n    return attr;\n  },\n  getNamedItemNS: function getNamedItemNS(namespaceURI, localName) {\n    var i = this.length;\n\n    while (i--) {\n      var node = this[i];\n\n      if (node.localName == localName && node.namespaceURI == namespaceURI) {\n        return node;\n      }\n    }\n\n    return null;\n  }\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\n\nfunction DOMImplementation(\n/* Object */\nfeatures) {\n  this._features = {};\n\n  if (features) {\n    for (var feature in features) {\n      this._features = features[feature];\n    }\n  }\n}\n\n;\nDOMImplementation.prototype = {\n  hasFeature: function hasFeature(\n  /* string */\n  feature,\n  /* string */\n  version) {\n    var versions = this._features[feature.toLowerCase()];\n\n    if (versions && (!version || version in versions)) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  // Introduced in DOM Level 2:\n  createDocument: function createDocument(namespaceURI, qualifiedName, doctype) {\n    // raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n    var doc = new Document();\n    doc.implementation = this;\n    doc.childNodes = new NodeList();\n    doc.doctype = doctype;\n\n    if (doctype) {\n      doc.appendChild(doctype);\n    }\n\n    if (qualifiedName) {\n      var root = doc.createElementNS(namespaceURI, qualifiedName);\n      doc.appendChild(root);\n    }\n\n    return doc;\n  },\n  // Introduced in DOM Level 2:\n  createDocumentType: function createDocumentType(qualifiedName, publicId, systemId) {\n    // raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n    var node = new DocumentType();\n    node.name = qualifiedName;\n    node.nodeName = qualifiedName;\n    node.publicId = publicId;\n    node.systemId = systemId; // Introduced in DOM Level 2:\n    //readonly attribute DOMString        internalSubset;\n    //TODO:..\n    //  readonly attribute NamedNodeMap     entities;\n    //  readonly attribute NamedNodeMap     notations;\n\n    return node;\n  }\n};\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {}\n\n;\nNode.prototype = {\n  firstChild: null,\n  lastChild: null,\n  previousSibling: null,\n  nextSibling: null,\n  attributes: null,\n  parentNode: null,\n  childNodes: null,\n  ownerDocument: null,\n  nodeValue: null,\n  namespaceURI: null,\n  prefix: null,\n  localName: null,\n  // Modified in DOM Level 2:\n  insertBefore: function insertBefore(newChild, refChild) {\n    //raises \n    return _insertBefore(this, newChild, refChild);\n  },\n  replaceChild: function replaceChild(newChild, oldChild) {\n    //raises \n    this.insertBefore(newChild, oldChild);\n\n    if (oldChild) {\n      this.removeChild(oldChild);\n    }\n  },\n  removeChild: function removeChild(oldChild) {\n    return _removeChild(this, oldChild);\n  },\n  appendChild: function appendChild(newChild) {\n    return this.insertBefore(newChild, null);\n  },\n  hasChildNodes: function hasChildNodes() {\n    return this.firstChild != null;\n  },\n  cloneNode: function cloneNode(deep) {\n    return _cloneNode(this.ownerDocument || this, this, deep);\n  },\n  // Modified in DOM Level 2:\n  normalize: function normalize() {\n    var child = this.firstChild;\n\n    while (child) {\n      var next = child.nextSibling;\n\n      if (next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE) {\n        this.removeChild(next);\n        child.appendData(next.data);\n      } else {\n        child.normalize();\n        child = next;\n      }\n    }\n  },\n  // Introduced in DOM Level 2:\n  isSupported: function isSupported(feature, version) {\n    return this.ownerDocument.implementation.hasFeature(feature, version);\n  },\n  // Introduced in DOM Level 2:\n  hasAttributes: function hasAttributes() {\n    return this.attributes.length > 0;\n  },\n  lookupPrefix: function lookupPrefix(namespaceURI) {\n    var el = this;\n\n    while (el) {\n      var map = el._nsMap; //console.dir(map)\n\n      if (map) {\n        for (var n in map) {\n          if (map[n] == namespaceURI) {\n            return n;\n          }\n        }\n      }\n\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  lookupNamespaceURI: function lookupNamespaceURI(prefix) {\n    var el = this;\n\n    while (el) {\n      var map = el._nsMap; //console.dir(map)\n\n      if (map) {\n        if (prefix in map) {\n          return map[prefix];\n        }\n      }\n\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  isDefaultNamespace: function isDefaultNamespace(namespaceURI) {\n    var prefix = this.lookupPrefix(namespaceURI);\n    return prefix == null;\n  }\n};\n\nfunction _xmlEncoder(c) {\n  return c == '<' && '&lt;' || c == '>' && '&gt;' || c == '&' && '&amp;' || c == '\"' && '&quot;' || '&#' + c.charCodeAt() + ';';\n}\n\ncopy(NodeType, Node);\ncopy(NodeType, Node.prototype);\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\n\nfunction _visitNode(node, callback) {\n  if (callback(node)) {\n    return true;\n  }\n\n  if (node = node.firstChild) {\n    do {\n      if (_visitNode(node, callback)) {\n        return true;\n      }\n    } while (node = node.nextSibling);\n  }\n}\n\nfunction Document() {}\n\nfunction _onAddAttribute(doc, el, newAttr) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n\n  if (ns == 'http://www.w3.org/2000/xmlns/') {\n    //update namespace\n    el._nsMap[newAttr.prefix ? newAttr.localName : ''] = newAttr.value;\n  }\n}\n\nfunction _onRemoveAttribute(doc, el, newAttr, remove) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n\n  if (ns == 'http://www.w3.org/2000/xmlns/') {\n    //update namespace\n    delete el._nsMap[newAttr.prefix ? newAttr.localName : ''];\n  }\n}\n\nfunction _onUpdateChild(doc, el, newChild) {\n  if (doc && doc._inc) {\n    doc._inc++; //update childNodes\n\n    var cs = el.childNodes;\n\n    if (newChild) {\n      cs[cs.length++] = newChild;\n    } else {\n      //console.log(1)\n      var child = el.firstChild;\n      var i = 0;\n\n      while (child) {\n        cs[i++] = child;\n        child = child.nextSibling;\n      }\n\n      cs.length = i;\n    }\n  }\n}\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\n\n\nfunction _removeChild(parentNode, child) {\n  var previous = child.previousSibling;\n  var next = child.nextSibling;\n\n  if (previous) {\n    previous.nextSibling = next;\n  } else {\n    parentNode.firstChild = next;\n  }\n\n  if (next) {\n    next.previousSibling = previous;\n  } else {\n    parentNode.lastChild = previous;\n  }\n\n  _onUpdateChild(parentNode.ownerDocument, parentNode);\n\n  return child;\n}\n/**\n * preformance key(refChild == null)\n */\n\n\nfunction _insertBefore(parentNode, newChild, nextChild) {\n  var cp = newChild.parentNode;\n\n  if (cp) {\n    cp.removeChild(newChild); //remove and update\n  }\n\n  if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n    var newFirst = newChild.firstChild;\n\n    if (newFirst == null) {\n      return newChild;\n    }\n\n    var newLast = newChild.lastChild;\n  } else {\n    newFirst = newLast = newChild;\n  }\n\n  var pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n  newFirst.previousSibling = pre;\n  newLast.nextSibling = nextChild;\n\n  if (pre) {\n    pre.nextSibling = newFirst;\n  } else {\n    parentNode.firstChild = newFirst;\n  }\n\n  if (nextChild == null) {\n    parentNode.lastChild = newLast;\n  } else {\n    nextChild.previousSibling = newLast;\n  }\n\n  do {\n    newFirst.parentNode = parentNode;\n  } while (newFirst !== newLast && (newFirst = newFirst.nextSibling));\n\n  _onUpdateChild(parentNode.ownerDocument || parentNode, parentNode); //console.log(parentNode.lastChild.nextSibling == null)\n\n\n  if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n    newChild.firstChild = newChild.lastChild = null;\n  }\n\n  return newChild;\n}\n\nfunction _appendSingleChild(parentNode, newChild) {\n  var cp = newChild.parentNode;\n\n  if (cp) {\n    var pre = parentNode.lastChild;\n    cp.removeChild(newChild); //remove and update\n\n    var pre = parentNode.lastChild;\n  }\n\n  var pre = parentNode.lastChild;\n  newChild.parentNode = parentNode;\n  newChild.previousSibling = pre;\n  newChild.nextSibling = null;\n\n  if (pre) {\n    pre.nextSibling = newChild;\n  } else {\n    parentNode.firstChild = newChild;\n  }\n\n  parentNode.lastChild = newChild;\n\n  _onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\n  return newChild; //console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\n\nDocument.prototype = {\n  //implementation : null,\n  nodeName: '#document',\n  nodeType: DOCUMENT_NODE,\n  doctype: null,\n  documentElement: null,\n  _inc: 1,\n  insertBefore: function insertBefore(newChild, refChild) {\n    //raises \n    if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n      var child = newChild.firstChild;\n\n      while (child) {\n        var next = child.nextSibling;\n        this.insertBefore(child, refChild);\n        child = next;\n      }\n\n      return newChild;\n    }\n\n    if (this.documentElement == null && newChild.nodeType == ELEMENT_NODE) {\n      this.documentElement = newChild;\n    }\n\n    return _insertBefore(this, newChild, refChild), newChild.ownerDocument = this, newChild;\n  },\n  removeChild: function removeChild(oldChild) {\n    if (this.documentElement == oldChild) {\n      this.documentElement = null;\n    }\n\n    return _removeChild(this, oldChild);\n  },\n  // Introduced in DOM Level 2:\n  importNode: function importNode(importedNode, deep) {\n    return _importNode(this, importedNode, deep);\n  },\n  // Introduced in DOM Level 2:\n  getElementById: function getElementById(id) {\n    var rtv = null;\n\n    _visitNode(this.documentElement, function (node) {\n      if (node.nodeType == ELEMENT_NODE) {\n        if (node.getAttribute('id') == id) {\n          rtv = node;\n          return true;\n        }\n      }\n    });\n\n    return rtv;\n  },\n  //document factory method:\n  createElement: function createElement(tagName) {\n    var node = new Element();\n    node.ownerDocument = this;\n    node.nodeName = tagName;\n    node.tagName = tagName;\n    node.childNodes = new NodeList();\n    var attrs = node.attributes = new NamedNodeMap();\n    attrs._ownerElement = node;\n    return node;\n  },\n  createDocumentFragment: function createDocumentFragment() {\n    var node = new DocumentFragment();\n    node.ownerDocument = this;\n    node.childNodes = new NodeList();\n    return node;\n  },\n  createTextNode: function createTextNode(data) {\n    var node = new Text();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createComment: function createComment(data) {\n    var node = new Comment();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createCDATASection: function createCDATASection(data) {\n    var node = new CDATASection();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createProcessingInstruction: function createProcessingInstruction(target, data) {\n    var node = new ProcessingInstruction();\n    node.ownerDocument = this;\n    node.tagName = node.target = target;\n    node.nodeValue = node.data = data;\n    return node;\n  },\n  createAttribute: function createAttribute(name) {\n    var node = new Attr();\n    node.ownerDocument = this;\n    node.name = name;\n    node.nodeName = name;\n    node.localName = name;\n    node.specified = true;\n    return node;\n  },\n  createEntityReference: function createEntityReference(name) {\n    var node = new EntityReference();\n    node.ownerDocument = this;\n    node.nodeName = name;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createElementNS: function createElementNS(namespaceURI, qualifiedName) {\n    var node = new Element();\n    var pl = qualifiedName.split(':');\n    var attrs = node.attributes = new NamedNodeMap();\n    node.childNodes = new NodeList();\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.tagName = qualifiedName;\n    node.namespaceURI = namespaceURI;\n\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n\n    attrs._ownerElement = node;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createAttributeNS: function createAttributeNS(namespaceURI, qualifiedName) {\n    var node = new Attr();\n    var pl = qualifiedName.split(':');\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.name = qualifiedName;\n    node.namespaceURI = namespaceURI;\n    node.specified = true;\n\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n\n    return node;\n  }\n};\n\n_extends(Document, Node);\n\nfunction Element() {\n  this._nsMap = {};\n}\n\n;\nElement.prototype = {\n  nodeType: ELEMENT_NODE,\n  hasAttribute: function hasAttribute(name) {\n    return this.getAttributeNode(name) != null;\n  },\n  getAttribute: function getAttribute(name) {\n    var attr = this.getAttributeNode(name);\n    return attr && attr.value || '';\n  },\n  getAttributeNode: function getAttributeNode(name) {\n    return this.attributes.getNamedItem(name);\n  },\n  setAttribute: function setAttribute(name, value) {\n    var attr = this.ownerDocument.createAttribute(name);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  removeAttribute: function removeAttribute(name) {\n    var attr = this.getAttributeNode(name);\n    attr && this.removeAttributeNode(attr);\n  },\n  //four real opeartion method\n  appendChild: function appendChild(newChild) {\n    if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n      return this.insertBefore(newChild, null);\n    } else {\n      return _appendSingleChild(this, newChild);\n    }\n  },\n  setAttributeNode: function setAttributeNode(newAttr) {\n    return this.attributes.setNamedItem(newAttr);\n  },\n  setAttributeNodeNS: function setAttributeNodeNS(newAttr) {\n    return this.attributes.setNamedItemNS(newAttr);\n  },\n  removeAttributeNode: function removeAttributeNode(oldAttr) {\n    //console.log(this == oldAttr.ownerElement)\n    return this.attributes.removeNamedItem(oldAttr.nodeName);\n  },\n  //get real attribute name,and remove it by removeAttributeNode\n  removeAttributeNS: function removeAttributeNS(namespaceURI, localName) {\n    var old = this.getAttributeNodeNS(namespaceURI, localName);\n    old && this.removeAttributeNode(old);\n  },\n  hasAttributeNS: function hasAttributeNS(namespaceURI, localName) {\n    return this.getAttributeNodeNS(namespaceURI, localName) != null;\n  },\n  getAttributeNS: function getAttributeNS(namespaceURI, localName) {\n    var attr = this.getAttributeNodeNS(namespaceURI, localName);\n    return attr && attr.value || '';\n  },\n  setAttributeNS: function setAttributeNS(namespaceURI, qualifiedName, value) {\n    var attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  getAttributeNodeNS: function getAttributeNodeNS(namespaceURI, localName) {\n    return this.attributes.getNamedItemNS(namespaceURI, localName);\n  },\n  getElementsByTagName: function getElementsByTagName(tagName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)) {\n          ls.push(node);\n        }\n      });\n\n      return ls;\n    });\n  },\n  getElementsByTagNameNS: function getElementsByTagNameNS(namespaceURI, localName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)) {\n          ls.push(node);\n        }\n      });\n\n      return ls;\n    });\n  }\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n_extends(Element, Node);\n\nfunction Attr() {}\n\n;\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n\n_extends(Attr, Node);\n\nfunction CharacterData() {}\n\n;\nCharacterData.prototype = {\n  data: '',\n  substringData: function substringData(offset, count) {\n    return this.data.substring(offset, offset + count);\n  },\n  appendData: function appendData(text) {\n    text = this.data + text;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  },\n  insertData: function insertData(offset, text) {\n    this.replaceData(offset, 0, text);\n  },\n  appendChild: function appendChild(newChild) {\n    throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);\n  },\n  deleteData: function deleteData(offset, count) {\n    this.replaceData(offset, count, \"\");\n  },\n  replaceData: function replaceData(offset, count, text) {\n    var start = this.data.substring(0, offset);\n    var end = this.data.substring(offset + count);\n    text = start + text + end;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  }\n};\n\n_extends(CharacterData, Node);\n\nfunction Text() {}\n\n;\nText.prototype = {\n  nodeName: \"#text\",\n  nodeType: TEXT_NODE,\n  splitText: function splitText(offset) {\n    var text = this.data;\n    var newText = text.substring(offset);\n    text = text.substring(0, offset);\n    this.data = this.nodeValue = text;\n    this.length = text.length;\n    var newNode = this.ownerDocument.createTextNode(newText);\n\n    if (this.parentNode) {\n      this.parentNode.insertBefore(newNode, this.nextSibling);\n    }\n\n    return newNode;\n  }\n};\n\n_extends(Text, CharacterData);\n\nfunction Comment() {}\n\n;\nComment.prototype = {\n  nodeName: \"#comment\",\n  nodeType: COMMENT_NODE\n};\n\n_extends(Comment, CharacterData);\n\nfunction CDATASection() {}\n\n;\nCDATASection.prototype = {\n  nodeName: \"#cdata-section\",\n  nodeType: CDATA_SECTION_NODE\n};\n\n_extends(CDATASection, CharacterData);\n\nfunction DocumentType() {}\n\n;\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n\n_extends(DocumentType, Node);\n\nfunction Notation() {}\n\n;\nNotation.prototype.nodeType = NOTATION_NODE;\n\n_extends(Notation, Node);\n\nfunction Entity() {}\n\n;\nEntity.prototype.nodeType = ENTITY_NODE;\n\n_extends(Entity, Node);\n\nfunction EntityReference() {}\n\n;\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n\n_extends(EntityReference, Node);\n\nfunction DocumentFragment() {}\n\n;\nDocumentFragment.prototype.nodeName = \"#document-fragment\";\nDocumentFragment.prototype.nodeType = DOCUMENT_FRAGMENT_NODE;\n\n_extends(DocumentFragment, Node);\n\nfunction ProcessingInstruction() {}\n\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n\n_extends(ProcessingInstruction, Node);\n\nfunction XMLSerializer() {}\n\nXMLSerializer.prototype.serializeToString = function (node, isHtml, nodeFilter) {\n  return nodeSerializeToString.call(node, isHtml, nodeFilter);\n};\n\nNode.prototype.toString = nodeSerializeToString;\n\nfunction nodeSerializeToString(isHtml, nodeFilter) {\n  var buf = [];\n  var refNode = this.nodeType == 9 ? this.documentElement : this;\n  var prefix = refNode.prefix;\n  var uri = refNode.namespaceURI;\n\n  if (uri && prefix == null) {\n    //console.log(prefix)\n    var prefix = refNode.lookupPrefix(uri);\n\n    if (prefix == null) {\n      //isHTML = true;\n      var visibleNamespaces = [{\n        namespace: uri,\n        prefix: null\n      } //{namespace:uri,prefix:''}\n      ];\n    }\n  }\n\n  serializeToString(this, buf, isHtml, nodeFilter, visibleNamespaces); //console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\n  return buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n  var prefix = node.prefix || '';\n  var uri = node.namespaceURI;\n\n  if (!prefix && !uri) {\n    return false;\n  }\n\n  if (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" || uri == 'http://www.w3.org/2000/xmlns/') {\n    return false;\n  }\n\n  var i = visibleNamespaces.length; //console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\n  while (i--) {\n    var ns = visibleNamespaces[i]; // get namespace prefix\n    //console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\n    if (ns.prefix == prefix) {\n      return ns.namespace != uri;\n    }\n  } //console.log(isHTML,uri,prefix=='')\n  //if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n  //\treturn false;\n  //}\n  //node.flag = '11111'\n  //console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\n\n  return true;\n}\n\nfunction serializeToString(node, buf, isHTML, nodeFilter, visibleNamespaces) {\n  if (nodeFilter) {\n    node = nodeFilter(node);\n\n    if (node) {\n      if (typeof node == 'string') {\n        buf.push(node);\n        return;\n      }\n    } else {\n      return;\n    } //buf.sort.apply(attrs, attributeSorter);\n\n  }\n\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      if (!visibleNamespaces) visibleNamespaces = [];\n      var startVisibleNamespaces = visibleNamespaces.length;\n      var attrs = node.attributes;\n      var len = attrs.length;\n      var child = node.firstChild;\n      var nodeName = node.tagName;\n      isHTML = htmlns === node.namespaceURI || isHTML;\n      buf.push('<', nodeName);\n\n      for (var i = 0; i < len; i++) {\n        // add namespaces for attributes\n        var attr = attrs.item(i);\n\n        if (attr.prefix == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: attr.localName,\n            namespace: attr.value\n          });\n        } else if (attr.nodeName == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: '',\n            namespace: attr.value\n          });\n        }\n      }\n\n      for (var i = 0; i < len; i++) {\n        var attr = attrs.item(i);\n\n        if (needNamespaceDefine(attr, isHTML, visibleNamespaces)) {\n          var prefix = attr.prefix || '';\n          var uri = attr.namespaceURI;\n          var ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n          buf.push(ns, '=\"', uri, '\"');\n          visibleNamespaces.push({\n            prefix: prefix,\n            namespace: uri\n          });\n        }\n\n        serializeToString(attr, buf, isHTML, nodeFilter, visibleNamespaces);\n      } // add namespace for current node\t\t\n\n\n      if (needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n        var prefix = node.prefix || '';\n        var uri = node.namespaceURI;\n        var ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n        buf.push(ns, '=\"', uri, '\"');\n        visibleNamespaces.push({\n          prefix: prefix,\n          namespace: uri\n        });\n      }\n\n      if (child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)) {\n        buf.push('>'); //if is cdata child node\n\n        if (isHTML && /^script$/i.test(nodeName)) {\n          while (child) {\n            if (child.data) {\n              buf.push(child.data);\n            } else {\n              serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces);\n            }\n\n            child = child.nextSibling;\n          }\n        } else {\n          while (child) {\n            serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces);\n            child = child.nextSibling;\n          }\n        }\n\n        buf.push('</', nodeName, '>');\n      } else {\n        buf.push('/>');\n      } // remove added visible namespaces\n      //visibleNamespaces.length = startVisibleNamespaces;\n\n\n      return;\n\n    case DOCUMENT_NODE:\n    case DOCUMENT_FRAGMENT_NODE:\n      var child = node.firstChild;\n\n      while (child) {\n        serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces);\n        child = child.nextSibling;\n      }\n\n      return;\n\n    case ATTRIBUTE_NODE:\n      return buf.push(' ', node.name, '=\"', node.value.replace(/[<&\"]/g, _xmlEncoder), '\"');\n\n    case TEXT_NODE:\n      return buf.push(node.data.replace(/[<&]/g, _xmlEncoder));\n\n    case CDATA_SECTION_NODE:\n      return buf.push('<![CDATA[', node.data, ']]>');\n\n    case COMMENT_NODE:\n      return buf.push(\"<!--\", node.data, \"-->\");\n\n    case DOCUMENT_TYPE_NODE:\n      var pubid = node.publicId;\n      var sysid = node.systemId;\n      buf.push('<!DOCTYPE ', node.name);\n\n      if (pubid) {\n        buf.push(' PUBLIC \"', pubid);\n\n        if (sysid && sysid != '.') {\n          buf.push('\" \"', sysid);\n        }\n\n        buf.push('\">');\n      } else if (sysid && sysid != '.') {\n        buf.push(' SYSTEM \"', sysid, '\">');\n      } else {\n        var sub = node.internalSubset;\n\n        if (sub) {\n          buf.push(\" [\", sub, \"]\");\n        }\n\n        buf.push(\">\");\n      }\n\n      return;\n\n    case PROCESSING_INSTRUCTION_NODE:\n      return buf.push(\"<?\", node.target, \" \", node.data, \"?>\");\n\n    case ENTITY_REFERENCE_NODE:\n      return buf.push('&', node.nodeName, ';');\n    //case ENTITY_NODE:\n    //case NOTATION_NODE:\n\n    default:\n      buf.push('??', node.nodeName);\n  }\n}\n\nfunction _importNode(doc, node, deep) {\n  var node2;\n\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      node2 = node.cloneNode(false);\n      node2.ownerDocument = doc;\n    //var attrs = node2.attributes;\n    //var len = attrs.length;\n    //for(var i=0;i<len;i++){\n    //node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n    //}\n\n    case DOCUMENT_FRAGMENT_NODE:\n      break;\n\n    case ATTRIBUTE_NODE:\n      deep = true;\n      break;\n    //case ENTITY_REFERENCE_NODE:\n    //case PROCESSING_INSTRUCTION_NODE:\n    ////case TEXT_NODE:\n    //case CDATA_SECTION_NODE:\n    //case COMMENT_NODE:\n    //\tdeep = false;\n    //\tbreak;\n    //case DOCUMENT_NODE:\n    //case DOCUMENT_TYPE_NODE:\n    //cannot be imported.\n    //case ENTITY_NODE:\n    //case NOTATION_NODE：\n    //can not hit in level3\n    //default:throw e;\n  }\n\n  if (!node2) {\n    node2 = node.cloneNode(false); //false\n  }\n\n  node2.ownerDocument = doc;\n  node2.parentNode = null;\n\n  if (deep) {\n    var child = node.firstChild;\n\n    while (child) {\n      node2.appendChild(_importNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n\n  return node2;\n} //\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\n\n\nfunction _cloneNode(doc, node, deep) {\n  var node2 = new node.constructor();\n\n  for (var n in node) {\n    var v = node[n];\n\n    if (typeof v != 'object') {\n      if (v != node2[n]) {\n        node2[n] = v;\n      }\n    }\n  }\n\n  if (node.childNodes) {\n    node2.childNodes = new NodeList();\n  }\n\n  node2.ownerDocument = doc;\n\n  switch (node2.nodeType) {\n    case ELEMENT_NODE:\n      var attrs = node.attributes;\n      var attrs2 = node2.attributes = new NamedNodeMap();\n      var len = attrs.length;\n      attrs2._ownerElement = node2;\n\n      for (var i = 0; i < len; i++) {\n        node2.setAttributeNode(_cloneNode(doc, attrs.item(i), true));\n      }\n\n      break;\n      ;\n\n    case ATTRIBUTE_NODE:\n      deep = true;\n  }\n\n  if (deep) {\n    var child = node.firstChild;\n\n    while (child) {\n      node2.appendChild(_cloneNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n\n  return node2;\n}\n\nfunction __set__(object, key, value) {\n  object[key] = value;\n} //do dynamic\n\n\ntry {\n  if (Object.defineProperty) {\n    Object.defineProperty(LiveNodeList.prototype, 'length', {\n      get: function get() {\n        _updateLiveList(this);\n\n        return this.$$length;\n      }\n    });\n    Object.defineProperty(Node.prototype, 'textContent', {\n      get: function get() {\n        return getTextContent(this);\n      },\n      set: function set(data) {\n        switch (this.nodeType) {\n          case ELEMENT_NODE:\n          case DOCUMENT_FRAGMENT_NODE:\n            while (this.firstChild) {\n              this.removeChild(this.firstChild);\n            }\n\n            if (data || String(data)) {\n              this.appendChild(this.ownerDocument.createTextNode(data));\n            }\n\n            break;\n\n          default:\n            //TODO:\n            this.data = data;\n            this.value = data;\n            this.nodeValue = data;\n        }\n      }\n    });\n\n    function getTextContent(node) {\n      switch (node.nodeType) {\n        case ELEMENT_NODE:\n        case DOCUMENT_FRAGMENT_NODE:\n          var buf = [];\n          node = node.firstChild;\n\n          while (node) {\n            if (node.nodeType !== 7 && node.nodeType !== 8) {\n              buf.push(getTextContent(node));\n            }\n\n            node = node.nextSibling;\n          }\n\n          return buf.join('');\n\n        default:\n          return node.nodeValue;\n      }\n    }\n\n    __set__ = function __set__(object, key, value) {\n      //console.log(value)\n      object['$$' + key] = value;\n    };\n  }\n} catch (e) {//ie8\n} //if(typeof require == 'function'){\n\n\nexports.DOMImplementation = DOMImplementation;\nexports.XMLSerializer = XMLSerializer; //}","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n */\nvar toUnsigned = function toUnsigned(value) {\n  return value >>> 0;\n};\n\nvar toHexString = function toHexString(value) {\n  return ('00' + value.toString(16)).slice(-2);\n};\n\nmodule.exports = {\n  toUnsigned: toUnsigned,\n  toHexString: toHexString\n};","module.exports = isFunction;\nvar toString = Object.prototype.toString;\n\nfunction isFunction(fn) {\n  if (!fn) {\n    return false;\n  }\n\n  var string = toString.call(fn);\n  return string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && ( // IE8 and below\n  fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n}\n\n;","/*! @name mpd-parser @version 0.10.0 @license Apache-2.0 */\nimport resolveUrl from '@videojs/vhs-utils/dist/resolve-url';\nimport window from 'global/window';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/dist/decode-b64-to-uint8-array';\nimport { DOMParser } from 'xmldom';\nvar version = \"0.10.0\";\n\nvar isObject = function isObject(obj) {\n  return !!obj && typeof obj === 'object';\n};\n\nvar merge = function merge() {\n  for (var _len = arguments.length, objects = new Array(_len), _key = 0; _key < _len; _key++) {\n    objects[_key] = arguments[_key];\n  }\n\n  return objects.reduce(function (result, source) {\n    Object.keys(source).forEach(function (key) {\n      if (Array.isArray(result[key]) && Array.isArray(source[key])) {\n        result[key] = result[key].concat(source[key]);\n      } else if (isObject(result[key]) && isObject(source[key])) {\n        result[key] = merge(result[key], source[key]);\n      } else {\n        result[key] = source[key];\n      }\n    });\n    return result;\n  }, {});\n};\n\nvar values = function values(o) {\n  return Object.keys(o).map(function (k) {\n    return o[k];\n  });\n};\n\nvar range = function range(start, end) {\n  var result = [];\n\n  for (var i = start; i < end; i++) {\n    result.push(i);\n  }\n\n  return result;\n};\n\nvar flatten = function flatten(lists) {\n  return lists.reduce(function (x, y) {\n    return x.concat(y);\n  }, []);\n};\n\nvar from = function from(list) {\n  if (!list.length) {\n    return [];\n  }\n\n  var result = [];\n\n  for (var i = 0; i < list.length; i++) {\n    result.push(list[i]);\n  }\n\n  return result;\n};\n\nvar findIndexes = function findIndexes(l, key) {\n  return l.reduce(function (a, e, i) {\n    if (e[key]) {\n      a.push(i);\n    }\n\n    return a;\n  }, []);\n};\n\nvar errors = {\n  INVALID_NUMBER_OF_PERIOD: 'INVALID_NUMBER_OF_PERIOD',\n  DASH_EMPTY_MANIFEST: 'DASH_EMPTY_MANIFEST',\n  DASH_INVALID_XML: 'DASH_INVALID_XML',\n  NO_BASE_URL: 'NO_BASE_URL',\n  MISSING_SEGMENT_INFORMATION: 'MISSING_SEGMENT_INFORMATION',\n  SEGMENT_TIME_UNSPECIFIED: 'SEGMENT_TIME_UNSPECIFIED',\n  UNSUPPORTED_UTC_TIMING_SCHEME: 'UNSUPPORTED_UTC_TIMING_SCHEME'\n};\n/**\n * @typedef {Object} SingleUri\n * @property {string} uri - relative location of segment\n * @property {string} resolvedUri - resolved location of segment\n * @property {Object} byterange - Object containing information on how to make byte range\n *   requests following byte-range-spec per RFC2616.\n * @property {String} byterange.length - length of range request\n * @property {String} byterange.offset - byte offset of range request\n *\n * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1\n */\n\n/**\n * Converts a URLType node (5.3.9.2.3 Table 13) to a segment object\n * that conforms to how m3u8-parser is structured\n *\n * @see https://github.com/videojs/m3u8-parser\n *\n * @param {string} baseUrl - baseUrl provided by <BaseUrl> nodes\n * @param {string} source - source url for segment\n * @param {string} range - optional range used for range calls,\n *   follows  RFC 2616, Clause 14.35.1\n * @return {SingleUri} full segment information transformed into a format similar\n *   to m3u8-parser\n */\n\nvar urlTypeToSegment = function urlTypeToSegment(_ref) {\n  var _ref$baseUrl = _ref.baseUrl,\n      baseUrl = _ref$baseUrl === void 0 ? '' : _ref$baseUrl,\n      _ref$source = _ref.source,\n      source = _ref$source === void 0 ? '' : _ref$source,\n      _ref$range = _ref.range,\n      range = _ref$range === void 0 ? '' : _ref$range,\n      _ref$indexRange = _ref.indexRange,\n      indexRange = _ref$indexRange === void 0 ? '' : _ref$indexRange;\n  var segment = {\n    uri: source,\n    resolvedUri: resolveUrl(baseUrl || '', source)\n  };\n\n  if (range || indexRange) {\n    var rangeStr = range ? range : indexRange;\n    var ranges = rangeStr.split('-');\n    var startRange = parseInt(ranges[0], 10);\n    var endRange = parseInt(ranges[1], 10); // byterange should be inclusive according to\n    // RFC 2616, Clause 14.35.1\n\n    segment.byterange = {\n      length: endRange - startRange + 1,\n      offset: startRange\n    };\n  }\n\n  return segment;\n};\n\nvar byteRangeToString = function byteRangeToString(byterange) {\n  // `endRange` is one less than `offset + length` because the HTTP range\n  // header uses inclusive ranges\n  var endRange = byterange.offset + byterange.length - 1;\n  return byterange.offset + \"-\" + endRange;\n};\n/**\n * Functions for calculating the range of available segments in static and dynamic\n * manifests.\n */\n\n\nvar segmentRange = {\n  /**\n   * Returns the entire range of available segments for a static MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  static: function _static(attributes) {\n    var duration = attributes.duration,\n        _attributes$timescale = attributes.timescale,\n        timescale = _attributes$timescale === void 0 ? 1 : _attributes$timescale,\n        sourceDuration = attributes.sourceDuration;\n    return {\n      start: 0,\n      end: Math.ceil(sourceDuration / (duration / timescale))\n    };\n  },\n\n  /**\n   * Returns the current live window range of available segments for a dynamic MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  dynamic: function dynamic(attributes) {\n    var NOW = attributes.NOW,\n        clientOffset = attributes.clientOffset,\n        availabilityStartTime = attributes.availabilityStartTime,\n        _attributes$timescale2 = attributes.timescale,\n        timescale = _attributes$timescale2 === void 0 ? 1 : _attributes$timescale2,\n        duration = attributes.duration,\n        _attributes$start = attributes.start,\n        start = _attributes$start === void 0 ? 0 : _attributes$start,\n        _attributes$minimumUp = attributes.minimumUpdatePeriod,\n        minimumUpdatePeriod = _attributes$minimumUp === void 0 ? 0 : _attributes$minimumUp,\n        _attributes$timeShift = attributes.timeShiftBufferDepth,\n        timeShiftBufferDepth = _attributes$timeShift === void 0 ? Infinity : _attributes$timeShift;\n    var now = (NOW + clientOffset) / 1000;\n    var periodStartWC = availabilityStartTime + start;\n    var periodEndWC = now + minimumUpdatePeriod;\n    var periodDuration = periodEndWC - periodStartWC;\n    var segmentCount = Math.ceil(periodDuration * timescale / duration);\n    var availableStart = Math.floor((now - periodStartWC - timeShiftBufferDepth) * timescale / duration);\n    var availableEnd = Math.floor((now - periodStartWC) * timescale / duration);\n    return {\n      start: Math.max(0, availableStart),\n      end: Math.min(segmentCount, availableEnd)\n    };\n  }\n};\n/**\n * Maps a range of numbers to objects with information needed to build the corresponding\n * segment list\n *\n * @name toSegmentsCallback\n * @function\n * @param {number} number\n *        Number of the segment\n * @param {number} index\n *        Index of the number in the range list\n * @return {{ number: Number, duration: Number, timeline: Number, time: Number }}\n *         Object with segment timing and duration info\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping a range of numbers to\n * information needed to build the segment list.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {toSegmentsCallback}\n *         Callback map function\n */\n\nvar toSegments = function toSegments(attributes) {\n  return function (number, index) {\n    var duration = attributes.duration,\n        _attributes$timescale3 = attributes.timescale,\n        timescale = _attributes$timescale3 === void 0 ? 1 : _attributes$timescale3,\n        periodIndex = attributes.periodIndex,\n        _attributes$startNumb = attributes.startNumber,\n        startNumber = _attributes$startNumb === void 0 ? 1 : _attributes$startNumb;\n    return {\n      number: startNumber + number,\n      duration: duration / timescale,\n      timeline: periodIndex,\n      time: index * duration\n    };\n  };\n};\n/**\n * Returns a list of objects containing segment timing and duration info used for\n * building the list of segments. This uses the @duration attribute specified\n * in the MPD manifest to derive the range of segments.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseByDuration = function parseByDuration(attributes) {\n  var _attributes$type = attributes.type,\n      type = _attributes$type === void 0 ? 'static' : _attributes$type,\n      duration = attributes.duration,\n      _attributes$timescale4 = attributes.timescale,\n      timescale = _attributes$timescale4 === void 0 ? 1 : _attributes$timescale4,\n      sourceDuration = attributes.sourceDuration;\n\n  var _segmentRange$type = segmentRange[type](attributes),\n      start = _segmentRange$type.start,\n      end = _segmentRange$type.end;\n\n  var segments = range(start, end).map(toSegments(attributes));\n\n  if (type === 'static') {\n    var index = segments.length - 1; // final segment may be less than full segment duration\n\n    segments[index].duration = sourceDuration - duration / timescale * index;\n  }\n\n  return segments;\n};\n/**\n * Translates SegmentBase into a set of segments.\n * (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @return {Object.<Array>} list of segments\n */\n\n\nvar segmentsFromBase = function segmentsFromBase(attributes) {\n  var baseUrl = attributes.baseUrl,\n      _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {} : _attributes$initializ,\n      sourceDuration = attributes.sourceDuration,\n      _attributes$timescale = attributes.timescale,\n      timescale = _attributes$timescale === void 0 ? 1 : _attributes$timescale,\n      _attributes$indexRang = attributes.indexRange,\n      indexRange = _attributes$indexRang === void 0 ? '' : _attributes$indexRang,\n      duration = attributes.duration; // base url is required for SegmentBase to work, per spec (Section 5.3.9.2.1)\n\n  if (!baseUrl) {\n    throw new Error(errors.NO_BASE_URL);\n  }\n\n  var initSegment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  var segment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: baseUrl,\n    indexRange: indexRange\n  });\n  segment.map = initSegment; // If there is a duration, use it, otherwise use the given duration of the source\n  // (since SegmentBase is only for one total segment)\n\n  if (duration) {\n    var segmentTimeInfo = parseByDuration(attributes);\n\n    if (segmentTimeInfo.length) {\n      segment.duration = segmentTimeInfo[0].duration;\n      segment.timeline = segmentTimeInfo[0].timeline;\n    }\n  } else if (sourceDuration) {\n    segment.duration = sourceDuration / timescale;\n    segment.timeline = 0;\n  } // This is used for mediaSequence\n\n\n  segment.number = 0;\n  return [segment];\n};\n/**\n * Given a playlist, a sidx box, and a baseUrl, update the segment list of the playlist\n * according to the sidx information given.\n *\n * playlist.sidx has metadadata about the sidx where-as the sidx param\n * is the parsed sidx box itself.\n *\n * @param {Object} playlist the playlist to update the sidx information for\n * @param {Object} sidx the parsed sidx box\n * @return {Object} the playlist object with the updated sidx information\n */\n\n\nvar addSegmentsToPlaylist = function addSegmentsToPlaylist(playlist, sidx, baseUrl) {\n  // Retain init segment information\n  var initSegment = playlist.sidx.map ? playlist.sidx.map : null; // Retain source duration from initial master manifest parsing\n\n  var sourceDuration = playlist.sidx.duration; // Retain source timeline\n\n  var timeline = playlist.timeline || 0;\n  var sidxByteRange = playlist.sidx.byterange;\n  var sidxEnd = sidxByteRange.offset + sidxByteRange.length; // Retain timescale of the parsed sidx\n\n  var timescale = sidx.timescale; // referenceType 1 refers to other sidx boxes\n\n  var mediaReferences = sidx.references.filter(function (r) {\n    return r.referenceType !== 1;\n  });\n  var segments = []; // firstOffset is the offset from the end of the sidx box\n\n  var startIndex = sidxEnd + sidx.firstOffset;\n\n  for (var i = 0; i < mediaReferences.length; i++) {\n    var reference = sidx.references[i]; // size of the referenced (sub)segment\n\n    var size = reference.referencedSize; // duration of the referenced (sub)segment, in  the  timescale\n    // this will be converted to seconds when generating segments\n\n    var duration = reference.subsegmentDuration; // should be an inclusive range\n\n    var endIndex = startIndex + size - 1;\n    var indexRange = startIndex + \"-\" + endIndex;\n    var attributes = {\n      baseUrl: baseUrl,\n      timescale: timescale,\n      timeline: timeline,\n      // this is used in parseByDuration\n      periodIndex: timeline,\n      duration: duration,\n      sourceDuration: sourceDuration,\n      indexRange: indexRange\n    };\n    var segment = segmentsFromBase(attributes)[0];\n\n    if (initSegment) {\n      segment.map = initSegment;\n    }\n\n    segments.push(segment);\n    startIndex += size;\n  }\n\n  playlist.segments = segments;\n  return playlist;\n};\n\nvar mergeDiscontiguousPlaylists = function mergeDiscontiguousPlaylists(playlists) {\n  var mergedPlaylists = values(playlists.reduce(function (acc, playlist) {\n    // assuming playlist IDs are the same across periods\n    // TODO: handle multiperiod where representation sets are not the same\n    // across periods\n    var name = playlist.attributes.id + (playlist.attributes.lang || ''); // Periods after first\n\n    if (acc[name]) {\n      var _acc$name$segments; // first segment of subsequent periods signal a discontinuity\n\n\n      if (playlist.segments[0]) {\n        playlist.segments[0].discontinuity = true;\n      }\n\n      (_acc$name$segments = acc[name].segments).push.apply(_acc$name$segments, playlist.segments); // bubble up contentProtection, this assumes all DRM content\n      // has the same contentProtection\n\n\n      if (playlist.attributes.contentProtection) {\n        acc[name].attributes.contentProtection = playlist.attributes.contentProtection;\n      }\n    } else {\n      // first Period\n      acc[name] = playlist;\n    }\n\n    return acc;\n  }, {}));\n  return mergedPlaylists.map(function (playlist) {\n    playlist.discontinuityStarts = findIndexes(playlist.segments, 'discontinuity');\n    return playlist;\n  });\n};\n\nvar addSegmentInfoFromSidx = function addSegmentInfoFromSidx(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  if (!Object.keys(sidxMapping).length) {\n    return playlists;\n  }\n\n  for (var i in playlists) {\n    var playlist = playlists[i];\n\n    if (!playlist.sidx) {\n      continue;\n    }\n\n    var sidxKey = playlist.sidx.uri + '-' + byteRangeToString(playlist.sidx.byterange);\n    var sidxMatch = sidxMapping[sidxKey] && sidxMapping[sidxKey].sidx;\n\n    if (playlist.sidx && sidxMatch) {\n      addSegmentsToPlaylist(playlist, sidxMatch, playlist.sidx.resolvedUri);\n    }\n  }\n\n  return playlists;\n};\n\nvar formatAudioPlaylist = function formatAudioPlaylist(_ref) {\n  var _attributes;\n\n  var attributes = _ref.attributes,\n      segments = _ref.segments,\n      sidx = _ref.sidx;\n  var playlist = {\n    attributes: (_attributes = {\n      NAME: attributes.id,\n      BANDWIDTH: attributes.bandwidth,\n      CODECS: attributes.codecs\n    }, _attributes['PROGRAM-ID'] = 1, _attributes),\n    uri: '',\n    endList: (attributes.type || 'static') === 'static',\n    timeline: attributes.periodIndex,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    segments: segments,\n    mediaSequence: segments.length ? segments[0].number : 1\n  };\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  return playlist;\n};\n\nvar formatVttPlaylist = function formatVttPlaylist(_ref2) {\n  var _attributes2;\n\n  var attributes = _ref2.attributes,\n      segments = _ref2.segments;\n\n  if (typeof segments === 'undefined') {\n    // vtt tracks may use single file in BaseURL\n    segments = [{\n      uri: attributes.baseUrl,\n      timeline: attributes.periodIndex,\n      resolvedUri: attributes.baseUrl || '',\n      duration: attributes.sourceDuration,\n      number: 0\n    }]; // targetDuration should be the same duration as the only segment\n\n    attributes.duration = attributes.sourceDuration;\n  }\n\n  return {\n    attributes: (_attributes2 = {\n      NAME: attributes.id,\n      BANDWIDTH: attributes.bandwidth\n    }, _attributes2['PROGRAM-ID'] = 1, _attributes2),\n    uri: '',\n    endList: (attributes.type || 'static') === 'static',\n    timeline: attributes.periodIndex,\n    resolvedUri: attributes.baseUrl || '',\n    targetDuration: attributes.duration,\n    segments: segments,\n    mediaSequence: segments.length ? segments[0].number : 1\n  };\n};\n\nvar organizeAudioPlaylists = function organizeAudioPlaylists(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  var mainPlaylist;\n  var formattedPlaylists = playlists.reduce(function (a, playlist) {\n    var role = playlist.attributes.role && playlist.attributes.role.value || '';\n    var language = playlist.attributes.lang || '';\n    var label = 'main';\n\n    if (language) {\n      var roleLabel = role ? \" (\" + role + \")\" : '';\n      label = \"\" + playlist.attributes.lang + roleLabel;\n    } // skip if we already have the highest quality audio for a language\n\n\n    if (a[label] && a[label].playlists[0].attributes.BANDWIDTH > playlist.attributes.bandwidth) {\n      return a;\n    }\n\n    a[label] = {\n      language: language,\n      autoselect: true,\n      default: role === 'main',\n      playlists: addSegmentInfoFromSidx([formatAudioPlaylist(playlist)], sidxMapping),\n      uri: ''\n    };\n\n    if (typeof mainPlaylist === 'undefined' && role === 'main') {\n      mainPlaylist = playlist;\n      mainPlaylist.default = true;\n    }\n\n    return a;\n  }, {}); // if no playlists have role \"main\", mark the first as main\n\n  if (!mainPlaylist) {\n    var firstLabel = Object.keys(formattedPlaylists)[0];\n    formattedPlaylists[firstLabel].default = true;\n  }\n\n  return formattedPlaylists;\n};\n\nvar organizeVttPlaylists = function organizeVttPlaylists(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  return playlists.reduce(function (a, playlist) {\n    var label = playlist.attributes.lang || 'text'; // skip if we already have subtitles\n\n    if (a[label]) {\n      return a;\n    }\n\n    a[label] = {\n      language: label,\n      default: false,\n      autoselect: false,\n      playlists: addSegmentInfoFromSidx([formatVttPlaylist(playlist)], sidxMapping),\n      uri: ''\n    };\n    return a;\n  }, {});\n};\n\nvar formatVideoPlaylist = function formatVideoPlaylist(_ref3) {\n  var _attributes3;\n\n  var attributes = _ref3.attributes,\n      segments = _ref3.segments,\n      sidx = _ref3.sidx;\n  var playlist = {\n    attributes: (_attributes3 = {\n      NAME: attributes.id,\n      AUDIO: 'audio',\n      SUBTITLES: 'subs',\n      RESOLUTION: {\n        width: attributes.width,\n        height: attributes.height\n      },\n      CODECS: attributes.codecs,\n      BANDWIDTH: attributes.bandwidth\n    }, _attributes3['PROGRAM-ID'] = 1, _attributes3),\n    uri: '',\n    endList: (attributes.type || 'static') === 'static',\n    timeline: attributes.periodIndex,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    segments: segments,\n    mediaSequence: segments.length ? segments[0].number : 1\n  };\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  return playlist;\n};\n\nvar toM3u8 = function toM3u8(dashPlaylists, sidxMapping) {\n  var _mediaGroups;\n\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  if (!dashPlaylists.length) {\n    return {};\n  } // grab all master attributes\n\n\n  var _dashPlaylists$0$attr = dashPlaylists[0].attributes,\n      duration = _dashPlaylists$0$attr.sourceDuration,\n      _dashPlaylists$0$attr2 = _dashPlaylists$0$attr.type,\n      type = _dashPlaylists$0$attr2 === void 0 ? 'static' : _dashPlaylists$0$attr2,\n      suggestedPresentationDelay = _dashPlaylists$0$attr.suggestedPresentationDelay,\n      _dashPlaylists$0$attr3 = _dashPlaylists$0$attr.minimumUpdatePeriod,\n      minimumUpdatePeriod = _dashPlaylists$0$attr3 === void 0 ? 0 : _dashPlaylists$0$attr3;\n\n  var videoOnly = function videoOnly(_ref4) {\n    var attributes = _ref4.attributes;\n    return attributes.mimeType === 'video/mp4' || attributes.contentType === 'video';\n  };\n\n  var audioOnly = function audioOnly(_ref5) {\n    var attributes = _ref5.attributes;\n    return attributes.mimeType === 'audio/mp4' || attributes.contentType === 'audio';\n  };\n\n  var vttOnly = function vttOnly(_ref6) {\n    var attributes = _ref6.attributes;\n    return attributes.mimeType === 'text/vtt' || attributes.contentType === 'text';\n  };\n\n  var videoPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist);\n  var audioPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly));\n  var vttPlaylists = dashPlaylists.filter(vttOnly);\n  var master = {\n    allowCache: true,\n    discontinuityStarts: [],\n    segments: [],\n    endList: true,\n    mediaGroups: (_mediaGroups = {\n      AUDIO: {},\n      VIDEO: {}\n    }, _mediaGroups['CLOSED-CAPTIONS'] = {}, _mediaGroups.SUBTITLES = {}, _mediaGroups),\n    uri: '',\n    duration: duration,\n    playlists: addSegmentInfoFromSidx(videoPlaylists, sidxMapping),\n    minimumUpdatePeriod: minimumUpdatePeriod * 1000\n  };\n\n  if (type === 'dynamic') {\n    master.suggestedPresentationDelay = suggestedPresentationDelay;\n  }\n\n  if (audioPlaylists.length) {\n    master.mediaGroups.AUDIO.audio = organizeAudioPlaylists(audioPlaylists, sidxMapping);\n  }\n\n  if (vttPlaylists.length) {\n    master.mediaGroups.SUBTITLES.subs = organizeVttPlaylists(vttPlaylists, sidxMapping);\n  }\n\n  return master;\n};\n/**\n * Calculates the R (repetition) value for a live stream (for the final segment\n * in a manifest where the r value is negative 1)\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {number} time\n *        current time (typically the total time up until the final segment)\n * @param {number} duration\n *        duration property for the given <S />\n *\n * @return {number}\n *        R value to reach the end of the given period\n */\n\n\nvar getLiveRValue = function getLiveRValue(attributes, time, duration) {\n  var NOW = attributes.NOW,\n      clientOffset = attributes.clientOffset,\n      availabilityStartTime = attributes.availabilityStartTime,\n      _attributes$timescale = attributes.timescale,\n      timescale = _attributes$timescale === void 0 ? 1 : _attributes$timescale,\n      _attributes$start = attributes.start,\n      start = _attributes$start === void 0 ? 0 : _attributes$start,\n      _attributes$minimumUp = attributes.minimumUpdatePeriod,\n      minimumUpdatePeriod = _attributes$minimumUp === void 0 ? 0 : _attributes$minimumUp;\n  var now = (NOW + clientOffset) / 1000;\n  var periodStartWC = availabilityStartTime + start;\n  var periodEndWC = now + minimumUpdatePeriod;\n  var periodDuration = periodEndWC - periodStartWC;\n  return Math.ceil((periodDuration * timescale - time) / duration);\n};\n/**\n * Uses information provided by SegmentTemplate.SegmentTimeline to determine segment\n * timing and duration\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseByTimeline = function parseByTimeline(attributes, segmentTimeline) {\n  var _attributes$type = attributes.type,\n      type = _attributes$type === void 0 ? 'static' : _attributes$type,\n      _attributes$minimumUp2 = attributes.minimumUpdatePeriod,\n      minimumUpdatePeriod = _attributes$minimumUp2 === void 0 ? 0 : _attributes$minimumUp2,\n      _attributes$media = attributes.media,\n      media = _attributes$media === void 0 ? '' : _attributes$media,\n      sourceDuration = attributes.sourceDuration,\n      _attributes$timescale2 = attributes.timescale,\n      timescale = _attributes$timescale2 === void 0 ? 1 : _attributes$timescale2,\n      _attributes$startNumb = attributes.startNumber,\n      startNumber = _attributes$startNumb === void 0 ? 1 : _attributes$startNumb,\n      timeline = attributes.periodIndex;\n  var segments = [];\n  var time = -1;\n\n  for (var sIndex = 0; sIndex < segmentTimeline.length; sIndex++) {\n    var S = segmentTimeline[sIndex];\n    var duration = S.d;\n    var repeat = S.r || 0;\n    var segmentTime = S.t || 0;\n\n    if (time < 0) {\n      // first segment\n      time = segmentTime;\n    }\n\n    if (segmentTime && segmentTime > time) {\n      // discontinuity\n      // TODO: How to handle this type of discontinuity\n      // timeline++ here would treat it like HLS discontuity and content would\n      // get appended without gap\n      // E.G.\n      //  <S t=\"0\" d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S t=\"5\" d=\"1\" />\n      // would have $Time$ values of [0, 1, 2, 5]\n      // should this be appened at time positions [0, 1, 2, 3],(#EXT-X-DISCONTINUITY)\n      // or [0, 1, 2, gap, gap, 5]? (#EXT-X-GAP)\n      // does the value of sourceDuration consider this when calculating arbitrary\n      // negative @r repeat value?\n      // E.G. Same elements as above with this added at the end\n      //  <S d=\"1\" r=\"-1\" />\n      //  with a sourceDuration of 10\n      // Would the 2 gaps be included in the time duration calculations resulting in\n      // 8 segments with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9] or 10 segments\n      // with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9, 10, 11] ?\n      time = segmentTime;\n    }\n\n    var count = void 0;\n\n    if (repeat < 0) {\n      var nextS = sIndex + 1;\n\n      if (nextS === segmentTimeline.length) {\n        // last segment\n        if (type === 'dynamic' && minimumUpdatePeriod > 0 && media.indexOf('$Number$') > 0) {\n          count = getLiveRValue(attributes, time, duration);\n        } else {\n          // TODO: This may be incorrect depending on conclusion of TODO above\n          count = (sourceDuration * timescale - time) / duration;\n        }\n      } else {\n        count = (segmentTimeline[nextS].t - time) / duration;\n      }\n    } else {\n      count = repeat + 1;\n    }\n\n    var end = startNumber + segments.length + count;\n    var number = startNumber + segments.length;\n\n    while (number < end) {\n      segments.push({\n        number: number,\n        duration: duration / timescale,\n        time: time,\n        timeline: timeline\n      });\n      time += duration;\n      number++;\n    }\n  }\n\n  return segments;\n};\n\nvar identifierPattern = /\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g;\n/**\n * Replaces template identifiers with corresponding values. To be used as the callback\n * for String.prototype.replace\n *\n * @name replaceCallback\n * @function\n * @param {string} match\n *        Entire match of identifier\n * @param {string} identifier\n *        Name of matched identifier\n * @param {string} format\n *        Format tag string. Its presence indicates that padding is expected\n * @param {string} width\n *        Desired length of the replaced value. Values less than this width shall be left\n *        zero padded\n * @return {string}\n *         Replacement for the matched identifier\n */\n\n/**\n * Returns a function to be used as a callback for String.prototype.replace to replace\n * template identifiers\n *\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {replaceCallback}\n *         Callback to be used with String.prototype.replace to replace identifiers\n */\n\nvar identifierReplacement = function identifierReplacement(values) {\n  return function (match, identifier, format, width) {\n    if (match === '$$') {\n      // escape sequence\n      return '$';\n    }\n\n    if (typeof values[identifier] === 'undefined') {\n      return match;\n    }\n\n    var value = '' + values[identifier];\n\n    if (identifier === 'RepresentationID') {\n      // Format tag shall not be present with RepresentationID\n      return value;\n    }\n\n    if (!format) {\n      width = 1;\n    } else {\n      width = parseInt(width, 10);\n    }\n\n    if (value.length >= width) {\n      return value;\n    }\n\n    return \"\" + new Array(width - value.length + 1).join('0') + value;\n  };\n};\n/**\n * Constructs a segment url from a template string\n *\n * @param {string} url\n *        Template string to construct url from\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {string}\n *         Segment url with identifiers replaced\n */\n\n\nvar constructTemplateUrl = function constructTemplateUrl(url, values) {\n  return url.replace(identifierPattern, identifierReplacement(values));\n};\n/**\n * Generates a list of objects containing timing and duration information about each\n * segment needed to generate segment uris and the complete segment object\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseTemplateInfo = function parseTemplateInfo(attributes, segmentTimeline) {\n  if (!attributes.duration && !segmentTimeline) {\n    // if neither @duration or SegmentTimeline are present, then there shall be exactly\n    // one media segment\n    return [{\n      number: attributes.startNumber || 1,\n      duration: attributes.sourceDuration,\n      time: 0,\n      timeline: attributes.periodIndex\n    }];\n  }\n\n  if (attributes.duration) {\n    return parseByDuration(attributes);\n  }\n\n  return parseByTimeline(attributes, segmentTimeline);\n};\n/**\n * Generates a list of segments using information provided by the SegmentTemplate element\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object[]}\n *         List of segment objects\n */\n\n\nvar segmentsFromTemplate = function segmentsFromTemplate(attributes, segmentTimeline) {\n  var templateValues = {\n    RepresentationID: attributes.id,\n    Bandwidth: attributes.bandwidth || 0\n  };\n  var _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {\n    sourceURL: '',\n    range: ''\n  } : _attributes$initializ;\n  var mapSegment = urlTypeToSegment({\n    baseUrl: attributes.baseUrl,\n    source: constructTemplateUrl(initialization.sourceURL, templateValues),\n    range: initialization.range\n  });\n  var segments = parseTemplateInfo(attributes, segmentTimeline);\n  return segments.map(function (segment) {\n    templateValues.Number = segment.number;\n    templateValues.Time = segment.time;\n    var uri = constructTemplateUrl(attributes.media || '', templateValues);\n    return {\n      uri: uri,\n      timeline: segment.timeline,\n      duration: segment.duration,\n      resolvedUri: resolveUrl(attributes.baseUrl || '', uri),\n      map: mapSegment,\n      number: segment.number\n    };\n  });\n};\n/**\n * Converts a <SegmentUrl> (of type URLType from the DASH spec 5.3.9.2 Table 14)\n * to an object that matches the output of a segment in videojs/mpd-parser\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object} segmentUrl\n *   <SegmentURL> node to translate into a segment object\n * @return {Object} translated segment object\n */\n\n\nvar SegmentURLToSegmentObject = function SegmentURLToSegmentObject(attributes, segmentUrl) {\n  var baseUrl = attributes.baseUrl,\n      _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {} : _attributes$initializ;\n  var initSegment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  var segment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: segmentUrl.media,\n    range: segmentUrl.mediaRange\n  });\n  segment.map = initSegment;\n  return segment;\n};\n/**\n * Generates a list of segments using information provided by the SegmentList element\n * SegmentList (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object.<Array>} list of segments\n */\n\n\nvar segmentsFromList = function segmentsFromList(attributes, segmentTimeline) {\n  var duration = attributes.duration,\n      _attributes$segmentUr = attributes.segmentUrls,\n      segmentUrls = _attributes$segmentUr === void 0 ? [] : _attributes$segmentUr; // Per spec (5.3.9.2.1) no way to determine segment duration OR\n  // if both SegmentTimeline and @duration are defined, it is outside of spec.\n\n  if (!duration && !segmentTimeline || duration && segmentTimeline) {\n    throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);\n  }\n\n  var segmentUrlMap = segmentUrls.map(function (segmentUrlObject) {\n    return SegmentURLToSegmentObject(attributes, segmentUrlObject);\n  });\n  var segmentTimeInfo;\n\n  if (duration) {\n    segmentTimeInfo = parseByDuration(attributes);\n  }\n\n  if (segmentTimeline) {\n    segmentTimeInfo = parseByTimeline(attributes, segmentTimeline);\n  }\n\n  var segments = segmentTimeInfo.map(function (segmentTime, index) {\n    if (segmentUrlMap[index]) {\n      var segment = segmentUrlMap[index];\n      segment.timeline = segmentTime.timeline;\n      segment.duration = segmentTime.duration;\n      segment.number = segmentTime.number;\n      return segment;\n    } // Since we're mapping we should get rid of any blank segments (in case\n    // the given SegmentTimeline is handling for more elements than we have\n    // SegmentURLs for).\n\n  }).filter(function (segment) {\n    return segment;\n  });\n  return segments;\n};\n\nvar generateSegments = function generateSegments(_ref) {\n  var attributes = _ref.attributes,\n      segmentInfo = _ref.segmentInfo;\n  var segmentAttributes;\n  var segmentsFn;\n\n  if (segmentInfo.template) {\n    segmentsFn = segmentsFromTemplate;\n    segmentAttributes = merge(attributes, segmentInfo.template);\n  } else if (segmentInfo.base) {\n    segmentsFn = segmentsFromBase;\n    segmentAttributes = merge(attributes, segmentInfo.base);\n  } else if (segmentInfo.list) {\n    segmentsFn = segmentsFromList;\n    segmentAttributes = merge(attributes, segmentInfo.list);\n  }\n\n  var segmentsInfo = {\n    attributes: attributes\n  };\n\n  if (!segmentsFn) {\n    return segmentsInfo;\n  }\n\n  var segments = segmentsFn(segmentAttributes, segmentInfo.timeline); // The @duration attribute will be used to determin the playlist's targetDuration which\n  // must be in seconds. Since we've generated the segment list, we no longer need\n  // @duration to be in @timescale units, so we can convert it here.\n\n  if (segmentAttributes.duration) {\n    var _segmentAttributes = segmentAttributes,\n        duration = _segmentAttributes.duration,\n        _segmentAttributes$ti = _segmentAttributes.timescale,\n        timescale = _segmentAttributes$ti === void 0 ? 1 : _segmentAttributes$ti;\n    segmentAttributes.duration = duration / timescale;\n  } else if (segments.length) {\n    // if there is no @duration attribute, use the largest segment duration as\n    // as target duration\n    segmentAttributes.duration = segments.reduce(function (max, segment) {\n      return Math.max(max, Math.ceil(segment.duration));\n    }, 0);\n  } else {\n    segmentAttributes.duration = 0;\n  }\n\n  segmentsInfo.attributes = segmentAttributes;\n  segmentsInfo.segments = segments; // This is a sidx box without actual segment information\n\n  if (segmentInfo.base && segmentAttributes.indexRange) {\n    segmentsInfo.sidx = segments[0];\n    segmentsInfo.segments = [];\n  }\n\n  return segmentsInfo;\n};\n\nvar toPlaylists = function toPlaylists(representations) {\n  return representations.map(generateSegments);\n};\n\nvar findChildren = function findChildren(element, name) {\n  return from(element.childNodes).filter(function (_ref) {\n    var tagName = _ref.tagName;\n    return tagName === name;\n  });\n};\n\nvar getContent = function getContent(element) {\n  return element.textContent.trim();\n};\n\nvar parseDuration = function parseDuration(str) {\n  var SECONDS_IN_YEAR = 365 * 24 * 60 * 60;\n  var SECONDS_IN_MONTH = 30 * 24 * 60 * 60;\n  var SECONDS_IN_DAY = 24 * 60 * 60;\n  var SECONDS_IN_HOUR = 60 * 60;\n  var SECONDS_IN_MIN = 60; // P10Y10M10DT10H10M10.1S\n\n  var durationRegex = /P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/;\n  var match = durationRegex.exec(str);\n\n  if (!match) {\n    return 0;\n  }\n\n  var _match$slice = match.slice(1),\n      year = _match$slice[0],\n      month = _match$slice[1],\n      day = _match$slice[2],\n      hour = _match$slice[3],\n      minute = _match$slice[4],\n      second = _match$slice[5];\n\n  return parseFloat(year || 0) * SECONDS_IN_YEAR + parseFloat(month || 0) * SECONDS_IN_MONTH + parseFloat(day || 0) * SECONDS_IN_DAY + parseFloat(hour || 0) * SECONDS_IN_HOUR + parseFloat(minute || 0) * SECONDS_IN_MIN + parseFloat(second || 0);\n};\n\nvar parseDate = function parseDate(str) {\n  // Date format without timezone according to ISO 8601\n  // YYY-MM-DDThh:mm:ss.ssssss\n  var dateRegex = /^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/; // If the date string does not specifiy a timezone, we must specifiy UTC. This is\n  // expressed by ending with 'Z'\n\n  if (dateRegex.test(str)) {\n    str += 'Z';\n  }\n\n  return Date.parse(str);\n};\n\nvar parsers = {\n  /**\n   * Specifies the duration of the entire Media Presentation. Format is a duration string\n   * as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  mediaPresentationDuration: function mediaPresentationDuration(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the Segment availability start time for all Segments referred to in this\n   * MPD. For a dynamic manifest, it specifies the anchor for the earliest availability\n   * time. Format is a date string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The date as seconds from unix epoch\n   */\n  availabilityStartTime: function availabilityStartTime(value) {\n    return parseDate(value) / 1000;\n  },\n\n  /**\n   * Specifies the smallest period between potential changes to the MPD. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  minimumUpdatePeriod: function minimumUpdatePeriod(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the suggested presentation delay. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  suggestedPresentationDelay: function suggestedPresentationDelay(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * specifices the type of mpd. Can be either \"static\" or \"dynamic\"\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   *\n   * @return {string}\n   *         The type as a string\n   */\n  type: function type(value) {\n    return value;\n  },\n\n  /**\n   * Specifies the duration of the smallest time shifting buffer for any Representation\n   * in the MPD. Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  timeShiftBufferDepth: function timeShiftBufferDepth(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the PeriodStart time of the Period relative to the availabilityStarttime.\n   * Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  start: function start(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the width of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed width\n   */\n  width: function width(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the height of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed height\n   */\n  height: function height(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the bitrate of the representation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed bandwidth\n   */\n  bandwidth: function bandwidth(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the number of the first Media Segment in this Representation in the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  startNumber: function startNumber(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the timescale in units per seconds\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The aprsed timescale\n   */\n  timescale: function timescale(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the constant approximate Segment duration\n   * NOTE: The <Period> element also contains an @duration attribute. This duration\n   *       specifies the duration of the Period. This attribute is currently not\n   *       supported by the rest of the parser, however we still check for it to prevent\n   *       errors.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  duration: function duration(value) {\n    var parsedValue = parseInt(value, 10);\n\n    if (isNaN(parsedValue)) {\n      return parseDuration(value);\n    }\n\n    return parsedValue;\n  },\n\n  /**\n   * Specifies the Segment duration, in units of the value of the @timescale.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  d: function d(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the MPD start time, in @timescale units, the first Segment in the series\n   * starts relative to the beginning of the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed time\n   */\n  t: function t(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the repeat count of the number of following contiguous Segments with the\n   * same duration expressed by the value of @d\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  r: function r(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Default parser for all other attributes. Acts as a no-op and just returns the value\n   * as a string\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {string}\n   *         Unparsed value\n   */\n  DEFAULT: function DEFAULT(value) {\n    return value;\n  }\n};\n/**\n * Gets all the attributes and values of the provided node, parses attributes with known\n * types, and returns an object with attribute names mapped to values.\n *\n * @param {Node} el\n *        The node to parse attributes from\n * @return {Object}\n *         Object with all attributes of el parsed\n */\n\nvar parseAttributes = function parseAttributes(el) {\n  if (!(el && el.attributes)) {\n    return {};\n  }\n\n  return from(el.attributes).reduce(function (a, e) {\n    var parseFn = parsers[e.name] || parsers.DEFAULT;\n    a[e.name] = parseFn(e.value);\n    return a;\n  }, {});\n};\n\nvar keySystemsMap = {\n  'urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b': 'org.w3.clearkey',\n  'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed': 'com.widevine.alpha',\n  'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95': 'com.microsoft.playready',\n  'urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb': 'com.adobe.primetime'\n};\n/**\n * Builds a list of urls that is the product of the reference urls and BaseURL values\n *\n * @param {string[]} referenceUrls\n *        List of reference urls to resolve to\n * @param {Node[]} baseUrlElements\n *        List of BaseURL nodes from the mpd\n * @return {string[]}\n *         List of resolved urls\n */\n\nvar buildBaseUrls = function buildBaseUrls(referenceUrls, baseUrlElements) {\n  if (!baseUrlElements.length) {\n    return referenceUrls;\n  }\n\n  return flatten(referenceUrls.map(function (reference) {\n    return baseUrlElements.map(function (baseUrlElement) {\n      return resolveUrl(reference, getContent(baseUrlElement));\n    });\n  }));\n};\n/**\n * Contains all Segment information for its containing AdaptationSet\n *\n * @typedef {Object} SegmentInformation\n * @property {Object|undefined} template\n *           Contains the attributes for the SegmentTemplate node\n * @property {Object[]|undefined} timeline\n *           Contains a list of atrributes for each S node within the SegmentTimeline node\n * @property {Object|undefined} list\n *           Contains the attributes for the SegmentList node\n * @property {Object|undefined} base\n *           Contains the attributes for the SegmentBase node\n */\n\n/**\n * Returns all available Segment information contained within the AdaptationSet node\n *\n * @param {Node} adaptationSet\n *        The AdaptationSet node to get Segment information from\n * @return {SegmentInformation}\n *         The Segment information contained within the provided AdaptationSet\n */\n\n\nvar getSegmentInformation = function getSegmentInformation(adaptationSet) {\n  var segmentTemplate = findChildren(adaptationSet, 'SegmentTemplate')[0];\n  var segmentList = findChildren(adaptationSet, 'SegmentList')[0];\n  var segmentUrls = segmentList && findChildren(segmentList, 'SegmentURL').map(function (s) {\n    return merge({\n      tag: 'SegmentURL'\n    }, parseAttributes(s));\n  });\n  var segmentBase = findChildren(adaptationSet, 'SegmentBase')[0];\n  var segmentTimelineParentNode = segmentList || segmentTemplate;\n  var segmentTimeline = segmentTimelineParentNode && findChildren(segmentTimelineParentNode, 'SegmentTimeline')[0];\n  var segmentInitializationParentNode = segmentList || segmentBase || segmentTemplate;\n  var segmentInitialization = segmentInitializationParentNode && findChildren(segmentInitializationParentNode, 'Initialization')[0]; // SegmentTemplate is handled slightly differently, since it can have both\n  // @initialization and an <Initialization> node.  @initialization can be templated,\n  // while the node can have a url and range specified.  If the <SegmentTemplate> has\n  // both @initialization and an <Initialization> subelement we opt to override with\n  // the node, as this interaction is not defined in the spec.\n\n  var template = segmentTemplate && parseAttributes(segmentTemplate);\n\n  if (template && segmentInitialization) {\n    template.initialization = segmentInitialization && parseAttributes(segmentInitialization);\n  } else if (template && template.initialization) {\n    // If it is @initialization we convert it to an object since this is the format that\n    // later functions will rely on for the initialization segment.  This is only valid\n    // for <SegmentTemplate>\n    template.initialization = {\n      sourceURL: template.initialization\n    };\n  }\n\n  var segmentInfo = {\n    template: template,\n    timeline: segmentTimeline && findChildren(segmentTimeline, 'S').map(function (s) {\n      return parseAttributes(s);\n    }),\n    list: segmentList && merge(parseAttributes(segmentList), {\n      segmentUrls: segmentUrls,\n      initialization: parseAttributes(segmentInitialization)\n    }),\n    base: segmentBase && merge(parseAttributes(segmentBase), {\n      initialization: parseAttributes(segmentInitialization)\n    })\n  };\n  Object.keys(segmentInfo).forEach(function (key) {\n    if (!segmentInfo[key]) {\n      delete segmentInfo[key];\n    }\n  });\n  return segmentInfo;\n};\n/**\n * Contains Segment information and attributes needed to construct a Playlist object\n * from a Representation\n *\n * @typedef {Object} RepresentationInformation\n * @property {SegmentInformation} segmentInfo\n *           Segment information for this Representation\n * @property {Object} attributes\n *           Inherited attributes for this Representation\n */\n\n/**\n * Maps a Representation node to an object containing Segment information and attributes\n *\n * @name inheritBaseUrlsCallback\n * @function\n * @param {Node} representation\n *        Representation node from the mpd\n * @return {RepresentationInformation}\n *         Representation information needed to construct a Playlist object\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Representation nodes to\n * Segment information and attributes using inherited BaseURL nodes.\n *\n * @param {Object} adaptationSetAttributes\n *        Contains attributes inherited by the AdaptationSet\n * @param {string[]} adaptationSetBaseUrls\n *        Contains list of resolved base urls inherited by the AdaptationSet\n * @param {SegmentInformation} adaptationSetSegmentInfo\n *        Contains Segment information for the AdaptationSet\n * @return {inheritBaseUrlsCallback}\n *         Callback map function\n */\n\n\nvar inheritBaseUrls = function inheritBaseUrls(adaptationSetAttributes, adaptationSetBaseUrls, adaptationSetSegmentInfo) {\n  return function (representation) {\n    var repBaseUrlElements = findChildren(representation, 'BaseURL');\n    var repBaseUrls = buildBaseUrls(adaptationSetBaseUrls, repBaseUrlElements);\n    var attributes = merge(adaptationSetAttributes, parseAttributes(representation));\n    var representationSegmentInfo = getSegmentInformation(representation);\n    return repBaseUrls.map(function (baseUrl) {\n      return {\n        segmentInfo: merge(adaptationSetSegmentInfo, representationSegmentInfo),\n        attributes: merge(attributes, {\n          baseUrl: baseUrl\n        })\n      };\n    });\n  };\n};\n/**\n * Tranforms a series of content protection nodes to\n * an object containing pssh data by key system\n *\n * @param {Node[]} contentProtectionNodes\n *        Content protection nodes\n * @return {Object}\n *        Object containing pssh data by key system\n */\n\n\nvar generateKeySystemInformation = function generateKeySystemInformation(contentProtectionNodes) {\n  return contentProtectionNodes.reduce(function (acc, node) {\n    var attributes = parseAttributes(node);\n    var keySystem = keySystemsMap[attributes.schemeIdUri];\n\n    if (keySystem) {\n      acc[keySystem] = {\n        attributes: attributes\n      };\n      var psshNode = findChildren(node, 'cenc:pssh')[0];\n\n      if (psshNode) {\n        var pssh = getContent(psshNode);\n        var psshBuffer = pssh && decodeB64ToUint8Array(pssh);\n        acc[keySystem].pssh = psshBuffer;\n      }\n    }\n\n    return acc;\n  }, {});\n};\n/**\n * Maps an AdaptationSet node to a list of Representation information objects\n *\n * @name toRepresentationsCallback\n * @function\n * @param {Node} adaptationSet\n *        AdaptationSet node from the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping AdaptationSet nodes to a list of\n * Representation information objects\n *\n * @param {Object} periodAttributes\n *        Contains attributes inherited by the Period\n * @param {string[]} periodBaseUrls\n *        Contains list of resolved base urls inherited by the Period\n * @param {string[]} periodSegmentInfo\n *        Contains Segment Information at the period level\n * @return {toRepresentationsCallback}\n *         Callback map function\n */\n\n\nvar toRepresentations = function toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo) {\n  return function (adaptationSet) {\n    var adaptationSetAttributes = parseAttributes(adaptationSet);\n    var adaptationSetBaseUrls = buildBaseUrls(periodBaseUrls, findChildren(adaptationSet, 'BaseURL'));\n    var role = findChildren(adaptationSet, 'Role')[0];\n    var roleAttributes = {\n      role: parseAttributes(role)\n    };\n    var attrs = merge(periodAttributes, adaptationSetAttributes, roleAttributes);\n    var contentProtection = generateKeySystemInformation(findChildren(adaptationSet, 'ContentProtection'));\n\n    if (Object.keys(contentProtection).length) {\n      attrs = merge(attrs, {\n        contentProtection: contentProtection\n      });\n    }\n\n    var segmentInfo = getSegmentInformation(adaptationSet);\n    var representations = findChildren(adaptationSet, 'Representation');\n    var adaptationSetSegmentInfo = merge(periodSegmentInfo, segmentInfo);\n    return flatten(representations.map(inheritBaseUrls(attrs, adaptationSetBaseUrls, adaptationSetSegmentInfo)));\n  };\n};\n/**\n * Maps an Period node to a list of Representation inforamtion objects for all\n * AdaptationSet nodes contained within the Period\n *\n * @name toAdaptationSetsCallback\n * @function\n * @param {Node} period\n *        Period node from the mpd\n * @param {number} periodIndex\n *        Index of the Period within the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Period nodes to a list of\n * Representation information objects\n *\n * @param {Object} mpdAttributes\n *        Contains attributes inherited by the mpd\n * @param {string[]} mpdBaseUrls\n *        Contains list of resolved base urls inherited by the mpd\n * @return {toAdaptationSetsCallback}\n *         Callback map function\n */\n\n\nvar toAdaptationSets = function toAdaptationSets(mpdAttributes, mpdBaseUrls) {\n  return function (period, index) {\n    var periodBaseUrls = buildBaseUrls(mpdBaseUrls, findChildren(period, 'BaseURL'));\n    var periodAtt = parseAttributes(period);\n    var parsedPeriodId = parseInt(periodAtt.id, 10); // fallback to mapping index if Period@id is not a number\n\n    var periodIndex = window.isNaN(parsedPeriodId) ? index : parsedPeriodId;\n    var periodAttributes = merge(mpdAttributes, {\n      periodIndex: periodIndex\n    });\n    var adaptationSets = findChildren(period, 'AdaptationSet');\n    var periodSegmentInfo = getSegmentInformation(period);\n    return flatten(adaptationSets.map(toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo)));\n  };\n};\n/**\n * Traverses the mpd xml tree to generate a list of Representation information objects\n * that have inherited attributes from parent nodes\n *\n * @param {Node} mpd\n *        The root node of the mpd\n * @param {Object} options\n *        Available options for inheritAttributes\n * @param {string} options.manifestUri\n *        The uri source of the mpd\n * @param {number} options.NOW\n *        Current time per DASH IOP.  Default is current time in ms since epoch\n * @param {number} options.clientOffset\n *        Client time difference from NOW (in milliseconds)\n * @return {RepresentationInformation[]}\n *         List of objects containing Representation information\n */\n\n\nvar inheritAttributes = function inheritAttributes(mpd, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$manifestUri = _options.manifestUri,\n      manifestUri = _options$manifestUri === void 0 ? '' : _options$manifestUri,\n      _options$NOW = _options.NOW,\n      NOW = _options$NOW === void 0 ? Date.now() : _options$NOW,\n      _options$clientOffset = _options.clientOffset,\n      clientOffset = _options$clientOffset === void 0 ? 0 : _options$clientOffset;\n  var periods = findChildren(mpd, 'Period');\n\n  if (!periods.length) {\n    throw new Error(errors.INVALID_NUMBER_OF_PERIOD);\n  }\n\n  var mpdAttributes = parseAttributes(mpd);\n  var mpdBaseUrls = buildBaseUrls([manifestUri], findChildren(mpd, 'BaseURL'));\n  mpdAttributes.sourceDuration = mpdAttributes.mediaPresentationDuration || 0;\n  mpdAttributes.NOW = NOW;\n  mpdAttributes.clientOffset = clientOffset;\n  return flatten(periods.map(toAdaptationSets(mpdAttributes, mpdBaseUrls)));\n};\n\nvar stringToMpdXml = function stringToMpdXml(manifestString) {\n  if (manifestString === '') {\n    throw new Error(errors.DASH_EMPTY_MANIFEST);\n  }\n\n  var parser = new DOMParser();\n  var xml = parser.parseFromString(manifestString, 'application/xml');\n  var mpd = xml && xml.documentElement.tagName === 'MPD' ? xml.documentElement : null;\n\n  if (!mpd || mpd && mpd.getElementsByTagName('parsererror').length > 0) {\n    throw new Error(errors.DASH_INVALID_XML);\n  }\n\n  return mpd;\n};\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} mpd\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\n\nvar parseUTCTimingScheme = function parseUTCTimingScheme(mpd) {\n  var UTCTimingNode = findChildren(mpd, 'UTCTiming')[0];\n\n  if (!UTCTimingNode) {\n    return null;\n  }\n\n  var attributes = parseAttributes(UTCTimingNode);\n\n  switch (attributes.schemeIdUri) {\n    case 'urn:mpeg:dash:utc:http-head:2014':\n    case 'urn:mpeg:dash:utc:http-head:2012':\n      attributes.method = 'HEAD';\n      break;\n\n    case 'urn:mpeg:dash:utc:http-xsdate:2014':\n    case 'urn:mpeg:dash:utc:http-iso:2014':\n    case 'urn:mpeg:dash:utc:http-xsdate:2012':\n    case 'urn:mpeg:dash:utc:http-iso:2012':\n      attributes.method = 'GET';\n      break;\n\n    case 'urn:mpeg:dash:utc:direct:2014':\n    case 'urn:mpeg:dash:utc:direct:2012':\n      attributes.method = 'DIRECT';\n      attributes.value = Date.parse(attributes.value);\n      break;\n\n    case 'urn:mpeg:dash:utc:http-ntp:2014':\n    case 'urn:mpeg:dash:utc:ntp:2014':\n    case 'urn:mpeg:dash:utc:sntp:2014':\n    default:\n      throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME);\n  }\n\n  return attributes;\n};\n\nvar VERSION = version;\n\nvar parse = function parse(manifestString, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return toM3u8(toPlaylists(inheritAttributes(stringToMpdXml(manifestString), options)), options.sidxMapping);\n};\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} manifestString\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\n\nvar parseUTCTiming = function parseUTCTiming(manifestString) {\n  return parseUTCTimingScheme(stringToMpdXml(manifestString));\n};\n\nexport { VERSION, inheritAttributes, parse, parseUTCTiming, stringToMpdXml, toM3u8, toPlaylists };","/*! @name @videojs/vhs-utils @version 1.3.0 @license MIT */\n'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar window = _interopDefault(require('global/window'));\n\nvar atob = function atob(s) {\n  return window.atob ? window.atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nfunction decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}\n\nmodule.exports = decodeB64ToUint8Array;","module.exports = SafeParseTuple;\n\nfunction SafeParseTuple(obj, reviver) {\n  var json;\n  var error = null;\n\n  try {\n    json = JSON.parse(obj, reviver);\n  } catch (err) {\n    error = err;\n  }\n\n  return [error, json];\n}","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Parse the internal MP4 structure into an equivalent javascript\n * object.\n */\n'use strict';\n\nvar inspectMp4,\n    _textifyMp,\n    toUnsigned = require('../utils/bin').toUnsigned,\n    parseMp4Date = function parseMp4Date(seconds) {\n  return new Date(seconds * 1000 - 2082844800000);\n},\n    parseSampleFlags = function parseSampleFlags(flags) {\n  return {\n    isLeading: (flags[0] & 0x0c) >>> 2,\n    dependsOn: flags[0] & 0x03,\n    isDependedOn: (flags[1] & 0xc0) >>> 6,\n    hasRedundancy: (flags[1] & 0x30) >>> 4,\n    paddingValue: (flags[1] & 0x0e) >>> 1,\n    isNonSyncSample: flags[1] & 0x01,\n    degradationPriority: flags[2] << 8 | flags[3]\n  };\n},\n\n/**\n * Returns the string representation of an ASCII encoded four byte buffer.\n * @param buffer {Uint8Array} a four-byte buffer to translate\n * @return {string} the corresponding string\n */\nparseType = function parseType(buffer) {\n  var result = '';\n  result += String.fromCharCode(buffer[0]);\n  result += String.fromCharCode(buffer[1]);\n  result += String.fromCharCode(buffer[2]);\n  result += String.fromCharCode(buffer[3]);\n  return result;\n},\n    // Find the data for a box specified by its path\nfindBox = function findBox(data, path) {\n  var results = [],\n      i,\n      size,\n      type,\n      end,\n      subresults;\n\n  if (!path.length) {\n    // short-circuit the search for empty paths\n    return null;\n  }\n\n  for (i = 0; i < data.byteLength;) {\n    size = toUnsigned(data[i] << 24 | data[i + 1] << 16 | data[i + 2] << 8 | data[i + 3]);\n    type = parseType(data.subarray(i + 4, i + 8));\n    end = size > 1 ? i + size : data.byteLength;\n\n    if (type === path[0]) {\n      if (path.length === 1) {\n        // this is the end of the path and we've found the box we were\n        // looking for\n        results.push(data.subarray(i + 8, end));\n      } else {\n        // recursively search for the next box along the path\n        subresults = findBox(data.subarray(i + 8, end), path.slice(1));\n\n        if (subresults.length) {\n          results = results.concat(subresults);\n        }\n      }\n    }\n\n    i = end;\n  } // we've finished searching all of data\n\n\n  return results;\n},\n    nalParse = function nalParse(avcStream) {\n  var avcView = new DataView(avcStream.buffer, avcStream.byteOffset, avcStream.byteLength),\n      result = [],\n      i,\n      length;\n\n  for (i = 0; i + 4 < avcStream.length; i += length) {\n    length = avcView.getUint32(i);\n    i += 4; // bail if this doesn't appear to be an H264 stream\n\n    if (length <= 0) {\n      result.push('<span style=\\'color:red;\\'>MALFORMED DATA</span>');\n      continue;\n    }\n\n    switch (avcStream[i] & 0x1F) {\n      case 0x01:\n        result.push('slice_layer_without_partitioning_rbsp');\n        break;\n\n      case 0x05:\n        result.push('slice_layer_without_partitioning_rbsp_idr');\n        break;\n\n      case 0x06:\n        result.push('sei_rbsp');\n        break;\n\n      case 0x07:\n        result.push('seq_parameter_set_rbsp');\n        break;\n\n      case 0x08:\n        result.push('pic_parameter_set_rbsp');\n        break;\n\n      case 0x09:\n        result.push('access_unit_delimiter_rbsp');\n        break;\n\n      default:\n        result.push('UNKNOWN NAL - ' + avcStream[i] & 0x1F);\n        break;\n    }\n  }\n\n  return result;\n},\n    // registry of handlers for individual mp4 box types\nparse = {\n  // codingname, not a first-class box type. stsd entries share the\n  // same format as real boxes so the parsing infrastructure can be\n  // shared\n  avc1: function avc1(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    return {\n      dataReferenceIndex: view.getUint16(6),\n      width: view.getUint16(24),\n      height: view.getUint16(26),\n      horizresolution: view.getUint16(28) + view.getUint16(30) / 16,\n      vertresolution: view.getUint16(32) + view.getUint16(34) / 16,\n      frameCount: view.getUint16(40),\n      depth: view.getUint16(74),\n      config: inspectMp4(data.subarray(78, data.byteLength))\n    };\n  },\n  avcC: function avcC(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      configurationVersion: data[0],\n      avcProfileIndication: data[1],\n      profileCompatibility: data[2],\n      avcLevelIndication: data[3],\n      lengthSizeMinusOne: data[4] & 0x03,\n      sps: [],\n      pps: []\n    },\n        numOfSequenceParameterSets = data[5] & 0x1f,\n        numOfPictureParameterSets,\n        nalSize,\n        offset,\n        i; // iterate past any SPSs\n\n    offset = 6;\n\n    for (i = 0; i < numOfSequenceParameterSets; i++) {\n      nalSize = view.getUint16(offset);\n      offset += 2;\n      result.sps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\n      offset += nalSize;\n    } // iterate past any PPSs\n\n\n    numOfPictureParameterSets = data[offset];\n    offset++;\n\n    for (i = 0; i < numOfPictureParameterSets; i++) {\n      nalSize = view.getUint16(offset);\n      offset += 2;\n      result.pps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\n      offset += nalSize;\n    }\n\n    return result;\n  },\n  btrt: function btrt(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    return {\n      bufferSizeDB: view.getUint32(0),\n      maxBitrate: view.getUint32(4),\n      avgBitrate: view.getUint32(8)\n    };\n  },\n  esds: function esds(data) {\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      esId: data[6] << 8 | data[7],\n      streamPriority: data[8] & 0x1f,\n      decoderConfig: {\n        objectProfileIndication: data[11],\n        streamType: data[12] >>> 2 & 0x3f,\n        bufferSize: data[13] << 16 | data[14] << 8 | data[15],\n        maxBitrate: data[16] << 24 | data[17] << 16 | data[18] << 8 | data[19],\n        avgBitrate: data[20] << 24 | data[21] << 16 | data[22] << 8 | data[23],\n        decoderConfigDescriptor: {\n          tag: data[24],\n          length: data[25],\n          audioObjectType: data[26] >>> 3 & 0x1f,\n          samplingFrequencyIndex: (data[26] & 0x07) << 1 | data[27] >>> 7 & 0x01,\n          channelConfiguration: data[27] >>> 3 & 0x0f\n        }\n      }\n    };\n  },\n  ftyp: function ftyp(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      majorBrand: parseType(data.subarray(0, 4)),\n      minorVersion: view.getUint32(4),\n      compatibleBrands: []\n    },\n        i = 8;\n\n    while (i < data.byteLength) {\n      result.compatibleBrands.push(parseType(data.subarray(i, i + 4)));\n      i += 4;\n    }\n\n    return result;\n  },\n  dinf: function dinf(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  dref: function dref(data) {\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      dataReferences: inspectMp4(data.subarray(8))\n    };\n  },\n  hdlr: function hdlr(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: view.getUint8(0),\n      flags: new Uint8Array(data.subarray(1, 4)),\n      handlerType: parseType(data.subarray(8, 12)),\n      name: ''\n    },\n        i = 8; // parse out the name field\n\n    for (i = 24; i < data.byteLength; i++) {\n      if (data[i] === 0x00) {\n        // the name field is null-terminated\n        i++;\n        break;\n      }\n\n      result.name += String.fromCharCode(data[i]);\n    } // decode UTF-8 to javascript's internal representation\n    // see http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html\n\n\n    result.name = decodeURIComponent(escape(result.name));\n    return result;\n  },\n  mdat: function mdat(data) {\n    return {\n      byteLength: data.byteLength,\n      nals: nalParse(data)\n    };\n  },\n  mdhd: function mdhd(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        i = 4,\n        language,\n        result = {\n      version: view.getUint8(0),\n      flags: new Uint8Array(data.subarray(1, 4)),\n      language: ''\n    };\n\n    if (result.version === 1) {\n      i += 4;\n      result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\n      i += 8;\n      result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\n      i += 4;\n      result.timescale = view.getUint32(i);\n      i += 8;\n      result.duration = view.getUint32(i); // truncating top 4 bytes\n    } else {\n      result.creationTime = parseMp4Date(view.getUint32(i));\n      i += 4;\n      result.modificationTime = parseMp4Date(view.getUint32(i));\n      i += 4;\n      result.timescale = view.getUint32(i);\n      i += 4;\n      result.duration = view.getUint32(i);\n    }\n\n    i += 4; // language is stored as an ISO-639-2/T code in an array of three 5-bit fields\n    // each field is the packed difference between its ASCII value and 0x60\n\n    language = view.getUint16(i);\n    result.language += String.fromCharCode((language >> 10) + 0x60);\n    result.language += String.fromCharCode(((language & 0x03e0) >> 5) + 0x60);\n    result.language += String.fromCharCode((language & 0x1f) + 0x60);\n    return result;\n  },\n  mdia: function mdia(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  mfhd: function mfhd(data) {\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      sequenceNumber: data[4] << 24 | data[5] << 16 | data[6] << 8 | data[7]\n    };\n  },\n  minf: function minf(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  // codingname, not a first-class box type. stsd entries share the\n  // same format as real boxes so the parsing infrastructure can be\n  // shared\n  mp4a: function mp4a(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      // 6 bytes reserved\n      dataReferenceIndex: view.getUint16(6),\n      // 4 + 4 bytes reserved\n      channelcount: view.getUint16(16),\n      samplesize: view.getUint16(18),\n      // 2 bytes pre_defined\n      // 2 bytes reserved\n      samplerate: view.getUint16(24) + view.getUint16(26) / 65536\n    }; // if there are more bytes to process, assume this is an ISO/IEC\n    // 14496-14 MP4AudioSampleEntry and parse the ESDBox\n\n    if (data.byteLength > 28) {\n      result.streamDescriptor = inspectMp4(data.subarray(28))[0];\n    }\n\n    return result;\n  },\n  moof: function moof(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  moov: function moov(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  mvex: function mvex(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  mvhd: function mvhd(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        i = 4,\n        result = {\n      version: view.getUint8(0),\n      flags: new Uint8Array(data.subarray(1, 4))\n    };\n\n    if (result.version === 1) {\n      i += 4;\n      result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\n      i += 8;\n      result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\n      i += 4;\n      result.timescale = view.getUint32(i);\n      i += 8;\n      result.duration = view.getUint32(i); // truncating top 4 bytes\n    } else {\n      result.creationTime = parseMp4Date(view.getUint32(i));\n      i += 4;\n      result.modificationTime = parseMp4Date(view.getUint32(i));\n      i += 4;\n      result.timescale = view.getUint32(i);\n      i += 4;\n      result.duration = view.getUint32(i);\n    }\n\n    i += 4; // convert fixed-point, base 16 back to a number\n\n    result.rate = view.getUint16(i) + view.getUint16(i + 2) / 16;\n    i += 4;\n    result.volume = view.getUint8(i) + view.getUint8(i + 1) / 8;\n    i += 2;\n    i += 2;\n    i += 2 * 4;\n    result.matrix = new Uint32Array(data.subarray(i, i + 9 * 4));\n    i += 9 * 4;\n    i += 6 * 4;\n    result.nextTrackId = view.getUint32(i);\n    return result;\n  },\n  pdin: function pdin(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    return {\n      version: view.getUint8(0),\n      flags: new Uint8Array(data.subarray(1, 4)),\n      rate: view.getUint32(4),\n      initialDelay: view.getUint32(8)\n    };\n  },\n  sdtp: function sdtp(data) {\n    var result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      samples: []\n    },\n        i;\n\n    for (i = 4; i < data.byteLength; i++) {\n      result.samples.push({\n        dependsOn: (data[i] & 0x30) >> 4,\n        isDependedOn: (data[i] & 0x0c) >> 2,\n        hasRedundancy: data[i] & 0x03\n      });\n    }\n\n    return result;\n  },\n  sidx: function sidx(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      references: [],\n      referenceId: view.getUint32(4),\n      timescale: view.getUint32(8),\n      earliestPresentationTime: view.getUint32(12),\n      firstOffset: view.getUint32(16)\n    },\n        referenceCount = view.getUint16(22),\n        i;\n\n    for (i = 24; referenceCount; i += 12, referenceCount--) {\n      result.references.push({\n        referenceType: (data[i] & 0x80) >>> 7,\n        referencedSize: view.getUint32(i) & 0x7FFFFFFF,\n        subsegmentDuration: view.getUint32(i + 4),\n        startsWithSap: !!(data[i + 8] & 0x80),\n        sapType: (data[i + 8] & 0x70) >>> 4,\n        sapDeltaTime: view.getUint32(i + 8) & 0x0FFFFFFF\n      });\n    }\n\n    return result;\n  },\n  smhd: function smhd(data) {\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      balance: data[4] + data[5] / 256\n    };\n  },\n  stbl: function stbl(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  stco: function stco(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      chunkOffsets: []\n    },\n        entryCount = view.getUint32(4),\n        i;\n\n    for (i = 8; entryCount; i += 4, entryCount--) {\n      result.chunkOffsets.push(view.getUint32(i));\n    }\n\n    return result;\n  },\n  stsc: function stsc(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        entryCount = view.getUint32(4),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      sampleToChunks: []\n    },\n        i;\n\n    for (i = 8; entryCount; i += 12, entryCount--) {\n      result.sampleToChunks.push({\n        firstChunk: view.getUint32(i),\n        samplesPerChunk: view.getUint32(i + 4),\n        sampleDescriptionIndex: view.getUint32(i + 8)\n      });\n    }\n\n    return result;\n  },\n  stsd: function stsd(data) {\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      sampleDescriptions: inspectMp4(data.subarray(8))\n    };\n  },\n  stsz: function stsz(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      sampleSize: view.getUint32(4),\n      entries: []\n    },\n        i;\n\n    for (i = 12; i < data.byteLength; i += 4) {\n      result.entries.push(view.getUint32(i));\n    }\n\n    return result;\n  },\n  stts: function stts(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      timeToSamples: []\n    },\n        entryCount = view.getUint32(4),\n        i;\n\n    for (i = 8; entryCount; i += 8, entryCount--) {\n      result.timeToSamples.push({\n        sampleCount: view.getUint32(i),\n        sampleDelta: view.getUint32(i + 4)\n      });\n    }\n\n    return result;\n  },\n  styp: function styp(data) {\n    return parse.ftyp(data);\n  },\n  tfdt: function tfdt(data) {\n    var result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      baseMediaDecodeTime: toUnsigned(data[4] << 24 | data[5] << 16 | data[6] << 8 | data[7])\n    };\n\n    if (result.version === 1) {\n      result.baseMediaDecodeTime *= Math.pow(2, 32);\n      result.baseMediaDecodeTime += toUnsigned(data[8] << 24 | data[9] << 16 | data[10] << 8 | data[11]);\n    }\n\n    return result;\n  },\n  tfhd: function tfhd(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      trackId: view.getUint32(4)\n    },\n        baseDataOffsetPresent = result.flags[2] & 0x01,\n        sampleDescriptionIndexPresent = result.flags[2] & 0x02,\n        defaultSampleDurationPresent = result.flags[2] & 0x08,\n        defaultSampleSizePresent = result.flags[2] & 0x10,\n        defaultSampleFlagsPresent = result.flags[2] & 0x20,\n        durationIsEmpty = result.flags[0] & 0x010000,\n        defaultBaseIsMoof = result.flags[0] & 0x020000,\n        i;\n    i = 8;\n\n    if (baseDataOffsetPresent) {\n      i += 4; // truncate top 4 bytes\n      // FIXME: should we read the full 64 bits?\n\n      result.baseDataOffset = view.getUint32(12);\n      i += 4;\n    }\n\n    if (sampleDescriptionIndexPresent) {\n      result.sampleDescriptionIndex = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleDurationPresent) {\n      result.defaultSampleDuration = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleSizePresent) {\n      result.defaultSampleSize = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleFlagsPresent) {\n      result.defaultSampleFlags = view.getUint32(i);\n    }\n\n    if (durationIsEmpty) {\n      result.durationIsEmpty = true;\n    }\n\n    if (!baseDataOffsetPresent && defaultBaseIsMoof) {\n      result.baseDataOffsetIsMoof = true;\n    }\n\n    return result;\n  },\n  tkhd: function tkhd(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        i = 4,\n        result = {\n      version: view.getUint8(0),\n      flags: new Uint8Array(data.subarray(1, 4))\n    };\n\n    if (result.version === 1) {\n      i += 4;\n      result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\n      i += 8;\n      result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\n\n      i += 4;\n      result.trackId = view.getUint32(i);\n      i += 4;\n      i += 8;\n      result.duration = view.getUint32(i); // truncating top 4 bytes\n    } else {\n      result.creationTime = parseMp4Date(view.getUint32(i));\n      i += 4;\n      result.modificationTime = parseMp4Date(view.getUint32(i));\n      i += 4;\n      result.trackId = view.getUint32(i);\n      i += 4;\n      i += 4;\n      result.duration = view.getUint32(i);\n    }\n\n    i += 4;\n    i += 2 * 4;\n    result.layer = view.getUint16(i);\n    i += 2;\n    result.alternateGroup = view.getUint16(i);\n    i += 2; // convert fixed-point, base 16 back to a number\n\n    result.volume = view.getUint8(i) + view.getUint8(i + 1) / 8;\n    i += 2;\n    i += 2;\n    result.matrix = new Uint32Array(data.subarray(i, i + 9 * 4));\n    i += 9 * 4;\n    result.width = view.getUint16(i) + view.getUint16(i + 2) / 16;\n    i += 4;\n    result.height = view.getUint16(i) + view.getUint16(i + 2) / 16;\n    return result;\n  },\n  traf: function traf(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  trak: function trak(data) {\n    return {\n      boxes: inspectMp4(data)\n    };\n  },\n  trex: function trex(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      trackId: view.getUint32(4),\n      defaultSampleDescriptionIndex: view.getUint32(8),\n      defaultSampleDuration: view.getUint32(12),\n      defaultSampleSize: view.getUint32(16),\n      sampleDependsOn: data[20] & 0x03,\n      sampleIsDependedOn: (data[21] & 0xc0) >> 6,\n      sampleHasRedundancy: (data[21] & 0x30) >> 4,\n      samplePaddingValue: (data[21] & 0x0e) >> 1,\n      sampleIsDifferenceSample: !!(data[21] & 0x01),\n      sampleDegradationPriority: view.getUint16(22)\n    };\n  },\n  trun: function trun(data) {\n    var result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      samples: []\n    },\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        // Flag interpretation\n    dataOffsetPresent = result.flags[2] & 0x01,\n        // compare with 2nd byte of 0x1\n    firstSampleFlagsPresent = result.flags[2] & 0x04,\n        // compare with 2nd byte of 0x4\n    sampleDurationPresent = result.flags[1] & 0x01,\n        // compare with 2nd byte of 0x100\n    sampleSizePresent = result.flags[1] & 0x02,\n        // compare with 2nd byte of 0x200\n    sampleFlagsPresent = result.flags[1] & 0x04,\n        // compare with 2nd byte of 0x400\n    sampleCompositionTimeOffsetPresent = result.flags[1] & 0x08,\n        // compare with 2nd byte of 0x800\n    sampleCount = view.getUint32(4),\n        offset = 8,\n        sample;\n\n    if (dataOffsetPresent) {\n      // 32 bit signed integer\n      result.dataOffset = view.getInt32(offset);\n      offset += 4;\n    } // Overrides the flags for the first sample only. The order of\n    // optional values will be: duration, size, compositionTimeOffset\n\n\n    if (firstSampleFlagsPresent && sampleCount) {\n      sample = {\n        flags: parseSampleFlags(data.subarray(offset, offset + 4))\n      };\n      offset += 4;\n\n      if (sampleDurationPresent) {\n        sample.duration = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleSizePresent) {\n        sample.size = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleCompositionTimeOffsetPresent) {\n        // Note: this should be a signed int if version is 1\n        sample.compositionTimeOffset = view.getUint32(offset);\n        offset += 4;\n      }\n\n      result.samples.push(sample);\n      sampleCount--;\n    }\n\n    while (sampleCount--) {\n      sample = {};\n\n      if (sampleDurationPresent) {\n        sample.duration = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleSizePresent) {\n        sample.size = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleFlagsPresent) {\n        sample.flags = parseSampleFlags(data.subarray(offset, offset + 4));\n        offset += 4;\n      }\n\n      if (sampleCompositionTimeOffsetPresent) {\n        // Note: this should be a signed int if version is 1\n        sample.compositionTimeOffset = view.getUint32(offset);\n        offset += 4;\n      }\n\n      result.samples.push(sample);\n    }\n\n    return result;\n  },\n  'url ': function url(data) {\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4))\n    };\n  },\n  vmhd: function vmhd(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    return {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      graphicsmode: view.getUint16(4),\n      opcolor: new Uint16Array([view.getUint16(6), view.getUint16(8), view.getUint16(10)])\n    };\n  }\n};\n/**\n * Return a javascript array of box objects parsed from an ISO base\n * media file.\n * @param data {Uint8Array} the binary data of the media to be inspected\n * @return {array} a javascript array of potentially nested box objects\n */\n\n\ninspectMp4 = function inspectMp4(data) {\n  var i = 0,\n      result = [],\n      view,\n      size,\n      type,\n      end,\n      box; // Convert data from Uint8Array to ArrayBuffer, to follow Dataview API\n\n  var ab = new ArrayBuffer(data.length);\n  var v = new Uint8Array(ab);\n\n  for (var z = 0; z < data.length; ++z) {\n    v[z] = data[z];\n  }\n\n  view = new DataView(ab);\n\n  while (i < data.byteLength) {\n    // parse box data\n    size = view.getUint32(i);\n    type = parseType(data.subarray(i + 4, i + 8));\n    end = size > 1 ? i + size : data.byteLength; // parse type-specific data\n\n    box = (parse[type] || function (data) {\n      return {\n        data: data\n      };\n    })(data.subarray(i + 8, end));\n\n    box.size = size;\n    box.type = type; // store this box and move to the next\n\n    result.push(box);\n    i = end;\n  }\n\n  return result;\n};\n/**\n * Returns a textual representation of the javascript represtentation\n * of an MP4 file. You can use it as an alternative to\n * JSON.stringify() to compare inspected MP4s.\n * @param inspectedMp4 {array} the parsed array of boxes in an MP4\n * file\n * @param depth {number} (optional) the number of ancestor boxes of\n * the elements of inspectedMp4. Assumed to be zero if unspecified.\n * @return {string} a text representation of the parsed MP4\n */\n\n\n_textifyMp = function textifyMp4(inspectedMp4, depth) {\n  var indent;\n  depth = depth || 0;\n  indent = new Array(depth * 2 + 1).join(' '); // iterate over all the boxes\n\n  return inspectedMp4.map(function (box, index) {\n    // list the box type first at the current indentation level\n    return indent + box.type + '\\n' + // the type is already included and handle child boxes separately\n    Object.keys(box).filter(function (key) {\n      return key !== 'type' && key !== 'boxes'; // output all the box properties\n    }).map(function (key) {\n      var prefix = indent + '  ' + key + ': ',\n          value = box[key]; // print out raw bytes as hexademical\n\n      if (value instanceof Uint8Array || value instanceof Uint32Array) {\n        var bytes = Array.prototype.slice.call(new Uint8Array(value.buffer, value.byteOffset, value.byteLength)).map(function (byte) {\n          return ' ' + ('00' + byte.toString(16)).slice(-2);\n        }).join('').match(/.{1,24}/g);\n\n        if (!bytes) {\n          return prefix + '<>';\n        }\n\n        if (bytes.length === 1) {\n          return prefix + '<' + bytes.join('').slice(1) + '>';\n        }\n\n        return prefix + '<\\n' + bytes.map(function (line) {\n          return indent + '  ' + line;\n        }).join('\\n') + '\\n' + indent + '  >';\n      } // stringify generic objects\n\n\n      return prefix + JSON.stringify(value, null, 2).split('\\n').map(function (line, index) {\n        if (index === 0) {\n          return line;\n        }\n\n        return indent + '  ' + line;\n      }).join('\\n');\n    }).join('\\n') + ( // recursively textify the child boxes\n    box.boxes ? '\\n' + _textifyMp(box.boxes, depth + 1) : '');\n  }).join('\\n');\n};\n\nmodule.exports = {\n  inspect: inspectMp4,\n  textify: _textifyMp,\n  parseType: parseType,\n  findBox: findBox,\n  parseTraf: parse.traf,\n  parseTfdt: parse.tfdt,\n  parseHdlr: parse.hdlr,\n  parseTfhd: parse.tfhd,\n  parseTrun: parse.trun,\n  parseSidx: parse.sidx\n};","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n *\n * Reads in-band CEA-708 captions out of FMP4 segments.\n * @see https://en.wikipedia.org/wiki/CEA-708\n */\n'use strict';\n\nvar discardEmulationPreventionBytes = require('../tools/caption-packet-parser').discardEmulationPreventionBytes;\n\nvar CaptionStream = require('../m2ts/caption-stream').CaptionStream;\n\nvar probe = require('./probe');\n\nvar inspect = require('../tools/mp4-inspector');\n/**\n  * Maps an offset in the mdat to a sample based on the the size of the samples.\n  * Assumes that `parseSamples` has been called first.\n  *\n  * @param {Number} offset - The offset into the mdat\n  * @param {Object[]} samples - An array of samples, parsed using `parseSamples`\n  * @return {?Object} The matching sample, or null if no match was found.\n  *\n  * @see ISO-BMFF-12/2015, Section 8.8.8\n **/\n\n\nvar mapToSample = function mapToSample(offset, samples) {\n  var approximateOffset = offset;\n\n  for (var i = 0; i < samples.length; i++) {\n    var sample = samples[i];\n\n    if (approximateOffset < sample.size) {\n      return sample;\n    }\n\n    approximateOffset -= sample.size;\n  }\n\n  return null;\n};\n/**\n  * Finds SEI nal units contained in a Media Data Box.\n  * Assumes that `parseSamples` has been called first.\n  *\n  * @param {Uint8Array} avcStream - The bytes of the mdat\n  * @param {Object[]} samples - The samples parsed out by `parseSamples`\n  * @param {Number} trackId - The trackId of this video track\n  * @return {Object[]} seiNals - the parsed SEI NALUs found.\n  *   The contents of the seiNal should match what is expected by\n  *   CaptionStream.push (nalUnitType, size, data, escapedRBSP, pts, dts)\n  *\n  * @see ISO-BMFF-12/2015, Section 8.1.1\n  * @see Rec. ITU-T H.264, 7.3.2.3.1\n **/\n\n\nvar findSeiNals = function findSeiNals(avcStream, samples, trackId) {\n  var avcView = new DataView(avcStream.buffer, avcStream.byteOffset, avcStream.byteLength),\n      result = [],\n      seiNal,\n      i,\n      length,\n      lastMatchedSample;\n\n  for (i = 0; i + 4 < avcStream.length; i += length) {\n    length = avcView.getUint32(i);\n    i += 4; // Bail if this doesn't appear to be an H264 stream\n\n    if (length <= 0) {\n      continue;\n    }\n\n    switch (avcStream[i] & 0x1F) {\n      case 0x06:\n        var data = avcStream.subarray(i + 1, i + 1 + length);\n        var matchingSample = mapToSample(i, samples);\n        seiNal = {\n          nalUnitType: 'sei_rbsp',\n          size: length,\n          data: data,\n          escapedRBSP: discardEmulationPreventionBytes(data),\n          trackId: trackId\n        };\n\n        if (matchingSample) {\n          seiNal.pts = matchingSample.pts;\n          seiNal.dts = matchingSample.dts;\n          lastMatchedSample = matchingSample;\n        } else {\n          // If a matching sample cannot be found, use the last\n          // sample's values as they should be as close as possible\n          seiNal.pts = lastMatchedSample.pts;\n          seiNal.dts = lastMatchedSample.dts;\n        }\n\n        result.push(seiNal);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return result;\n};\n/**\n  * Parses sample information out of Track Run Boxes and calculates\n  * the absolute presentation and decode timestamps of each sample.\n  *\n  * @param {Array<Uint8Array>} truns - The Trun Run boxes to be parsed\n  * @param {Number} baseMediaDecodeTime - base media decode time from tfdt\n      @see ISO-BMFF-12/2015, Section 8.8.12\n  * @param {Object} tfhd - The parsed Track Fragment Header\n  *   @see inspect.parseTfhd\n  * @return {Object[]} the parsed samples\n  *\n  * @see ISO-BMFF-12/2015, Section 8.8.8\n **/\n\n\nvar parseSamples = function parseSamples(truns, baseMediaDecodeTime, tfhd) {\n  var currentDts = baseMediaDecodeTime;\n  var defaultSampleDuration = tfhd.defaultSampleDuration || 0;\n  var defaultSampleSize = tfhd.defaultSampleSize || 0;\n  var trackId = tfhd.trackId;\n  var allSamples = [];\n  truns.forEach(function (trun) {\n    // Note: We currently do not parse the sample table as well\n    // as the trun. It's possible some sources will require this.\n    // moov > trak > mdia > minf > stbl\n    var trackRun = inspect.parseTrun(trun);\n    var samples = trackRun.samples;\n    samples.forEach(function (sample) {\n      if (sample.duration === undefined) {\n        sample.duration = defaultSampleDuration;\n      }\n\n      if (sample.size === undefined) {\n        sample.size = defaultSampleSize;\n      }\n\n      sample.trackId = trackId;\n      sample.dts = currentDts;\n\n      if (sample.compositionTimeOffset === undefined) {\n        sample.compositionTimeOffset = 0;\n      }\n\n      sample.pts = currentDts + sample.compositionTimeOffset;\n      currentDts += sample.duration;\n    });\n    allSamples = allSamples.concat(samples);\n  });\n  return allSamples;\n};\n/**\n  * Parses out caption nals from an FMP4 segment's video tracks.\n  *\n  * @param {Uint8Array} segment - The bytes of a single segment\n  * @param {Number} videoTrackId - The trackId of a video track in the segment\n  * @return {Object.<Number, Object[]>} A mapping of video trackId to\n  *   a list of seiNals found in that track\n **/\n\n\nvar parseCaptionNals = function parseCaptionNals(segment, videoTrackId) {\n  // To get the samples\n  var trafs = probe.findBox(segment, ['moof', 'traf']); // To get SEI NAL units\n\n  var mdats = probe.findBox(segment, ['mdat']);\n  var captionNals = {};\n  var mdatTrafPairs = []; // Pair up each traf with a mdat as moofs and mdats are in pairs\n\n  mdats.forEach(function (mdat, index) {\n    var matchingTraf = trafs[index];\n    mdatTrafPairs.push({\n      mdat: mdat,\n      traf: matchingTraf\n    });\n  });\n  mdatTrafPairs.forEach(function (pair) {\n    var mdat = pair.mdat;\n    var traf = pair.traf;\n    var tfhd = probe.findBox(traf, ['tfhd']); // Exactly 1 tfhd per traf\n\n    var headerInfo = inspect.parseTfhd(tfhd[0]);\n    var trackId = headerInfo.trackId;\n    var tfdt = probe.findBox(traf, ['tfdt']); // Either 0 or 1 tfdt per traf\n\n    var baseMediaDecodeTime = tfdt.length > 0 ? inspect.parseTfdt(tfdt[0]).baseMediaDecodeTime : 0;\n    var truns = probe.findBox(traf, ['trun']);\n    var samples;\n    var seiNals; // Only parse video data for the chosen video track\n\n    if (videoTrackId === trackId && truns.length > 0) {\n      samples = parseSamples(truns, baseMediaDecodeTime, headerInfo);\n      seiNals = findSeiNals(mdat, samples, trackId);\n\n      if (!captionNals[trackId]) {\n        captionNals[trackId] = [];\n      }\n\n      captionNals[trackId] = captionNals[trackId].concat(seiNals);\n    }\n  });\n  return captionNals;\n};\n/**\n  * Parses out inband captions from an MP4 container and returns\n  * caption objects that can be used by WebVTT and the TextTrack API.\n  * @see https://developer.mozilla.org/en-US/docs/Web/API/VTTCue\n  * @see https://developer.mozilla.org/en-US/docs/Web/API/TextTrack\n  * Assumes that `probe.getVideoTrackIds` and `probe.timescale` have been called first\n  *\n  * @param {Uint8Array} segment - The fmp4 segment containing embedded captions\n  * @param {Number} trackId - The id of the video track to parse\n  * @param {Number} timescale - The timescale for the video track from the init segment\n  *\n  * @return {?Object[]} parsedCaptions - A list of captions or null if no video tracks\n  * @return {Number} parsedCaptions[].startTime - The time to show the caption in seconds\n  * @return {Number} parsedCaptions[].endTime - The time to stop showing the caption in seconds\n  * @return {String} parsedCaptions[].text - The visible content of the caption\n **/\n\n\nvar parseEmbeddedCaptions = function parseEmbeddedCaptions(segment, trackId, timescale) {\n  var seiNals; // the ISO-BMFF spec says that trackId can't be zero, but there's some broken content out there\n\n  if (trackId === null) {\n    return null;\n  }\n\n  seiNals = parseCaptionNals(segment, trackId);\n  return {\n    seiNals: seiNals[trackId],\n    timescale: timescale\n  };\n};\n/**\n  * Converts SEI NALUs into captions that can be used by video.js\n **/\n\n\nvar CaptionParser = function CaptionParser() {\n  var isInitialized = false;\n  var captionStream; // Stores segments seen before trackId and timescale are set\n\n  var segmentCache; // Stores video track ID of the track being parsed\n\n  var trackId; // Stores the timescale of the track being parsed\n\n  var timescale; // Stores captions parsed so far\n\n  var parsedCaptions; // Stores whether we are receiving partial data or not\n\n  var parsingPartial;\n  /**\n    * A method to indicate whether a CaptionParser has been initalized\n    * @returns {Boolean}\n   **/\n\n  this.isInitialized = function () {\n    return isInitialized;\n  };\n  /**\n    * Initializes the underlying CaptionStream, SEI NAL parsing\n    * and management, and caption collection\n   **/\n\n\n  this.init = function (options) {\n    captionStream = new CaptionStream();\n    isInitialized = true;\n    parsingPartial = options ? options.isPartial : false; // Collect dispatched captions\n\n    captionStream.on('data', function (event) {\n      // Convert to seconds in the source's timescale\n      event.startTime = event.startPts / timescale;\n      event.endTime = event.endPts / timescale;\n      parsedCaptions.captions.push(event);\n      parsedCaptions.captionStreams[event.stream] = true;\n    });\n  };\n  /**\n    * Determines if a new video track will be selected\n    * or if the timescale changed\n    * @return {Boolean}\n   **/\n\n\n  this.isNewInit = function (videoTrackIds, timescales) {\n    if (videoTrackIds && videoTrackIds.length === 0 || timescales && typeof timescales === 'object' && Object.keys(timescales).length === 0) {\n      return false;\n    }\n\n    return trackId !== videoTrackIds[0] || timescale !== timescales[trackId];\n  };\n  /**\n    * Parses out SEI captions and interacts with underlying\n    * CaptionStream to return dispatched captions\n    *\n    * @param {Uint8Array} segment - The fmp4 segment containing embedded captions\n    * @param {Number[]} videoTrackIds - A list of video tracks found in the init segment\n    * @param {Object.<Number, Number>} timescales - The timescales found in the init segment\n    * @see parseEmbeddedCaptions\n    * @see m2ts/caption-stream.js\n   **/\n\n\n  this.parse = function (segment, videoTrackIds, timescales) {\n    var parsedData;\n\n    if (!this.isInitialized()) {\n      return null; // This is not likely to be a video segment\n    } else if (!videoTrackIds || !timescales) {\n      return null;\n    } else if (this.isNewInit(videoTrackIds, timescales)) {\n      // Use the first video track only as there is no\n      // mechanism to switch to other video tracks\n      trackId = videoTrackIds[0];\n      timescale = timescales[trackId]; // If an init segment has not been seen yet, hold onto segment\n      // data until we have one.\n      // the ISO-BMFF spec says that trackId can't be zero, but there's some broken content out there\n    } else if (trackId === null || !timescale) {\n      segmentCache.push(segment);\n      return null;\n    } // Now that a timescale and trackId is set, parse cached segments\n\n\n    while (segmentCache.length > 0) {\n      var cachedSegment = segmentCache.shift();\n      this.parse(cachedSegment, videoTrackIds, timescales);\n    }\n\n    parsedData = parseEmbeddedCaptions(segment, trackId, timescale);\n\n    if (parsedData === null || !parsedData.seiNals) {\n      return null;\n    }\n\n    this.pushNals(parsedData.seiNals); // Force the parsed captions to be dispatched\n\n    this.flushStream();\n    return parsedCaptions;\n  };\n  /**\n    * Pushes SEI NALUs onto CaptionStream\n    * @param {Object[]} nals - A list of SEI nals parsed using `parseCaptionNals`\n    * Assumes that `parseCaptionNals` has been called first\n    * @see m2ts/caption-stream.js\n    **/\n\n\n  this.pushNals = function (nals) {\n    if (!this.isInitialized() || !nals || nals.length === 0) {\n      return null;\n    }\n\n    nals.forEach(function (nal) {\n      captionStream.push(nal);\n    });\n  };\n  /**\n    * Flushes underlying CaptionStream to dispatch processed, displayable captions\n    * @see m2ts/caption-stream.js\n   **/\n\n\n  this.flushStream = function () {\n    if (!this.isInitialized()) {\n      return null;\n    }\n\n    if (!parsingPartial) {\n      captionStream.flush();\n    } else {\n      captionStream.partialFlush();\n    }\n  };\n  /**\n    * Reset caption buckets for new data\n   **/\n\n\n  this.clearParsedCaptions = function () {\n    parsedCaptions.captions = [];\n    parsedCaptions.captionStreams = {};\n  };\n  /**\n    * Resets underlying CaptionStream\n    * @see m2ts/caption-stream.js\n   **/\n\n\n  this.resetCaptionStream = function () {\n    if (!this.isInitialized()) {\n      return null;\n    }\n\n    captionStream.reset();\n  };\n  /**\n    * Convenience method to clear all captions flushed from the\n    * CaptionStream and still being parsed\n    * @see m2ts/caption-stream.js\n   **/\n\n\n  this.clearAllCaptions = function () {\n    this.clearParsedCaptions();\n    this.resetCaptionStream();\n  };\n  /**\n    * Reset caption parser\n   **/\n\n\n  this.reset = function () {\n    segmentCache = [];\n    trackId = null;\n    timescale = null;\n\n    if (!parsedCaptions) {\n      parsedCaptions = {\n        captions: [],\n        // CC1, CC2, CC3, CC4\n        captionStreams: {}\n      };\n    } else {\n      this.clearParsedCaptions();\n    }\n\n    this.resetCaptionStream();\n  };\n\n  this.reset();\n};\n\nmodule.exports = CaptionParser;","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n */\n'use strict';\n\nmodule.exports = {\n  H264_STREAM_TYPE: 0x1B,\n  ADTS_STREAM_TYPE: 0x0F,\n  METADATA_STREAM_TYPE: 0x15\n};","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar autoKeyword = \"auto\";\nvar directionSetting = {\n  \"\": 1,\n  \"lr\": 1,\n  \"rl\": 1\n};\nvar alignSetting = {\n  \"start\": 1,\n  \"center\": 1,\n  \"end\": 1,\n  \"left\": 1,\n  \"right\": 1,\n  \"auto\": 1,\n  \"line-left\": 1,\n  \"line-right\": 1\n};\n\nfunction findDirectionSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\nfunction findAlignSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\nfunction VTTCue(startTime, endTime, text) {\n  /**\n   * Shim implementation specific properties. These properties are not in\n   * the spec.\n   */\n  // Lets us know when the VTTCue's data has changed in such a way that we need\n  // to recompute its display state. This lets us compute its display state\n  // lazily.\n  this.hasBeenReset = false;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n\n  var _id = \"\";\n  var _pauseOnExit = false;\n  var _startTime = startTime;\n  var _endTime = endTime;\n  var _text = text;\n  var _region = null;\n  var _vertical = \"\";\n  var _snapToLines = true;\n  var _line = \"auto\";\n  var _lineAlign = \"start\";\n  var _position = \"auto\";\n  var _positionAlign = \"auto\";\n  var _size = 100;\n  var _align = \"center\";\n  Object.defineProperties(this, {\n    \"id\": {\n      enumerable: true,\n      get: function get() {\n        return _id;\n      },\n      set: function set(value) {\n        _id = \"\" + value;\n      }\n    },\n    \"pauseOnExit\": {\n      enumerable: true,\n      get: function get() {\n        return _pauseOnExit;\n      },\n      set: function set(value) {\n        _pauseOnExit = !!value;\n      }\n    },\n    \"startTime\": {\n      enumerable: true,\n      get: function get() {\n        return _startTime;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Start time must be set to a number.\");\n        }\n\n        _startTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"endTime\": {\n      enumerable: true,\n      get: function get() {\n        return _endTime;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"End time must be set to a number.\");\n        }\n\n        _endTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"text\": {\n      enumerable: true,\n      get: function get() {\n        return _text;\n      },\n      set: function set(value) {\n        _text = \"\" + value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"region\": {\n      enumerable: true,\n      get: function get() {\n        return _region;\n      },\n      set: function set(value) {\n        _region = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"vertical\": {\n      enumerable: true,\n      get: function get() {\n        return _vertical;\n      },\n      set: function set(value) {\n        var setting = findDirectionSetting(value); // Have to check for false because the setting an be an empty string.\n\n        if (setting === false) {\n          throw new SyntaxError(\"Vertical: an invalid or illegal direction string was specified.\");\n        }\n\n        _vertical = setting;\n        this.hasBeenReset = true;\n      }\n    },\n    \"snapToLines\": {\n      enumerable: true,\n      get: function get() {\n        return _snapToLines;\n      },\n      set: function set(value) {\n        _snapToLines = !!value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"line\": {\n      enumerable: true,\n      get: function get() {\n        return _line;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\" && value !== autoKeyword) {\n          throw new SyntaxError(\"Line: an invalid number or illegal string was specified.\");\n        }\n\n        _line = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"lineAlign\": {\n      enumerable: true,\n      get: function get() {\n        return _lineAlign;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          console.warn(\"lineAlign: an invalid or illegal string was specified.\");\n        } else {\n          _lineAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n    \"position\": {\n      enumerable: true,\n      get: function get() {\n        return _position;\n      },\n      set: function set(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Position must be between 0 and 100.\");\n        }\n\n        _position = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"positionAlign\": {\n      enumerable: true,\n      get: function get() {\n        return _positionAlign;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          console.warn(\"positionAlign: an invalid or illegal string was specified.\");\n        } else {\n          _positionAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n    \"size\": {\n      enumerable: true,\n      get: function get() {\n        return _size;\n      },\n      set: function set(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Size must be between 0 and 100.\");\n        }\n\n        _size = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"align\": {\n      enumerable: true,\n      get: function get() {\n        return _align;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          throw new SyntaxError(\"align: an invalid or illegal alignment string was specified.\");\n        }\n\n        _align = setting;\n        this.hasBeenReset = true;\n      }\n    }\n  });\n  /**\n   * Other <track> spec defined properties\n   */\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n\n  this.displayState = undefined;\n}\n/**\n * VTTCue methods\n */\n\n\nVTTCue.prototype.getCueAsHTML = function () {\n  // Assume WebVTT.convertCueToDOMTree is on the global.\n  return WebVTT.convertCueToDOMTree(window, this.text);\n};\n\nmodule.exports = VTTCue;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","var win;\n\nif (typeof window !== \"undefined\") {\n  win = window;\n} else if (typeof global !== \"undefined\") {\n  win = global;\n} else if (typeof self !== \"undefined\") {\n  win = self;\n} else {\n  win = {};\n}\n\nmodule.exports = win;","var topLevel = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {};\n\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n  doccy = document;\n} else {\n  doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n  if (!doccy) {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n  }\n}\n\nmodule.exports = doccy;"],"sourceRoot":""}